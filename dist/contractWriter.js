!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(this,()=>(()=>{var e={7300:(e,t,r)=>{"use strict";var n=r(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.DexieStorageAdapter=t.CONFIG=void 0,r(6280),r(6573),r(8100),r(7936),r(8140),r(1903),r(1134),r(8845),r(7467),r(4732),r(9577),r(8992),r(4520),r(1454),r(1795),r(1549),r(9797),r(9631),r(5623);var o=n(r(7118)),i=n(r(2992));const a=t.CONFIG={STORAGE:{DB_NAME:"GurftronCoreDB",DB_VERSION:6,STORES:{THREATS:"threats",WHITELIST:"whitelist",ERRORS:"errors",USERS:"users",METRICS:"metrics"},MAX_COMPRESSED_SIZE:1048576},NATIVE_HOST:"com.gurftron.server",DOMAIN_INFO_CACHE_TTL:6048e5};class u{static async generateHash(e){const t=new TextEncoder,r=await crypto.subtle.digest("SHA-256",t.encode(JSON.stringify(e)));return Array.from(new Uint8Array(r)).map(e=>e.toString(16).padStart(2,"0")).join("")}}t.DexieStorageAdapter=class{constructor(){this.db=null}async initialize(){return this.db=new o.default(a.STORAGE.DB_NAME),this.db.version(a.STORAGE.DB_VERSION).stores({[a.STORAGE.STORES.THREATS]:"id, timestamp, hash, threatType, severity, url, contentHash",[a.STORAGE.STORES.WHITELIST]:"id, timestamp, status, url",[a.STORAGE.STORES.ERRORS]:"id, timestamp, errorType",[a.STORAGE.STORES.USERS]:"id, timestamp",[a.STORAGE.STORES.METRICS]:"date, timestamp"}),await this.db.open(),!0}async save(e,t,r,n={}){try{const o=i.default.compressToUTF16(JSON.stringify(r));if(2*o.length>a.STORAGE.MAX_COMPRESSED_SIZE)throw new Error(`Compressed data exceeds ${a.STORAGE.MAX_COMPRESSED_SIZE} bytes`);const s={id:t,data:o,hash:await u.generateHash(r),timestamp:Date.now(),compressed:!0,...n};return await this.db.table(e).put(s),s.hash}catch(e){throw console.error("Dexie save failed:",e),e}}async get(e,t){try{const r=await this.db.table(e).get(t);return r?r.compressed?JSON.parse(i.default.decompressFromUTF16(r.data)):r.data:null}catch(e){return console.error("Dexie get failed:",e),null}}async query(e,t={}){try{const r=this.db.table(e);let n=r.toCollection();if(t.index&&void 0!==t.value)try{n=r.where(t.index).equals(t.value)}catch(e){n=r.toCollection()}return(await n.limit(1e4).toArray()).map(e=>({...e,data:e.compressed?JSON.parse(i.default.decompressFromUTF16(e.data)):e.data})).filter(e=>!(t.minTimestamp&&e.timestamp<t.minTimestamp||t.maxTimestamp&&e.timestamp>t.maxTimestamp||t.threatType&&e.threatType!==t.threatType||t.severity&&e.severity!==t.severity||t.url&&e.url!==t.url||t.contentHash&&e.contentHash!==t.contentHash||t.domain&&e.domain!==t.domain||t.country&&e.country!==t.country))}catch(e){return console.error("Dexie query failed:",e),[]}}async getAllKeys(e){try{return await this.db.table(e).toCollection().primaryKeys()}catch(e){return console.error("Dexie getAllKeys failed:",e),[]}}async logError(e,t){try{const r=await u.generateHash({errorType:e,message:t,timestamp:Date.now()});await this.save(a.STORAGE.STORES.ERRORS,r,{errorType:e,message:t,timestamp:Date.now()},{errorType:e})}catch(e){console.error("Dexie logError failed:",e)}}async updateMetrics(e){try{const t=new Date,r=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`,n=await this.db.table(a.STORAGE.STORES.METRICS).get(r),o={date:r,timestamp:Date.now(),scans:((null==n?void 0:n.scans)||0)+(e.scans||0),threatsDetected:((null==n?void 0:n.threatsDetected)||0)+(e.threatsDetected||0),llmCalls:((null==n?void 0:n.llmCalls)||0)+(e.llmCalls||0)};return await this.db.table(a.STORAGE.STORES.METRICS).put(o),o}catch(e){throw console.error("Dexie updateMetrics failed:",e),e}}async getMetrics(e=null){try{if(e)return await this.db.table(a.STORAGE.STORES.METRICS).get(e);const t=new Date,r=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`;return await this.db.table(a.STORAGE.STORES.METRICS).get(r)}catch(e){return console.error("Dexie getMetrics failed:",e),null}}}},3744:function(e,t,r){e.exports=function(){"use strict";var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)},t=function(){return(t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function n(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||((n=n||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:r.g,i=Object.keys,a=Array.isArray;function u(e,t){return"object"!=typeof t||i(t).forEach(function(r){e[r]=t[r]}),e}"undefined"==typeof Promise||o.Promise||(o.Promise=Promise);var s=Object.getPrototypeOf,c={}.hasOwnProperty;function l(e,t){return c.call(e,t)}function f(e,t){"function"==typeof t&&(t=t(s(e))),("undefined"==typeof Reflect?i:Reflect.ownKeys)(t).forEach(function(r){h(e,r,t[r])})}var p=Object.defineProperty;function h(e,t,r,n){p(e,t,u(r&&l(r,"get")&&"function"==typeof r.get?{get:r.get,set:r.set,configurable:!0}:{value:r,configurable:!0,writable:!0},n))}function d(e){return{from:function(t){return e.prototype=Object.create(t.prototype),h(e.prototype,"constructor",e),{extend:f.bind(null,e.prototype)}}}}var y=Object.getOwnPropertyDescriptor,v=[].slice;function m(e,t,r){return v.call(e,t,r)}function g(e,t){return t(e)}function b(e){if(!e)throw new Error("Assertion Failed")}function w(e){o.setImmediate?setImmediate(e):setTimeout(e,0)}function _(e,t){if("string"==typeof t&&l(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var r=[],n=0,o=t.length;n<o;++n){var i=_(e,t[n]);r.push(i)}return r}var a=t.indexOf(".");if(-1!==a){var u=e[t.substr(0,a)];return null==u?void 0:_(u,t.substr(a+1))}}function x(e,t,r){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){b("string"!=typeof r&&"length"in r);for(var n=0,o=t.length;n<o;++n)x(e,t[n],r[n])}else{var i,u,s=t.indexOf(".");-1!==s?(i=t.substr(0,s),""===(u=t.substr(s+1))?void 0===r?a(e)&&!isNaN(parseInt(i))?e.splice(i,1):delete e[i]:e[i]=r:x(s=(s=e[i])&&l(e,i)?s:e[i]={},u,r)):void 0===r?a(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=r}}function O(e){var t,r={};for(t in e)l(e,t)&&(r[t]=e[t]);return r}var S=[].concat;function E(e){return S.apply([],e)}var A="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(E([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return o[e]}),k=new Set(A.map(function(e){return o[e]})),T=null;function P(e){return T=new WeakMap,e=function e(t){if(!t||"object"!=typeof t)return t;var r=T.get(t);if(r)return r;if(a(t)){r=[],T.set(t,r);for(var n=0,o=t.length;n<o;++n)r.push(e(t[n]))}else if(k.has(t.constructor))r=t;else{var i,u=s(t);for(i in r=u===Object.prototype?{}:Object.create(u),T.set(t,r),t)l(t,i)&&(r[i]=e(t[i]))}return r}(e),T=null,e}var j={}.toString;function C(e){return j.call(e).slice(8,-1)}var R="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",I="symbol"==typeof R?function(e){var t;return null!=e&&(t=e[R])&&t.apply(e)}:function(){return null};function K(e,t){return 0<=(t=e.indexOf(t))&&e.splice(t,1),0<=t}var D={};function B(e){var t,r,n,o;if(1===arguments.length){if(a(e))return e.slice();if(this===D&&"string"==typeof e)return[e];if(o=I(e)){for(r=[];!(n=o.next()).done;)r.push(n.value);return r}if(null==e)return[e];if("number"!=typeof(t=e.length))return[e];for(r=new Array(t);t--;)r[t]=e[t];return r}for(t=arguments.length,r=new Array(t);t--;)r[t]=arguments[t];return r}var M="undefined"!=typeof Symbol?function(e){return"AsyncFunction"===e[Symbol.toStringTag]}:function(){return!1},F=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(ue=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"]),q={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function N(e,t){this.name=e,this.message=t}function U(e,t){return e+". Errors: "+Object.keys(t).map(function(e){return t[e].toString()}).filter(function(e,t,r){return r.indexOf(e)===t}).join("\n")}function L(e,t,r,n){this.failures=t,this.failedKeys=n,this.successCount=r,this.message=U(e,t)}function V(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(e){return t[e]}),this.failuresByPos=t,this.message=U(e,this.failures)}d(N).from(Error).extend({toString:function(){return this.name+": "+this.message}}),d(L).from(N),d(V).from(N);var W=F.reduce(function(e,t){return e[t]=t+"Error",e},{}),z=N,G=F.reduce(function(e,t){var r=t+"Error";function n(e,n){this.name=r,e?"string"==typeof e?(this.message="".concat(e).concat(n?"\n "+n:""),this.inner=n||null):"object"==typeof e&&(this.message="".concat(e.name," ").concat(e.message),this.inner=e):(this.message=q[t]||r,this.inner=null)}return d(n).from(z),e[t]=n,e},{});G.Syntax=SyntaxError,G.Type=TypeError,G.Range=RangeError;var H=ue.reduce(function(e,t){return e[t+"Error"]=G[t],e},{}),Y=F.reduce(function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=G[t]),e},{});function $(){}function X(e){return e}function Q(e,t){return null==e||e===X?t:function(r){return t(e(r))}}function J(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function Z(e,t){return e===$?t:function(){var r=e.apply(this,arguments);void 0!==r&&(arguments[0]=r);var n=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var i=t.apply(this,arguments);return n&&(this.onsuccess=this.onsuccess?J(n,this.onsuccess):n),o&&(this.onerror=this.onerror?J(o,this.onerror):o),void 0!==i?i:r}}function ee(e,t){return e===$?t:function(){e.apply(this,arguments);var r=this.onsuccess,n=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),r&&(this.onsuccess=this.onsuccess?J(r,this.onsuccess):r),n&&(this.onerror=this.onerror?J(n,this.onerror):n)}}function te(e,t){return e===$?t:function(r){var n=e.apply(this,arguments);u(r,n);var o=this.onsuccess,i=this.onerror;return this.onsuccess=null,this.onerror=null,r=t.apply(this,arguments),o&&(this.onsuccess=this.onsuccess?J(o,this.onsuccess):o),i&&(this.onerror=this.onerror?J(i,this.onerror):i),void 0===n?void 0===r?void 0:r:u(n,r)}}function re(e,t){return e===$?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function ne(e,t){return e===$?t:function(){var r=e.apply(this,arguments);if(r&&"function"==typeof r.then){for(var n=this,o=arguments.length,i=new Array(o);o--;)i[o]=arguments[o];return r.then(function(){return t.apply(n,i)})}return t.apply(this,arguments)}}Y.ModifyError=L,Y.DexieError=N,Y.BulkError=V;var oe="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ie(e){oe=e}var ae={},ue=(A="undefined"==typeof Promise?[]:function(){var e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,s(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,s(t),e]}(),A[0]),se=(F=A[1],A=A[2],F=F&&F.then,ue&&ue.constructor),ce=!!A,le=function(e,t){ge.push([e,t]),pe&&(queueMicrotask(Te),pe=!1)},fe=!0,pe=!0,he=[],de=[],ye=X,ve={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:$,pgp:!1,env:{},finalize:$},me=ve,ge=[],be=0,we=[];function _e(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=me;if("function"!=typeof e){if(e!==ae)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Se(this,this._value))}this._state=null,this._value=null,++t.ref,function e(t,r){try{r(function(r){if(null===t._state){if(r===t)throw new TypeError("A promise cannot be resolved with itself.");var n=t._lib&&Pe();r&&"function"==typeof r.then?e(t,function(e,t){r instanceof _e?r._then(e,t):r.then(e,t)}):(t._state=!0,t._value=r,Ee(t)),n&&je()}},Se.bind(null,t))}catch(r){Se(t,r)}}(this,e)}var xe={get:function(){var e=me,t=Fe;function r(r,n){var o=this,i=!e.global&&(e!==me||t!==Fe),a=i&&!Le(),u=new _e(function(t,u){Ae(o,new Oe(Ye(r,e,i,a),Ye(n,e,i,a),t,u,e))});return this._consoleTask&&(u._consoleTask=this._consoleTask),u}return r.prototype=ae,r},set:function(e){h(this,"then",e&&e.prototype===ae?xe:{get:function(){return e},set:xe.set})}};function Oe(e,t,r,n,o){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=r,this.reject=n,this.psd=o}function Se(e,t){var r,n;de.push(t),null===e._state&&(r=e._lib&&Pe(),t=ye(t),e._state=!1,e._value=t,n=e,he.some(function(e){return e._value===n._value})||he.push(n),Ee(e),r&&je())}function Ee(e){var t=e._listeners;e._listeners=[];for(var r=0,n=t.length;r<n;++r)Ae(e,t[r]);var o=e._PSD;--o.ref||o.finalize(),0===be&&(++be,le(function(){0==--be&&Ce()},[]))}function Ae(e,t){if(null!==e._state){var r=e._state?t.onFulfilled:t.onRejected;if(null===r)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++be,le(ke,[r,e,t])}else e._listeners.push(t)}function ke(e,t,r){try{var n,o=t._value;!t._state&&de.length&&(de=[]),n=oe&&t._consoleTask?t._consoleTask.run(function(){return e(o)}):e(o),t._state||-1!==de.indexOf(o)||function(e){for(var t=he.length;t;)if(he[--t]._value===e._value)return he.splice(t,1)}(t),r.resolve(n)}catch(e){r.reject(e)}finally{0==--be&&Ce(),--r.psd.ref||r.psd.finalize()}}function Te(){He(ve,function(){Pe()&&je()})}function Pe(){var e=fe;return pe=fe=!1,e}function je(){var e,t,r;do{for(;0<ge.length;)for(e=ge,ge=[],r=e.length,t=0;t<r;++t){var n=e[t];n[0].apply(null,n[1])}}while(0<ge.length);pe=fe=!0}function Ce(){var e=he;he=[],e.forEach(function(e){e._PSD.onunhandled.call(null,e._value,e)});for(var t=we.slice(0),r=t.length;r;)t[--r]()}function Re(e){return new _e(ae,!1,e)}function Ie(e,t){var r=me;return function(){var n=Pe(),o=me;try{return ze(r,!0),e.apply(this,arguments)}catch(n){t&&t(n)}finally{ze(o,!1),n&&je()}}}f(_e.prototype,{then:xe,_then:function(e,t){Ae(this,new Oe(null,null,e,t,me))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=e,r=arguments[1];return"function"==typeof t?this.then(null,function(e){return(e instanceof t?r:Re)(e)}):this.then(null,function(e){return(e&&e.name===t?r:Re)(e)})},finally:function(e){return this.then(function(t){return _e.resolve(e()).then(function(){return t})},function(t){return _e.resolve(e()).then(function(){return Re(t)})})},timeout:function(e,t){var r=this;return e<1/0?new _e(function(n,o){var i=setTimeout(function(){return o(new G.Timeout(t))},e);r.then(n,o).finally(clearTimeout.bind(null,i))}):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&h(_e.prototype,Symbol.toStringTag,"Dexie.Promise"),ve.env=Ge(),f(_e,{all:function(){var e=B.apply(null,arguments).map(Ve);return new _e(function(t,r){0===e.length&&t([]);var n=e.length;e.forEach(function(o,i){return _e.resolve(o).then(function(r){e[i]=r,--n||t(e)},r)})})},resolve:function(e){return e instanceof _e?e:e&&"function"==typeof e.then?new _e(function(t,r){e.then(t,r)}):new _e(ae,!0,e)},reject:Re,race:function(){var e=B.apply(null,arguments).map(Ve);return new _e(function(t,r){e.map(function(e){return _e.resolve(e).then(t,r)})})},PSD:{get:function(){return me},set:function(e){return me=e}},totalEchoes:{get:function(){return Fe}},newPSD:Ne,usePSD:He,scheduler:{get:function(){return le},set:function(e){le=e}},rejectionMapper:{get:function(){return ye},set:function(e){ye=e}},follow:function(e,t){return new _e(function(r,n){return Ne(function(t,r){var n=me;n.unhandleds=[],n.onunhandled=r,n.finalize=J(function(){var e,n=this;e=function(){0===n.unhandleds.length?t():r(n.unhandleds[0])},we.push(function t(){e(),we.splice(we.indexOf(t),1)}),++be,le(function(){0==--be&&Ce()},[])},n.finalize),e()},t,r,n)})}}),se&&(se.allSettled&&h(_e,"allSettled",function(){var e=B.apply(null,arguments).map(Ve);return new _e(function(t){0===e.length&&t([]);var r=e.length,n=new Array(r);e.forEach(function(e,o){return _e.resolve(e).then(function(e){return n[o]={status:"fulfilled",value:e}},function(e){return n[o]={status:"rejected",reason:e}}).then(function(){return--r||t(n)})})})}),se.any&&"undefined"!=typeof AggregateError&&h(_e,"any",function(){var e=B.apply(null,arguments).map(Ve);return new _e(function(t,r){0===e.length&&r(new AggregateError([]));var n=e.length,o=new Array(n);e.forEach(function(e,i){return _e.resolve(e).then(function(e){return t(e)},function(e){o[i]=e,--n||r(new AggregateError(o))})})})}),se.withResolvers&&(_e.withResolvers=se.withResolvers));var Ke={awaits:0,echoes:0,id:0},De=0,Be=[],Me=0,Fe=0,qe=0;function Ne(e,t,r,n){var o=me,i=Object.create(o);return i.parent=o,i.ref=0,i.global=!1,i.id=++qe,ve.env,i.env=ce?{Promise:_e,PromiseProp:{value:_e,configurable:!0,writable:!0},all:_e.all,race:_e.race,allSettled:_e.allSettled,any:_e.any,resolve:_e.resolve,reject:_e.reject}:{},t&&u(i,t),++o.ref,i.finalize=function(){--this.parent.ref||this.parent.finalize()},n=He(i,e,r,n),0===i.ref&&i.finalize(),n}function Ue(){return Ke.id||(Ke.id=++De),++Ke.awaits,Ke.echoes+=100,Ke.id}function Le(){return!!Ke.awaits&&(0==--Ke.awaits&&(Ke.id=0),Ke.echoes=100*Ke.awaits,!0)}function Ve(e){return Ke.echoes&&e&&e.constructor===se?(Ue(),e.then(function(e){return Le(),e},function(e){return Le(),Xe(e)})):e}function We(){var e=Be[Be.length-1];Be.pop(),ze(e,!1)}function ze(e,t){var r,n=me;(t?!Ke.echoes||Me++&&e===me:!Me||--Me&&e===me)||queueMicrotask(t?function(e){++Fe,Ke.echoes&&0!=--Ke.echoes||(Ke.echoes=Ke.awaits=Ke.id=0),Be.push(me),ze(e,!0)}.bind(null,e):We),e!==me&&(me=e,n===ve&&(ve.env=Ge()),ce&&(r=ve.env.Promise,t=e.env,(n.global||e.global)&&(Object.defineProperty(o,"Promise",t.PromiseProp),r.all=t.all,r.race=t.race,r.resolve=t.resolve,r.reject=t.reject,t.allSettled&&(r.allSettled=t.allSettled),t.any&&(r.any=t.any))))}function Ge(){var e=o.Promise;return ce?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(o,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function He(e,t,r,n,o){var i=me;try{return ze(e,!0),t(r,n,o)}finally{ze(i,!1)}}function Ye(e,t,r,n){return"function"!=typeof e?e:function(){var o=me;r&&Ue(),ze(t,!0);try{return e.apply(this,arguments)}finally{ze(o,!1),n&&queueMicrotask(Le)}}}function $e(e){Promise===se&&0===Ke.echoes?0===Me?e():enqueueNativeMicroTask(e):setTimeout(e,0)}-1===(""+F).indexOf("[native code]")&&(Ue=Le=$);var Xe=_e.reject,Qe=String.fromCharCode(65535),Je="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Ze="String expected.",et=[],tt="__dbnames",rt="readonly",nt="readwrite";function ot(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var it={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function at(e){return"string"!=typeof e||/\./.test(e)?function(e){return e}:function(t){return void 0===t[e]&&e in t&&delete(t=P(t))[e],t}}function ut(){throw G.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function st(e,t){try{var r=ct(e),n=ct(t);if(r!==n)return"Array"===r?1:"Array"===n?-1:"binary"===r?1:"binary"===n?-1:"string"===r?1:"string"===n?-1:"Date"===r?1:"Date"!==n?NaN:-1;switch(r){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":return function(e,t){for(var r=e.length,n=t.length,o=r<n?r:n,i=0;i<o;++i)if(e[i]!==t[i])return e[i]<t[i]?-1:1;return r===n?0:r<n?-1:1}(lt(e),lt(t));case"Array":return function(e,t){for(var r=e.length,n=t.length,o=r<n?r:n,i=0;i<o;++i){var a=st(e[i],t[i]);if(0!==a)return a}return r===n?0:r<n?-1:1}(e,t)}}catch(e){}return NaN}function ct(e){var t=typeof e;return"object"!=t?t:ArrayBuffer.isView(e)||"ArrayBuffer"===(e=C(e))?"binary":e}function lt(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}function ft(e,t,r){var n=e.schema.yProps;return n?(t&&0<r.numFailures&&(t=t.filter(function(e,t){return!r.failures[t]})),Promise.all(n.map(function(r){return r=r.updatesTable,t?e.db.table(r).where("k").anyOf(t).delete():e.db.table(r).clear()})).then(function(){return r})):r}var pt=(ht.prototype.execute=function(e){var t=this["@@propmod"];if(void 0!==t.add){var r=t.add;if(a(r))return n(n([],a(e)?e:[],!0),r,!0).sort();if("number"==typeof r)return(Number(e)||0)+r;if("bigint"==typeof r)try{return BigInt(e)+r}catch(e){return BigInt(0)+r}throw new TypeError("Invalid term ".concat(r))}if(void 0!==t.remove){var o=t.remove;if(a(o))return a(e)?e.filter(function(e){return!o.includes(e)}).sort():[];if("number"==typeof o)return Number(e)-o;if("bigint"==typeof o)try{return BigInt(e)-o}catch(e){return BigInt(0)-o}throw new TypeError("Invalid subtrahend ".concat(o))}return(r=null===(r=t.replacePrefix)||void 0===r?void 0:r[0])&&"string"==typeof e&&e.startsWith(r)?t.replacePrefix[1]+e.substring(r.length):e},ht);function ht(e){this["@@propmod"]=e}function dt(e,t){for(var r=i(t),n=r.length,o=!1,a=0;a<n;++a){var u=r[a],s=t[u],c=_(e,u);s instanceof pt?(x(e,u,s.execute(c)),o=!0):c!==s&&(x(e,u,s),o=!0)}return o}var yt=(vt.prototype._trans=function(e,t,r){var n=this._tx||me.trans,o=this.name,i=oe&&"undefined"!=typeof console&&console.createTask&&console.createTask("Dexie: ".concat("readonly"===e?"read":"write"," ").concat(this.name));function a(e,r,n){if(!n.schema[o])throw new G.NotFound("Table "+o+" not part of transaction");return t(n.idbtrans,n)}var u=Pe();try{var s=n&&n.db._novip===this.db._novip?n===me.trans?n._promise(e,a,r):Ne(function(){return n._promise(e,a,r)},{trans:n,transless:me.transless||me}):function e(t,r,n,o){if(t.idbdb&&(t._state.openComplete||me.letThrough||t._vip)){var i=t._createTransaction(r,n,t._dbSchema);try{i.create(),t._state.PR1398_maxLoop=3}catch(i){return i.name===W.InvalidState&&t.isOpen()&&0<--t._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return e(t,r,n,o)})):Xe(i)}return i._promise(r,function(e,t){return Ne(function(){return me.trans=i,o(e,t,i)})}).then(function(e){if("readwrite"===r)try{i.idbtrans.commit()}catch(e){}return"readonly"===r?e:i._completion.then(function(){return e})})}if(t._state.openComplete)return Xe(new G.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return Xe(new G.DatabaseClosed);t.open().catch($)}return t._state.dbReadyPromise.then(function(){return e(t,r,n,o)})}(this.db,e,[this.name],a);return i&&(s._consoleTask=i,s=s.catch(function(e){return console.trace(e),Xe(e)})),s}finally{u&&je()}},vt.prototype.get=function(e,t){var r=this;return e&&e.constructor===Object?this.where(e).first(t):null==e?Xe(new G.Type("Invalid argument to Table.get()")):this._trans("readonly",function(t){return r.core.get({trans:t,key:e}).then(function(e){return r.hook.reading.fire(e)})}).then(t)},vt.prototype.where=function(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(a(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=i(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter(function(e){if(e.compound&&t.every(function(t){return 0<=e.keyPath.indexOf(t)})){for(var r=0;r<t.length;++r)if(-1===t.indexOf(e.keyPath[r]))return!1;return!0}return!1}).sort(function(e,t){return e.keyPath.length-t.keyPath.length})[0];if(r&&this.db._maxKey!==Qe){var n=r.keyPath.slice(0,t.length);return this.where(n).equals(n.map(function(t){return e[t]}))}!r&&oe&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]"));var o=this.schema.idxByName;function u(e,t){return 0===st(e,t)}var s=t.reduce(function(t,r){var n=t[0],i=t[1],s=(t=o[r],e[r]);return[n||t,n||!t?ot(i,t&&t.multi?function(e){return e=_(e,r),a(e)&&e.some(function(e){return u(s,e)})}:function(e){return u(s,_(e,r))}):i]},[null,null]);return n=s[0],s=s[1],n?this.where(n.name).equals(e[n.keyPath]).filter(s):r?this.filter(s):this.where(t).equals("")},vt.prototype.filter=function(e){return this.toCollection().and(e)},vt.prototype.count=function(e){return this.toCollection().count(e)},vt.prototype.offset=function(e){return this.toCollection().offset(e)},vt.prototype.limit=function(e){return this.toCollection().limit(e)},vt.prototype.each=function(e){return this.toCollection().each(e)},vt.prototype.toArray=function(e){return this.toCollection().toArray(e)},vt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},vt.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,a(e)?"[".concat(e.join("+"),"]"):e))},vt.prototype.reverse=function(){return this.toCollection().reverse()},vt.prototype.mapToClass=function(t){var r,n=this.db,o=this.name;function i(){return null!==r&&r.apply(this,arguments)||this}(this.schema.mappedClass=t).prototype instanceof ut&&(function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}(i,r=t),Object.defineProperty(i.prototype,"db",{get:function(){return n},enumerable:!1,configurable:!0}),i.prototype.table=function(){return o},t=i);for(var a=new Set,u=t.prototype;u;u=s(u))Object.getOwnPropertyNames(u).forEach(function(e){return a.add(e)});function c(e){if(!e)return e;var r,n=Object.create(t.prototype);for(r in e)if(!a.has(r))try{n[r]=e[r]}catch(e){}return n}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=c,this.hook("reading",c),t},vt.prototype.defineClass=function(){return this.mapToClass(function(e){u(this,e)})},vt.prototype.add=function(e,t){var r=this,n=this.schema.primKey,o=n.auto,i=n.keyPath,a=e;return i&&o&&(a=at(i)(e)),this._trans("readwrite",function(e){return r.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[a]})}).then(function(e){return e.numFailures?_e.reject(e.failures[0]):e.lastResult}).then(function(t){if(i)try{x(e,i,t)}catch(t){}return t})},vt.prototype.upsert=function(e,t){var r=this,n=this.schema.primKey.keyPath;return this._trans("readwrite",function(o){return r.core.get({trans:o,key:e}).then(function(i){var a=null!=i?i:{};return dt(a,t),n&&x(a,n,e),r.core.mutate({trans:o,type:"put",values:[a],keys:[e],upsert:!0,updates:{keys:[e],changeSpecs:[t]}}).then(function(e){return e.numFailures?_e.reject(e.failures[0]):!!i})})})},vt.prototype.update=function(e,t){return"object"!=typeof e||a(e)?this.where(":id").equals(e).modify(t):void 0===(e=_(e,this.schema.primKey.keyPath))?Xe(new G.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t)},vt.prototype.put=function(e,t){var r=this,n=this.schema.primKey,o=n.auto,i=n.keyPath,a=e;return i&&o&&(a=at(i)(e)),this._trans("readwrite",function(e){return r.core.mutate({trans:e,type:"put",values:[a],keys:null!=t?[t]:null})}).then(function(e){return e.numFailures?_e.reject(e.failures[0]):e.lastResult}).then(function(t){if(i)try{x(e,i,t)}catch(t){}return t})},vt.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(r){return t.core.mutate({trans:r,type:"delete",keys:[e]}).then(function(r){return ft(t,[e],r)}).then(function(e){return e.numFailures?_e.reject(e.failures[0]):void 0})})},vt.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:it}).then(function(t){return ft(e,null,t)})}).then(function(e){return e.numFailures?_e.reject(e.failures[0]):void 0})},vt.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(r){return t.core.getMany({keys:e,trans:r}).then(function(e){return e.map(function(e){return t.hook.reading.fire(e)})})})},vt.prototype.bulkAdd=function(e,t,r){var n=this,o=Array.isArray(t)?t:void 0,i=(r=r||(o?void 0:t))?r.allKeys:void 0;return this._trans("readwrite",function(t){var r=(u=n.schema.primKey).auto;if((u=u.keyPath)&&o)throw new G.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(o&&o.length!==e.length)throw new G.InvalidArgument("Arguments objects and keys must have the same length");var a=e.length,u=u&&r?e.map(at(u)):e;return n.core.mutate({trans:t,type:"add",keys:o,values:u,wantResults:i}).then(function(e){var t=e.numFailures,r=e.results,o=e.lastResult;if(e=e.failures,0===t)return i?r:o;throw new V("".concat(n.name,".bulkAdd(): ").concat(t," of ").concat(a," operations failed"),e)})})},vt.prototype.bulkPut=function(e,t,r){var n=this,o=Array.isArray(t)?t:void 0,i=(r=r||(o?void 0:t))?r.allKeys:void 0;return this._trans("readwrite",function(t){var r=(u=n.schema.primKey).auto;if((u=u.keyPath)&&o)throw new G.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(o&&o.length!==e.length)throw new G.InvalidArgument("Arguments objects and keys must have the same length");var a=e.length,u=u&&r?e.map(at(u)):e;return n.core.mutate({trans:t,type:"put",keys:o,values:u,wantResults:i}).then(function(e){var t=e.numFailures,r=e.results,o=e.lastResult;if(e=e.failures,0===t)return i?r:o;throw new V("".concat(n.name,".bulkPut(): ").concat(t," of ").concat(a," operations failed"),e)})})},vt.prototype.bulkUpdate=function(e){var t=this,r=this.core,n=e.map(function(e){return e.key}),o=e.map(function(e){return e.changes}),i=[];return this._trans("readwrite",function(a){return r.getMany({trans:a,keys:n,cache:"clone"}).then(function(u){var s=[],c=[];e.forEach(function(e,r){var n=e.key,o=e.changes,a=u[r];if(a){for(var l=0,f=Object.keys(o);l<f.length;l++){var p=f[l],h=o[p];if(p===t.schema.primKey.keyPath){if(0!==st(h,n))throw new G.Constraint("Cannot update primary key in bulkUpdate()")}else x(a,p,h)}i.push(r),s.push(n),c.push(a)}});var l=s.length;return r.mutate({trans:a,type:"put",keys:s,values:c,updates:{keys:n,changeSpecs:o}}).then(function(e){var r=e.numFailures,n=e.failures;if(0===r)return l;for(var o=0,a=Object.keys(n);o<a.length;o++){var u,s=a[o],c=i[Number(s)];null!=c&&(u=n[s],delete n[s],n[c]=u)}throw new V("".concat(t.name,".bulkUpdate(): ").concat(r," of ").concat(l," operations failed"),n)})})})},vt.prototype.bulkDelete=function(e){var t=this,r=e.length;return this._trans("readwrite",function(r){return t.core.mutate({trans:r,type:"delete",keys:e}).then(function(r){return ft(t,e,r)})}).then(function(e){var n=e.numFailures,o=e.lastResult;if(e=e.failures,0===n)return o;throw new V("".concat(t.name,".bulkDelete(): ").concat(n," of ").concat(r," operations failed"),e)})},vt);function vt(){}function mt(e){function t(t,n){if(n){for(var o=arguments.length,i=new Array(o-1);--o;)i[o-1]=arguments[o];return r[t].subscribe.apply(null,i),e}if("string"==typeof t)return r[t]}var r={};t.addEventType=u;for(var n=1,o=arguments.length;n<o;++n)u(arguments[n]);return t;function u(e,n,o){if("object"!=typeof e){var s;n=n||re;var c={subscribers:[],fire:o=o||$,subscribe:function(e){-1===c.subscribers.indexOf(e)&&(c.subscribers.push(e),c.fire=n(c.fire,e))},unsubscribe:function(e){c.subscribers=c.subscribers.filter(function(t){return t!==e}),c.fire=c.subscribers.reduce(n,o)}};return r[e]=t[e]=c}i(s=e).forEach(function(e){var t=s[e];if(a(t))u(e,s[e][0],s[e][1]);else{if("asap"!==t)throw new G.InvalidArgument("Invalid event config");var r=u(e,X,function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];r.subscribers.forEach(function(e){w(function(){e.apply(null,t)})})})}})}}function gt(e,t){return d(t).from({prototype:e}),t}function bt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function wt(e,t){e.filter=ot(e.filter,t)}function _t(e,t,r){var n=e.replayFilter;e.replayFilter=n?function(){return ot(n(),t())}:t,e.justLimit=r&&!n}function xt(e,t){if(e.isPrimKey)return t.primaryKey;var r=t.getIndexByKeyPath(e.index);if(!r)throw new G.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return r}function Ot(e,t,r){var n=xt(e,t.schema);return t.openCursor({trans:r,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:n,range:e.range}})}function St(e,t,r,n){var o=e.replayFilter?ot(e.filter,e.replayFilter()):e.filter;if(e.or){var i={},a=function(e,r,n){var a,u;o&&!o(r,n,function(e){return r.stop(e)},function(e){return r.fail(e)})||("[object ArrayBuffer]"==(u=""+(a=r.primaryKey))&&(u=""+new Uint8Array(a)),l(i,u)||(i[u]=!0,t(e,r,n)))};return Promise.all([e.or._iterate(a,r),Et(Ot(e,n,r),e.algorithm,a,!e.keysOnly&&e.valueMapper)])}return Et(Ot(e,n,r),ot(e.algorithm,o),t,!e.keysOnly&&e.valueMapper)}function Et(e,t,r,n){var o=Ie(n?function(e,t,o){return r(n(e),t,o)}:r);return e.then(function(e){if(e)return e.start(function(){var r=function(){return e.continue()};t&&!t(e,function(e){return r=e},function(t){e.stop(t),r=$},function(t){e.fail(t),r=$})||o(e.value,e,function(e){return r=e}),r()})})}var At=(kt.prototype._read=function(e,t){var r=this._ctx;return r.error?r.table._trans(null,Xe.bind(null,r.error)):r.table._trans("readonly",e).then(t)},kt.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,Xe.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},kt.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=ot(t.algorithm,e)},kt.prototype._iterate=function(e,t){return St(this._ctx,e,t,this._ctx.table.core)},kt.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&u(r,e),t._ctx=r,t},kt.prototype.raw=function(){return this._ctx.valueMapper=null,this},kt.prototype.each=function(e){var t=this._ctx;return this._read(function(r){return St(t,e,r,t.table.core)})},kt.prototype.count=function(e){var t=this;return this._read(function(e){var r=t._ctx,n=r.table.core;if(bt(r,!0))return n.count({trans:e,query:{index:xt(r,n.schema),range:r.range}}).then(function(e){return Math.min(e,r.limit)});var o=0;return St(r,function(){return++o,!1},e,n).then(function(){return o})}).then(e)},kt.prototype.sortBy=function(e,t){var r=e.split(".").reverse(),n=r[0],o=r.length-1;function i(e,t){return t?i(e[r[t]],t-1):e[n]}var a="next"===this._ctx.dir?1:-1;function u(e,t){return st(i(e,o),i(t,o))*a}return this.toArray(function(e){return e.sort(u)}).then(t)},kt.prototype.toArray=function(e){var t=this;return this._read(function(e){var r=t._ctx;if("next"===r.dir&&bt(r,!0)&&0<r.limit){var n=r.valueMapper,o=xt(r,r.table.core.schema);return r.table.core.query({trans:e,limit:r.limit,values:!0,query:{index:o,range:r.range}}).then(function(e){return e=e.result,n?e.map(n):e})}var i=[];return St(r,function(e){return i.push(e)},e,r.table.core).then(function(){return i})},e)},kt.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,bt(t)?_t(t,function(){var t=e;return function(e,r){return 0===t||(1===t?--t:r(function(){e.advance(t),t=0}),!1)}}):_t(t,function(){var t=e;return function(){return--t<0}})),this},kt.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),_t(this._ctx,function(){var t=e;return function(e,r,n){return--t<=0&&r(n),0<=t}},!0),this},kt.prototype.until=function(e,t){return wt(this._ctx,function(r,n,o){return!e(r.value)||(n(o),t)}),this},kt.prototype.first=function(e){return this.limit(1).toArray(function(e){return e[0]}).then(e)},kt.prototype.last=function(e){return this.reverse().first(e)},kt.prototype.filter=function(e){var t;return wt(this._ctx,function(t){return e(t.value)}),(t=this._ctx).isMatch=ot(t.isMatch,e),this},kt.prototype.and=function(e){return this.filter(e)},kt.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},kt.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},kt.prototype.desc=function(){return this.reverse()},kt.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,r){e(r.key,r)})},kt.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},kt.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,r){e(r.primaryKey,r)})},kt.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var r=[];return this.each(function(e,t){r.push(t.key)}).then(function(){return r}).then(e)},kt.prototype.primaryKeys=function(e){var t=this._ctx;if("next"===t.dir&&bt(t,!0)&&0<t.limit)return this._read(function(e){var r=xt(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:r,range:t.range}})}).then(function(e){return e.result}).then(e);t.keysOnly=!t.isMatch;var r=[];return this.each(function(e,t){r.push(t.primaryKey)}).then(function(){return r}).then(e)},kt.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},kt.prototype.firstKey=function(e){return this.limit(1).keys(function(e){return e[0]}).then(e)},kt.prototype.lastKey=function(e){return this.reverse().firstKey(e)},kt.prototype.distinct=function(){var e;if(!(e=(e=this._ctx).index&&e.table.schema.idxByName[e.index])||!e.multi)return this;var t={};return wt(this._ctx,function(e){var r=e.primaryKey.toString();return e=l(t,r),t[r]=!0,!e}),this},kt.prototype.modify=function(e){var t=this,r=this._ctx;return this._write(function(n){var o,a="function"==typeof e?e:function(t){return dt(t,e)},u=r.table.core,s=(o=u.schema.primaryKey).outbound,c=o.extractKey,l=200;function f(e,t){var r=t.failures;t=t.numFailures,h+=e-t;for(var n=0,o=i(r);n<o.length;n++){var a=o[n];p.push(r[a])}}(o=t.db._options.modifyChunkSize)&&(l="object"==typeof o?o[u.name]||o["*"]||200:o);var p=[],h=0,d=[],y=e===Tt;return t.clone().primaryKeys().then(function(t){var o=bt(r)&&r.limit===1/0&&("function"!=typeof e||y)&&{index:r.index,range:r.range};return function i(p){var h=Math.min(l,t.length-p),d=t.slice(p,p+h);return(y?Promise.resolve([]):u.getMany({trans:n,keys:d,cache:"immutable"})).then(function(v){var m=[],g=[],b=s?[]:null,w=y?d:[];if(!y)for(var _=0;_<h;++_){var x=v[_],O={value:P(x),primKey:t[p+_]};!1!==a.call(O,O.value,O)&&(null==O.value?w.push(t[p+_]):s||0===st(c(x),c(O.value))?(g.push(O.value),s&&b.push(t[p+_])):(w.push(t[p+_]),m.push(O.value)))}return Promise.resolve(0<m.length&&u.mutate({trans:n,type:"add",values:m}).then(function(e){for(var t in e.failures)w.splice(parseInt(t),1);f(m.length,e)})).then(function(){return(0<g.length||o&&"object"==typeof e)&&u.mutate({trans:n,type:"put",keys:b,values:g,criteria:o,changeSpec:"function"!=typeof e&&e,isAdditionalChunk:0<p}).then(function(e){return f(g.length,e)})}).then(function(){return(0<w.length||o&&y)&&u.mutate({trans:n,type:"delete",keys:w,criteria:o,isAdditionalChunk:0<p}).then(function(e){return ft(r.table,w,e)}).then(function(e){return f(w.length,e)})}).then(function(){return t.length>p+h&&i(p+l)})})}(0).then(function(){if(0<p.length)throw new L("Error modifying one or more objects",p,h,d);return t.length})})})},kt.prototype.delete=function(){var e=this._ctx,t=e.range;return!bt(e)||e.table.schema.yProps||!e.isPrimKey&&3!==t.type?this.modify(Tt):this._write(function(r){var n=e.table.core.schema.primaryKey,o=t;return e.table.core.count({trans:r,query:{index:n,range:o}}).then(function(t){return e.table.core.mutate({trans:r,type:"deleteRange",range:o}).then(function(e){var r=e.failures;if(e=e.numFailures)throw new L("Could not delete some values",Object.keys(r).map(function(e){return r[e]}),t-e);return t-e})})})},kt);function kt(){}var Tt=function(e,t){return t.value=null};function Pt(e,t){return e<t?-1:e===t?0:1}function jt(e,t){return t<e?-1:e===t?0:1}function Ct(e,t,r){return(e=e instanceof Bt?new e.Collection(e):e)._ctx.error=new(r||TypeError)(t),e}function Rt(e){return new e.Collection(e,function(){return Dt("")}).limit(0)}function It(e,t,r,n){var o,i,a,u,s,c,l,f=r.length;if(!r.every(function(e){return"string"==typeof e}))return Ct(e,Ze);function p(e){o="next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()},i="next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()},a="next"===e?Pt:jt;var t=r.map(function(e){return{lower:i(e),upper:o(e)}}).sort(function(e,t){return a(e.lower,t.lower)});u=t.map(function(e){return e.upper}),s=t.map(function(e){return e.lower}),l="next"===(c=e)?"":n}p("next"),(e=new e.Collection(e,function(){return Kt(u[0],s[f-1]+n)}))._ondirectionchange=function(e){p(e)};var h=0;return e._addAlgorithm(function(e,r,n){var o=e.key;if("string"!=typeof o)return!1;var p=i(o);if(t(p,s,h))return!0;for(var d=null,y=h;y<f;++y){var v=function(e,t,r,n,o,i){for(var a=Math.min(e.length,n.length),u=-1,s=0;s<a;++s){var c=t[s];if(c!==n[s])return o(e[s],r[s])<0?e.substr(0,s)+r[s]+r.substr(s+1):o(e[s],n[s])<0?e.substr(0,s)+n[s]+r.substr(s+1):0<=u?e.substr(0,u)+t[u]+r.substr(u+1):null;o(e[s],c)<0&&(u=s)}return a<n.length&&"next"===i?e+r.substr(e.length):a<e.length&&"prev"===i?e.substr(0,r.length):u<0?null:e.substr(0,u)+n[u]+r.substr(u+1)}(o,p,u[y],s[y],a,c);null===v&&null===d?h=y+1:(null===d||0<a(d,v))&&(d=v)}return r(null!==d?function(){e.continue(d+l)}:n),!1}),e}function Kt(e,t,r,n){return{type:2,lower:e,upper:t,lowerOpen:r,upperOpen:n}}function Dt(e){return{type:1,lower:e,upper:e}}var Bt=(Object.defineProperty(Mt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Mt.prototype.between=function(e,t,r,n){r=!1!==r,n=!0===n;try{return 0<this._cmp(e,t)||0===this._cmp(e,t)&&(r||n)&&(!r||!n)?Rt(this):new this.Collection(this,function(){return Kt(e,t,!r,!n)})}catch(e){return Ct(this,Je)}},Mt.prototype.equals=function(e){return null==e?Ct(this,Je):new this.Collection(this,function(){return Dt(e)})},Mt.prototype.above=function(e){return null==e?Ct(this,Je):new this.Collection(this,function(){return Kt(e,void 0,!0)})},Mt.prototype.aboveOrEqual=function(e){return null==e?Ct(this,Je):new this.Collection(this,function(){return Kt(e,void 0,!1)})},Mt.prototype.below=function(e){return null==e?Ct(this,Je):new this.Collection(this,function(){return Kt(void 0,e,!1,!0)})},Mt.prototype.belowOrEqual=function(e){return null==e?Ct(this,Je):new this.Collection(this,function(){return Kt(void 0,e)})},Mt.prototype.startsWith=function(e){return"string"!=typeof e?Ct(this,Ze):this.between(e,e+Qe,!0,!0)},Mt.prototype.startsWithIgnoreCase=function(e){return""===e?this.startsWith(e):It(this,function(e,t){return 0===e.indexOf(t[0])},[e],Qe)},Mt.prototype.equalsIgnoreCase=function(e){return It(this,function(e,t){return e===t[0]},[e],"")},Mt.prototype.anyOfIgnoreCase=function(){var e=B.apply(D,arguments);return 0===e.length?Rt(this):It(this,function(e,t){return-1!==t.indexOf(e)},e,"")},Mt.prototype.startsWithAnyOfIgnoreCase=function(){var e=B.apply(D,arguments);return 0===e.length?Rt(this):It(this,function(e,t){return t.some(function(t){return 0===e.indexOf(t)})},e,Qe)},Mt.prototype.anyOf=function(){var e=this,t=B.apply(D,arguments),r=this._cmp;try{t.sort(r)}catch(n){return Ct(this,Je)}if(0===t.length)return Rt(this);var n=new this.Collection(this,function(){return Kt(t[0],t[t.length-1])});n._ondirectionchange=function(n){r="next"===n?e._ascending:e._descending,t.sort(r)};var o=0;return n._addAlgorithm(function(e,n,i){for(var a=e.key;0<r(a,t[o]);)if(++o===t.length)return n(i),!1;return 0===r(a,t[o])||(n(function(){e.continue(t[o])}),!1)}),n},Mt.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Mt.prototype.noneOf=function(){var e=B.apply(D,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return Ct(this,Je)}var t=e.reduce(function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[-1/0,t]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},Mt.prototype.inAnyRange=function(e,t){var r=this,n=this._cmp,o=this._ascending,i=this._descending,a=this._min,u=this._max;if(0===e.length)return Rt(this);if(!e.every(function(e){return void 0!==e[0]&&void 0!==e[1]&&o(e[0],e[1])<=0}))return Ct(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",G.InvalidArgument);var s,c=!t||!1!==t.includeLowers,l=t&&!0===t.includeUppers,f=o;function p(e,t){return f(e[0],t[0])}try{(s=e.reduce(function(e,t){for(var r=0,o=e.length;r<o;++r){var i=e[r];if(n(t[0],i[1])<0&&0<n(t[1],i[0])){i[0]=a(i[0],t[0]),i[1]=u(i[1],t[1]);break}}return r===o&&e.push(t),e},[])).sort(p)}catch(e){return Ct(this,Je)}var h=0,d=l?function(e){return 0<o(e,s[h][1])}:function(e){return 0<=o(e,s[h][1])},y=c?function(e){return 0<i(e,s[h][0])}:function(e){return 0<=i(e,s[h][0])},v=d;return(e=new this.Collection(this,function(){return Kt(s[0][0],s[s.length-1][1],!c,!l)}))._ondirectionchange=function(e){f="next"===e?(v=d,o):(v=y,i),s.sort(p)},e._addAlgorithm(function(e,t,n){for(var i,a=e.key;v(a);)if(++h===s.length)return t(n),!1;return!d(i=a)&&!y(i)||(0===r._cmp(a,s[h][1])||0===r._cmp(a,s[h][0])||t(function(){f===o?e.continue(s[h][0]):e.continue(s[h][1])}),!1)}),e},Mt.prototype.startsWithAnyOf=function(){var e=B.apply(D,arguments);return e.every(function(e){return"string"==typeof e})?0===e.length?Rt(this):this.inAnyRange(e.map(function(e){return[e,e+Qe]})):Ct(this,"startsWithAnyOf() only works with strings")},Mt);function Mt(){}function Ft(e){return Ie(function(t){return qt(t),e(t.target.error),!1})}function qt(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Nt="storagemutated",Ut="x-storagemutated-1",Lt=mt(null,Nt),Vt=(Wt.prototype._lock=function(){return b(!me.global),++this._reculock,1!==this._reculock||me.global||(me.lockOwnerFor=this),this},Wt.prototype._unlock=function(){if(b(!me.global),0==--this._reculock)for(me.global||(me.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{He(e[1],e[0])}catch(e){}}return this},Wt.prototype._locked=function(){return this._reculock&&me.lockOwnerFor!==this},Wt.prototype.create=function(e){var t=this;if(!this.mode)return this;var r=this.db.idbdb,n=this.db._state.dbOpenError;if(b(!this.idbtrans),!e&&!r)switch(n&&n.name){case"DatabaseClosedError":throw new G.DatabaseClosed(n);case"MissingAPIError":throw new G.MissingAPI(n.message,n);default:throw new G.OpenFailed(n)}if(!this.active)throw new G.TransactionInactive;return b(null===this._completion._state),(e=this.idbtrans=e||(this.db.core||r).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Ie(function(r){qt(r),t._reject(e.error)}),e.onabort=Ie(function(r){qt(r),t.active&&t._reject(new G.Abort(e.error)),t.active=!1,t.on("abort").fire(r)}),e.oncomplete=Ie(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&Lt.storagemutated.fire(e.mutatedParts)}),this},Wt.prototype._promise=function(e,t,r){var n=this;if("readwrite"===e&&"readwrite"!==this.mode)return Xe(new G.ReadOnly("Transaction is readonly"));if(!this.active)return Xe(new G.TransactionInactive);if(this._locked())return new _e(function(o,i){n._blockedFuncs.push([function(){n._promise(e,t,r).then(o,i)},me])});if(r)return Ne(function(){var e=new _e(function(e,r){n._lock();var o=t(e,r,n);o&&o.then&&o.then(e,r)});return e.finally(function(){return n._unlock()}),e._lib=!0,e});var o=new _e(function(e,r){var o=t(e,r,n);o&&o.then&&o.then(e,r)});return o._lib=!0,o},Wt.prototype._root=function(){return this.parent?this.parent._root():this},Wt.prototype.waitFor=function(e){var t,r=this._root(),n=_e.resolve(e);r._waitingFor?r._waitingFor=r._waitingFor.then(function(){return n}):(r._waitingFor=n,r._waitingQueue=[],t=r.idbtrans.objectStore(r.storeNames[0]),function e(){for(++r._spinCount;r._waitingQueue.length;)r._waitingQueue.shift()();r._waitingFor&&(t.get(-1/0).onsuccess=e)}());var o=r._waitingFor;return new _e(function(e,t){n.then(function(t){return r._waitingQueue.push(Ie(e.bind(null,t)))},function(e){return r._waitingQueue.push(Ie(t.bind(null,e)))}).finally(function(){r._waitingFor===o&&(r._waitingFor=null)})})},Wt.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new G.Abort))},Wt.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(l(t,e))return t[e];var r=this.schema[e];if(!r)throw new G.NotFound("Table "+e+" not part of transaction");return(r=new this.db.Table(e,r,this)).core=this.db.core.table(e),t[e]=r},Wt);function Wt(){}function zt(e,t,r,n,o,i,a,u){return{name:e,keyPath:t,unique:r,multi:n,auto:o,compound:i,src:(r&&!a?"&":"")+(n?"*":"")+(o?"++":"")+Gt(t),type:u}}function Gt(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function Ht(e,t,r){return{name:e,primKey:t,indexes:r,mappedClass:null,idxByName:(n=function(e){return[e.name,e]},r.reduce(function(e,t,r){return(r=n(t))&&(e[r[0]]=r[1]),e},{}))};var n}var Yt=function(e){try{return e.only([[]]),Yt=function(){return[[]]},[[]]}catch(e){return Yt=function(){return Qe},Qe}};function $t(e){return null==e?function(){}:"string"==typeof e?1===(t=e).split(".").length?function(e){return e[t]}:function(e){return _(e,t)}:function(t){return _(t,e)};var t}function Xt(e){return[].slice.call(e)}var Qt=0;function Jt(e){return null==e?":id":"string"==typeof e?e:"[".concat(e.join("+"),"]")}function Zt(e,t,r){function n(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");var r=e.lower,n=e.upper,o=e.lowerOpen;return e=e.upperOpen,void 0===r?void 0===n?null:t.upperBound(n,!!e):void 0===n?t.lowerBound(r,!!o):t.bound(r,n,!!o,!!e)}var o,i,u,s=(i=r,u=Xt((o=e).objectStoreNames),{schema:{name:o.name,tables:u.map(function(e){return i.objectStore(e)}).map(function(e){var t=e.keyPath,r=e.autoIncrement,n=a(t),o={};return r={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:null==t,compound:n,keyPath:t,autoIncrement:r,unique:!0,extractKey:$t(t)},indexes:Xt(e.indexNames).map(function(t){return e.index(t)}).map(function(e){var t=e.name,r=e.unique,n=e.multiEntry;return e=e.keyPath,n={name:t,compound:a(e),keyPath:e,unique:r,multiEntry:n,extractKey:$t(e)},o[Jt(e)]=n}),getIndexByKeyPath:function(e){return o[Jt(e)]}},o[":id"]=r.primaryKey,null!=t&&(o[Jt(t)]=r.primaryKey),r})},hasGetAll:0<u.length&&"getAll"in i.objectStore(u[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),c=(r=s.schema,s.hasGetAll),l=(s=r.tables.map(function(e){var t,r=e.name;return{name:r,schema:e,mutate:function(e){var t=e.trans,o=e.type,i=e.keys,a=e.values,u=e.range;return new Promise(function(e,s){e=Ie(e);var c=t.objectStore(r),l=null==c.keyPath,f="put"===o||"add"===o;if(!f&&"delete"!==o&&"deleteRange"!==o)throw new Error("Invalid operation type: "+o);var p,h=(i||a||{length:1}).length;if(i&&a&&i.length!==a.length)throw new Error("Given keys array must have same length as given values array.");if(0===h)return e({numFailures:0,failures:{},results:[],lastResult:void 0});function d(e){++m,qt(e)}var y=[],v=[],m=0;if("deleteRange"===o){if(4===u.type)return e({numFailures:m,failures:v,results:[],lastResult:void 0});3===u.type?y.push(p=c.clear()):y.push(p=c.delete(n(u)))}else{var g=(l=f?l?[a,i]:[a,null]:[i,null])[0],b=l[1];if(f)for(var w=0;w<h;++w)y.push(p=b&&void 0!==b[w]?c[o](g[w],b[w]):c[o](g[w])),p.onerror=d;else for(w=0;w<h;++w)y.push(p=c[o](g[w])),p.onerror=d}function _(t){t=t.target.result,y.forEach(function(e,t){return null!=e.error&&(v[t]=e.error)}),e({numFailures:m,failures:v,results:"delete"===o?i:y.map(function(e){return e.result}),lastResult:t})}p.onerror=function(e){d(e),_(e)},p.onsuccess=_})},getMany:function(e){var t=e.trans,n=e.keys;return new Promise(function(e,o){e=Ie(e);for(var i,a=t.objectStore(r),u=n.length,s=new Array(u),c=0,l=0,f=function(t){t=t.target,s[t._pos]=t.result,++l===c&&e(s)},p=Ft(o),h=0;h<u;++h)null!=n[h]&&((i=a.get(n[h]))._pos=h,i.onsuccess=f,i.onerror=p,++c);0===c&&e(s)})},get:function(e){var t=e.trans,n=e.key;return new Promise(function(e,o){e=Ie(e);var i=t.objectStore(r).get(n);i.onsuccess=function(t){return e(t.target.result)},i.onerror=Ft(o)})},query:(t=c,function(e){return new Promise(function(o,i){o=Ie(o);var a,u,s,c=e.trans,l=e.values,f=e.limit,p=e.query,h=f===1/0?void 0:f,d=p.index;if(p=p.range,c=c.objectStore(r),d=d.isPrimaryKey?c:c.index(d.name),p=n(p),0===f)return o({result:[]});t?((h=l?d.getAll(p,h):d.getAllKeys(p,h)).onsuccess=function(e){return o({result:e.target.result})},h.onerror=Ft(i)):(a=0,u=!l&&"openKeyCursor"in d?d.openKeyCursor(p):d.openCursor(p),s=[],u.onsuccess=function(e){var t=u.result;return t?(s.push(l?t.value:t.primaryKey),++a===f?o({result:s}):void t.continue()):o({result:s})},u.onerror=Ft(i))})}),openCursor:function(e){var t=e.trans,o=e.values,i=e.query,a=e.reverse,u=e.unique;return new Promise(function(e,s){e=Ie(e);var c=i.index,l=i.range,f=t.objectStore(r),p=(f=c.isPrimaryKey?f:f.index(c.name),c=a?u?"prevunique":"prev":u?"nextunique":"next",!o&&"openKeyCursor"in f?f.openKeyCursor(n(l),c):f.openCursor(n(l),c));p.onerror=Ft(s),p.onsuccess=Ie(function(r){var n,o,i,a,u=p.result;u?(u.___id=++Qt,u.done=!1,n=u.continue.bind(u),o=(o=u.continuePrimaryKey)&&o.bind(u),i=u.advance.bind(u),a=function(){throw new Error("Cursor not stopped")},u.trans=t,u.stop=u.continue=u.continuePrimaryKey=u.advance=function(){throw new Error("Cursor not started")},u.fail=Ie(s),u.next=function(){var e=this,t=1;return this.start(function(){return t--?e.continue():e.stop()}).then(function(){return e})},u.start=function(e){function t(){if(p.result)try{e()}catch(e){u.fail(e)}else u.done=!0,u.start=function(){throw new Error("Cursor behind last entry")},u.stop()}var r=new Promise(function(e,t){e=Ie(e),p.onerror=Ft(t),u.fail=t,u.stop=function(t){u.stop=u.continue=u.continuePrimaryKey=u.advance=a,e(t)}});return p.onsuccess=Ie(function(e){p.onsuccess=t,t()}),u.continue=n,u.continuePrimaryKey=o,u.advance=i,t(),r},e(u)):e(null)},s)})},count:function(e){var t=e.query,o=e.trans,i=t.index,a=t.range;return new Promise(function(e,t){var u=o.objectStore(r),s=i.isPrimaryKey?u:u.index(i.name);(s=(u=n(a))?s.count(u):s.count()).onsuccess=Ie(function(t){return e(t.target.result)}),s.onerror=Ft(t)})}}}),{});return s.forEach(function(e){return l[e.name]=e}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(e){if(!l[e])throw new Error("Table '".concat(e,"' not found"));return l[e]},MIN_KEY:-1/0,MAX_KEY:Yt(t),schema:r}}function er(e,r){var n=r.db;r=function(e,r,n,o){var i=n.IDBKeyRange;return n.indexedDB,{dbcore:(o=Zt(r,i,o),e.dbcore.reduce(function(e,r){return r=r.create,t(t({},e),r(e))},o))}}(e._middlewares,n,e._deps,r),e.core=r.dbcore,e.tables.forEach(function(t){var r=t.name;e.core.schema.tables.some(function(e){return e.name===r})&&(t.core=e.core.table(r),e[r]instanceof e.Table&&(e[r].core=t.core))})}function tr(e,t,r,n){r.forEach(function(r){var o=n[r];t.forEach(function(t){var n=function e(t,r){return y(t,r)||(t=s(t))&&e(t,r)}(t,r);(!n||"value"in n&&void 0===n.value)&&(t===e.Transaction.prototype||t instanceof e.Transaction?h(t,r,{get:function(){return this.table(r)},set:function(e){p(this,r,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):t[r]=new e.Table(r,o))})})}function rr(e,t){t.forEach(function(t){for(var r in t)t[r]instanceof e.Table&&delete t[r]})}function nr(e,t){return e._cfg.version-t._cfg.version}function or(e,t){var r,n={del:[],add:[],change:[]};for(r in e)t[r]||n.del.push(r);for(r in t){var o=e[r],i=t[r];if(o){var a={name:r,def:i,recreate:!1,del:[],add:[],change:[]};if(""+(o.primKey.keyPath||"")!=""+(i.primKey.keyPath||"")||o.primKey.auto!==i.primKey.auto)a.recreate=!0,n.change.push(a);else{var u=o.idxByName,s=i.idxByName,c=void 0;for(c in u)s[c]||a.del.push(c);for(c in s){var l=u[c],f=s[c];l?l.src!==f.src&&a.change.push(f):a.add.push(f)}(0<a.del.length||0<a.add.length||0<a.change.length)&&n.change.push(a)}}else n.add.push([r,i])}return n}function ir(e,t,r,n){var o=e.db.createObjectStore(t,r.keyPath?{keyPath:r.keyPath,autoIncrement:r.auto}:{autoIncrement:r.auto});return n.forEach(function(e){return ur(o,e)}),o}function ar(e,t){i(e).forEach(function(r){t.db.objectStoreNames.contains(r)||(oe&&console.debug("Dexie: Creating missing table",r),ir(t,r,e[r].primKey,e[r].indexes))})}function ur(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function sr(e,t,r){var n={};return m(t.objectStoreNames,0).forEach(function(e){for(var t=r.objectStore(e),o=zt(Gt(u=t.keyPath),u||"",!0,!1,!!t.autoIncrement,u&&"string"!=typeof u,!0),i=[],a=0;a<t.indexNames.length;++a){var u=(s=t.index(t.indexNames[a])).keyPath,s=zt(s.name,u,!!s.unique,!!s.multiEntry,!1,u&&"string"!=typeof u,!1);i.push(s)}n[e]=Ht(e,o,i)}),n}function cr(e,t,r){for(var n=r.db.objectStoreNames,i=0;i<n.length;++i){var a=n[i],u=r.objectStore(a);e._hasGetAll="getAll"in u;for(var s=0;s<u.indexNames.length;++s){var c=u.indexNames[s],l=u.index(c).keyPath,f="string"==typeof l?l:"["+m(l).join("+")+"]";!t[a]||(l=t[a].idxByName[f])&&(l.name=c,delete t[a].idxByName[f],t[a].idxByName[c]=l)}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&o.WorkerGlobalScope&&o instanceof o.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function lr(e){return e.split(",").map(function(e,t){var r=null===(n=(o=e.split(":"))[1])||void 0===n?void 0:n.trim(),n=(e=o[0].trim()).replace(/([&*]|\+\+)/g,""),o=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;return zt(n,o||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),a(o),0===t,r)})}var fr=(pr.prototype._createTableSchema=Ht,pr.prototype._parseIndexSyntax=lr,pr.prototype._parseStoresSpec=function(e,t){var r=this;i(e).forEach(function(n){if(null!==e[n]){var o=r._parseIndexSyntax(e[n]),i=o.shift();if(!i)throw new G.Schema("Invalid schema for table "+n+": "+e[n]);if(i.unique=!0,i.multi)throw new G.Schema("Primary key cannot be multiEntry*");o.forEach(function(e){if(e.auto)throw new G.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new G.Schema("Index must have a name and cannot be an empty string")}),o=r._createTableSchema(n,i,o),t[n]=o}})},pr.prototype.stores=function(e){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?u(this._cfg.storesSource,e):e,e=t._versions;var r={},n={};return e.forEach(function(e){u(r,e._cfg.storesSource),n=e._cfg.dbschema={},e._parseStoresSpec(r,n)}),t._dbSchema=n,rr(t,[t._allTables,t,t.Transaction.prototype]),tr(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],i(n),n),t._storeNames=i(n),this},pr.prototype.upgrade=function(e){return this._cfg.contentUpgrade=ne(this._cfg.contentUpgrade||$,e),this},pr);function pr(){}function hr(e,t){var r=e._dbNamesDB;return r||(r=e._dbNamesDB=new Xr(tt,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),r.table("dbnames")}function dr(e){return e&&"function"==typeof e.databases}function yr(e){return Ne(function(){return me.letThrough=!0,e()})}function vr(e){return!("from"in e)}var mr=function(e,t){if(!this){var r=new mr;return e&&"d"in e&&u(r,e),r}u(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function gr(e,t,r){var n=st(t,r);if(!isNaN(n)){if(0<n)throw RangeError();if(vr(e))return u(e,{from:t,to:r,d:1});var o=e.l;if(n=e.r,st(r,e.from)<0)return o?gr(o,t,r):e.l={from:t,to:r,d:1,l:null,r:null},xr(e);if(0<st(t,e.to))return n?gr(n,t,r):e.r={from:t,to:r,d:1,l:null,r:null},xr(e);st(t,e.from)<0&&(e.from=t,e.l=null,e.d=n?n.d+1:1),0<st(r,e.to)&&(e.to=r,e.r=null,e.d=e.l?e.l.d+1:1),r=!e.r,o&&!e.l&&br(e,o),n&&r&&br(e,n)}}function br(e,t){vr(t)||function e(t,r){var n=r.from,o=r.to,i=r.l;r=r.r,gr(t,n,o),i&&e(t,i),r&&e(t,r)}(e,t)}function wr(e,t){var r=_r(t),n=r.next();if(n.done)return!1;for(var o=n.value,i=_r(e),a=i.next(o.from),u=a.value;!n.done&&!a.done;){if(st(u.from,o.to)<=0&&0<=st(u.to,o.from))return!0;st(o.from,u.from)<0?o=(n=r.next(u.from)).value:u=(a=i.next(o.from)).value}return!1}function _r(e){var t=vr(e)?null:{s:0,n:e};return{next:function(e){for(var r=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&st(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||st(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function xr(e){var r,n,o=((null===(r=e.r)||void 0===r?void 0:r.d)||0)-((null===(n=e.l)||void 0===n?void 0:n.d)||0),i=1<o?"r":o<-1?"l":"";i&&(r="r"==i?"l":"r",n=t({},e),o=e[i],e.from=o.from,e.to=o.to,e[i]=o[i],n[i]=o[r],(e[r]=n).d=Or(n)),e.d=Or(e)}function Or(e){var t=e.r;return e=e.l,(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}function Sr(e,t){return i(t).forEach(function(r){e[r]?br(e[r],t[r]):e[r]=function e(t){var r,n,o={};for(r in t)l(t,r)&&(n=t[r],o[r]=!n||"object"!=typeof n||k.has(n.constructor)?n:e(n));return o}(t[r])}),e}function Er(e,t){return e.all||t.all||Object.keys(e).some(function(r){return t[r]&&wr(t[r],e[r])})}f(mr.prototype,((F={add:function(e){return br(this,e),this},addKey:function(e){return gr(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(e){return gr(t,e,e)}),this},hasKey:function(e){var t=_r(this).next(e).value;return t&&st(t.from,e)<=0&&0<=st(t.to,e)}})[R]=function(){return _r(this)},F));var Ar={},kr={},Tr=!1;function Pr(e){Sr(kr,e),Tr||(Tr=!0,setTimeout(function(){Tr=!1,jr(kr,!(kr={}))},0))}function jr(e,t){void 0===t&&(t=!1);var r=new Set;if(e.all)for(var n=0,o=Object.values(Ar);n<o.length;n++)Cr(a=o[n],e,r,t);else for(var i in e){var a,u=/^idb\:\/\/(.*)\/(.*)\//.exec(i);u&&(i=u[1],u=u[2],(a=Ar["idb://".concat(i,"/").concat(u)])&&Cr(a,e,r,t))}r.forEach(function(e){return e()})}function Cr(e,t,r,n){for(var o=[],i=0,a=Object.entries(e.queries.query);i<a.length;i++){for(var u=a[i],s=u[0],c=[],l=0,f=u[1];l<f.length;l++){var p=f[l];Er(t,p.obsSet)?p.subscribers.forEach(function(e){return r.add(e)}):n&&c.push(p)}n&&o.push([s,c])}if(n)for(var h=0,d=o;h<d.length;h++){var y=d[h];s=y[0],c=y[1],e.queries.query[s]=c}}function Rr(e){var t=e._state,r=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?Xe(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var n=t.openCanceller,o=Math.round(10*e.verno),a=!1;function u(){if(t.openCanceller!==n)throw new G.DatabaseClosed("db.open() was cancelled")}var s,c=t.dbReadyResolve,l=null,f=!1;return _e.race([n,("undefined"==typeof navigator?_e.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){function t(){return indexedDB.databases().finally(e)}s=setInterval(t,100),t()}).finally(function(){return clearInterval(s)}):Promise.resolve()).then(function n(){return new _e(function(s,c){if(u(),!r)throw new G.MissingAPI;var p=e.name,h=t.autoSchema||!o?r.open(p):r.open(p,o);if(!h)throw new G.MissingAPI;h.onerror=Ft(c),h.onblocked=Ie(e._fireOnBlocked),h.onupgradeneeded=Ie(function(n){var o;l=h.transaction,t.autoSchema&&!e._options.allowEmptyDB?(h.onerror=qt,l.abort(),h.result.close(),(o=r.deleteDatabase(p)).onsuccess=o.onerror=Ie(function(){c(new G.NoSuchDatabase("Database ".concat(p," doesnt exist")))})):(l.onerror=Ft(c),n=n.oldVersion>Math.pow(2,62)?0:n.oldVersion,f=n<1,e.idbdb=h.result,a&&function(e,t){ar(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var r=sr(0,e.idbdb,t);cr(e,e._dbSchema,t);for(var n=0,o=or(r,e._dbSchema).change;n<o.length;n++){var i=function(e){if(e.change.length||e.recreate)return console.warn("Unable to patch indexes of table ".concat(e.name," because it has changes on the type of index or primary key.")),{value:void 0};var r=t.objectStore(e.name);e.add.forEach(function(t){oe&&console.debug("Dexie upgrade patch: Creating missing index ".concat(e.name,".").concat(t.src)),ur(r,t)})}(o[n]);if("object"==typeof i)return i.value}}(e,l),function(e,t,r,n){var o=e._dbSchema;r.objectStoreNames.contains("$meta")&&!o.$meta&&(o.$meta=Ht("$meta",lr("")[0],[]),e._storeNames.push("$meta"));var a=e._createTransaction("readwrite",e._storeNames,o);a.create(r),a._completion.catch(n);var u=a._reject.bind(a),s=me.transless||me;Ne(function(){return me.trans=a,me.transless=s,0!==t?(er(e,r),c=t,((n=a).storeNames.includes("$meta")?n.table("$meta").get("version").then(function(e){return null!=e?e:c}):_e.resolve(c)).then(function(t){return o=t,u=a,s=r,c=[],t=(n=e)._versions,l=n._dbSchema=sr(0,n.idbdb,s),0!==(t=t.filter(function(e){return e._cfg.version>=o})).length?(t.forEach(function(e){c.push(function(){var t=l,r=e._cfg.dbschema;cr(n,t,s),cr(n,r,s),l=n._dbSchema=r;var a=or(t,r);a.add.forEach(function(e){ir(s,e[0],e[1].primKey,e[1].indexes)}),a.change.forEach(function(e){if(e.recreate)throw new G.Upgrade("Not yet support for changing primary key");var t=s.objectStore(e.name);e.add.forEach(function(e){return ur(t,e)}),e.change.forEach(function(e){t.deleteIndex(e.name),ur(t,e)}),e.del.forEach(function(e){return t.deleteIndex(e)})});var c=e._cfg.contentUpgrade;if(c&&e._cfg.version>o){er(n,s),u._memoizedTables={};var f=O(r);a.del.forEach(function(e){f[e]=t[e]}),rr(n,[n.Transaction.prototype]),tr(n,[n.Transaction.prototype],i(f),f),u.schema=f;var p,h=M(c);return h&&Ue(),a=_e.follow(function(){var e;(p=c(u))&&h&&(e=Le.bind(null,null),p.then(e,e))}),p&&"function"==typeof p.then?_e.resolve(p):a.then(function(){return p})}}),c.push(function(t){var r,o,i=e._cfg.dbschema;r=i,o=t,[].slice.call(o.db.objectStoreNames).forEach(function(e){return null==r[e]&&o.db.deleteObjectStore(e)}),rr(n,[n.Transaction.prototype]),tr(n,[n.Transaction.prototype],n._storeNames,n._dbSchema),u.schema=n._dbSchema}),c.push(function(t){n.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(n.idbdb.version/10)===e._cfg.version?(n.idbdb.deleteObjectStore("$meta"),delete n._dbSchema.$meta,n._storeNames=n._storeNames.filter(function(e){return"$meta"!==e})):t.objectStore("$meta").put(e._cfg.version,"version"))})}),function e(){return c.length?_e.resolve(c.shift()(u.idbtrans)).then(e):_e.resolve()}().then(function(){ar(l,s)})):_e.resolve();var n,o,u,s,c,l}).catch(u)):(i(o).forEach(function(e){ir(r,e,o[e].primKey,o[e].indexes)}),er(e,r),void _e.follow(function(){return e.on.populate.fire(a)}).catch(u));var n,c})}(e,n/10,l,c))},c),h.onsuccess=Ie(function(){l=null;var r,u,c,d,y,v=e.idbdb=h.result,g=m(v.objectStoreNames);if(0<g.length)try{var b=v.transaction(1===(d=g).length?d[0]:d,"readonly");if(t.autoSchema)u=v,c=b,(r=e).verno=u.version/10,c=r._dbSchema=sr(0,u,c),r._storeNames=m(u.objectStoreNames,0),tr(r,[r._allTables],i(c),c);else if(cr(e,e._dbSchema,b),((y=or(sr(0,(y=e).idbdb,b),y._dbSchema)).add.length||y.change.some(function(e){return e.add.length||e.change.length}))&&!a)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),v.close(),o=v.version+1,a=!0,s(n());er(e,b)}catch(r){}et.push(e),v.onversionchange=Ie(function(r){t.vcFired=!0,e.on("versionchange").fire(r)}),v.onclose=Ie(function(){e.close({disableAutoOpen:!1})}),f&&(y=e._deps,b=p,v=y.indexedDB,y=y.IDBKeyRange,dr(v)||b===tt||hr(v,y).put({name:b}).catch($)),s()},c)}).catch(function(e){switch(null==e?void 0:e.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),n();break;case"VersionError":if(0<o)return o=0,n()}return _e.reject(e)})})]).then(function(){return u(),t.onReadyBeingFired=[],_e.resolve(yr(function(){return e.on.ready.fire(e.vip)})).then(function r(){if(0<t.onReadyBeingFired.length){var n=t.onReadyBeingFired.reduce(ne,$);return t.onReadyBeingFired=[],_e.resolve(yr(function(){return n(e.vip)})).then(r)}})}).finally(function(){t.openCanceller===n&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(r){t.dbOpenError=r;try{l&&l.abort()}catch(r){}return n===t.openCanceller&&e._close(),Xe(r)}).finally(function(){t.openComplete=!0,c()}).then(function(){var t;return f&&(t={},e.tables.forEach(function(r){r.schema.indexes.forEach(function(n){n.name&&(t["idb://".concat(e.name,"/").concat(r.name,"/").concat(n.name)]=new mr(-1/0,[[[]]]))}),t["idb://".concat(e.name,"/").concat(r.name,"/")]=t["idb://".concat(e.name,"/").concat(r.name,"/:dels")]=new mr(-1/0,[[[]]])}),Lt(Nt).fire(t),jr(t,!0)),e})}function Ir(e){function t(t){return e.next(t)}var r=o(t),n=o(function(t){return e.throw(t)});function o(e){return function(t){var o=e(t);return t=o.value,o.done?t:t&&"function"==typeof t.then?t.then(r,n):a(t)?Promise.all(t).then(r,n):r(t)}}return o(t)()}function Kr(e,t,r){for(var n=a(e)?e.slice():[e],o=0;o<r;++o)n.push(t);return n}var Dr={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return t(t({},e),{table:function(r){var n=e.table(r),o=n.schema,i={},a=[];function u(e,r,n){var o=Jt(e),s=i[o]=i[o]||[],c=null==e?0:"string"==typeof e?1:e.length,l=0<r;return l=t(t({},n),{name:l?"".concat(o,"(virtual-from:").concat(n.name,")"):n.name,lowLevelIndex:n,isVirtual:l,keyTail:r,keyLength:c,extractKey:$t(e),unique:!l&&n.unique}),s.push(l),l.isPrimaryKey||a.push(l),1<c&&u(2===c?e[0]:e.slice(0,c-1),r+1,n),s.sort(function(e,t){return e.keyTail-t.keyTail}),l}r=u(o.primaryKey.keyPath,0,o.primaryKey),i[":id"]=[r];for(var s=0,c=o.indexes;s<c.length;s++){var l=c[s];u(l.keyPath,0,l)}function f(r){var n,o=r.query.index;return o.isVirtual?t(t({},r),{query:{index:o.lowLevelIndex,range:(n=r.query.range,o=o.keyTail,{type:1===n.type?2:n.type,lower:Kr(n.lower,n.lowerOpen?e.MAX_KEY:e.MIN_KEY,o),lowerOpen:!0,upper:Kr(n.upper,n.upperOpen?e.MIN_KEY:e.MAX_KEY,o),upperOpen:!0})}}):r}return t(t({},n),{schema:t(t({},o),{primaryKey:r,indexes:a,getIndexByKeyPath:function(e){return(e=i[Jt(e)])&&e[0]}}),count:function(e){return n.count(f(e))},query:function(e){return n.query(f(e))},openCursor:function(t){var r=t.query.index,o=r.keyTail,i=r.isVirtual,a=r.keyLength;return i?n.openCursor(f(t)).then(function(r){return r&&function(r){return Object.create(r,{continue:{value:function(n){null!=n?r.continue(Kr(n,t.reverse?e.MAX_KEY:e.MIN_KEY,o)):t.unique?r.continue(r.key.slice(0,a).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,o)):r.continue()}},continuePrimaryKey:{value:function(t,n){r.continuePrimaryKey(Kr(t,e.MAX_KEY,o),n)}},primaryKey:{get:function(){return r.primaryKey}},key:{get:function(){var e=r.key;return 1===a?e[0]:e.slice(0,a)}},value:{get:function(){return r.value}}})}(r)}):n.openCursor(t)}})}})}};function Br(e,t,r,n){return r=r||{},n=n||"",i(e).forEach(function(o){var i,a,u;l(t,o)?(i=e[o],a=t[o],"object"==typeof i&&"object"==typeof a&&i&&a?(u=C(i))!==C(a)?r[n+o]=t[o]:"Object"===u?Br(i,a,r,n+o+"."):i!==a&&(r[n+o]=t[o]):i!==a&&(r[n+o]=t[o])):r[n+o]=void 0}),i(t).forEach(function(o){l(e,o)||(r[n+o]=t[o])}),r}function Mr(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}var Fr={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return t(t({},e),{table:function(r){var o=e.table(r),i=o.schema.primaryKey;return t(t({},o),{mutate:function(e){var a=me.trans,u=a.table(r).hook,s=u.deleting,c=u.creating,f=u.updating;switch(e.type){case"add":if(c.fire===$)break;return a._promise("readwrite",function(){return p(e)},!0);case"put":if(c.fire===$&&f.fire===$)break;return a._promise("readwrite",function(){return p(e)},!0);case"delete":if(s.fire===$)break;return a._promise("readwrite",function(){return p(e)},!0);case"deleteRange":if(s.fire===$)break;return a._promise("readwrite",function(){return function e(r,n,a){return o.query({trans:r,values:!1,query:{index:i,range:n},limit:a}).then(function(o){var i=o.result;return p({type:"delete",keys:i,trans:r}).then(function(o){return 0<o.numFailures?Promise.reject(o.failures[0]):i.length<a?{failures:[],numFailures:0,lastResult:void 0}:e(r,t(t({},n),{lower:i[i.length-1],lowerOpen:!0}),a)})})}(e.trans,e.range,1e4)},!0)}return o.mutate(e);function p(e){var r,a,u,p=me.trans,h=e.keys||Mr(i,e);if(!h)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?t(t({},e),{keys:h}):t({},e)).type&&(e.values=n([],e.values,!0)),e.keys&&(e.keys=n([],e.keys,!0)),r=o,u=h,("add"===(a=e).type?Promise.resolve([]):r.getMany({trans:a.trans,keys:u,cache:"immutable"})).then(function(t){var r=h.map(function(r,n){var o,a,u,h=t[n],d={onerror:null,onsuccess:null};return"delete"===e.type?s.fire.call(d,r,h,p):"add"===e.type||void 0===h?(o=c.fire.call(d,r,e.values[n],p),null==r&&null!=o&&(e.keys[n]=r=o,i.outbound||x(e.values[n],i.keyPath,r))):(o=Br(h,e.values[n]),(a=f.fire.call(d,o,r,h,p))&&(u=e.values[n],Object.keys(a).forEach(function(e){l(u,e)?u[e]=a[e]:x(u,e,a[e])}))),d});return o.mutate(e).then(function(n){for(var o=n.failures,i=n.results,a=n.numFailures,u=(n=n.lastResult,0);u<h.length;++u){var s=(i||h)[u],c=r[u];null==s?c.onerror&&c.onerror(o[u]):c.onsuccess&&c.onsuccess("put"===e.type&&t[u]?e.values[u]:s)}return{failures:o,results:i,numFailures:a,lastResult:n}}).catch(function(e){return r.forEach(function(t){return t.onerror&&t.onerror(e)}),Promise.reject(e)})})}}})}})}};function qr(e,t,r){try{if(!t)return null;if(t.keys.length<e.length)return null;for(var n=[],o=0,i=0;o<t.keys.length&&i<e.length;++o)0===st(t.keys[o],e[i])&&(n.push(r?P(t.values[o]):t.values[o]),++i);return n.length===e.length?n:null}catch(e){return null}}var Nr={stack:"dbcore",level:-1,create:function(e){return{table:function(r){var n=e.table(r);return t(t({},n),{getMany:function(e){if(!e.cache)return n.getMany(e);var t=qr(e.keys,e.trans._cache,"clone"===e.cache);return t?_e.resolve(t):n.getMany(e).then(function(t){return e.trans._cache={keys:e.keys,values:"clone"===e.cache?P(t):t},t})},mutate:function(e){return"add"!==e.type&&(e.trans._cache=null),n.mutate(e)}})}}}};function Ur(e,t){return"readonly"===e.trans.mode&&!!e.subscr&&!e.trans.explicit&&"disabled"!==e.trans.db._options.cache&&!t.schema.primaryKey.outbound}function Lr(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Vr={stack:"dbcore",level:0,name:"Observability",create:function(e){var r=e.schema.name,n=new mr(e.MIN_KEY,e.MAX_KEY);return t(t({},e),{transaction:function(t,r,n){if(me.subscr&&"readonly"!==r)throw new G.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(me.querier));return e.transaction(t,r,n)},table:function(o){var u=e.table(o),s=u.schema,c=s.primaryKey,l=s.indexes,f=c.extractKey,p=c.outbound,h=c.autoIncrement&&l.filter(function(e){return e.compound&&e.keyPath.includes(c.keyPath)}),d=t(t({},u),{mutate:function(t){function i(e){return e="idb://".concat(r,"/").concat(o,"/").concat(e),y[e]||(y[e]=new mr)}var l,f,p,d=t.trans,y=t.mutatedParts||(t.mutatedParts={}),v=i(""),m=i(":dels"),g=t.type,b="deleteRange"===t.type?[t.range]:"delete"===t.type?[t.keys]:t.values.length<50?[Mr(c,t).filter(function(e){return e}),t.values]:[],w=b[0],_=b[1];return b=t.trans._cache,a(w)?(v.addKeys(w),(b="delete"===g||w.length===_.length?qr(w,b):null)||m.addKeys(w),(b||_)&&(l=i,f=b,p=_,s.indexes.forEach(function(e){var t=l(e.name||"");function r(t){return null!=t?e.extractKey(t):null}function n(r){return e.multiEntry&&a(r)?r.forEach(function(e){return t.addKey(e)}):t.addKey(r)}(f||p).forEach(function(e,t){var o=f&&r(f[t]);0!==st(o,t=p&&r(p[t]))&&(null!=o&&n(o),null!=t&&n(t))})}))):w?(_={from:null!==(_=w.lower)&&void 0!==_?_:e.MIN_KEY,to:null!==(_=w.upper)&&void 0!==_?_:e.MAX_KEY},m.add(_),v.add(_)):(v.add(n),m.add(n),s.indexes.forEach(function(e){return i(e.name).add(n)})),u.mutate(t).then(function(e){return!w||"add"!==t.type&&"put"!==t.type||(v.addKeys(e.results),h&&h.forEach(function(r){for(var n=t.values.map(function(e){return r.extractKey(e)}),o=r.keyPath.findIndex(function(e){return e===c.keyPath}),a=0,u=e.results.length;a<u;++a)n[a][o]=e.results[a];i(r.name).addKeys(n)})),d.mutatedParts=Sr(d.mutatedParts||{},y),e})}}),y=(l=function(t){t=(r=t.query).index;var r=r.range;return[t,new mr(null!==(t=r.lower)&&void 0!==t?t:e.MIN_KEY,null!==(r=r.upper)&&void 0!==r?r:e.MAX_KEY)]},{get:function(e){return[c,new mr(e.key)]},getMany:function(e){return[c,(new mr).addKeys(e.keys)]},count:l,query:l,openCursor:l});return i(y).forEach(function(e){d[e]=function(i){var a=!!(d=me.subscr),s=Ur(me,u)&&Lr(e,i)?i.obsSet={}:d;if(a){var c=function(e){return e="idb://".concat(r,"/").concat(o,"/").concat(e),s[e]||(s[e]=new mr)},l=c(""),h=c(":dels"),d=(a=(d=y[e](i))[0],d[1]);if(("query"===e&&a.isPrimaryKey&&!i.values?h:c(a.name||"")).add(d),!a.isPrimaryKey){if("count"!==e){var v="query"===e&&p&&i.values&&u.query(t(t({},i),{values:!1}));return u[e].apply(this,arguments).then(function(t){if("query"===e){if(p&&i.values)return v.then(function(e){return e=e.result,l.addKeys(e),t});var r=i.values?t.result.map(f):t.result;(i.values?l:h).addKeys(r)}else if("openCursor"===e){var n=t,o=i.values;return n&&Object.create(n,{key:{get:function(){return h.addKey(n.primaryKey),n.key}},primaryKey:{get:function(){var e=n.primaryKey;return h.addKey(e),e}},value:{get:function(){return o&&l.addKey(n.primaryKey),n.value}}})}return t})}h.add(n)}}return u[e].apply(this,arguments)}}),d}})}};function Wr(e,r,n){if(0===n.numFailures)return r;if("deleteRange"===r.type)return null;var o=r.keys?r.keys.length:"values"in r&&r.values?r.values.length:1;return n.numFailures===o?null:(r=t({},r),a(r.keys)&&(r.keys=r.keys.filter(function(e,t){return!(t in n.failures)})),"values"in r&&a(r.values)&&(r.values=r.values.filter(function(e,t){return!(t in n.failures)})),r)}function zr(e,t){return r=e,(void 0===(n=t).lower||(n.lowerOpen?0<st(r,n.lower):0<=st(r,n.lower)))&&(void 0===t.upper||(t.upperOpen?st(e,t.upper)<0:st(e,t.upper)<=0));var r,n}function Gr(e,t,r,n,o,i){if(!r||0===r.length)return e;var u=t.query.index,s=u.multiEntry,c=t.query.range,l=n.schema.primaryKey.extractKey,f=u.extractKey,p=(u.lowLevelIndex||u).extractKey;return r=r.reduce(function(e,r){var n=e,o=[];if("add"===r.type||"put"===r.type)for(var i=new mr,u=r.values.length-1;0<=u;--u){var p,h=r.values[u],d=l(h);i.hasKey(d)||(p=f(h),(s&&a(p)?p.some(function(e){return zr(e,c)}):zr(p,c))&&(i.addKey(d),o.push(h)))}switch(r.type){case"add":var y=(new mr).addKeys(t.values?e.map(function(e){return l(e)}):e);n=e.concat(t.values?o.filter(function(e){return e=l(e),!y.hasKey(e)&&(y.addKey(e),!0)}):o.map(function(e){return l(e)}).filter(function(e){return!y.hasKey(e)&&(y.addKey(e),!0)}));break;case"put":var v=(new mr).addKeys(r.values.map(function(e){return l(e)}));n=e.filter(function(e){return!v.hasKey(t.values?l(e):e)}).concat(t.values?o:o.map(function(e){return l(e)}));break;case"delete":var m=(new mr).addKeys(r.keys);n=e.filter(function(e){return!m.hasKey(t.values?l(e):e)});break;case"deleteRange":var g=r.range;n=e.filter(function(e){return!zr(l(e),g)})}return n},e),r===e?e:(r.sort(function(e,t){return st(p(e),p(t))||st(l(e),l(t))}),t.limit&&t.limit<1/0&&(r.length>t.limit?r.length=t.limit:e.length===t.limit&&r.length<t.limit&&(o.dirty=!0)),i?Object.freeze(r):r)}function Hr(e,t){return 0===st(e.lower,t.lower)&&0===st(e.upper,t.upper)&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}var Yr={stack:"dbcore",level:0,name:"Cache",create:function(e){var r=e.schema.name;return t(t({},e),{transaction:function(t,n,o){var i,a,u=e.transaction(t,n,o);return"readwrite"===n&&(a=(i=new AbortController).signal,o=function(o){return function(){if(i.abort(),"readwrite"===n){for(var a=new Set,s=0,c=t;s<c.length;s++){var l=c[s],f=Ar["idb://".concat(r,"/").concat(l)];if(f){var p=e.table(l),h=f.optimisticOps.filter(function(e){return e.trans===u});if(u._explicit&&o&&u.mutatedParts)for(var d=0,y=Object.values(f.queries.query);d<y.length;d++)for(var v=0,m=(w=y[d]).slice();v<m.length;v++)Er((_=m[v]).obsSet,u.mutatedParts)&&(K(w,_),_.subscribers.forEach(function(e){return a.add(e)}));else if(0<h.length){f.optimisticOps=f.optimisticOps.filter(function(e){return e.trans!==u});for(var g=0,b=Object.values(f.queries.query);g<b.length;g++)for(var w,_,x,O=0,S=(w=b[g]).slice();O<S.length;O++)null!=(_=S[O]).res&&u.mutatedParts&&(o&&!_.dirty?(x=Object.isFrozen(_.res),x=Gr(_.res,_.req,h,p,_,x),_.dirty?(K(w,_),_.subscribers.forEach(function(e){return a.add(e)})):x!==_.res&&(_.res=x,_.promise=_e.resolve({result:x}))):(_.dirty&&K(w,_),_.subscribers.forEach(function(e){return a.add(e)})))}}}a.forEach(function(e){return e()})}}},u.addEventListener("abort",o(!1),{signal:a}),u.addEventListener("error",o(!1),{signal:a}),u.addEventListener("complete",o(!0),{signal:a})),u},table:function(n){var o=e.table(n),i=o.schema.primaryKey;return t(t({},o),{mutate:function(e){var a=me.trans;if(i.outbound||"disabled"===a.db._options.cache||a.explicit||"readwrite"!==a.idbtrans.mode)return o.mutate(e);var u=Ar["idb://".concat(r,"/").concat(n)];return u?(a=o.mutate(e),"add"!==e.type&&"put"!==e.type||!(50<=e.values.length||Mr(i,e).some(function(e){return null==e}))?(u.optimisticOps.push(e),e.mutatedParts&&Pr(e.mutatedParts),a.then(function(t){0<t.numFailures&&(K(u.optimisticOps,e),(t=Wr(0,e,t))&&u.optimisticOps.push(t),e.mutatedParts&&Pr(e.mutatedParts))}),a.catch(function(){K(u.optimisticOps,e),e.mutatedParts&&Pr(e.mutatedParts)})):a.then(function(r){var n=Wr(0,t(t({},e),{values:e.values.map(function(e,n){var o;return r.failures[n]||x(e=null!==(o=i.keyPath)&&void 0!==o&&o.includes(".")?P(e):t({},e),i.keyPath,r.results[n]),e})}),r);u.optimisticOps.push(n),queueMicrotask(function(){return e.mutatedParts&&Pr(e.mutatedParts)})}),a):o.mutate(e)},query:function(e){if(!Ur(me,o)||!Lr("query",e))return o.query(e);var t="immutable"===(null===(u=me.trans)||void 0===u?void 0:u.db._options.cache),i=(c=me).requery,a=c.signal,u=function(e,t,r,n){var o=Ar["idb://".concat(e,"/").concat(t)];if(!o)return[];if(!(t=o.queries[r]))return[null,!1,o,null];var i=t[(n.query?n.query.index.name:null)||""];if(!i)return[null,!1,o,null];switch(r){case"query":var a=i.find(function(e){return e.req.limit===n.limit&&e.req.values===n.values&&Hr(e.req.query.range,n.query.range)});return a?[a,!0,o,i]:[i.find(function(e){return("limit"in e.req?e.req.limit:1/0)>=n.limit&&(!n.values||e.req.values)&&function(e,t){return function(e,t,r,n){if(void 0===e)return void 0!==t?-1:0;if(void 0===t)return 1;if(0===(t=st(e,t))){if(r&&n)return 0;if(r)return 1;if(n)return-1}return t}(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&0<=function(e,t,r,n){if(void 0===e)return void 0!==t?1:0;if(void 0===t)return-1;if(0===(t=st(e,t))){if(r&&n)return 0;if(r)return-1;if(n)return 1}return t}(e.upper,t.upper,e.upperOpen,t.upperOpen)}(e.req.query.range,n.query.range)}),!1,o,i];case"count":return a=i.find(function(e){return Hr(e.req.query.range,n.query.range)}),[a,!!a,o,i]}}(r,n,"query",e),s=u[0],c=u[1],l=u[2],f=u[3];return s&&c?s.obsSet=e.obsSet:(c=o.query(e).then(function(e){var r=e.result;if(s&&(s.res=r),t){for(var n=0,o=r.length;n<o;++n)Object.freeze(r[n]);Object.freeze(r)}else e.result=P(r);return e}).catch(function(e){return f&&s&&K(f,s),Promise.reject(e)}),s={obsSet:e.obsSet,promise:c,subscribers:new Set,type:"query",req:e,dirty:!1},f?f.push(s):(f=[s],(l=l||(Ar["idb://".concat(r,"/").concat(n)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[e.query.index.name||""]=f)),function(e,t,r,n){e.subscribers.add(r),n.addEventListener("abort",function(){var n,o;e.subscribers.delete(r),0===e.subscribers.size&&(n=e,o=t,setTimeout(function(){0===n.subscribers.size&&K(o,n)},3e3))})}(s,f,i,a),s.promise.then(function(r){return{result:Gr(r.result,e,null==l?void 0:l.optimisticOps,o,s,t)}})}})}})}};function $r(e,t){return new Proxy(e,{get:function(e,r,n){return"db"===r?t:Reflect.get(e,r,n)}})}var Xr=(Qr.prototype.version=function(e){if(isNaN(e)||e<.1)throw new G.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new G.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,r=t.filter(function(t){return t._cfg.version===e})[0];return r||(r=new this.Version(e),t.push(r),t.sort(nr),r.stores({}),this._state.autoSchema=!1,r)},Qr.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||me.letThrough||this._vip)?e():new _e(function(e,r){if(t._state.openComplete)return r(new G.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void r(new G.DatabaseClosed);t.open().catch($)}t._state.dbReadyPromise.then(e,r)}).then(e)},Qr.prototype.use=function(e){var t=e.stack,r=e.create,n=e.level,o=e.name;return o&&this.unuse({stack:t,name:o}),(e=this._middlewares[t]||(this._middlewares[t]=[])).push({stack:t,create:r,level:null==n?10:n,name:o}),e.sort(function(e,t){return e.level-t.level}),this},Qr.prototype.unuse=function(e){var t=e.stack,r=e.name,n=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(e){return n?e.create!==n:!!r&&e.name!==r})),this},Qr.prototype.open=function(){var e=this;return He(ve,function(){return Rr(e)})},Qr.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var e=this._state,t=et.indexOf(this);if(0<=t&&et.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(t){}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new _e(function(t){e.dbReadyResolve=t}),e.openCanceller=new _e(function(t,r){e.cancelOpen=r}))},Qr.prototype.close=function(e){var t=(void 0===e?{disableAutoOpen:!0}:e).disableAutoOpen;e=this._state,t?(e.isBeingOpened&&e.cancelOpen(new G.DatabaseClosed),this._close(),e.autoOpen=!1,e.dbOpenError=new G.DatabaseClosed):(this._close(),e.autoOpen=this._options.autoOpen||e.isBeingOpened,e.openComplete=!1,e.dbOpenError=null)},Qr.prototype.delete=function(e){var t=this;void 0===e&&(e={disableAutoOpen:!0});var r=0<arguments.length&&"object"!=typeof arguments[0],n=this._state;return new _e(function(o,i){function a(){t.close(e);var r=t._deps.indexedDB.deleteDatabase(t.name);r.onsuccess=Ie(function(){var e,r,n;e=t._deps,r=t.name,n=e.indexedDB,e=e.IDBKeyRange,dr(n)||r===tt||hr(n,e).delete(r).catch($),o()}),r.onerror=Ft(i),r.onblocked=t._fireOnBlocked}if(r)throw new G.InvalidArgument("Invalid closeOptions argument to db.delete()");n.isBeingOpened?n.dbReadyPromise.then(a):a()})},Qr.prototype.backendDB=function(){return this.idbdb},Qr.prototype.isOpen=function(){return null!==this.idbdb},Qr.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name},Qr.prototype.hasFailed=function(){return null!==this._state.dbOpenError},Qr.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Qr.prototype,"tables",{get:function(){var e=this;return i(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),Qr.prototype.transaction=function(){var e=function(e,t,r){var n=arguments.length;if(n<2)throw new G.InvalidArgument("Too few arguments");for(var o=new Array(n-1);--n;)o[n-1]=arguments[n];return r=o.pop(),[e,E(o),r]}.apply(this,arguments);return this._transaction.apply(this,e)},Qr.prototype._transaction=function(e,t,r){var n=this,o=me.trans;o&&o.db===this&&-1===e.indexOf("!")||(o=null);var i,a,u=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{if(a=t.map(function(e){if("string"!=typeof(e=e instanceof n.Table?e.name:e))throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return e}),"r"==e||e===rt)i=rt;else{if("rw"!=e&&e!=nt)throw new G.InvalidArgument("Invalid transaction mode: "+e);i=nt}if(o){if(o.mode===rt&&i===nt){if(!u)throw new G.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");o=null}o&&a.forEach(function(e){if(o&&-1===o.storeNames.indexOf(e)){if(!u)throw new G.SubTransaction("Table "+e+" not included in parent transaction.");o=null}}),u&&o&&!o.active&&(o=null)}}catch(r){return o?o._promise(null,function(e,t){t(r)}):Xe(r)}var s=function e(t,r,n,o,i){return _e.resolve().then(function(){var a=me.transless||me,u=t._createTransaction(r,n,t._dbSchema,o);if(u.explicit=!0,a={trans:u,transless:a},o)u.idbtrans=o.idbtrans;else try{u.create(),u.idbtrans._explicit=!0,t._state.PR1398_maxLoop=3}catch(a){return a.name===W.InvalidState&&t.isOpen()&&0<--t._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return e(t,r,n,null,i)})):Xe(a)}var s,c=M(i);return c&&Ue(),a=_e.follow(function(){var e;(s=i.call(u,u))&&(c?(e=Le.bind(null,null),s.then(e,e)):"function"==typeof s.next&&"function"==typeof s.throw&&(s=Ir(s)))},a),(s&&"function"==typeof s.then?_e.resolve(s).then(function(e){return u.active?e:Xe(new G.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):a.then(function(){return s})).then(function(e){return o&&u._resolve(),u._completion.then(function(){return e})}).catch(function(e){return u._reject(e),Xe(e)})})}.bind(null,this,i,a,o,r);return o?o._promise(i,s,"lock"):me.trans?He(me.transless,function(){return n._whenReady(s)}):this._whenReady(s)},Qr.prototype.table=function(e){if(!l(this._allTables,e))throw new G.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},Qr);function Qr(e,r){var n=this;this._middlewares={},this.verno=0;var o=Qr.dependencies;this._options=r=t({addons:Qr.addons,autoOpen:!0,indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange,cache:"cloned"},r),this._deps={indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange},o=r.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var i,a,u,s,c,l={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:$,dbReadyPromise:null,cancelOpen:$,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:r.autoOpen};l.dbReadyPromise=new _e(function(e){l.dbReadyResolve=e}),l.openCanceller=new _e(function(e,t){l.cancelOpen=t}),this._state=l,this.name=e,this.on=mt(this,"populate","blocked","versionchange","close",{ready:[ne,$]}),this.once=function(e,t){var r=function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];n.on(e).unsubscribe(r),t.apply(n,o)};return n.on(e,r)},this.on.ready.subscribe=g(this.on.ready.subscribe,function(e){return function(t,r){Qr.vip(function(){var o,i=n._state;i.openComplete?(i.dbOpenError||_e.resolve().then(t),r&&e(t)):i.onReadyBeingFired?(i.onReadyBeingFired.push(t),r&&e(t)):(e(t),o=n,r||e(function e(){o.on.ready.unsubscribe(t),o.on.ready.unsubscribe(e)}))})}}),this.Collection=(i=this,gt(At.prototype,function(e,t){this.db=i;var r=it,n=null;if(t)try{r=t()}catch(e){n=e}var o=e._ctx;e=(t=o.table).hook.reading.fire,this._ctx={table:t,index:o.index,isPrimKey:!o.index||t.schema.primKey.keyPath&&o.index===t.schema.primKey.name,range:r,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:n,or:o.or,valueMapper:e!==X?e:null}})),this.Table=(a=this,gt(yt.prototype,function(e,t,r){this.db=a,this._tx=r,this.name=e,this.schema=t,this.hook=a._allTables[e]?a._allTables[e].hook:mt(null,{creating:[Z,$],reading:[Q,X],updating:[te,$],deleting:[ee,$]})})),this.Transaction=(u=this,gt(Vt.prototype,function(e,t,r,n,o){var i=this;"readonly"!==e&&t.forEach(function(e){(e=null===(e=r[e])||void 0===e?void 0:e.yProps)&&(t=t.concat(e.map(function(e){return e.updatesTable})))}),this.db=u,this.mode=e,this.storeNames=t,this.schema=r,this.chromeTransactionDurability=n,this.idbtrans=null,this.on=mt(this,"complete","error","abort"),this.parent=o||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new _e(function(e,t){i._resolve=e,i._reject=t}),this._completion.then(function(){i.active=!1,i.on.complete.fire()},function(e){var t=i.active;return i.active=!1,i.on.error.fire(e),i.parent?i.parent._reject(e):t&&i.idbtrans&&i.idbtrans.abort(),Xe(e)})})),this.Version=(s=this,gt(fr.prototype,function(e){this.db=s,this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(c=this,gt(Bt.prototype,function(e,t,r){if(this.db=c,this._ctx={table:e,index:":id"===t?null:t,or:r},this._cmp=this._ascending=st,this._descending=function(e,t){return st(t,e)},this._max=function(e,t){return 0<st(e,t)?e:t},this._min=function(e,t){return st(e,t)<0?e:t},this._IDBKeyRange=c._deps.IDBKeyRange,!this._IDBKeyRange)throw new G.MissingAPI})),this.on("versionchange",function(e){0<e.newVersion?console.warn("Another connection wants to upgrade database '".concat(n.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(n.name,"'. Closing db now to resume the delete request.")),n.close({disableAutoOpen:!1})}),this.on("blocked",function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('".concat(n.name,"') was blocked")):console.warn("Upgrade '".concat(n.name,"' blocked by other connection holding version ").concat(e.oldVersion/10))}),this._maxKey=Yt(r.IDBKeyRange),this._createTransaction=function(e,t,r,o){return new n.Transaction(e,t,r,n._options.chromeTransactionDurability,o)},this._fireOnBlocked=function(e){n.on("blocked").fire(e),et.filter(function(e){return e.name===n.name&&e!==n&&!e._state.vcFired}).map(function(t){return t.on("versionchange").fire(e)})},this.use(Nr),this.use(Yr),this.use(Vr),this.use(Dr),this.use(Fr);var f=new Proxy(this,{get:function(e,t,r){if("_vip"===t)return!0;if("table"===t)return function(e){return $r(n.table(e),f)};var o=Reflect.get(e,t,r);return o instanceof yt?$r(o,f):"tables"===t?o.map(function(e){return $r(e,f)}):"_createTransaction"===t?function(){return $r(o.apply(this,arguments),f)}:o}});this.vip=f,o.forEach(function(e){return e(n)})}F="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable";var Jr,Zr=(en.prototype.subscribe=function(e,t,r){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:r})},en.prototype[F]=function(){return this},en);function en(e){this._subscribe=e}try{Jr={indexedDB:o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB,IDBKeyRange:o.IDBKeyRange||o.webkitIDBKeyRange}}catch(A){Jr={indexedDB:null,IDBKeyRange:null}}function tn(e){var t,r=!1,n=new Zr(function(n){var o,i=M(e),a=!1,u={},s={},c={get closed(){return a},unsubscribe:function(){a||(a=!0,o&&o.abort(),f&&Lt.storagemutated.unsubscribe(h))}};n.start&&n.start(c);var f=!1,p=function(){return $e(d)},h=function(e){Sr(u,e),Er(s,u)&&p()},d=function(){var c,d,y;!a&&Jr.indexedDB&&(u={},c={},o&&o.abort(),o=new AbortController,y=function(t){var r=Pe();try{i&&Ue();var n=Ne(e,t);return n=i?n.finally(Le):n}finally{r&&je()}}(d={subscr:c,signal:o.signal,requery:p,querier:e,trans:null}),Promise.resolve(y).then(function(e){r=!0,t=e,a||d.signal.aborted||(u={},function(e){for(var t in e)if(l(e,t))return;return 1}(s=c)||f||(Lt(Nt,h),f=!0),$e(function(){return!a&&n.next&&n.next(e)}))},function(e){r=!1,["DatabaseClosedError","AbortError"].includes(null==e?void 0:e.name)||a||$e(function(){a||n.error&&n.error(e)})}))};return setTimeout(p,0),c});return n.hasValue=function(){return r},n.getValue=function(){return t},n}var rn=Xr;function nn(e){var t=an;try{an=!0,Lt.storagemutated.fire(e),jr(e,!0)}finally{an=t}}f(rn,t(t({},Y),{delete:function(e){return new rn(e,{addons:[]}).delete()},exists:function(e){return new rn(e,{addons:[]}).open().then(function(e){return e.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return r=(t=rn.dependencies).indexedDB,t=t.IDBKeyRange,(dr(r)?Promise.resolve(r.databases()).then(function(e){return e.map(function(e){return e.name}).filter(function(e){return e!==tt})}):hr(r,t).toCollection().primaryKeys()).then(e)}catch(e){return Xe(new G.MissingAPI)}var t,r},defineClass:function(){return function(e){u(this,e)}},ignoreTransaction:function(e){return me.trans?He(me.transless,e):e()},vip:yr,async:function(e){return function(){try{var t=Ir(e.apply(this,arguments));return t&&"function"==typeof t.then?t:_e.resolve(t)}catch(t){return Xe(t)}}},spawn:function(e,t,r){try{var n=Ir(e.apply(r,t||[]));return n&&"function"==typeof n.then?n:_e.resolve(n)}catch(e){return Xe(e)}},currentTransaction:{get:function(){return me.trans||null}},waitFor:function(e,t){return t=_e.resolve("function"==typeof e?rn.ignoreTransaction(e):e).timeout(t||6e4),me.trans?me.trans.waitFor(t):t},Promise:_e,debug:{get:function(){return oe},set:function(e){ie(e)}},derive:d,extend:u,props:f,override:g,Events:mt,on:Lt,liveQuery:tn,extendObservabilitySet:Sr,getByKeyPath:_,setByKeyPath:x,delByKeyPath:function(e,t){"string"==typeof t?x(e,t,void 0):"length"in t&&[].map.call(t,function(t){x(e,t,void 0)})},shallowClone:O,deepClone:P,getObjectDiff:Br,cmp:st,asap:w,minKey:-1/0,addons:[],connections:et,errnames:W,dependencies:Jr,cache:Ar,semVer:"4.2.1",version:"4.2.1".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,r){return e+t/Math.pow(10,2*r)})})),rn.maxKey=Yt(rn.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(Lt(Nt,function(e){an||(e=new CustomEvent(Ut,{detail:e}),an=!0,dispatchEvent(e),an=!1)}),addEventListener(Ut,function(e){e=e.detail,an||nn(e)}));var on,an=!1,un=function(){};return"undefined"!=typeof BroadcastChannel&&((un=function(){(on=new BroadcastChannel(Ut)).onmessage=function(e){return e.data&&nn(e.data)}})(),"function"==typeof on.unref&&on.unref(),Lt(Nt,function(e){an||on.postMessage(e)})),"undefined"!=typeof addEventListener&&(addEventListener("pagehide",function(e){if(!Xr.disableBfCache&&e.persisted){oe&&console.debug("Dexie: handling persisted pagehide"),null!=on&&on.close();for(var t=0,r=et;t<r.length;t++)r[t].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!Xr.disableBfCache&&e.persisted&&(oe&&console.debug("Dexie: handling persisted pageshow"),un(),nn({all:new mr(-1/0,[[]])}))})),_e.rejectionMapper=function(e,t){return!e||e instanceof N||e instanceof TypeError||e instanceof SyntaxError||!e.name||!H[e.name]?e:(t=new H[e.name](t||e.message,e),"stack"in e&&h(t,"stack",{get:function(){return this.inner.stack}}),t)},ie(oe),t(Xr,Object.freeze({__proto__:null,Dexie:Xr,liveQuery:tn,Entity:ut,cmp:st,PropModification:pt,replacePrefix:function(e,t){return new pt({replacePrefix:[e,t]})},add:function(e){return new pt({add:e})},remove:function(e){return new pt({remove:e})},default:Xr,RangeSet:mr,mergeRanges:br,rangesOverlap:wr}),{default:Xr}),Xr}()},7118:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Dexie:()=>a,DexieYProvider:()=>m,Entity:()=>p,PropModification:()=>h,RangeSet:()=>l,add:()=>y,cmp:()=>f,default:()=>g,liveQuery:()=>u,mergeRanges:()=>s,rangesOverlap:()=>c,remove:()=>v,replacePrefix:()=>d});var n=r(3744),o=r.n(n);const i=Symbol.for("Dexie"),a=globalThis[i]||(globalThis[i]=o());if(o().semVer!==a.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${o().semVer} and ${a.semVer}`);const{liveQuery:u,mergeRanges:s,rangesOverlap:c,RangeSet:l,cmp:f,Entity:p,PropModification:h,replacePrefix:d,add:y,remove:v,DexieYProvider:m}=a,g=a},2992:(e,t,r)=>{var n,o=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",n={};function o(e,t){if(!n[e]){n[e]={};for(var r=0;r<e.length;r++)n[e][e.charAt(r)]=r}return n[e][t]}var i={compressToBase64:function(e){if(null==e)return"";var r=i._compress(e,6,function(e){return t.charAt(e)});switch(r.length%4){default:case 0:return r;case 1:return r+"===";case 2:return r+"==";case 3:return r+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:i._decompress(e.length,32,function(r){return o(t,e.charAt(r))})},compressToUTF16:function(t){return null==t?"":i._compress(t,15,function(t){return e(t+32)})+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:i._decompress(e.length,16384,function(t){return e.charCodeAt(t)-32})},compressToUint8Array:function(e){for(var t=i.compress(e),r=new Uint8Array(2*t.length),n=0,o=t.length;n<o;n++){var a=t.charCodeAt(n);r[2*n]=a>>>8,r[2*n+1]=a%256}return r},decompressFromUint8Array:function(t){if(null==t)return i.decompress(t);for(var r=new Array(t.length/2),n=0,o=r.length;n<o;n++)r[n]=256*t[2*n]+t[2*n+1];var a=[];return r.forEach(function(t){a.push(e(t))}),i.decompress(a.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":i._compress(e,6,function(e){return r.charAt(e)})},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),i._decompress(e.length,32,function(t){return o(r,e.charAt(t))}))},compress:function(t){return i._compress(t,16,function(t){return e(t)})},_compress:function(e,t,r){if(null==e)return"";var n,o,i,a={},u={},s="",c="",l="",f=2,p=3,h=2,d=[],y=0,v=0;for(i=0;i<e.length;i+=1)if(s=e.charAt(i),Object.prototype.hasOwnProperty.call(a,s)||(a[s]=p++,u[s]=!0),c=l+s,Object.prototype.hasOwnProperty.call(a,c))l=c;else{if(Object.prototype.hasOwnProperty.call(u,l)){if(l.charCodeAt(0)<256){for(n=0;n<h;n++)y<<=1,v==t-1?(v=0,d.push(r(y)),y=0):v++;for(o=l.charCodeAt(0),n=0;n<8;n++)y=y<<1|1&o,v==t-1?(v=0,d.push(r(y)),y=0):v++,o>>=1}else{for(o=1,n=0;n<h;n++)y=y<<1|o,v==t-1?(v=0,d.push(r(y)),y=0):v++,o=0;for(o=l.charCodeAt(0),n=0;n<16;n++)y=y<<1|1&o,v==t-1?(v=0,d.push(r(y)),y=0):v++,o>>=1}0==--f&&(f=Math.pow(2,h),h++),delete u[l]}else for(o=a[l],n=0;n<h;n++)y=y<<1|1&o,v==t-1?(v=0,d.push(r(y)),y=0):v++,o>>=1;0==--f&&(f=Math.pow(2,h),h++),a[c]=p++,l=String(s)}if(""!==l){if(Object.prototype.hasOwnProperty.call(u,l)){if(l.charCodeAt(0)<256){for(n=0;n<h;n++)y<<=1,v==t-1?(v=0,d.push(r(y)),y=0):v++;for(o=l.charCodeAt(0),n=0;n<8;n++)y=y<<1|1&o,v==t-1?(v=0,d.push(r(y)),y=0):v++,o>>=1}else{for(o=1,n=0;n<h;n++)y=y<<1|o,v==t-1?(v=0,d.push(r(y)),y=0):v++,o=0;for(o=l.charCodeAt(0),n=0;n<16;n++)y=y<<1|1&o,v==t-1?(v=0,d.push(r(y)),y=0):v++,o>>=1}0==--f&&(f=Math.pow(2,h),h++),delete u[l]}else for(o=a[l],n=0;n<h;n++)y=y<<1|1&o,v==t-1?(v=0,d.push(r(y)),y=0):v++,o>>=1;0==--f&&(f=Math.pow(2,h),h++)}for(o=2,n=0;n<h;n++)y=y<<1|1&o,v==t-1?(v=0,d.push(r(y)),y=0):v++,o>>=1;for(;;){if(y<<=1,v==t-1){d.push(r(y));break}v++}return d.join("")},decompress:function(e){return null==e?"":""==e?null:i._decompress(e.length,32768,function(t){return e.charCodeAt(t)})},_decompress:function(t,r,n){var o,i,a,u,s,c,l,f=[],p=4,h=4,d=3,y="",v=[],m={val:n(0),position:r,index:1};for(o=0;o<3;o+=1)f[o]=o;for(a=0,s=Math.pow(2,2),c=1;c!=s;)u=m.val&m.position,m.position>>=1,0==m.position&&(m.position=r,m.val=n(m.index++)),a|=(u>0?1:0)*c,c<<=1;switch(a){case 0:for(a=0,s=Math.pow(2,8),c=1;c!=s;)u=m.val&m.position,m.position>>=1,0==m.position&&(m.position=r,m.val=n(m.index++)),a|=(u>0?1:0)*c,c<<=1;l=e(a);break;case 1:for(a=0,s=Math.pow(2,16),c=1;c!=s;)u=m.val&m.position,m.position>>=1,0==m.position&&(m.position=r,m.val=n(m.index++)),a|=(u>0?1:0)*c,c<<=1;l=e(a);break;case 2:return""}for(f[3]=l,i=l,v.push(l);;){if(m.index>t)return"";for(a=0,s=Math.pow(2,d),c=1;c!=s;)u=m.val&m.position,m.position>>=1,0==m.position&&(m.position=r,m.val=n(m.index++)),a|=(u>0?1:0)*c,c<<=1;switch(l=a){case 0:for(a=0,s=Math.pow(2,8),c=1;c!=s;)u=m.val&m.position,m.position>>=1,0==m.position&&(m.position=r,m.val=n(m.index++)),a|=(u>0?1:0)*c,c<<=1;f[h++]=e(a),l=h-1,p--;break;case 1:for(a=0,s=Math.pow(2,16),c=1;c!=s;)u=m.val&m.position,m.position>>=1,0==m.position&&(m.position=r,m.val=n(m.index++)),a|=(u>0?1:0)*c,c<<=1;f[h++]=e(a),l=h-1,p--;break;case 2:return v.join("")}if(0==p&&(p=Math.pow(2,d),d++),f[l])y=f[l];else{if(l!==h)return null;y=i+i.charAt(0)}v.push(y),f[h++]=i+y.charAt(0),i=y,0==--p&&(p=Math.pow(2,d),d++)}}};return i}();void 0===(n=function(){return o}.call(t,r,t,e))||(e.exports=n)},4994:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},9306:(e,t,r)=>{"use strict";var n=r(4901),o=r(6823),i=TypeError;e.exports=function(e){if(n(e))return e;throw new i(o(e)+" is not a function")}},3506:(e,t,r)=>{"use strict";var n=r(3925),o=String,i=TypeError;e.exports=function(e){if(n(e))return e;throw new i("Can't set "+o(e)+" as a prototype")}},3463:e=>{"use strict";var t=TypeError;e.exports=function(e){if("string"==typeof e)return e;throw new t("Argument is not a string")}},679:(e,t,r)=>{"use strict";var n=r(1625),o=TypeError;e.exports=function(e,t){if(n(t,e))return e;throw new o("Incorrect invocation")}},3972:(e,t,r)=>{"use strict";var n=r(34),o=String,i=TypeError;e.exports=function(e){if(void 0===e||n(e))return e;throw new i(o(e)+" is not an object or undefined")}},8551:(e,t,r)=>{"use strict";var n=r(34),o=String,i=TypeError;e.exports=function(e){if(n(e))return e;throw new i(o(e)+" is not an object")}},4154:(e,t,r)=>{"use strict";var n=r(6955),o=TypeError;e.exports=function(e){if("Uint8Array"===n(e))return e;throw new o("Argument is not an Uint8Array")}},7811:e=>{"use strict";e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},7394:(e,t,r)=>{"use strict";var n=r(4576),o=r(6706),i=r(2195),a=n.ArrayBuffer,u=n.TypeError;e.exports=a&&o(a.prototype,"byteLength","get")||function(e){if("ArrayBuffer"!==i(e))throw new u("ArrayBuffer expected");return e.byteLength}},3238:(e,t,r)=>{"use strict";var n=r(4576),o=r(7476),i=r(7394),a=n.ArrayBuffer,u=a&&a.prototype,s=u&&o(u.slice);e.exports=function(e){if(0!==i(e))return!1;if(!s)return!1;try{return s(e,0,0),!1}catch(e){return!0}}},5169:(e,t,r)=>{"use strict";var n=r(3238),o=TypeError;e.exports=function(e){if(n(e))throw new o("ArrayBuffer is detached");return e}},5636:(e,t,r)=>{"use strict";var n=r(4576),o=r(9504),i=r(6706),a=r(7696),u=r(5169),s=r(7394),c=r(4483),l=r(1548),f=n.structuredClone,p=n.ArrayBuffer,h=n.DataView,d=Math.min,y=p.prototype,v=h.prototype,m=o(y.slice),g=i(y,"resizable","get"),b=i(y,"maxByteLength","get"),w=o(v.getInt8),_=o(v.setInt8);e.exports=(l||c)&&function(e,t,r){var n,o=s(e),i=void 0===t?o:a(t),y=!g||!g(e);if(u(e),l&&(e=f(e,{transfer:[e]}),o===i&&(r||y)))return e;if(o>=i&&(!r||y))n=m(e,0,i);else{var v=r&&!y&&b?{maxByteLength:b(e)}:void 0;n=new p(i,v);for(var x=new h(e),O=new h(n),S=d(i,o),E=0;E<S;E++)_(O,E,w(x,E))}return l||c(e),n}},4644:(e,t,r)=>{"use strict";var n,o,i,a=r(7811),u=r(3724),s=r(4576),c=r(4901),l=r(34),f=r(9297),p=r(6955),h=r(6823),d=r(6699),y=r(6840),v=r(2106),m=r(1625),g=r(2787),b=r(2967),w=r(8227),_=r(3392),x=r(1181),O=x.enforce,S=x.get,E=s.Int8Array,A=E&&E.prototype,k=s.Uint8ClampedArray,T=k&&k.prototype,P=E&&g(E),j=A&&g(A),C=Object.prototype,R=s.TypeError,I=w("toStringTag"),K=_("TYPED_ARRAY_TAG"),D="TypedArrayConstructor",B=a&&!!b&&"Opera"!==p(s.opera),M=!1,F={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},q={BigInt64Array:8,BigUint64Array:8},N=function(e){var t=g(e);if(l(t)){var r=S(t);return r&&f(r,D)?r[D]:N(t)}},U=function(e){if(!l(e))return!1;var t=p(e);return f(F,t)||f(q,t)};for(n in F)(i=(o=s[n])&&o.prototype)?O(i)[D]=o:B=!1;for(n in q)(i=(o=s[n])&&o.prototype)&&(O(i)[D]=o);if((!B||!c(P)||P===Function.prototype)&&(P=function(){throw new R("Incorrect invocation")},B))for(n in F)s[n]&&b(s[n],P);if((!B||!j||j===C)&&(j=P.prototype,B))for(n in F)s[n]&&b(s[n].prototype,j);if(B&&g(T)!==j&&b(T,j),u&&!f(j,I))for(n in M=!0,v(j,I,{configurable:!0,get:function(){return l(this)?this[K]:void 0}}),F)s[n]&&d(s[n],K,n);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:B,TYPED_ARRAY_TAG:M&&K,aTypedArray:function(e){if(U(e))return e;throw new R("Target is not a typed array")},aTypedArrayConstructor:function(e){if(c(e)&&(!b||m(P,e)))return e;throw new R(h(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,r,n){if(u){if(r)for(var o in F){var i=s[o];if(i&&f(i.prototype,e))try{delete i.prototype[e]}catch(r){try{i.prototype[e]=t}catch(e){}}}j[e]&&!r||y(j,e,r?t:B&&A[e]||t,n)}},exportTypedArrayStaticMethod:function(e,t,r){var n,o;if(u){if(b){if(r)for(n in F)if((o=s[n])&&f(o,e))try{delete o[e]}catch(e){}if(P[e]&&!r)return;try{return y(P,e,r?t:B&&P[e]||t)}catch(e){}}for(n in F)!(o=s[n])||o[e]&&!r||y(o,e,t)}},getTypedArrayConstructor:N,isView:function(e){if(!l(e))return!1;var t=p(e);return"DataView"===t||f(F,t)||f(q,t)},isTypedArray:U,TypedArray:P,TypedArrayPrototype:j}},5370:(e,t,r)=>{"use strict";var n=r(6198);e.exports=function(e,t,r){for(var o=0,i=arguments.length>2?r:n(t),a=new e(i);i>o;)a[o]=t[o++];return a}},9617:(e,t,r)=>{"use strict";var n=r(5397),o=r(5610),i=r(6198),a=function(e){return function(t,r,a){var u=n(t),s=i(u);if(0===s)return!e&&-1;var c,l=o(a,s);if(e&&r!=r){for(;s>l;)if((c=u[l++])!=c)return!0}else for(;s>l;l++)if((e||l in u)&&u[l]===r)return e||l||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},3839:(e,t,r)=>{"use strict";var n=r(6080),o=r(7055),i=r(8981),a=r(6198),u=function(e){var t=1===e;return function(r,u,s){for(var c,l=i(r),f=o(l),p=a(f),h=n(u,s);p-- >0;)if(h(c=f[p],p,l))switch(e){case 0:return c;case 1:return p}return t?-1:void 0}};e.exports={findLast:u(0),findLastIndex:u(1)}},7628:(e,t,r)=>{"use strict";var n=r(6198);e.exports=function(e,t){for(var r=n(e),o=new t(r),i=0;i<r;i++)o[i]=e[r-i-1];return o}},9928:(e,t,r)=>{"use strict";var n=r(6198),o=r(1291),i=RangeError;e.exports=function(e,t,r,a){var u=n(e),s=o(r),c=s<0?u+s:s;if(c>=u||c<0)throw new i("Incorrect index");for(var l=new t(u),f=0;f<u;f++)l[f]=f===c?a:e[f];return l}},2804:e=>{"use strict";var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=t+"+/",n=t+"-_",o=function(e){for(var t={},r=0;r<64;r++)t[e.charAt(r)]=r;return t};e.exports={i2c:r,c2i:o(r),i2cUrl:n,c2iUrl:o(n)}},6319:(e,t,r)=>{"use strict";var n=r(8551),o=r(9539);e.exports=function(e,t,r,i){try{return i?t(n(r)[0],r[1]):t(r)}catch(t){o(e,"throw",t)}}},2195:(e,t,r)=>{"use strict";var n=r(9504),o=n({}.toString),i=n("".slice);e.exports=function(e){return i(o(e),8,-1)}},6955:(e,t,r)=>{"use strict";var n=r(2140),o=r(4901),i=r(2195),a=r(8227)("toStringTag"),u=Object,s="Arguments"===i(function(){return arguments}());e.exports=n?i:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=u(e),a))?r:s?i(t):"Object"===(n=i(t))&&o(t.callee)?"Arguments":n}},7740:(e,t,r)=>{"use strict";var n=r(9297),o=r(5031),i=r(7347),a=r(4913);e.exports=function(e,t,r){for(var u=o(t),s=a.f,c=i.f,l=0;l<u.length;l++){var f=u[l];n(e,f)||r&&n(r,f)||s(e,f,c(t,f))}}},2211:(e,t,r)=>{"use strict";var n=r(9039);e.exports=!n(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})},2529:e=>{"use strict";e.exports=function(e,t){return{value:e,done:t}}},6699:(e,t,r)=>{"use strict";var n=r(3724),o=r(4913),i=r(6980);e.exports=n?function(e,t,r){return o.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},6980:e=>{"use strict";e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},4659:(e,t,r)=>{"use strict";var n=r(3724),o=r(4913),i=r(6980);e.exports=function(e,t,r){n?o.f(e,t,i(0,r)):e[t]=r}},2106:(e,t,r)=>{"use strict";var n=r(283),o=r(4913);e.exports=function(e,t,r){return r.get&&n(r.get,t,{getter:!0}),r.set&&n(r.set,t,{setter:!0}),o.f(e,t,r)}},6840:(e,t,r)=>{"use strict";var n=r(4901),o=r(4913),i=r(283),a=r(9433);e.exports=function(e,t,r,u){u||(u={});var s=u.enumerable,c=void 0!==u.name?u.name:t;if(n(r)&&i(r,c,u),u.global)s?e[t]=r:a(t,r);else{try{u.unsafe?e[t]&&(s=!0):delete e[t]}catch(e){}s?e[t]=r:o.f(e,t,{value:r,enumerable:!1,configurable:!u.nonConfigurable,writable:!u.nonWritable})}return e}},6279:(e,t,r)=>{"use strict";var n=r(6840);e.exports=function(e,t,r){for(var o in t)n(e,o,t[o],r);return e}},9433:(e,t,r)=>{"use strict";var n=r(4576),o=Object.defineProperty;e.exports=function(e,t){try{o(n,e,{value:t,configurable:!0,writable:!0})}catch(r){n[e]=t}return t}},3724:(e,t,r)=>{"use strict";var n=r(9039);e.exports=!n(function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})},4483:(e,t,r)=>{"use strict";var n,o,i,a,u=r(4576),s=r(9429),c=r(1548),l=u.structuredClone,f=u.ArrayBuffer,p=u.MessageChannel,h=!1;if(c)h=function(e){l(e,{transfer:[e]})};else if(f)try{p||(n=s("worker_threads"))&&(p=n.MessageChannel),p&&(o=new p,i=new f(2),a=function(e){o.port1.postMessage(null,[e])},2===i.byteLength&&(a(i),0===i.byteLength&&(h=a)))}catch(e){}e.exports=h},4055:(e,t,r)=>{"use strict";var n=r(4576),o=r(34),i=n.document,a=o(i)&&o(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},8727:e=>{"use strict";e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},8574:(e,t,r)=>{"use strict";var n=r(4215);e.exports="NODE"===n},2839:(e,t,r)=>{"use strict";var n=r(4576).navigator,o=n&&n.userAgent;e.exports=o?String(o):""},9519:(e,t,r)=>{"use strict";var n,o,i=r(4576),a=r(2839),u=i.process,s=i.Deno,c=u&&u.versions||s&&s.version,l=c&&c.v8;l&&(o=(n=l.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!o&&a&&(!(n=a.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=a.match(/Chrome\/(\d+)/))&&(o=+n[1]),e.exports=o},4215:(e,t,r)=>{"use strict";var n=r(4576),o=r(2839),i=r(2195),a=function(e){return o.slice(0,e.length)===e};e.exports=a("Bun/")?"BUN":a("Cloudflare-Workers")?"CLOUDFLARE":a("Deno/")?"DENO":a("Node.js/")?"NODE":n.Bun&&"string"==typeof Bun.version?"BUN":n.Deno&&"object"==typeof Deno.version?"DENO":"process"===i(n.process)?"NODE":n.window&&n.document?"BROWSER":"REST"},6193:(e,t,r)=>{"use strict";var n=r(9504),o=Error,i=n("".replace),a=String(new o("zxcasd").stack),u=/\n\s*at [^:]*:[^\n]*/,s=u.test(a);e.exports=function(e,t){if(s&&"string"==typeof e&&!o.prepareStackTrace)for(;t--;)e=i(e,u,"");return e}},747:(e,t,r)=>{"use strict";var n=r(6699),o=r(6193),i=r(6249),a=Error.captureStackTrace;e.exports=function(e,t,r,u){i&&(a?a(e,t):n(e,"stack",o(r,u)))}},6249:(e,t,r)=>{"use strict";var n=r(9039),o=r(6980);e.exports=!n(function(){var e=new Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",o(1,7)),7!==e.stack)})},6518:(e,t,r)=>{"use strict";var n=r(4576),o=r(7347).f,i=r(6699),a=r(6840),u=r(9433),s=r(7740),c=r(2796);e.exports=function(e,t){var r,l,f,p,h,d=e.target,y=e.global,v=e.stat;if(r=y?n:v?n[d]||u(d,{}):n[d]&&n[d].prototype)for(l in t){if(p=t[l],f=e.dontCallGetSet?(h=o(r,l))&&h.value:r[l],!c(y?l:d+(v?".":"#")+l,e.forced)&&void 0!==f){if(typeof p==typeof f)continue;s(p,f)}(e.sham||f&&f.sham)&&i(p,"sham",!0),a(r,l,p,e)}}},9039:e=>{"use strict";e.exports=function(e){try{return!!e()}catch(e){return!0}}},8745:(e,t,r)=>{"use strict";var n=r(616),o=Function.prototype,i=o.apply,a=o.call;e.exports="object"==typeof Reflect&&Reflect.apply||(n?a.bind(i):function(){return a.apply(i,arguments)})},6080:(e,t,r)=>{"use strict";var n=r(7476),o=r(9306),i=r(616),a=n(n.bind);e.exports=function(e,t){return o(e),void 0===t?e:i?a(e,t):function(){return e.apply(t,arguments)}}},616:(e,t,r)=>{"use strict";var n=r(9039);e.exports=!n(function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})},9565:(e,t,r)=>{"use strict";var n=r(616),o=Function.prototype.call;e.exports=n?o.bind(o):function(){return o.apply(o,arguments)}},350:(e,t,r)=>{"use strict";var n=r(3724),o=r(9297),i=Function.prototype,a=n&&Object.getOwnPropertyDescriptor,u=o(i,"name"),s=u&&"something"===function(){}.name,c=u&&(!n||n&&a(i,"name").configurable);e.exports={EXISTS:u,PROPER:s,CONFIGURABLE:c}},6706:(e,t,r)=>{"use strict";var n=r(9504),o=r(9306);e.exports=function(e,t,r){try{return n(o(Object.getOwnPropertyDescriptor(e,t)[r]))}catch(e){}}},7476:(e,t,r)=>{"use strict";var n=r(2195),o=r(9504);e.exports=function(e){if("Function"===n(e))return o(e)}},9504:(e,t,r)=>{"use strict";var n=r(616),o=Function.prototype,i=o.call,a=n&&o.bind.bind(i,i);e.exports=n?a:function(e){return function(){return i.apply(e,arguments)}}},944:e=>{"use strict";var t=TypeError;e.exports=function(e){var r=e&&e.alphabet;if(void 0===r||"base64"===r||"base64url"===r)return r||"base64";throw new t("Incorrect `alphabet` option")}},9429:(e,t,r)=>{"use strict";var n=r(4576),o=r(8574);e.exports=function(e){if(o){try{return n.process.getBuiltinModule(e)}catch(e){}try{return Function('return require("'+e+'")')()}catch(e){}}}},7751:(e,t,r)=>{"use strict";var n=r(4576),o=r(4901);e.exports=function(e,t){return arguments.length<2?(r=n[e],o(r)?r:void 0):n[e]&&n[e][t];var r}},1767:e=>{"use strict";e.exports=function(e){return{iterator:e,next:e.next,done:!1}}},851:(e,t,r)=>{"use strict";var n=r(6955),o=r(5966),i=r(4117),a=r(6269),u=r(8227)("iterator");e.exports=function(e){if(!i(e))return o(e,u)||o(e,"@@iterator")||a[n(e)]}},81:(e,t,r)=>{"use strict";var n=r(9565),o=r(9306),i=r(8551),a=r(6823),u=r(851),s=TypeError;e.exports=function(e,t){var r=arguments.length<2?u(e):t;if(o(r))return i(n(r,e));throw new s(a(e)+" is not iterable")}},5966:(e,t,r)=>{"use strict";var n=r(9306),o=r(4117);e.exports=function(e,t){var r=e[t];return o(r)?void 0:n(r)}},4576:function(e,t,r){"use strict";var n=function(e){return e&&e.Math===Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||n("object"==typeof this&&this)||function(){return this}()||Function("return this")()},9297:(e,t,r)=>{"use strict";var n=r(9504),o=r(8981),i=n({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return i(o(e),t)}},421:e=>{"use strict";e.exports={}},397:(e,t,r)=>{"use strict";var n=r(7751);e.exports=n("document","documentElement")},5917:(e,t,r)=>{"use strict";var n=r(3724),o=r(9039),i=r(4055);e.exports=!n&&!o(function(){return 7!==Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a})},7055:(e,t,r)=>{"use strict";var n=r(9504),o=r(9039),i=r(2195),a=Object,u=n("".split);e.exports=o(function(){return!a("z").propertyIsEnumerable(0)})?function(e){return"String"===i(e)?u(e,""):a(e)}:a},3167:(e,t,r)=>{"use strict";var n=r(4901),o=r(34),i=r(2967);e.exports=function(e,t,r){var a,u;return i&&n(a=t.constructor)&&a!==r&&o(u=a.prototype)&&u!==r.prototype&&i(e,u),e}},3706:(e,t,r)=>{"use strict";var n=r(9504),o=r(4901),i=r(7629),a=n(Function.toString);o(i.inspectSource)||(i.inspectSource=function(e){return a(e)}),e.exports=i.inspectSource},7584:(e,t,r)=>{"use strict";var n=r(34),o=r(6699);e.exports=function(e,t){n(t)&&"cause"in t&&o(e,"cause",t.cause)}},1181:(e,t,r)=>{"use strict";var n,o,i,a=r(8622),u=r(4576),s=r(34),c=r(6699),l=r(9297),f=r(7629),p=r(6119),h=r(421),d="Object already initialized",y=u.TypeError,v=u.WeakMap;if(a||f.state){var m=f.state||(f.state=new v);m.get=m.get,m.has=m.has,m.set=m.set,n=function(e,t){if(m.has(e))throw new y(d);return t.facade=e,m.set(e,t),t},o=function(e){return m.get(e)||{}},i=function(e){return m.has(e)}}else{var g=p("state");h[g]=!0,n=function(e,t){if(l(e,g))throw new y(d);return t.facade=e,c(e,g,t),t},o=function(e){return l(e,g)?e[g]:{}},i=function(e){return l(e,g)}}e.exports={set:n,get:o,has:i,enforce:function(e){return i(e)?o(e):n(e,{})},getterFor:function(e){return function(t){var r;if(!s(t)||(r=o(t)).type!==e)throw new y("Incompatible receiver, "+e+" required");return r}}}},4209:(e,t,r)=>{"use strict";var n=r(8227),o=r(6269),i=n("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(o.Array===e||a[i]===e)}},1108:(e,t,r)=>{"use strict";var n=r(6955);e.exports=function(e){var t=n(e);return"BigInt64Array"===t||"BigUint64Array"===t}},4901:e=>{"use strict";var t="object"==typeof document&&document.all;e.exports=void 0===t&&void 0!==t?function(e){return"function"==typeof e||e===t}:function(e){return"function"==typeof e}},2796:(e,t,r)=>{"use strict";var n=r(9039),o=r(4901),i=/#|\.prototype\./,a=function(e,t){var r=s[u(e)];return r===l||r!==c&&(o(t)?n(t):!!t)},u=a.normalize=function(e){return String(e).replace(i,".").toLowerCase()},s=a.data={},c=a.NATIVE="N",l=a.POLYFILL="P";e.exports=a},4117:e=>{"use strict";e.exports=function(e){return null==e}},34:(e,t,r)=>{"use strict";var n=r(4901);e.exports=function(e){return"object"==typeof e?null!==e:n(e)}},3925:(e,t,r)=>{"use strict";var n=r(34);e.exports=function(e){return n(e)||null===e}},6395:e=>{"use strict";e.exports=!1},757:(e,t,r)=>{"use strict";var n=r(7751),o=r(4901),i=r(1625),a=r(7040),u=Object;e.exports=a?function(e){return"symbol"==typeof e}:function(e){var t=n("Symbol");return o(t)&&i(t.prototype,u(e))}},2652:(e,t,r)=>{"use strict";var n=r(6080),o=r(9565),i=r(8551),a=r(6823),u=r(4209),s=r(6198),c=r(1625),l=r(81),f=r(851),p=r(9539),h=TypeError,d=function(e,t){this.stopped=e,this.result=t},y=d.prototype;e.exports=function(e,t,r){var v,m,g,b,w,_,x,O=r&&r.that,S=!(!r||!r.AS_ENTRIES),E=!(!r||!r.IS_RECORD),A=!(!r||!r.IS_ITERATOR),k=!(!r||!r.INTERRUPTED),T=n(t,O),P=function(e){return v&&p(v,"normal",e),new d(!0,e)},j=function(e){return S?(i(e),k?T(e[0],e[1],P):T(e[0],e[1])):k?T(e,P):T(e)};if(E)v=e.iterator;else if(A)v=e;else{if(!(m=f(e)))throw new h(a(e)+" is not iterable");if(u(m)){for(g=0,b=s(e);b>g;g++)if((w=j(e[g]))&&c(y,w))return w;return new d(!1)}v=l(e,m)}for(_=E?e.next:v.next;!(x=o(_,v)).done;){try{w=j(x.value)}catch(e){p(v,"throw",e)}if("object"==typeof w&&w&&c(y,w))return w}return new d(!1)}},9539:(e,t,r)=>{"use strict";var n=r(9565),o=r(8551),i=r(5966);e.exports=function(e,t,r){var a,u;o(e);try{if(!(a=i(e,"return"))){if("throw"===t)throw r;return r}a=n(a,e)}catch(e){u=!0,a=e}if("throw"===t)throw r;if(u)throw a;return o(a),r}},9462:(e,t,r)=>{"use strict";var n=r(9565),o=r(2360),i=r(6699),a=r(6279),u=r(8227),s=r(1181),c=r(5966),l=r(7657).IteratorPrototype,f=r(2529),p=r(9539),h=u("toStringTag"),d="IteratorHelper",y="WrapForValidIterator",v=s.set,m=function(e){var t=s.getterFor(e?y:d);return a(o(l),{next:function(){var r=t(this);if(e)return r.nextHandler();try{var n=r.done?void 0:r.nextHandler();return f(n,r.done)}catch(e){throw r.done=!0,e}},return:function(){var r=t(this),o=r.iterator;if(r.done=!0,e){var i=c(o,"return");return i?n(i,o):f(void 0,!0)}if(r.inner)try{p(r.inner.iterator,"normal")}catch(e){return p(o,"throw",e)}return p(o,"normal"),f(void 0,!0)}})},g=m(!0),b=m(!1);i(b,h,"Iterator Helper"),e.exports=function(e,t){var r=function(r,n){n?(n.iterator=r.iterator,n.next=r.next):n=r,n.type=t?y:d,n.nextHandler=e,n.counter=0,n.done=!1,v(this,n)};return r.prototype=t?g:b,r}},713:(e,t,r)=>{"use strict";var n=r(9565),o=r(9306),i=r(8551),a=r(1767),u=r(9462),s=r(6319),c=u(function(){var e=this.iterator,t=i(n(this.next,e));if(!(this.done=!!t.done))return s(e,this.mapper,[t.value,this.counter++],!0)});e.exports=function(e){return i(this),o(e),new c(a(this),{mapper:e})}},7657:(e,t,r)=>{"use strict";var n,o,i,a=r(9039),u=r(4901),s=r(34),c=r(2360),l=r(2787),f=r(6840),p=r(8227),h=r(6395),d=p("iterator"),y=!1;[].keys&&("next"in(i=[].keys())?(o=l(l(i)))!==Object.prototype&&(n=o):y=!0),!s(n)||a(function(){var e={};return n[d].call(e)!==e})?n={}:h&&(n=c(n)),u(n[d])||f(n,d,function(){return this}),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:y}},6269:e=>{"use strict";e.exports={}},6198:(e,t,r)=>{"use strict";var n=r(8014);e.exports=function(e){return n(e.length)}},283:(e,t,r)=>{"use strict";var n=r(9504),o=r(9039),i=r(4901),a=r(9297),u=r(3724),s=r(350).CONFIGURABLE,c=r(3706),l=r(1181),f=l.enforce,p=l.get,h=String,d=Object.defineProperty,y=n("".slice),v=n("".replace),m=n([].join),g=u&&!o(function(){return 8!==d(function(){},"length",{value:8}).length}),b=String(String).split("String"),w=e.exports=function(e,t,r){"Symbol("===y(h(t),0,7)&&(t="["+v(h(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),r&&r.getter&&(t="get "+t),r&&r.setter&&(t="set "+t),(!a(e,"name")||s&&e.name!==t)&&(u?d(e,"name",{value:t,configurable:!0}):e.name=t),g&&r&&a(r,"arity")&&e.length!==r.arity&&d(e,"length",{value:r.arity});try{r&&a(r,"constructor")&&r.constructor?u&&d(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var n=f(e);return a(n,"source")||(n.source=m(b,"string"==typeof t?t:"")),e};Function.prototype.toString=w(function(){return i(this)&&p(this).source||c(this)},"toString")},741:e=>{"use strict";var t=Math.ceil,r=Math.floor;e.exports=Math.trunc||function(e){var n=+e;return(n>0?r:t)(n)}},2603:(e,t,r)=>{"use strict";var n=r(655);e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:n(e)}},2360:(e,t,r)=>{"use strict";var n,o=r(8551),i=r(6801),a=r(8727),u=r(421),s=r(397),c=r(4055),l=r(6119),f="prototype",p="script",h=l("IE_PROTO"),d=function(){},y=function(e){return"<"+p+">"+e+"</"+p+">"},v=function(e){e.write(y("")),e.close();var t=e.parentWindow.Object;return e=null,t},m=function(){try{n=new ActiveXObject("htmlfile")}catch(e){}var e,t,r;m="undefined"!=typeof document?document.domain&&n?v(n):(t=c("iframe"),r="java"+p+":",t.style.display="none",s.appendChild(t),t.src=String(r),(e=t.contentWindow.document).open(),e.write(y("document.F=Object")),e.close(),e.F):v(n);for(var o=a.length;o--;)delete m[f][a[o]];return m()};u[h]=!0,e.exports=Object.create||function(e,t){var r;return null!==e?(d[f]=o(e),r=new d,d[f]=null,r[h]=e):r=m(),void 0===t?r:i.f(r,t)}},6801:(e,t,r)=>{"use strict";var n=r(3724),o=r(8686),i=r(4913),a=r(8551),u=r(5397),s=r(1072);t.f=n&&!o?Object.defineProperties:function(e,t){a(e);for(var r,n=u(t),o=s(t),c=o.length,l=0;c>l;)i.f(e,r=o[l++],n[r]);return e}},4913:(e,t,r)=>{"use strict";var n=r(3724),o=r(5917),i=r(8686),a=r(8551),u=r(6969),s=TypeError,c=Object.defineProperty,l=Object.getOwnPropertyDescriptor,f="enumerable",p="configurable",h="writable";t.f=n?i?function(e,t,r){if(a(e),t=u(t),a(r),"function"==typeof e&&"prototype"===t&&"value"in r&&h in r&&!r[h]){var n=l(e,t);n&&n[h]&&(e[t]=r.value,r={configurable:p in r?r[p]:n[p],enumerable:f in r?r[f]:n[f],writable:!1})}return c(e,t,r)}:c:function(e,t,r){if(a(e),t=u(t),a(r),o)try{return c(e,t,r)}catch(e){}if("get"in r||"set"in r)throw new s("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},7347:(e,t,r)=>{"use strict";var n=r(3724),o=r(9565),i=r(8773),a=r(6980),u=r(5397),s=r(6969),c=r(9297),l=r(5917),f=Object.getOwnPropertyDescriptor;t.f=n?f:function(e,t){if(e=u(e),t=s(t),l)try{return f(e,t)}catch(e){}if(c(e,t))return a(!o(i.f,e,t),e[t])}},8480:(e,t,r)=>{"use strict";var n=r(1828),o=r(8727).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,o)}},3717:(e,t)=>{"use strict";t.f=Object.getOwnPropertySymbols},2787:(e,t,r)=>{"use strict";var n=r(9297),o=r(4901),i=r(8981),a=r(6119),u=r(2211),s=a("IE_PROTO"),c=Object,l=c.prototype;e.exports=u?c.getPrototypeOf:function(e){var t=i(e);if(n(t,s))return t[s];var r=t.constructor;return o(r)&&t instanceof r?r.prototype:t instanceof c?l:null}},1625:(e,t,r)=>{"use strict";var n=r(9504);e.exports=n({}.isPrototypeOf)},1828:(e,t,r)=>{"use strict";var n=r(9504),o=r(9297),i=r(5397),a=r(9617).indexOf,u=r(421),s=n([].push);e.exports=function(e,t){var r,n=i(e),c=0,l=[];for(r in n)!o(u,r)&&o(n,r)&&s(l,r);for(;t.length>c;)o(n,r=t[c++])&&(~a(l,r)||s(l,r));return l}},1072:(e,t,r)=>{"use strict";var n=r(1828),o=r(8727);e.exports=Object.keys||function(e){return n(e,o)}},8773:(e,t)=>{"use strict";var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,o=n&&!r.call({1:2},1);t.f=o?function(e){var t=n(this,e);return!!t&&t.enumerable}:r},2967:(e,t,r)=>{"use strict";var n=r(6706),o=r(34),i=r(7750),a=r(3506);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=n(Object.prototype,"__proto__","set"))(r,[]),t=r instanceof Array}catch(e){}return function(r,n){return i(r),a(n),o(r)?(t?e(r,n):r.__proto__=n,r):r}}():void 0)},4270:(e,t,r)=>{"use strict";var n=r(9565),o=r(4901),i=r(34),a=TypeError;e.exports=function(e,t){var r,u;if("string"===t&&o(r=e.toString)&&!i(u=n(r,e)))return u;if(o(r=e.valueOf)&&!i(u=n(r,e)))return u;if("string"!==t&&o(r=e.toString)&&!i(u=n(r,e)))return u;throw new a("Can't convert object to primitive value")}},5031:(e,t,r)=>{"use strict";var n=r(7751),o=r(9504),i=r(8480),a=r(3717),u=r(8551),s=o([].concat);e.exports=n("Reflect","ownKeys")||function(e){var t=i.f(u(e)),r=a.f;return r?s(t,r(e)):t}},1056:(e,t,r)=>{"use strict";var n=r(4913).f;e.exports=function(e,t,r){r in e||n(e,r,{configurable:!0,get:function(){return t[r]},set:function(e){t[r]=e}})}},7750:(e,t,r)=>{"use strict";var n=r(4117),o=TypeError;e.exports=function(e){if(n(e))throw new o("Can't call method on "+e);return e}},6119:(e,t,r)=>{"use strict";var n=r(5745),o=r(3392),i=n("keys");e.exports=function(e){return i[e]||(i[e]=o(e))}},7629:(e,t,r)=>{"use strict";var n=r(6395),o=r(4576),i=r(9433),a="__core-js_shared__",u=e.exports=o[a]||i(a,{});(u.versions||(u.versions=[])).push({version:"3.38.1",mode:n?"pure":"global",copyright:" 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.38.1/LICENSE",source:"https://github.com/zloirock/core-js"})},5745:(e,t,r)=>{"use strict";var n=r(7629);e.exports=function(e,t){return n[e]||(n[e]=t||{})}},1548:(e,t,r)=>{"use strict";var n=r(4576),o=r(9039),i=r(9519),a=r(4215),u=n.structuredClone;e.exports=!!u&&!o(function(){if("DENO"===a&&i>92||"NODE"===a&&i>94||"BROWSER"===a&&i>97)return!1;var e=new ArrayBuffer(8),t=u(e,{transfer:[e]});return 0!==e.byteLength||8!==t.byteLength})},4495:(e,t,r)=>{"use strict";var n=r(9519),o=r(9039),i=r(4576).String;e.exports=!!Object.getOwnPropertySymbols&&!o(function(){var e=Symbol("symbol detection");return!i(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41})},5610:(e,t,r)=>{"use strict";var n=r(1291),o=Math.max,i=Math.min;e.exports=function(e,t){var r=n(e);return r<0?o(r+t,0):i(r,t)}},5854:(e,t,r)=>{"use strict";var n=r(2777),o=TypeError;e.exports=function(e){var t=n(e,"number");if("number"==typeof t)throw new o("Can't convert number to bigint");return BigInt(t)}},7696:(e,t,r)=>{"use strict";var n=r(1291),o=r(8014),i=RangeError;e.exports=function(e){if(void 0===e)return 0;var t=n(e),r=o(t);if(t!==r)throw new i("Wrong length or index");return r}},5397:(e,t,r)=>{"use strict";var n=r(7055),o=r(7750);e.exports=function(e){return n(o(e))}},1291:(e,t,r)=>{"use strict";var n=r(741);e.exports=function(e){var t=+e;return t!=t||0===t?0:n(t)}},8014:(e,t,r)=>{"use strict";var n=r(1291),o=Math.min;e.exports=function(e){var t=n(e);return t>0?o(t,9007199254740991):0}},8981:(e,t,r)=>{"use strict";var n=r(7750),o=Object;e.exports=function(e){return o(n(e))}},8229:(e,t,r)=>{"use strict";var n=r(9590),o=RangeError;e.exports=function(e,t){var r=n(e);if(r%t)throw new o("Wrong offset");return r}},9590:(e,t,r)=>{"use strict";var n=r(1291),o=RangeError;e.exports=function(e){var t=n(e);if(t<0)throw new o("The argument can't be less than 0");return t}},2777:(e,t,r)=>{"use strict";var n=r(9565),o=r(34),i=r(757),a=r(5966),u=r(4270),s=r(8227),c=TypeError,l=s("toPrimitive");e.exports=function(e,t){if(!o(e)||i(e))return e;var r,s=a(e,l);if(s){if(void 0===t&&(t="default"),r=n(s,e,t),!o(r)||i(r))return r;throw new c("Can't convert object to primitive value")}return void 0===t&&(t="number"),u(e,t)}},6969:(e,t,r)=>{"use strict";var n=r(2777),o=r(757);e.exports=function(e){var t=n(e,"string");return o(t)?t:t+""}},2140:(e,t,r)=>{"use strict";var n={};n[r(8227)("toStringTag")]="z",e.exports="[object z]"===String(n)},655:(e,t,r)=>{"use strict";var n=r(6955),o=String;e.exports=function(e){if("Symbol"===n(e))throw new TypeError("Cannot convert a Symbol value to a string");return o(e)}},6823:e=>{"use strict";var t=String;e.exports=function(e){try{return t(e)}catch(e){return"Object"}}},3392:(e,t,r)=>{"use strict";var n=r(9504),o=0,i=Math.random(),a=n(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+a(++o+i,36)}},9143:(e,t,r)=>{"use strict";var n=r(4576),o=r(9504),i=r(3972),a=r(3463),u=r(9297),s=r(2804),c=r(944),l=r(5169),f=s.c2i,p=s.c2iUrl,h=n.SyntaxError,d=n.TypeError,y=o("".charAt),v=function(e,t){for(var r=e.length;t<r;t++){var n=y(e,t);if(" "!==n&&"\t"!==n&&"\n"!==n&&"\f"!==n&&"\r"!==n)break}return t},m=function(e,t,r){var n=e.length;n<4&&(e+=2===n?"AA":"A");var o=(t[y(e,0)]<<18)+(t[y(e,1)]<<12)+(t[y(e,2)]<<6)+t[y(e,3)],i=[o>>16&255,o>>8&255,255&o];if(2===n){if(r&&0!==i[1])throw new h("Extra bits");return[i[0]]}if(3===n){if(r&&0!==i[2])throw new h("Extra bits");return[i[0],i[1]]}return i},g=function(e,t,r){for(var n=t.length,o=0;o<n;o++)e[r+o]=t[o];return r+n};e.exports=function(e,t,r,n){a(e),i(t);var o="base64"===c(t)?f:p,s=t?t.lastChunkHandling:void 0;if(void 0===s&&(s="loose"),"loose"!==s&&"strict"!==s&&"stop-before-partial"!==s)throw new d("Incorrect `lastChunkHandling` option");r&&l(r.buffer);var b=r||[],w=0,_=0,x="",O=0;if(n)for(;;){if((O=v(e,O))===e.length){if(x.length>0){if("stop-before-partial"===s)break;if("loose"!==s)throw new h("Missing padding");if(1===x.length)throw new h("Malformed padding: exactly one additional character");w=g(b,m(x,o,!1),w)}_=e.length;break}var S=y(e,O);if(++O,"="===S){if(x.length<2)throw new h("Padding is too early");if(O=v(e,O),2===x.length){if(O===e.length){if("stop-before-partial"===s)break;throw new h("Malformed padding: only one =")}"="===y(e,O)&&(++O,O=v(e,O))}if(O<e.length)throw new h("Unexpected character after padding");w=g(b,m(x,o,"strict"===s),w),_=e.length;break}if(!u(o,S))throw new h("Unexpected character");var E=n-w;if(1===E&&2===x.length||2===E&&3===x.length)break;if(4===(x+=S).length&&(w=g(b,m(x,o,!1),w),x="",_=O,w===n))break}return{bytes:b,read:_,written:w}}},2303:(e,t,r)=>{"use strict";var n=r(4576),o=r(9504),i=n.Uint8Array,a=n.SyntaxError,u=n.parseInt,s=Math.min,c=/[^\da-f]/i,l=o(c.exec),f=o("".slice);e.exports=function(e,t){var r=e.length;if(r%2!=0)throw new a("String should be an even number of characters");for(var n=t?s(t.length,r/2):r/2,o=t||new i(n),p=0,h=0;h<n;){var d=f(e,p,p+=2);if(l(c,d))throw new a("String should only contain hex characters");o[h++]=u(d,16)}return{bytes:o,read:p}}},7040:(e,t,r)=>{"use strict";var n=r(4495);e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},8686:(e,t,r)=>{"use strict";var n=r(3724),o=r(9039);e.exports=n&&o(function(){return 42!==Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},8622:(e,t,r)=>{"use strict";var n=r(4576),o=r(4901),i=n.WeakMap;e.exports=o(i)&&/native code/.test(String(i))},8227:(e,t,r)=>{"use strict";var n=r(4576),o=r(5745),i=r(9297),a=r(3392),u=r(4495),s=r(7040),c=n.Symbol,l=o("wks"),f=s?c.for||c:c&&c.withoutSetter||a;e.exports=function(e){return i(l,e)||(l[e]=u&&i(c,e)?c[e]:f("Symbol."+e)),l[e]}},4601:(e,t,r)=>{"use strict";var n=r(7751),o=r(9297),i=r(6699),a=r(1625),u=r(2967),s=r(7740),c=r(1056),l=r(3167),f=r(2603),p=r(7584),h=r(747),d=r(3724),y=r(6395);e.exports=function(e,t,r,v){var m="stackTraceLimit",g=v?2:1,b=e.split("."),w=b[b.length-1],_=n.apply(null,b);if(_){var x=_.prototype;if(!y&&o(x,"cause")&&delete x.cause,!r)return _;var O=n("Error"),S=t(function(e,t){var r=f(v?t:e,void 0),n=v?new _(e):new _;return void 0!==r&&i(n,"message",r),h(n,S,n.stack,2),this&&a(x,this)&&l(n,this,S),arguments.length>g&&p(n,arguments[g]),n});if(S.prototype=x,"Error"!==w?u?u(S,O):s(S,O,{name:!0}):d&&m in _&&(c(S,_,m),c(S,_,"prepareStackTrace")),s(S,_),!y)try{x.name!==w&&i(x,"name",w),x.constructor=S}catch(e){}return S}}},6573:(e,t,r)=>{"use strict";var n=r(3724),o=r(2106),i=r(3238),a=ArrayBuffer.prototype;n&&!("detached"in a)&&o(a,"detached",{configurable:!0,get:function(){return i(this)}})},7936:(e,t,r)=>{"use strict";var n=r(6518),o=r(5636);o&&n({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return o(this,arguments.length?arguments[0]:void 0,!1)}})},8100:(e,t,r)=>{"use strict";var n=r(6518),o=r(5636);o&&n({target:"ArrayBuffer",proto:!0},{transfer:function(){return o(this,arguments.length?arguments[0]:void 0,!0)}})},6280:(e,t,r)=>{"use strict";var n=r(6518),o=r(4576),i=r(8745),a=r(4601),u="WebAssembly",s=o[u],c=7!==new Error("e",{cause:7}).cause,l=function(e,t){var r={};r[e]=a(e,t,c),n({global:!0,constructor:!0,arity:1,forced:c},r)},f=function(e,t){if(s&&s[e]){var r={};r[e]=a(u+"."+e,t,c),n({target:u,stat:!0,constructor:!0,arity:1,forced:c},r)}};l("Error",function(e){return function(t){return i(e,this,arguments)}}),l("EvalError",function(e){return function(t){return i(e,this,arguments)}}),l("RangeError",function(e){return function(t){return i(e,this,arguments)}}),l("ReferenceError",function(e){return function(t){return i(e,this,arguments)}}),l("SyntaxError",function(e){return function(t){return i(e,this,arguments)}}),l("TypeError",function(e){return function(t){return i(e,this,arguments)}}),l("URIError",function(e){return function(t){return i(e,this,arguments)}}),f("CompileError",function(e){return function(t){return i(e,this,arguments)}}),f("LinkError",function(e){return function(t){return i(e,this,arguments)}}),f("RuntimeError",function(e){return function(t){return i(e,this,arguments)}})},8140:(e,t,r)=>{"use strict";var n=r(4644),o=r(6198),i=r(1291),a=n.aTypedArray;(0,n.exportTypedArrayMethod)("at",function(e){var t=a(this),r=o(t),n=i(e),u=n>=0?n:r+n;return u<0||u>=r?void 0:t[u]})},1134:(e,t,r)=>{"use strict";var n=r(4644),o=r(3839).findLastIndex,i=n.aTypedArray;(0,n.exportTypedArrayMethod)("findLastIndex",function(e){return o(i(this),e,arguments.length>1?arguments[1]:void 0)})},1903:(e,t,r)=>{"use strict";var n=r(4644),o=r(3839).findLast,i=n.aTypedArray;(0,n.exportTypedArrayMethod)("findLast",function(e){return o(i(this),e,arguments.length>1?arguments[1]:void 0)})},8845:(e,t,r)=>{"use strict";var n=r(4576),o=r(9565),i=r(4644),a=r(6198),u=r(8229),s=r(8981),c=r(9039),l=n.RangeError,f=n.Int8Array,p=f&&f.prototype,h=p&&p.set,d=i.aTypedArray,y=i.exportTypedArrayMethod,v=!c(function(){var e=new Uint8ClampedArray(2);return o(h,e,{length:1,0:3},1),3!==e[1]}),m=v&&i.NATIVE_ARRAY_BUFFER_VIEWS&&c(function(){var e=new f(2);return e.set(1),e.set("2",1),0!==e[0]||2!==e[1]});y("set",function(e){d(this);var t=u(arguments.length>1?arguments[1]:void 0,1),r=s(e);if(v)return o(h,this,r,t);var n=this.length,i=a(r),c=0;if(i+t>n)throw new l("Wrong length");for(;c<i;)this[t+c]=r[c++]},!v||m)},7467:(e,t,r)=>{"use strict";var n=r(7628),o=r(4644),i=o.aTypedArray,a=o.exportTypedArrayMethod,u=o.getTypedArrayConstructor;a("toReversed",function(){return n(i(this),u(this))})},4732:(e,t,r)=>{"use strict";var n=r(4644),o=r(9504),i=r(9306),a=r(5370),u=n.aTypedArray,s=n.getTypedArrayConstructor,c=n.exportTypedArrayMethod,l=o(n.TypedArrayPrototype.sort);c("toSorted",function(e){void 0!==e&&i(e);var t=u(this),r=a(s(t),t);return l(r,e)})},9577:(e,t,r)=>{"use strict";var n=r(9928),o=r(4644),i=r(1108),a=r(1291),u=r(5854),s=o.aTypedArray,c=o.getTypedArrayConstructor,l=o.exportTypedArrayMethod,f=!!function(){try{new Int8Array(1).with(2,{valueOf:function(){throw 8}})}catch(e){return 8===e}}();l("with",{with:function(e,t){var r=s(this),o=a(e),l=i(r)?u(t):+t;return n(r,c(r),o,l)}}.with,!f)},8992:(e,t,r)=>{"use strict";var n=r(6518),o=r(4576),i=r(679),a=r(8551),u=r(4901),s=r(2787),c=r(2106),l=r(4659),f=r(9039),p=r(9297),h=r(8227),d=r(7657).IteratorPrototype,y=r(3724),v=r(6395),m="constructor",g="Iterator",b=h("toStringTag"),w=TypeError,_=o[g],x=v||!u(_)||_.prototype!==d||!f(function(){_({})}),O=function(){if(i(this,d),s(this)===d)throw new w("Abstract class Iterator not directly constructable")},S=function(e,t){y?c(d,e,{configurable:!0,get:function(){return t},set:function(t){if(a(this),this===d)throw new w("You can't redefine this property");p(this,e)?this[e]=t:l(this,e,t)}}):d[e]=t};p(d,b)||S(b,g),!x&&p(d,m)&&d[m]!==Object||S(m,O),O.prototype=d,n({global:!0,constructor:!0,forced:x},{Iterator:O})},4520:(e,t,r)=>{"use strict";var n=r(6518),o=r(9565),i=r(9306),a=r(8551),u=r(1767),s=r(9462),c=r(6319),l=r(6395),f=s(function(){for(var e,t,r=this.iterator,n=this.predicate,i=this.next;;){if(e=a(o(i,r)),this.done=!!e.done)return;if(t=e.value,c(r,n,[t,this.counter++],!0))return t}});n({target:"Iterator",proto:!0,real:!0,forced:l},{filter:function(e){return a(this),i(e),new f(u(this),{predicate:e})}})},3949:(e,t,r)=>{"use strict";var n=r(6518),o=r(2652),i=r(9306),a=r(8551),u=r(1767);n({target:"Iterator",proto:!0,real:!0},{forEach:function(e){a(this),i(e);var t=u(this),r=0;o(t,function(t){e(t,r++)},{IS_RECORD:!0})}})},1454:(e,t,r)=>{"use strict";var n=r(6518),o=r(713);n({target:"Iterator",proto:!0,real:!0,forced:r(6395)},{map:o})},1795:(e,t,r)=>{"use strict";var n=r(6518),o=r(8551),i=r(2652),a=r(1767),u=[].push;n({target:"Iterator",proto:!0,real:!0},{toArray:function(){var e=[];return i(a(o(this)),u,{that:e,IS_RECORD:!0}),e}})},1549:(e,t,r)=>{"use strict";var n=r(6518),o=r(4576),i=r(9143),a=r(4154);o.Uint8Array&&n({target:"Uint8Array",proto:!0},{setFromBase64:function(e){a(this);var t=i(e,arguments.length>1?arguments[1]:void 0,this,this.length);return{read:t.read,written:t.written}}})},9797:(e,t,r)=>{"use strict";var n=r(6518),o=r(4576),i=r(3463),a=r(4154),u=r(5169),s=r(2303);o.Uint8Array&&n({target:"Uint8Array",proto:!0},{setFromHex:function(e){a(this),i(e),u(this.buffer);var t=s(e,this).read;return{read:t,written:t/2}}})},9631:(e,t,r)=>{"use strict";var n=r(6518),o=r(4576),i=r(9504),a=r(3972),u=r(4154),s=r(5169),c=r(2804),l=r(944),f=c.i2c,p=c.i2cUrl,h=i("".charAt);o.Uint8Array&&n({target:"Uint8Array",proto:!0},{toBase64:function(){var e=u(this),t=arguments.length?a(arguments[0]):void 0,r="base64"===l(t)?f:p,n=!!t&&!!t.omitPadding;s(this.buffer);for(var o,i="",c=0,d=e.length,y=function(e){return h(r,o>>6*e&63)};c+2<d;c+=3)o=(e[c]<<16)+(e[c+1]<<8)+e[c+2],i+=y(3)+y(2)+y(1)+y(0);return c+2===d?(o=(e[c]<<16)+(e[c+1]<<8),i+=y(3)+y(2)+y(1)+(n?"":"=")):c+1===d&&(o=e[c]<<16,i+=y(3)+y(2)+(n?"":"==")),i}})},5623:(e,t,r)=>{"use strict";var n=r(6518),o=r(4576),i=r(9504),a=r(4154),u=r(5169),s=i(1..toString);o.Uint8Array&&n({target:"Uint8Array",proto:!0},{toHex:function(){a(this),u(this.buffer);for(var e="",t=0,r=this.length;t<r;t++){var n=s(this[t],16);e+=1===n.length?"0"+n:n}return e}})}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};return(()=>{"use strict";var e=n;Object.defineProperty(e,"__esModule",{value:!0}),e.SmartContractWriter=void 0,r(6280),r(8992),r(3949);var t=r(7300);e.SmartContractWriter=class{constructor(e,t="users"){this.trackingKey=e,this.storeName=t}async execute(e,r=[],n={},o,i,a,u){try{const s=await new Promise(e=>{chrome.storage.sync.get(["serverUrl","serverKey"],t=>{e(t)})}),c=s.serverUrl||"http://localhost:3000",l=s.serverKey||"your_super_secure_api_key_here_make_it_long";if(!l){const e=new Error("API key not configured. Please set your API key in settings.");throw u&&u(e),e}const f=Array.isArray(r)?this._convertArgsToObject(e,r):r,p=await fetch(`${c}/write`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},body:JSON.stringify({methodName:e,arguments:f,walletAddress:i})}),h=await p.json();if(!p.ok)throw new Error(h.message||h.error||"Failed to write to smart contract");if(n&&o){const e=new t.DexieStorageAdapter;await e.initialize(),await e.save(this.storeName,o,{...n,transactionHash:h.transactionHash,requestId:h.requestId,timestamp:(new Date).toISOString()})}return a&&a(h),h}catch(e){throw console.error("SmartContractWriter error:",e),u&&u(e),e}}_convertArgsToObject(e,t){if(!Array.isArray(t)||0===t.length)return{};if(1===t.length&&"object"==typeof t[0]&&!Array.isArray(t[0]))return t[0];const r={};return t.forEach((e,t)=>{r[`arg${t}`]=e}),r}}})(),n})());