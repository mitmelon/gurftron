/*! For license information please see dashboard.js.LICENSE.txt */
!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(this,()=>(()=>{var __webpack_modules__={3562:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getHash=s,t.createCurve=function(e,t){const r=t=>(0,i.weierstrass)({...e,...s(t)});return Object.freeze({...r(t),create:r})};const n=r(9615),o=r(9175),i=r(1705);function s(e){return{hash:e,hmac:(t,...r)=>(0,n.hmac)(e,t,(0,o.concatBytes)(...r)),randomBytes:o.randomBytes}}},2422:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wNAF=function(e,t){return{constTimeNegate:a,hasPrecomputes:e=>1!==p(e),unsafeLadder(t,r,n=e.ZERO){let o=t;for(;r>i;)r&s&&(n=n.add(o)),o=o.double(),r>>=s;return n},precomputeWindow(e,r){const{windows:n,windowSize:o}=l(r,t),i=[];let s=e,a=s;for(let e=0;e<n;e++){a=s,i.push(a);for(let e=1;e<o;e++)a=a.add(s),i.push(a);s=a.double()}return i},wNAF(r,n,o){const{windows:i,windowSize:c}=l(r,t);let u=e.ZERO,d=e.BASE;const h=BigInt(2**r-1),f=2**r,p=BigInt(r);for(let e=0;e<i;e++){const t=e*c;let r=Number(o&h);o>>=p,r>c&&(r-=f,o+=s);const i=t,l=t+Math.abs(r)-1,g=e%2!=0,y=r<0;0===r?d=d.add(a(g,n[i])):u=u.add(a(y,n[l]))}return{p:u,f:d}},wNAFUnsafe(r,n,o,a=e.ZERO){const{windows:c,windowSize:u}=l(r,t),d=BigInt(2**r-1),h=2**r,f=BigInt(r);for(let e=0;e<c;e++){const t=e*u;if(o===i)break;let r=Number(o&d);if(o>>=f,r>u&&(r-=h,o+=s),0===r)continue;let c=n[t+Math.abs(r)-1];r<0&&(c=c.negate()),a=a.add(c)}return a},getPrecomputes(e,t,r){let n=h.get(t);return n||(n=this.precomputeWindow(t,e),1!==e&&h.set(t,r(n))),n},wNAFCached(e,t,r){const n=p(e);return this.wNAF(n,this.getPrecomputes(n,e,r),t)},wNAFCachedUnsafe(e,t,r,n){const o=p(e);return 1===o?this.unsafeLadder(e,t,n):this.wNAFUnsafe(o,this.getPrecomputes(o,e,r),t,n)},setWindowSize(e,r){c(r,t),f.set(e,r),h.delete(e)}}},t.pippenger=function(e,t,r,n){if(u(r,e),d(n,t),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const i=e.ZERO,s=(0,o.bitLen)(BigInt(r.length)),a=s>12?s-3:s>4?s-2:s?2:1,c=(1<<a)-1,l=new Array(c+1).fill(i);let h=i;for(let e=Math.floor((t.BITS-1)/a)*a;e>=0;e-=a){l.fill(i);for(let t=0;t<n.length;t++){const o=n[t],i=Number(o>>BigInt(e)&BigInt(c));l[i]=l[i].add(r[t])}let t=i;for(let e=l.length-1,r=i;e>0;e--)r=r.add(l[e]),t=t.add(r);if(h=h.add(t),0!==e)for(let e=0;e<a;e++)h=h.double()}return h},t.precomputeMSMUnsafe=function(e,t,r,n){c(n,t.BITS),u(r,e);const o=e.ZERO,i=2**n-1,s=Math.ceil(t.BITS/n),a=BigInt((1<<n)-1),l=r.map(e=>{const t=[];for(let r=0,n=e;r<i;r++)t.push(n),n=n.add(e);return t});return e=>{if(d(e,t),e.length>r.length)throw new Error("array of scalars must be smaller than array of points");let i=o;for(let t=0;t<s;t++){if(i!==o)for(let e=0;e<n;e++)i=i.double();const r=BigInt(s*n-(t+1)*n);for(let t=0;t<e.length;t++){const n=e[t],o=Number(n>>r&a);o&&(i=i.add(l[t][o-1]))}}return i}},t.validateBasic=function(e){return(0,n.validateField)(e.Fp),(0,o.validateObject)(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,n.nLength)(e.n,e.nBitLength),...e,p:e.Fp.ORDER})};const n=r(4967),o=r(1484),i=BigInt(0),s=BigInt(1);function a(e,t){const r=t.negate();return e?r:t}function c(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function l(e,t){return c(e,t),{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)}}function u(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((e,r)=>{if(!(e instanceof t))throw new Error("invalid point at index "+r)})}function d(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((e,r)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+r)})}const h=new WeakMap,f=new WeakMap;function p(e){return f.get(e)||1}},1761:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.expand_message_xmd=l,t.expand_message_xof=u,t.hash_to_field=d,t.isogenyMap=function(e,t){const r=t.map(e=>Array.from(e).reverse());return(t,n)=>{const[o,i,s,a]=r.map(r=>r.reduce((r,n)=>e.add(e.mul(r,t),n)));return t=e.div(o,i),n=e.mul(n,e.div(s,a)),{x:t,y:n}}},t.createHasher=function(e,t,r){if("function"!=typeof t)throw new Error("mapToCurve() must be defined");return{hashToCurve(n,o){const i=d(n,2,{...r,DST:r.DST,...o}),s=e.fromAffine(t(i[0])),a=e.fromAffine(t(i[1])),c=s.add(a).clearCofactor();return c.assertValidity(),c},encodeToCurve(n,o){const i=d(n,1,{...r,DST:r.encodeDST,...o}),s=e.fromAffine(t(i[0])).clearCofactor();return s.assertValidity(),s},mapToCurve(r){if(!Array.isArray(r))throw new Error("mapToCurve: expected array of bigints");for(const e of r)if("bigint"!=typeof e)throw new Error("mapToCurve: expected array of bigints");const n=e.fromAffine(t(r)).clearCofactor();return n.assertValidity(),n}}};const n=r(4967),o=r(1484),i=o.bytesToNumberBE;function s(e,t){if(c(e),c(t),e<0||e>=1<<8*t)throw new Error("invalid I2OSP input: "+e);const r=Array.from({length:t}).fill(0);for(let n=t-1;n>=0;n--)r[n]=255&e,e>>>=8;return new Uint8Array(r)}function a(e,t){const r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e[n]^t[n];return r}function c(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function l(e,t,r,n){(0,o.abytes)(e),(0,o.abytes)(t),c(r),t.length>255&&(t=n((0,o.concatBytes)((0,o.utf8ToBytes)("H2C-OVERSIZE-DST-"),t)));const{outputLen:i,blockLen:l}=n,u=Math.ceil(r/i);if(r>65535||u>255)throw new Error("expand_message_xmd: invalid lenInBytes");const d=(0,o.concatBytes)(t,s(t.length,1)),h=s(0,l),f=s(r,2),p=new Array(u),g=n((0,o.concatBytes)(h,e,f,s(0,1),d));p[0]=n((0,o.concatBytes)(g,s(1,1),d));for(let e=1;e<=u;e++){const t=[a(g,p[e-1]),s(e+1,1),d];p[e]=n((0,o.concatBytes)(...t))}return(0,o.concatBytes)(...p).slice(0,r)}function u(e,t,r,n,i){if((0,o.abytes)(e),(0,o.abytes)(t),c(r),t.length>255){const e=Math.ceil(2*n/8);t=i.create({dkLen:e}).update((0,o.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(t).digest()}if(r>65535||t.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:r}).update(e).update(s(r,2)).update(t).update(s(t.length,1)).digest()}function d(e,t,r){(0,o.validateObject)(r,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:s,k:a,m:d,hash:h,expand:f,DST:p}=r;(0,o.abytes)(e),c(t);const g="string"==typeof p?(0,o.utf8ToBytes)(p):p,y=s.toString(2).length,m=Math.ceil((y+a)/8),b=t*d*m;let w;if("xmd"===f)w=l(e,g,b,h);else if("xof"===f)w=u(e,g,b,a,h);else{if("_internal_pass"!==f)throw new Error('expand must be "xmd" or "xof"');w=e}const v=new Array(t);for(let e=0;e<t;e++){const t=new Array(d);for(let r=0;r<d;r++){const o=m*(r+e*d),a=w.subarray(o,o+m);t[r]=(0,n.mod)(i(a),s)}v[e]=t}return v}},4967:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isNegativeLE=void 0,t.mod=d,t.pow=h,t.pow2=function(e,t,r){let n=e;for(;t-- >o;)n*=n,n%=r;return n},t.invert=f,t.tonelliShanks=p,t.FpSqrt=g,t.validateField=function(e){const t=y.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return(0,n.validateObject)(e,t)},t.FpPow=m,t.FpInvertBatch=b,t.FpDiv=function(e,t,r){return e.mul(t,"bigint"==typeof r?f(r,e.ORDER):e.inv(r))},t.FpLegendre=w,t.FpIsSquare=function(e){const t=w(e.ORDER);return r=>{const n=t(e,r);return e.eql(n,e.ZERO)||e.eql(n,e.ONE)}},t.nLength=v,t.Field=function(e,t,r=!1,s={}){if(e<=o)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:a,nByteLength:c}=v(e,t);if(c>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let l;const u=Object.freeze({ORDER:e,BITS:a,BYTES:c,MASK:(0,n.bitMask)(a),ZERO:o,ONE:i,create:t=>d(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("invalid field element: expected bigint, got "+typeof t);return o<=t&&t<e},is0:e=>e===o,isOdd:e=>(e&i)===i,neg:t=>d(-t,e),eql:(e,t)=>e===t,sqr:t=>d(t*t,e),add:(t,r)=>d(t+r,e),sub:(t,r)=>d(t-r,e),mul:(t,r)=>d(t*r,e),pow:(e,t)=>m(u,e,t),div:(t,r)=>d(t*f(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>f(t,e),sqrt:s.sqrt||(t=>(l||(l=g(e)),l(u,t))),invertBatch:e=>b(u,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?(0,n.numberToBytesLE)(e,c):(0,n.numberToBytesBE)(e,c),fromBytes:e=>{if(e.length!==c)throw new Error("Field.fromBytes: expected "+c+" bytes, got "+e.length);return r?(0,n.bytesToNumberLE)(e):(0,n.bytesToNumberBE)(e)}});return Object.freeze(u)},t.FpSqrtOdd=function(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");const r=e.sqrt(t);return e.isOdd(r)?r:e.neg(r)},t.FpSqrtEven=function(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");const r=e.sqrt(t);return e.isOdd(r)?e.neg(r):r},t.hashToPrivateScalar=function(e,t,r=!1){const o=(e=(0,n.ensureBytes)("privateHash",e)).length,s=v(t).nByteLength+8;if(s<24||o<s||o>1024)throw new Error("hashToPrivateScalar: expected "+s+"-1024 bytes of input, got "+o);return d(r?(0,n.bytesToNumberLE)(e):(0,n.bytesToNumberBE)(e),t-i)+i},t.getFieldBytesLength=_,t.getMinHashLength=E,t.mapHashToField=function(e,t,r=!1){const o=e.length,s=_(t),a=E(t);if(o<16||o<a||o>1024)throw new Error("expected "+a+"-1024 bytes of input, got "+o);const c=d(r?(0,n.bytesToNumberBE)(e):(0,n.bytesToNumberLE)(e),t-i)+i;return r?(0,n.numberToBytesLE)(c,s):(0,n.numberToBytesBE)(c,s)};const n=r(1484),o=BigInt(0),i=BigInt(1),s=BigInt(2),a=BigInt(3),c=BigInt(4),l=BigInt(5),u=BigInt(8);function d(e,t){const r=e%t;return r>=o?r:t+r}function h(e,t,r){if(t<o)throw new Error("invalid exponent, negatives unsupported");if(r<=o)throw new Error("invalid modulus");if(r===i)return o;let n=i;for(;t>o;)t&i&&(n=n*e%r),e=e*e%r,t>>=i;return n}function f(e,t){if(e===o)throw new Error("invert: expected non-zero number");if(t<=o)throw new Error("invert: expected positive modulus, got "+t);let r=d(e,t),n=t,s=o,a=i,c=i,l=o;for(;r!==o;){const e=n/r,t=n%r,o=s-c*e,i=a-l*e;n=r,r=t,s=c,a=l,c=o,l=i}if(n!==i)throw new Error("invert: does not exist");return d(s,t)}function p(e){const t=(e-i)/s;let r,n,a;for(r=e-i,n=0;r%s===o;r/=s,n++);for(a=s;a<e&&h(a,t,e)!==e-i;a++)if(a>1e3)throw new Error("Cannot find square root: likely non-prime P");if(1===n){const t=(e+i)/c;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}const l=(r+i)/s;return function(e,o){if(e.pow(o,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let s=n,c=e.pow(e.mul(e.ONE,a),r),u=e.pow(o,l),d=e.pow(o,r);for(;!e.eql(d,e.ONE);){if(e.eql(d,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(d);t<s&&!e.eql(r,e.ONE);t++)r=e.sqr(r);const r=e.pow(c,i<<BigInt(s-t-1));c=e.sqr(r),u=e.mul(u,r),d=e.mul(d,c),s=t}return u}}function g(e){if(e%c===a){const t=(e+i)/c;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}if(e%u===l){const t=(e-l)/u;return function(e,r){const n=e.mul(r,s),o=e.pow(n,t),i=e.mul(r,o),a=e.mul(e.mul(i,s),o),c=e.mul(i,e.sub(a,e.ONE));if(!e.eql(e.sqr(c),r))throw new Error("Cannot find square root");return c}}return p(e)}t.isNegativeLE=(e,t)=>(d(e,t)&i)===i;const y=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function m(e,t,r){if(r<o)throw new Error("invalid exponent, negatives unsupported");if(r===o)return e.ONE;if(r===i)return t;let n=e.ONE,s=t;for(;r>o;)r&i&&(n=e.mul(n,s)),s=e.sqr(s),r>>=i;return n}function b(e,t){const r=new Array(t.length),n=t.reduce((t,n,o)=>e.is0(n)?t:(r[o]=t,e.mul(t,n)),e.ONE),o=e.inv(n);return t.reduceRight((t,n,o)=>e.is0(n)?t:(r[o]=e.mul(t,r[o]),e.mul(t,n)),o),r}function w(e){const t=(e-i)/s;return(e,r)=>e.pow(r,t)}function v(e,t){const r=void 0!==t?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function _(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function E(e){const t=_(e);return t+Math.ceil(t/2)}},5920:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateOpts=o,t.splitConstants=function(e,t){if("number"!=typeof t)throw new Error("poseidonSplitConstants: invalid t");if(!Array.isArray(e)||e.length%t)throw new Error("poseidonSplitConstants: invalid rc");const r=[];let n=[];for(let o=0;o<e.length;o++)n.push(e[o]),n.length===t&&(r.push(n),n=[]);return r},t.poseidon=function(e){const t=o(e),{Fp:r,mds:n,roundConstants:i,rounds:s,roundsPartial:a,sboxFn:c,t:l}=t,u=t.roundsFull/2,d=t.reversePartialPowIdx?l-1:0,h=(e,t,o)=>(e=e.map((e,t)=>r.add(e,i[o][t])),t?e=e.map(e=>c(e)):e[d]=c(e[d]),e=n.map(t=>t.reduce((t,n,o)=>r.add(t,r.mulN(n,e[o])),r.ZERO))),f=function(e){if(!Array.isArray(e)||e.length!==l)throw new Error("invalid values, expected array of bigints with length "+l);e=e.map(e=>{if("bigint"!=typeof e)throw new Error("invalid bigint="+e);return r.create(e)});let t=0;for(let r=0;r<u;r++)e=h(e,!0,t++);for(let r=0;r<a;r++)e=h(e,!1,t++);for(let r=0;r<u;r++)e=h(e,!0,t++);if(t!==s)throw new Error("invalid number of rounds");return e};return f.roundConstants=i,f};const n=r(4967);function o(e){const{Fp:t,mds:r,reversePartialPowIdx:o,roundConstants:i}=e,{roundsFull:s,roundsPartial:a,sboxPower:c,t:l}=e;(0,n.validateField)(t);for(const t of["t","roundsFull","roundsPartial"])if("number"!=typeof e[t]||!Number.isSafeInteger(e[t]))throw new Error("invalid number "+t);if(!Array.isArray(r)||r.length!==l)throw new Error("Poseidon: invalid MDS matrix");const u=r.map(e=>{if(!Array.isArray(e)||e.length!==l)throw new Error("invalid MDS matrix row: "+e);return e.map(e=>{if("bigint"!=typeof e)throw new Error("invalid MDS matrix bigint: "+e);return t.create(e)})});if(void 0!==o&&"boolean"!=typeof o)throw new Error("invalid param reversePartialPowIdx="+o);if(1&s)throw new Error("roundsFull is not even"+s);const d=s+a;if(!Array.isArray(i)||i.length!==d)throw new Error("Poseidon: invalid round constants");const h=i.map(e=>{if(!Array.isArray(e)||e.length!==l)throw new Error("invalid round constants");return e.map(e=>{if("bigint"!=typeof e||!t.isValid(e))throw new Error("invalid round constant");return t.create(e)})});if(!c||![3,5,7].includes(c))throw new Error("invalid sboxPower");const f=BigInt(c);let p=e=>(0,n.FpPow)(t,e,f);return 3===c?p=e=>t.mul(t.sqrN(e),e):5===c&&(p=e=>t.mul(t.sqrN(t.sqrN(e)),e)),Object.freeze({...e,rounds:d,sboxFn:p,roundConstants:h,mds:u})}},1484:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.notImplemented=t.bitMask=void 0,t.isBytes=i,t.abytes=s,t.abool=function(e,t){if("boolean"!=typeof t)throw new Error(e+" boolean expected, got "+t)},t.bytesToHex=c,t.numberToHexUnpadded=l,t.hexToNumber=u,t.hexToBytes=f,t.bytesToNumberBE=function(e){return u(c(e))},t.bytesToNumberLE=function(e){return s(e),u(c(Uint8Array.from(e).reverse()))},t.numberToBytesBE=p,t.numberToBytesLE=function(e,t){return p(e,t).reverse()},t.numberToVarBytesBE=function(e){return f(l(e))},t.ensureBytes=function(e,t,r){let n;if("string"==typeof t)try{n=f(t)}catch(t){throw new Error(e+" must be hex string or Uint8Array, cause: "+t)}else{if(!i(t))throw new Error(e+" must be hex string or Uint8Array");n=Uint8Array.from(t)}const o=n.length;if("number"==typeof r&&o!==r)throw new Error(e+" of length "+r+" expected, got "+o);return n},t.concatBytes=g,t.equalBytes=function(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return 0===r},t.utf8ToBytes=function(e){if("string"!=typeof e)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(e))},t.inRange=m,t.aInRange=function(e,t,r,n){if(!m(t,r,n))throw new Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)},t.bitLen=function(e){let t;for(t=0;e>r;e>>=n,t+=1);return t},t.bitGet=function(e,t){return e>>BigInt(t)&n},t.bitSet=function(e,t,o){return e|(o?n:r)<<BigInt(t)},t.createHmacDrbg=function(e,t,r){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof r)throw new Error("hmacFn must be a function");let n=b(e),o=b(e),i=0;const s=()=>{n.fill(1),o.fill(0),i=0},a=(...e)=>r(o,n,...e),c=(e=b())=>{o=a(w([0]),e),n=a(),0!==e.length&&(o=a(w([1]),e),n=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const r=[];for(;e<t;){n=a();const t=n.slice();r.push(t),e+=n.length}return g(...r)};return(e,t)=>{let r;for(s(),c(e);!(r=t(l()));)c();return s(),r}},t.validateObject=function(e,t,r={}){const n=(t,r,n)=>{const o=v[r];if("function"!=typeof o)throw new Error("invalid validator function");const i=e[t];if(!(n&&void 0===i||o(i,e)))throw new Error("param "+String(t)+" is invalid. Expected "+r+", got "+i)};for(const[e,r]of Object.entries(t))n(e,r,!1);for(const[e,t]of Object.entries(r))n(e,t,!0);return e},t.memoized=function(e){const t=new WeakMap;return(r,...n)=>{const o=t.get(r);if(void 0!==o)return o;const i=e(r,...n);return t.set(r,i),i}};const r=BigInt(0),n=BigInt(1),o=BigInt(2);function i(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function s(e){if(!i(e))throw new Error("Uint8Array expected")}const a=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function c(e){s(e);let t="";for(let r=0;r<e.length;r++)t+=a[e[r]];return t}function l(e){const t=e.toString(16);return 1&t.length?"0"+t:t}function u(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return""===e?r:BigInt("0x"+e)}const d={_0:48,_9:57,A:65,F:70,a:97,f:102};function h(e){return e>=d._0&&e<=d._9?e-d._0:e>=d.A&&e<=d.F?e-(d.A-10):e>=d.a&&e<=d.f?e-(d.a-10):void 0}function f(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let t=0,o=0;t<r;t++,o+=2){const r=h(e.charCodeAt(o)),i=h(e.charCodeAt(o+1));if(void 0===r||void 0===i){const t=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+o)}n[t]=16*r+i}return n}function p(e,t){return f(e.toString(16).padStart(2*t,"0"))}function g(...e){let t=0;for(let r=0;r<e.length;r++){const n=e[r];s(n),t+=n.length}const r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const o=e[t];r.set(o,n),n+=o.length}return r}const y=e=>"bigint"==typeof e&&r<=e;function m(e,t,r){return y(e)&&y(t)&&y(r)&&t<=e&&e<r}t.bitMask=e=>(o<<BigInt(e-1))-n;const b=e=>new Uint8Array(e),w=e=>Uint8Array.from(e),v={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||i(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};t.notImplemented=()=>{throw new Error("not implemented")}},1705:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DER=void 0,t.weierstrassPoints=g,t.weierstrass=function(e){const r=function(e){const t=(0,n.validateBasic)(e);return i.validateObject(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:c,n:l}=r,h=c.BYTES+1,f=2*c.BYTES+1;function p(e){return o.mod(e,l)}function y(e){return o.invert(e,l)}const{ProjectivePoint:m,normPrivateKeyToScalar:b,weierstrassEquation:w,isWithinCurveOrder:v}=g({...r,toBytes(e,t,r){const n=t.toAffine(),o=c.toBytes(n.x),a=i.concatBytes;return(0,s.abool)("isCompressed",r),r?a(Uint8Array.from([t.hasEvenY()?2:3]),o):a(Uint8Array.from([4]),o,c.toBytes(n.y))},fromBytes(e){const t=e.length,r=e[0],n=e.subarray(1);if(t!==h||2!==r&&3!==r){if(t===f&&4===r)return{x:c.fromBytes(n.subarray(0,c.BYTES)),y:c.fromBytes(n.subarray(c.BYTES,2*c.BYTES))};throw new Error("invalid Point, expected length of "+h+", or uncompressed "+f+", got "+t)}{const e=i.bytesToNumberBE(n);if(!i.inRange(e,d,c.ORDER))throw new Error("Point is not on curve");const t=w(e);let o;try{o=c.sqrt(t)}catch(e){const t=e instanceof Error?": "+e.message:"";throw new Error("Point is not on curve"+t)}return!(1&~r)!=((o&d)===d)&&(o=c.neg(o)),{x:e,y:o}}}}),_=e=>i.bytesToHex(i.numberToBytesBE(e,r.nByteLength));function E(e){return e>l>>d}const A=(e,t,r)=>i.bytesToNumberBE(e.slice(t,r));class S{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){const t=r.nByteLength;return e=(0,s.ensureBytes)("compactSignature",e,2*t),new S(A(e,0,t),A(e,t,2*t))}static fromDER(e){const{r,s:n}=t.DER.toSig((0,s.ensureBytes)("DER",e));return new S(r,n)}assertValidity(){i.aInRange("r",this.r,d,l),i.aInRange("s",this.s,d,l)}addRecoveryBit(e){return new S(this.r,this.s,e)}recoverPublicKey(e){const{r:t,s:n,recovery:o}=this,i=k((0,s.ensureBytes)("msgHash",e));if(null==o||![0,1,2,3].includes(o))throw new Error("recovery id invalid");const a=2===o||3===o?t+r.n:t;if(a>=c.ORDER)throw new Error("recovery id 2 or 3 invalid");const l=1&o?"03":"02",u=m.fromHex(l+_(a)),d=y(a),h=p(-i*d),f=p(n*d),g=m.BASE.multiplyAndAddUnsafe(u,h,f);if(!g)throw new Error("point at infinify");return g.assertValidity(),g}hasHighS(){return E(this.s)}normalizeS(){return this.hasHighS()?new S(this.r,p(-this.s),this.recovery):this}toDERRawBytes(){return i.hexToBytes(this.toDERHex())}toDERHex(){return t.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return i.hexToBytes(this.toCompactHex())}toCompactHex(){return _(this.r)+_(this.s)}}const x={isValidPrivateKey(e){try{return b(e),!0}catch(e){return!1}},normPrivateKeyToScalar:b,randomPrivateKey:()=>{const e=o.getMinHashLength(r.n);return o.mapHashToField(r.randomBytes(e),r.n)},precompute:(e=8,t=m.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function I(e){const t=i.isBytes(e),r="string"==typeof e,n=(t||r)&&e.length;return t?n===h||n===f:r?n===2*h||n===2*f:e instanceof m}const T=r.bits2int||function(e){if(e.length>8192)throw new Error("input is too large");const t=i.bytesToNumberBE(e),n=8*e.length-r.nBitLength;return n>0?t>>BigInt(n):t},k=r.bits2int_modN||function(e){return p(T(e))},M=i.bitMask(r.nBitLength);function O(e){return i.aInRange("num < 2^"+r.nBitLength,e,u,M),i.numberToBytesBE(e,r.nByteLength)}const N={lowS:r.lowS,prehash:!1},D={lowS:r.lowS,prehash:!1};return m.BASE._setWindowSize(8),{CURVE:r,getPublicKey:function(e,t=!0){return m.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,r=!0){if(I(e))throw new Error("first arg must be private key");if(!I(t))throw new Error("second arg must be public key");return m.fromHex(t).multiply(b(e)).toRawBytes(r)},sign:function(e,t,n=N){const{seed:o,k2sig:l}=function(e,t,n=N){if(["recovered","canonical"].some(e=>e in n))throw new Error("sign() legacy options not supported");const{hash:o,randomBytes:l}=r;let{lowS:h,prehash:f,extraEntropy:g}=n;null==h&&(h=!0),e=(0,s.ensureBytes)("msgHash",e),a(n),f&&(e=(0,s.ensureBytes)("prehashed msgHash",o(e)));const w=k(e),_=b(t),A=[O(_),O(w)];if(null!=g&&!1!==g){const e=!0===g?l(c.BYTES):g;A.push((0,s.ensureBytes)("extraEntropy",e))}const x=i.concatBytes(...A),I=w;return{seed:x,k2sig:function(e){const t=T(e);if(!v(t))return;const r=y(t),n=m.BASE.multiply(t).toAffine(),o=p(n.x);if(o===u)return;const i=p(r*p(I+o*_));if(i===u)return;let s=(n.x===o?0:2)|Number(n.y&d),a=i;return h&&E(i)&&(a=function(e){return E(e)?p(-e):e}(i),s^=1),new S(o,a,s)}}}(e,t,n),h=r;return i.createHmacDrbg(h.hash.outputLen,h.nByteLength,h.hmac)(o,l)},verify:function(e,n,o,c=D){const l=e;n=(0,s.ensureBytes)("msgHash",n),o=(0,s.ensureBytes)("publicKey",o);const{lowS:u,prehash:d,format:h}=c;if(a(c),"strict"in c)throw new Error("options.strict was renamed to lowS");if(void 0!==h&&"compact"!==h&&"der"!==h)throw new Error("format must be compact or der");const f="string"==typeof l||i.isBytes(l),g=!f&&!h&&"object"==typeof l&&null!==l&&"bigint"==typeof l.r&&"bigint"==typeof l.s;if(!f&&!g)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let b,w;try{if(g&&(b=new S(l.r,l.s)),f){try{"compact"!==h&&(b=S.fromDER(l))}catch(e){if(!(e instanceof t.DER.Err))throw e}b||"der"===h||(b=S.fromCompact(l))}w=m.fromHex(o)}catch(e){return!1}if(!b)return!1;if(u&&b.hasHighS())return!1;d&&(n=r.hash(n));const{r:v,s:_}=b,E=k(n),A=y(_),x=p(E*A),I=p(v*A),T=m.BASE.multiplyAndAddUnsafe(w,x,I)?.toAffine();return!!T&&p(T.x)===v},ProjectivePoint:m,Signature:S,utils:x}},t.SWUFpSqrtRatio=y,t.mapToCurveSimpleSWU=function(e,t){if(o.validateField(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const r=y(e,t.Z);if(!e.isOdd)throw new Error("Fp.isOdd is not implemented!");return n=>{let o,i,s,a,c,l,u,d;o=e.sqr(n),o=e.mul(o,t.Z),i=e.sqr(o),i=e.add(i,o),s=e.add(i,e.ONE),s=e.mul(s,t.B),a=e.cmov(t.Z,e.neg(i),!e.eql(i,e.ZERO)),a=e.mul(a,t.A),i=e.sqr(s),l=e.sqr(a),c=e.mul(l,t.A),i=e.add(i,c),i=e.mul(i,s),l=e.mul(l,a),c=e.mul(l,t.B),i=e.add(i,c),u=e.mul(o,s);const{isValid:h,value:f}=r(i,l);d=e.mul(o,n),d=e.mul(d,f),u=e.cmov(u,s,h),d=e.cmov(d,f,h);const p=e.isOdd(n)===e.isOdd(d);return d=e.cmov(e.neg(d),d,p),u=e.div(u,a),{x:u,y:d}}};const n=r(2422),o=r(4967),i=r(1484),s=r(1484);function a(e){void 0!==e.lowS&&(0,s.abool)("lowS",e.lowS),void 0!==e.prehash&&(0,s.abool)("prehash",e.prehash)}const{bytesToNumberBE:c,hexToBytes:l}=i;t.DER={Err:class extends Error{constructor(e=""){super(e)}},_tlv:{encode:(e,r)=>{const{Err:n}=t.DER;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(1&r.length)throw new n("tlv.encode: unpadded data");const o=r.length/2,s=i.numberToHexUnpadded(o);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const a=o>127?i.numberToHexUnpadded(s.length/2|128):"";return i.numberToHexUnpadded(e)+a+s+r},decode(e,r){const{Err:n}=t.DER;let o=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(r.length<2||r[o++]!==e)throw new n("tlv.decode: wrong tlv");const i=r[o++];let s=0;if(128&i){const e=127&i;if(!e)throw new n("tlv.decode(long): indefinite length not supported");if(e>4)throw new n("tlv.decode(long): byte length is too big");const t=r.subarray(o,o+e);if(t.length!==e)throw new n("tlv.decode: length bytes not complete");if(0===t[0])throw new n("tlv.decode(long): zero leftmost byte");for(const e of t)s=s<<8|e;if(o+=e,s<128)throw new n("tlv.decode(long): not minimal encoding")}else s=i;const a=r.subarray(o,o+s);if(a.length!==s)throw new n("tlv.decode: wrong value length");return{v:a,l:r.subarray(o+s)}}},_int:{encode(e){const{Err:r}=t.DER;if(e<u)throw new r("integer: negative integers are not allowed");let n=i.numberToHexUnpadded(e);if(8&Number.parseInt(n[0],16)&&(n="00"+n),1&n.length)throw new r("unexpected DER parsing assertion: unpadded hex");return n},decode(e){const{Err:r}=t.DER;if(128&e[0])throw new r("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new r("invalid signature integer: unnecessary leading zero");return c(e)}},toSig(e){const{Err:r,_int:n,_tlv:o}=t.DER,s="string"==typeof e?l(e):e;i.abytes(s);const{v:a,l:c}=o.decode(48,s);if(c.length)throw new r("invalid signature: left bytes after parsing");const{v:u,l:d}=o.decode(2,a),{v:h,l:f}=o.decode(2,d);if(f.length)throw new r("invalid signature: left bytes after parsing");return{r:n.decode(u),s:n.decode(h)}},hexFromSig(e){const{_tlv:r,_int:n}=t.DER,o=r.encode(2,n.encode(e.r))+r.encode(2,n.encode(e.s));return r.encode(48,o)}};const u=BigInt(0),d=BigInt(1),h=BigInt(2),f=BigInt(3),p=BigInt(4);function g(e){const t=function(e){const t=(0,n.validateBasic)(e);i.validateObject(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:o,a:s}=t;if(r){if(!o.eql(s,o.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:r}=t,a=o.Field(t.n,t.nBitLength),c=t.toBytes||((e,t,n)=>{const o=t.toAffine();return i.concatBytes(Uint8Array.from([4]),r.toBytes(o.x),r.toBytes(o.y))}),l=t.fromBytes||(e=>{const t=e.subarray(1);return{x:r.fromBytes(t.subarray(0,r.BYTES)),y:r.fromBytes(t.subarray(r.BYTES,2*r.BYTES))}});function h(e){const{a:n,b:o}=t,i=r.sqr(e),s=r.mul(i,e);return r.add(r.add(s,r.mul(e,n)),o)}if(!r.eql(r.sqr(t.Gy),h(t.Gx)))throw new Error("bad generator point: equation left != right");function p(e){const{allowedPrivateKeyLengths:r,nByteLength:n,wrapPrivateKey:a,n:c}=t;if(r&&"bigint"!=typeof e){if(i.isBytes(e)&&(e=i.bytesToHex(e)),"string"!=typeof e||!r.includes(e.length))throw new Error("invalid private key");e=e.padStart(2*n,"0")}let l;try{l="bigint"==typeof e?e:i.bytesToNumberBE((0,s.ensureBytes)("private key",e,n))}catch(t){throw new Error("invalid private key, expected hex or "+n+" bytes, got "+typeof e)}return a&&(l=o.mod(l,c)),i.aInRange("private key",l,d,c),l}function g(e){if(!(e instanceof b))throw new Error("ProjectivePoint expected")}const y=(0,s.memoized)((e,t)=>{const{px:n,py:o,pz:i}=e;if(r.eql(i,r.ONE))return{x:n,y:o};const s=e.is0();null==t&&(t=s?r.ONE:r.inv(i));const a=r.mul(n,t),c=r.mul(o,t),l=r.mul(i,t);if(s)return{x:r.ZERO,y:r.ZERO};if(!r.eql(l,r.ONE))throw new Error("invZ was invalid");return{x:a,y:c}}),m=(0,s.memoized)(e=>{if(e.is0()){if(t.allowInfinityPoint&&!r.is0(e.py))return;throw new Error("bad point: ZERO")}const{x:n,y:o}=e.toAffine();if(!r.isValid(n)||!r.isValid(o))throw new Error("bad point: x or y not FE");const i=r.sqr(o),s=h(n);if(!r.eql(i,s))throw new Error("bad point: equation left != right");if(!e.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class b{constructor(e,t,n){if(this.px=e,this.py=t,this.pz=n,null==e||!r.isValid(e))throw new Error("x required");if(null==t||!r.isValid(t))throw new Error("y required");if(null==n||!r.isValid(n))throw new Error("z required");Object.freeze(this)}static fromAffine(e){const{x:t,y:n}=e||{};if(!e||!r.isValid(t)||!r.isValid(n))throw new Error("invalid affine point");if(e instanceof b)throw new Error("projective point not allowed");const o=e=>r.eql(e,r.ZERO);return o(t)&&o(n)?b.ZERO:new b(t,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=r.invertBatch(e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(b.fromAffine)}static fromHex(e){const t=b.fromAffine(l((0,s.ensureBytes)("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return b.BASE.multiply(p(e))}static msm(e,t){return(0,n.pippenger)(b,a,e,t)}_setWindowSize(e){v.setWindowSize(this,e)}assertValidity(){m(this)}hasEvenY(){const{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){g(e);const{px:t,py:n,pz:o}=this,{px:i,py:s,pz:a}=e,c=r.eql(r.mul(t,a),r.mul(i,o)),l=r.eql(r.mul(n,a),r.mul(s,o));return c&&l}negate(){return new b(this.px,r.neg(this.py),this.pz)}double(){const{a:e,b:n}=t,o=r.mul(n,f),{px:i,py:s,pz:a}=this;let c=r.ZERO,l=r.ZERO,u=r.ZERO,d=r.mul(i,i),h=r.mul(s,s),p=r.mul(a,a),g=r.mul(i,s);return g=r.add(g,g),u=r.mul(i,a),u=r.add(u,u),c=r.mul(e,u),l=r.mul(o,p),l=r.add(c,l),c=r.sub(h,l),l=r.add(h,l),l=r.mul(c,l),c=r.mul(g,c),u=r.mul(o,u),p=r.mul(e,p),g=r.sub(d,p),g=r.mul(e,g),g=r.add(g,u),u=r.add(d,d),d=r.add(u,d),d=r.add(d,p),d=r.mul(d,g),l=r.add(l,d),p=r.mul(s,a),p=r.add(p,p),d=r.mul(p,g),c=r.sub(c,d),u=r.mul(p,h),u=r.add(u,u),u=r.add(u,u),new b(c,l,u)}add(e){g(e);const{px:n,py:o,pz:i}=this,{px:s,py:a,pz:c}=e;let l=r.ZERO,u=r.ZERO,d=r.ZERO;const h=t.a,p=r.mul(t.b,f);let y=r.mul(n,s),m=r.mul(o,a),w=r.mul(i,c),v=r.add(n,o),_=r.add(s,a);v=r.mul(v,_),_=r.add(y,m),v=r.sub(v,_),_=r.add(n,i);let E=r.add(s,c);return _=r.mul(_,E),E=r.add(y,w),_=r.sub(_,E),E=r.add(o,i),l=r.add(a,c),E=r.mul(E,l),l=r.add(m,w),E=r.sub(E,l),d=r.mul(h,_),l=r.mul(p,w),d=r.add(l,d),l=r.sub(m,d),d=r.add(m,d),u=r.mul(l,d),m=r.add(y,y),m=r.add(m,y),w=r.mul(h,w),_=r.mul(p,_),m=r.add(m,w),w=r.sub(y,w),w=r.mul(h,w),_=r.add(_,w),y=r.mul(m,_),u=r.add(u,y),y=r.mul(E,_),l=r.mul(v,l),l=r.sub(l,y),y=r.mul(v,m),d=r.mul(E,d),d=r.add(d,y),new b(l,u,d)}subtract(e){return this.add(e.negate())}is0(){return this.equals(b.ZERO)}wNAF(e){return v.wNAFCached(this,e,b.normalizeZ)}multiplyUnsafe(e){const{endo:n,n:o}=t;i.aInRange("scalar",e,u,o);const s=b.ZERO;if(e===u)return s;if(this.is0()||e===d)return this;if(!n||v.hasPrecomputes(this))return v.wNAFCachedUnsafe(this,e,b.normalizeZ);let{k1neg:a,k1:c,k2neg:l,k2:h}=n.splitScalar(e),f=s,p=s,g=this;for(;c>u||h>u;)c&d&&(f=f.add(g)),h&d&&(p=p.add(g)),g=g.double(),c>>=d,h>>=d;return a&&(f=f.negate()),l&&(p=p.negate()),p=new b(r.mul(p.px,n.beta),p.py,p.pz),f.add(p)}multiply(e){const{endo:n,n:o}=t;let s,a;if(i.aInRange("scalar",e,d,o),n){const{k1neg:t,k1:o,k2neg:i,k2:c}=n.splitScalar(e);let{p:l,f:u}=this.wNAF(o),{p:d,f:h}=this.wNAF(c);l=v.constTimeNegate(t,l),d=v.constTimeNegate(i,d),d=new b(r.mul(d.px,n.beta),d.py,d.pz),s=l.add(d),a=u.add(h)}else{const{p:t,f:r}=this.wNAF(e);s=t,a=r}return b.normalizeZ([s,a])[0]}multiplyAndAddUnsafe(e,t,r){const n=b.BASE,o=(e,t)=>t!==u&&t!==d&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),i=o(this,t).add(o(e,r));return i.is0()?void 0:i}toAffine(e){return y(this,e)}isTorsionFree(){const{h:e,isTorsionFree:r}=t;if(e===d)return!0;if(r)return r(b,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:r}=t;return e===d?this:r?r(b,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return(0,s.abool)("isCompressed",e),this.assertValidity(),c(b,this,e)}toHex(e=!0){return(0,s.abool)("isCompressed",e),i.bytesToHex(this.toRawBytes(e))}}b.BASE=new b(t.Gx,t.Gy,r.ONE),b.ZERO=new b(r.ZERO,r.ONE,r.ZERO);const w=t.nBitLength,v=(0,n.wNAF)(b,t.endo?Math.ceil(w/2):w);return{CURVE:t,ProjectivePoint:b,normPrivateKeyToScalar:p,weierstrassEquation:h,isWithinCurveOrder:function(e){return i.inRange(e,d,t.n)}}}function y(e,t){const r=e.ORDER;let n=u;for(let e=r-d;e%h===u;e/=h)n+=d;const o=n,i=h<<o-d-d,s=i*h,a=(r-d)/s,c=(a-d)/h,l=s-d,g=i,y=e.pow(t,a),m=e.pow(t,(a+d)/h);let b=(t,r)=>{let n=y,i=e.pow(r,l),s=e.sqr(i);s=e.mul(s,r);let a=e.mul(t,s);a=e.pow(a,c),a=e.mul(a,i),i=e.mul(a,r),s=e.mul(a,t);let u=e.mul(s,i);a=e.pow(u,g);let f=e.eql(a,e.ONE);i=e.mul(s,m),a=e.mul(u,n),s=e.cmov(i,s,f),u=e.cmov(a,u,f);for(let t=o;t>d;t--){let r=t-h;r=h<<r-d;let o=e.pow(u,r);const a=e.eql(o,e.ONE);i=e.mul(s,n),n=e.mul(n,n),o=e.mul(u,n),s=e.cmov(i,s,a),u=e.cmov(o,u,a)}return{isValid:f,value:s}};if(e.ORDER%p===f){const r=(e.ORDER-f)/p,n=e.sqrt(e.neg(t));b=(t,o)=>{let i=e.sqr(o);const s=e.mul(t,o);i=e.mul(i,s);let a=e.pow(i,r);a=e.mul(a,s);const c=e.mul(a,n),l=e.mul(e.sqr(a),o),u=e.eql(l,t);return{isValid:u,value:e.cmov(c,a,u)}}}return b}},8510:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encodeToCurve=t.hashToCurve=t.schnorr=t.secp256k1=void 0;const n=r(2623),o=r(9175),i=r(3562),s=r(1761),a=r(4967),c=r(1484),l=r(1705),u=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),d=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h=BigInt(1),f=BigInt(2),p=(e,t)=>(e+t/f)/t;function g(e){const t=u,r=BigInt(3),n=BigInt(6),o=BigInt(11),i=BigInt(22),s=BigInt(23),c=BigInt(44),l=BigInt(88),d=e*e*e%t,h=d*d*e%t,p=(0,a.pow2)(h,r,t)*h%t,g=(0,a.pow2)(p,r,t)*h%t,m=(0,a.pow2)(g,f,t)*d%t,b=(0,a.pow2)(m,o,t)*m%t,w=(0,a.pow2)(b,i,t)*b%t,v=(0,a.pow2)(w,c,t)*w%t,_=(0,a.pow2)(v,l,t)*v%t,E=(0,a.pow2)(_,c,t)*w%t,A=(0,a.pow2)(E,r,t)*h%t,S=(0,a.pow2)(A,s,t)*b%t,x=(0,a.pow2)(S,n,t)*d%t,I=(0,a.pow2)(x,f,t);if(!y.eql(y.sqr(I),e))throw new Error("Cannot find square root");return I}const y=(0,a.Field)(u,void 0,void 0,{sqrt:g});t.secp256k1=(0,i.createCurve)({a:BigInt(0),b:BigInt(7),Fp:y,n:d,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=d,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-h*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=r,s=BigInt("0x100000000000000000000000000000000"),c=p(i*e,t),l=p(-n*e,t);let u=(0,a.mod)(e-c*r-l*o,t),f=(0,a.mod)(-c*n-l*i,t);const g=u>s,y=f>s;if(g&&(u=t-u),y&&(f=t-f),u>s||f>s)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:g,k1:u,k2neg:y,k2:f}}}},n.sha256);const m=BigInt(0),b={};function w(e,...t){let r=b[e];if(void 0===r){const t=(0,n.sha256)(Uint8Array.from(e,e=>e.charCodeAt(0)));r=(0,c.concatBytes)(t,t),b[e]=r}return(0,n.sha256)((0,c.concatBytes)(r,...t))}const v=e=>e.toRawBytes(!0).slice(1),_=e=>(0,c.numberToBytesBE)(e,32),E=e=>(0,a.mod)(e,u),A=e=>(0,a.mod)(e,d),S=t.secp256k1.ProjectivePoint;function x(e){let r=t.secp256k1.utils.normPrivateKeyToScalar(e),n=S.fromPrivateKey(r);return{scalar:n.hasEvenY()?r:A(-r),bytes:v(n)}}function I(e){(0,c.aInRange)("x",e,h,u);const t=E(e*e);let r=g(E(t*e+BigInt(7)));r%f!==m&&(r=E(-r));const n=new S(e,r,h);return n.assertValidity(),n}const T=c.bytesToNumberBE;function k(...e){return A(T(w("BIP0340/challenge",...e)))}function M(e,t,r){const n=(0,c.ensureBytes)("signature",e,64),o=(0,c.ensureBytes)("message",t),i=(0,c.ensureBytes)("publicKey",r,32);try{const e=I(T(i)),t=T(n.subarray(0,32));if(!(0,c.inRange)(t,h,u))return!1;const r=T(n.subarray(32,64));if(!(0,c.inRange)(r,h,d))return!1;const f=k(_(t),v(e),o),p=(s=e,a=r,l=A(-f),S.BASE.multiplyAndAddUnsafe(s,a,l));return!(!p||!p.hasEvenY()||p.toAffine().x!==t)}catch(e){return!1}var s,a,l}t.schnorr={getPublicKey:function(e){return x(e).bytes},sign:function(e,t,r=(0,o.randomBytes)(32)){const n=(0,c.ensureBytes)("message",e),{bytes:i,scalar:s}=x(t),a=(0,c.ensureBytes)("auxRand",r,32),l=_(s^T(w("BIP0340/aux",a))),u=w("BIP0340/nonce",l,i,n),d=A(T(u));if(d===m)throw new Error("sign failed: k is zero");const{bytes:h,scalar:f}=x(d),p=k(h,i,n),g=new Uint8Array(64);if(g.set(h,0),g.set(_(A(f+p*s)),32),!M(g,n,i))throw new Error("sign: Invalid signature produced");return g},verify:M,utils:{randomPrivateKey:t.secp256k1.utils.randomPrivateKey,lift_x:I,pointToBytes:v,numberToBytesBE:c.numberToBytesBE,bytesToNumberBE:c.bytesToNumberBE,taggedHash:w,mod:a.mod}};const O=(()=>(0,s.isogenyMap)(y,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(e=>e.map(e=>BigInt(e)))))(),N=(()=>(0,l.mapToCurveSimpleSWU)(y,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:y.create(BigInt("-11"))}))(),D=(()=>(0,s.createHasher)(t.secp256k1.ProjectivePoint,e=>{const{x:t,y:r}=N(y.create(e[0]));return O(t,r)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:y.ORDER,m:1,k:128,expand:"xmd",hash:n.sha256}))();t.hashToCurve=D.hashToCurve,t.encodeToCurve=D.encodeToCurve},7557:(e,t)=>{"use strict";function r(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function n(e,...t){if(!((r=e)instanceof Uint8Array||ArrayBuffer.isView(r)&&"Uint8Array"===r.constructor.name))throw new Error("Uint8Array expected");var r;if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function o(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");r(e.outputLen),r(e.blockLen)}function i(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function s(e,t){n(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}Object.defineProperty(t,"__esModule",{value:!0}),t.anumber=r,t.number=r,t.abytes=n,t.bytes=n,t.ahash=o,t.aexists=i,t.aoutput=s;const a={number:r,bytes:n,hash:o,exists:i,output:s};t.default=a},7202:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HashMD=t.Maj=t.Chi=void 0;const n=r(7557),o=r(9175);t.Chi=(e,t,r)=>e&t^~e&r,t.Maj=(e,t,r)=>e&t^e&r^t&r;class i extends o.Hash{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,o.createView)(this.buffer)}update(e){(0,n.aexists)(this);const{view:t,buffer:r,blockLen:i}=this,s=(e=(0,o.toBytes)(e)).length;for(let n=0;n<s;){const a=Math.min(i-this.pos,s-n);if(a===i){const t=(0,o.createView)(e);for(;i<=s-n;n+=i)this.process(t,n);continue}r.set(e.subarray(n,n+a),this.pos),this.pos+=a,n+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,n.aexists)(this),(0,n.aoutput)(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:i,isLE:s}=this;let{pos:a}=this;t[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>i-a&&(this.process(r,0),a=0);for(let e=a;e<i;e++)t[e]=0;!function(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);const o=BigInt(32),i=BigInt(4294967295),s=Number(r>>o&i),a=Number(r&i),c=n?4:0,l=n?0:4;e.setUint32(t+c,s,n),e.setUint32(t+l,a,n)}(r,i-8,BigInt(8*this.length),s),this.process(r,0);const c=(0,o.createView)(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,d=this.get();if(u>d.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<u;e++)c.setUint32(4*e,d[e],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:n,finished:o,destroyed:i,pos:s}=this;return e.length=n,e.pos=s,e.finished=o,e.destroyed=i,n%t&&e.buffer.set(r),e}}t.HashMD=i},2318:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.add5L=t.add5H=t.add4H=t.add4L=t.add3H=t.add3L=t.rotlBL=t.rotlBH=t.rotlSL=t.rotlSH=t.rotr32L=t.rotr32H=t.rotrBL=t.rotrBH=t.rotrSL=t.rotrSH=t.shrSL=t.shrSH=t.toBig=void 0,t.fromBig=o,t.split=i,t.add=w;const r=BigInt(2**32-1),n=BigInt(32);function o(e,t=!1){return t?{h:Number(e&r),l:Number(e>>n&r)}:{h:0|Number(e>>n&r),l:0|Number(e&r)}}function i(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:a}=o(e[i],t);[r[i],n[i]]=[s,a]}return[r,n]}const s=(e,t)=>BigInt(e>>>0)<<n|BigInt(t>>>0);t.toBig=s;const a=(e,t,r)=>e>>>r;t.shrSH=a;const c=(e,t,r)=>e<<32-r|t>>>r;t.shrSL=c;const l=(e,t,r)=>e>>>r|t<<32-r;t.rotrSH=l;const u=(e,t,r)=>e<<32-r|t>>>r;t.rotrSL=u;const d=(e,t,r)=>e<<64-r|t>>>r-32;t.rotrBH=d;const h=(e,t,r)=>e>>>r-32|t<<64-r;t.rotrBL=h;const f=(e,t)=>t;t.rotr32H=f;const p=(e,t)=>e;t.rotr32L=p;const g=(e,t,r)=>e<<r|t>>>32-r;t.rotlSH=g;const y=(e,t,r)=>t<<r|e>>>32-r;t.rotlSL=y;const m=(e,t,r)=>t<<r-32|e>>>64-r;t.rotlBH=m;const b=(e,t,r)=>e<<r-32|t>>>64-r;function w(e,t,r,n){const o=(t>>>0)+(n>>>0);return{h:e+r+(o/2**32|0)|0,l:0|o}}t.rotlBL=b;const v=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0);t.add3L=v;const _=(e,t,r,n)=>t+r+n+(e/2**32|0)|0;t.add3H=_;const E=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0);t.add4L=E;const A=(e,t,r,n,o)=>t+r+n+o+(e/2**32|0)|0;t.add4H=A;const S=(e,t,r,n,o)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(o>>>0);t.add5L=S;const x=(e,t,r,n,o,i)=>t+r+n+o+i+(e/2**32|0)|0;t.add5H=x;const I={fromBig:o,split:i,toBig:s,shrSH:a,shrSL:c,rotrSH:l,rotrSL:u,rotrBH:d,rotrBL:h,rotr32H:f,rotr32L:p,rotlSH:g,rotlSL:y,rotlBH:m,rotlBL:b,add:w,add3L:v,add3H:_,add4L:E,add4H:A,add5H:x,add5L:S};t.default=I},5145:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.crypto=void 0,t.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0},9615:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hmac=t.HMAC=void 0;const n=r(7557),o=r(9175);class i extends o.Hash{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,(0,n.ahash)(e);const r=(0,o.toBytes)(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let e=0;e<s.length;e++)s[e]^=54;this.iHash.update(s),this.oHash=e.create();for(let e=0;e<s.length;e++)s[e]^=106;this.oHash.update(s),s.fill(0)}update(e){return(0,n.aexists)(this),this.iHash.update(e),this}digestInto(e){(0,n.aexists)(this),(0,n.abytes)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:n,destroyed:o,blockLen:i,outputLen:s}=this;return e.finished=n,e.destroyed=o,e.blockLen=i,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}t.HMAC=i,t.hmac=(e,t,r)=>new i(e,t).update(r).digest(),t.hmac.create=(e,t)=>new i(e,t)},2623:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sha224=t.sha256=t.SHA256=void 0;const n=r(7202),o=r(9175),i=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),s=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),a=new Uint32Array(64);class c extends n.HashMD{constructor(){super(64,32,8,!1),this.A=0|s[0],this.B=0|s[1],this.C=0|s[2],this.D=0|s[3],this.E=0|s[4],this.F=0|s[5],this.G=0|s[6],this.H=0|s[7]}get(){const{A:e,B:t,C:r,D:n,E:o,F:i,G:s,H:a}=this;return[e,t,r,n,o,i,s,a]}set(e,t,r,n,o,i,s,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|o,this.F=0|i,this.G=0|s,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)a[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=a[e-15],r=a[e-2],n=(0,o.rotr)(t,7)^(0,o.rotr)(t,18)^t>>>3,i=(0,o.rotr)(r,17)^(0,o.rotr)(r,19)^r>>>10;a[e]=i+a[e-7]+n+a[e-16]|0}let{A:r,B:s,C:c,D:l,E:u,F:d,G:h,H:f}=this;for(let e=0;e<64;e++){const t=f+((0,o.rotr)(u,6)^(0,o.rotr)(u,11)^(0,o.rotr)(u,25))+(0,n.Chi)(u,d,h)+i[e]+a[e]|0,p=((0,o.rotr)(r,2)^(0,o.rotr)(r,13)^(0,o.rotr)(r,22))+(0,n.Maj)(r,s,c)|0;f=h,h=d,d=u,u=l+t|0,l=c,c=s,s=r,r=t+p|0}r=r+this.A|0,s=s+this.B|0,c=c+this.C|0,l=l+this.D|0,u=u+this.E|0,d=d+this.F|0,h=h+this.G|0,f=f+this.H|0,this.set(r,s,c,l,u,d,h,f)}roundClean(){a.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}t.SHA256=c;class l extends c{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}t.sha256=(0,o.wrapConstructor)(()=>new c),t.sha224=(0,o.wrapConstructor)(()=>new l)},2955:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shake256=t.shake128=t.keccak_512=t.keccak_384=t.keccak_256=t.keccak_224=t.sha3_512=t.sha3_384=t.sha3_256=t.sha3_224=t.Keccak=void 0,t.keccakP=w;const n=r(7557),o=r(2318),i=r(9175),s=[],a=[],c=[],l=BigInt(0),u=BigInt(1),d=BigInt(2),h=BigInt(7),f=BigInt(256),p=BigInt(113);for(let e=0,t=u,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],s.push(2*(5*n+r)),a.push((e+1)*(e+2)/2%64);let o=l;for(let e=0;e<7;e++)t=(t<<u^(t>>h)*p)%f,t&d&&(o^=u<<(u<<BigInt(e))-u);c.push(o)}const[g,y]=(0,o.split)(c,!0),m=(e,t,r)=>r>32?(0,o.rotlBH)(e,t,r):(0,o.rotlSH)(e,t,r),b=(e,t,r)=>r>32?(0,o.rotlBL)(e,t,r):(0,o.rotlSL)(e,t,r);function w(e,t=24){const r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const n=(t+8)%10,o=(t+2)%10,i=r[o],s=r[o+1],a=m(i,s,1)^r[n],c=b(i,s,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=c}let t=e[2],o=e[3];for(let r=0;r<24;r++){const n=a[r],i=m(t,o,n),c=b(t,o,n),l=s[r];t=e[l],o=e[l+1],e[l]=i,e[l+1]=c}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=g[n],e[1]^=y[n]}r.fill(0)}class v extends i.Hash{constructor(e,t,r,o=!1,s=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=o,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,n.anumber)(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,i.u32)(this.state)}keccak(){i.isLE||(0,i.byteSwap32)(this.state32),w(this.state32,this.rounds),i.isLE||(0,i.byteSwap32)(this.state32),this.posOut=0,this.pos=0}update(e){(0,n.aexists)(this);const{blockLen:t,state:r}=this,o=(e=(0,i.toBytes)(e)).length;for(let n=0;n<o;){const i=Math.min(t-this.pos,o-n);for(let t=0;t<i;t++)r[this.pos++]^=e[n++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,128&t&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){(0,n.aexists)(this,!1),(0,n.abytes)(e),this.finish();const t=this.state,{blockLen:r}=this;for(let n=0,o=e.length;n<o;){this.posOut>=r&&this.keccak();const i=Math.min(r-this.posOut,o-n);e.set(t.subarray(this.posOut,this.posOut+i),n),this.posOut+=i,n+=i}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return(0,n.anumber)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,n.aoutput)(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:n,rounds:o,enableXOF:i}=this;return e||(e=new v(t,r,n,i,o)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=o,e.suffix=r,e.outputLen=n,e.enableXOF=i,e.destroyed=this.destroyed,e}}t.Keccak=v;const _=(e,t,r)=>(0,i.wrapConstructor)(()=>new v(t,e,r));t.sha3_224=_(6,144,28),t.sha3_256=_(6,136,32),t.sha3_384=_(6,104,48),t.sha3_512=_(6,72,64),t.keccak_224=_(1,144,28),t.keccak_256=_(1,136,32),t.keccak_384=_(1,104,48),t.keccak_512=_(1,72,64);const E=(e,t,r)=>(0,i.wrapXOFConstructorWithOpts)((n={})=>new v(t,e,void 0===n.dkLen?r:n.dkLen,!0));t.shake128=E(31,168,16),t.shake256=E(31,136,32)},9175:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Hash=t.nextTick=t.byteSwapIfBE=t.byteSwap=t.isLE=t.rotl=t.rotr=t.createView=t.u32=t.u8=void 0,t.isBytes=function(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name},t.byteSwap32=function(e){for(let r=0;r<e.length;r++)e[r]=(0,t.byteSwap)(e[r])},t.bytesToHex=function(e){(0,o.abytes)(e);let t="";for(let r=0;r<e.length;r++)t+=i[e[r]];return t},t.hexToBytes=function(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let t=0,o=0;t<r;t++,o+=2){const r=a(e.charCodeAt(o)),i=a(e.charCodeAt(o+1));if(void 0===r||void 0===i){const t=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+o)}n[t]=16*r+i}return n},t.asyncLoop=async function(e,r,n){let o=Date.now();for(let i=0;i<e;i++){n(i);const e=Date.now()-o;e>=0&&e<r||(await(0,t.nextTick)(),o+=e)}},t.utf8ToBytes=c,t.toBytes=l,t.concatBytes=function(...e){let t=0;for(let r=0;r<e.length;r++){const n=e[r];(0,o.abytes)(n),t+=n.length}const r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const o=e[t];r.set(o,n),n+=o.length}return r},t.checkOpts=function(e,t){if(void 0!==t&&"[object Object]"!=={}.toString.call(t))throw new Error("Options should be object or undefined");return Object.assign(e,t)},t.wrapConstructor=function(e){const t=t=>e().update(l(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t},t.wrapConstructorWithOpts=function(e){const t=(t,r)=>e(r).update(l(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t},t.wrapXOFConstructorWithOpts=function(e){const t=(t,r)=>e(r).update(l(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t},t.randomBytes=function(e=32){if(n.crypto&&"function"==typeof n.crypto.getRandomValues)return n.crypto.getRandomValues(new Uint8Array(e));if(n.crypto&&"function"==typeof n.crypto.randomBytes)return n.crypto.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")};const n=r(5145),o=r(7557);t.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength),t.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),t.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),t.rotr=(e,t)=>e<<32-t|e>>>t,t.rotl=(e,t)=>e<<t|e>>>32-t>>>0,t.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],t.byteSwap=e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255,t.byteSwapIfBE=t.isLE?e=>e:e=>(0,t.byteSwap)(e);const i=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0")),s={_0:48,_9:57,A:65,F:70,a:97,f:102};function a(e){return e>=s._0&&e<=s._9?e-s._0:e>=s.A&&e<=s.F?e-(s.A-10):e>=s.a&&e<=s.f?e-(s.a-10):void 0}function c(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function l(e){return"string"==typeof e&&(e=c(e)),(0,o.abytes)(e),e}t.nextTick=async()=>{},t.Hash=class{clone(){return this._cloneInto()}}},3203:(e,t)=>{"use strict";function r(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function n(e,t){return!!Array.isArray(t)&&(0===t.length||(e?t.every(e=>"string"==typeof e):t.every(e=>Number.isSafeInteger(e))))}function o(e){if("function"!=typeof e)throw new Error("function expected");return!0}function i(e,t){if("string"!=typeof t)throw new Error(`${e}: string expected`);return!0}function s(e){if(!Number.isSafeInteger(e))throw new Error(`invalid integer: ${e}`)}function a(e){if(!Array.isArray(e))throw new Error("array expected")}function c(e,t){if(!n(!0,t))throw new Error(`${e}: array of strings expected`)}function l(e,t){if(!n(!1,t))throw new Error(`${e}: array of numbers expected`)}function u(...e){const t=e=>e,r=(e,t)=>r=>e(t(r));return{encode:e.map(e=>e.encode).reduceRight(r,t),decode:e.map(e=>e.decode).reduce(r,t)}}function d(e){const t="string"==typeof e?e.split(""):e,r=t.length;c("alphabet",t);const n=new Map(t.map((e,t)=>[e,t]));return{encode:n=>(a(n),n.map(n=>{if(!Number.isSafeInteger(n)||n<0||n>=r)throw new Error(`alphabet.encode: digit index outside alphabet "${n}". Allowed: ${e}`);return t[n]})),decode:t=>(a(t),t.map(t=>{i("alphabet.decode",t);const r=n.get(t);if(void 0===r)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return r}))}}function h(e=""){return i("join",e),{encode:t=>(c("join.decode",t),t.join(e)),decode:t=>(i("join.decode",t),t.split(e))}}function f(e,t="="){return s(e),i("padding",t),{encode(r){for(c("padding.encode",r);r.length*e%8;)r.push(t);return r},decode(r){c("padding.decode",r);let n=r.length;if(n*e%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;n>0&&r[n-1]===t;n--)if((n-1)*e%8==0)throw new Error("padding: invalid, string has too much padding");return r.slice(0,n)}}}function p(e){return o(e),{encode:e=>e,decode:t=>e(t)}}function g(e,t,r){if(t<2)throw new Error(`convertRadix: invalid from=${t}, base cannot be less than 2`);if(r<2)throw new Error(`convertRadix: invalid to=${r}, base cannot be less than 2`);if(a(e),!e.length)return[];let n=0;const o=[],i=Array.from(e,e=>{if(s(e),e<0||e>=t)throw new Error(`invalid integer: ${e}`);return e}),c=i.length;for(;;){let e=0,s=!0;for(let o=n;o<c;o++){const a=i[o],c=t*e,l=c+a;if(!Number.isSafeInteger(l)||c/t!==e||l-a!==c)throw new Error("convertRadix: carry overflow");const u=l/r;e=l%r;const d=Math.floor(u);if(i[o]=d,!Number.isSafeInteger(d)||d*r+e!==l)throw new Error("convertRadix: carry overflow");s&&(d?s=!1:n=o)}if(o.push(e),s)break}for(let t=0;t<e.length-1&&0===e[t];t++)o.push(0);return o.reverse()}Object.defineProperty(t,"__esModule",{value:!0}),t.bytes=t.stringToBytes=t.str=t.bytesToString=t.hex=t.utf8=t.bech32m=t.bech32=t.base58check=t.createBase58check=t.base58xmr=t.base58xrp=t.base58flickr=t.base58=t.base64urlnopad=t.base64url=t.base64nopad=t.base64=t.base32crockford=t.base32hexnopad=t.base32hex=t.base32nopad=t.base32=t.base16=t.utils=t.assertNumber=void 0,t.assertNumber=s;const y=(e,t)=>0===t?e:y(t,e%t),m=(e,t)=>e+(t-y(e,t)),b=(()=>{let e=[];for(let t=0;t<40;t++)e.push(2**t);return e})();function w(e,t,r,n){if(a(e),t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw new Error(`convertRadix2: wrong to=${r}`);if(m(t,r)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${m(t,r)}`);let o=0,i=0;const c=b[t],l=b[r]-1,u=[];for(const n of e){if(s(n),n>=c)throw new Error(`convertRadix2: invalid data word=${n} from=${t}`);if(o=o<<t|n,i+t>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${t}`);for(i+=t;i>=r;i-=r)u.push((o>>i-r&l)>>>0);const e=b[i];if(void 0===e)throw new Error("invalid carry");o&=e-1}if(o=o<<r-i&l,!n&&i>=t)throw new Error("Excess padding");if(!n&&o>0)throw new Error(`Non-zero padding: ${o}`);return n&&i>0&&u.push(o>>>0),u}function v(e){return s(e),{encode:t=>{if(!r(t))throw new Error("radix.encode input should be Uint8Array");return g(Array.from(t),256,e)},decode:t=>(l("radix.decode",t),Uint8Array.from(g(t,e,256)))}}function _(e,t=!1){if(s(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(m(8,e)>32||m(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!r(n))throw new Error("radix2.encode input should be Uint8Array");return w(Array.from(n),8,e,!t)},decode:r=>(l("radix2.decode",r),Uint8Array.from(w(r,e,8,t)))}}function E(e){return o(e),function(...t){try{return e.apply(null,t)}catch(e){}}}function A(e,t){return s(e),o(t),{encode(n){if(!r(n))throw new Error("checksum.encode: input should be Uint8Array");const o=t(n).slice(0,e),i=new Uint8Array(n.length+e);return i.set(n),i.set(o,n.length),i},decode(n){if(!r(n))throw new Error("checksum.decode: input should be Uint8Array");const o=n.slice(0,-e),i=n.slice(-e),s=t(o).slice(0,e);for(let t=0;t<e;t++)if(s[t]!==i[t])throw new Error("Invalid checksum");return o}}}t.utils={alphabet:d,chain:u,checksum:A,convertRadix:g,convertRadix2:w,radix:v,radix2:_,join:h,padding:f},t.base16=u(_(4),d("0123456789ABCDEF"),h("")),t.base32=u(_(5),d("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),f(5),h("")),t.base32nopad=u(_(5),d("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),h("")),t.base32hex=u(_(5),d("0123456789ABCDEFGHIJKLMNOPQRSTUV"),f(5),h("")),t.base32hexnopad=u(_(5),d("0123456789ABCDEFGHIJKLMNOPQRSTUV"),h("")),t.base32crockford=u(_(5),d("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),h(""),p(e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),t.base64=u(_(6),d("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),f(6),h("")),t.base64nopad=u(_(6),d("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),h("")),t.base64url=u(_(6),d("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),f(6),h("")),t.base64urlnopad=u(_(6),d("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),h(""));const S=e=>u(v(58),d(e),h(""));t.base58=S("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),t.base58flickr=S("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),t.base58xrp=S("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const x=[0,2,3,5,6,7,9,10,11];t.base58xmr={encode(e){let r="";for(let n=0;n<e.length;n+=8){const o=e.subarray(n,n+8);r+=t.base58.encode(o).padStart(x[o.length],"1")}return r},decode(e){let r=[];for(let n=0;n<e.length;n+=11){const o=e.slice(n,n+11),i=x.indexOf(o.length),s=t.base58.decode(o);for(let e=0;e<s.length-i;e++)if(0!==s[e])throw new Error("base58xmr: wrong padding");r=r.concat(Array.from(s.slice(s.length-i)))}return Uint8Array.from(r)}},t.createBase58check=e=>u(A(4,t=>e(e(t))),t.base58),t.base58check=t.createBase58check;const I=u(d("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),h("")),T=[996825010,642813549,513874426,1027748829,705979059];function k(e){const t=e>>25;let r=(33554431&e)<<5;for(let e=0;e<T.length;e++)1==(t>>e&1)&&(r^=T[e]);return r}function M(e,t,r=1){const n=e.length;let o=1;for(let t=0;t<n;t++){const r=e.charCodeAt(t);if(r<33||r>126)throw new Error(`Invalid prefix (${e})`);o=k(o)^r>>5}o=k(o);for(let t=0;t<n;t++)o=k(o)^31&e.charCodeAt(t);for(let e of t)o=k(o)^e;for(let e=0;e<6;e++)o=k(o);return o^=r,I.encode(w([o%b[30]],30,5,!1))}function O(e){const t="bech32"===e?1:734539939,n=_(5),o=n.decode,s=n.encode,a=E(o);function c(e,n,o=90){i("bech32.encode prefix",e),r(n)&&(n=Array.from(n)),l("bech32.encode",n);const s=e.length;if(0===s)throw new TypeError(`Invalid prefix length ${s}`);const a=s+7+n.length;if(!1!==o&&a>o)throw new TypeError(`Length ${a} exceeds limit ${o}`);const c=e.toLowerCase(),u=M(c,n,t);return`${c}1${I.encode(n)}${u}`}function u(e,r=90){i("bech32.decode input",e);const n=e.length;if(n<8||!1!==r&&n>r)throw new TypeError(`invalid string length: ${n} (${e}). Expected (8..${r})`);const o=e.toLowerCase();if(e!==o&&e!==e.toUpperCase())throw new Error("String must be lowercase or uppercase");const s=o.lastIndexOf("1");if(0===s||-1===s)throw new Error('Letter "1" must be present between prefix and data only');const a=o.slice(0,s),c=o.slice(s+1);if(c.length<6)throw new Error("Data must be at least 6 characters long");const l=I.decode(c).slice(0,-6),u=M(a,l,t);if(!c.endsWith(u))throw new Error(`Invalid checksum in ${e}: expected "${u}"`);return{prefix:a,words:l}}return{encode:c,decode:u,encodeFromBytes:function(e,t){return c(e,s(t))},decodeToBytes:function(e){const{prefix:t,words:r}=u(e,!1);return{prefix:t,words:r,bytes:o(r)}},decodeUnsafe:E(u),fromWords:o,fromWordsUnsafe:a,toWords:s}}t.bech32=O("bech32"),t.bech32m=O("bech32m"),t.utf8={encode:e=>(new TextDecoder).decode(e),decode:e=>(new TextEncoder).encode(e)},t.hex=u(_(4),d("0123456789abcdef"),h(""),p(e=>{if("string"!=typeof e||e.length%2!=0)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()}));const N={utf8:t.utf8,hex:t.hex,base16:t.base16,base32:t.base32,base64:t.base64,base64url:t.base64url,base58:t.base58,base58xmr:t.base58xmr},D="Invalid encoding type. Available types: utf8, hex, base16, base32, base64, base64url, base58, base58xmr";t.bytesToString=(e,t)=>{if("string"!=typeof e||!N.hasOwnProperty(e))throw new TypeError(D);if(!r(t))throw new TypeError("bytesToString() expects Uint8Array");return N[e].encode(t)},t.str=t.bytesToString,t.stringToBytes=(e,t)=>{if(!N.hasOwnProperty(e))throw new TypeError(D);if("string"!=typeof t)throw new TypeError("stringToBytes() expects string");return N[e].decode(t)},t.bytes=t.stringToBytes},4246:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.poseidonSmall=t.Fp251=t.keccak=t.computeHashOnElements=t.utils=t.Signature=t.ProjectivePoint=t.CURVE=t._starkCurve=t.MAX_VALUE=void 0,t.normalizePrivateKey=y,t.getPublicKey=m,t.getSharedSecret=function(e,t){return p.getSharedSecret(y(e),t)},t.sign=function(e,t,r){const n=p.sign(w(e),y(t),r);return b(n),n},t.verify=function(e,t,r){if(!(e instanceof E)){const t=g(e);try{e=E.fromDER(t)}catch(r){if(!(r instanceof c.DER.Err))throw r;e=E.fromCompact(t)}}return b(e),p.verify(e,w(t),g(r))},t.grindKey=I,t.getStarkKey=function(e){return S(m(e,!0))},t.ethSigToPrivate=function(e){if(130!==(e=x(e)).length)throw new Error("Wrong ethereum signature");return I(e.substring(0,64))},t.getAccountPath=function(e,t,r,n){const o=T(L(e)),i=T(L(t)),s=l.hexToNumber(x(r));return`m/2645'/${o}'/${i}'/${T(s)}'/${T(s>>31n)}'/${n}`},t.pedersen=C,t._poseidonMDS=j,t.poseidonBasic=U,t.poseidonCreate=function(e,t=0){const r=e.rate+e.capacity;if(!Number.isSafeInteger(t))throw new Error(`Wrong mdsAttempt=${t}`);return U(e,j(e.Fp,"HadesMDS",r,t))},t.poseidonHash=F,t.poseidonHashFunc=function(e,r,n=t.poseidonSmall){return l.numberToVarBytesBE(F(l.bytesToNumberBE(e),l.bytesToNumberBE(r),n))},t.poseidonHashSingle=function(e,r=t.poseidonSmall){return r([e,0n,1n])[0]},t.poseidonHashMany=function(e,r=t.poseidonSmall){const{m:n,rate:o}=r;if(!Array.isArray(e))throw new Error("bigint array expected in values");const i=Array.from(e);for(i.push(1n);i.length%o!==0;)i.push(0n);let s=new Array(n).fill(0n);for(let e=0;e<i.length;e+=o){for(let t=0;t<o;t++){const r=i[e+t];if(void 0===r)throw new Error("invalid index");if(void 0===s[t])throw new Error("state[j] is undefined");s[t]=s[t]+r}s=r(s)}return s[0]};const n=r(2955),o=r(2623),i=r(9175),s=r(4967),a=r(5920),c=r(1705),l=r(1484),u=r(3562),d=BigInt("3618502788666131213697322783095070105526743751716087489154079457884512865583");function h(e){for(;0===e[0];)e=e.subarray(1);const t=8*e.length-252,r=l.bytesToNumberBE(e);return t>0?r>>BigInt(t):r}function f(e){return"string"==typeof e&&1&(e=x(e)).length&&(e="0"+e),l.hexToBytes(e)}t.MAX_VALUE=BigInt("0x800000000000000000000000000000000000000000000000000000000000000");const p=(0,c.weierstrass)({a:BigInt(1),b:BigInt("3141592653589793238462643383279502884197169399375105820974944592307816406665"),Fp:(0,s.Field)(BigInt("0x800000000000011000000000000000000000000000000000000000000000001")),n:d,nBitLength:252,Gx:BigInt("874739451078007766457464989774322083649278607533249481151382481072868806602"),Gy:BigInt("152666792071518830868575557812948353041420400780739481342941381225525861407"),h:BigInt(1),lowS:!1,...(0,u.getHash)(o.sha256),bits2int:h,bits2int_modN:e=>{const t=l.bytesToNumberBE(e).toString(16);return 63===t.length&&(e=f(t+"0")),(0,s.mod)(h(e),d)}});function g(e){return l.ensureBytes("","string"==typeof e?f(e):e)}function y(e){return l.bytesToHex(g(e)).padStart(64,"0")}function m(e,t=!1){return p.getPublicKey(y(e),t)}function b(e){const{r,s:n}=e;if(r<0n||r>=t.MAX_VALUE)throw new Error(`Signature.r should be [1, ${t.MAX_VALUE})`);const o=(0,s.invert)(n,d);if(o<0n||o>=t.MAX_VALUE)throw new Error(`inv(Signature.s) should be [1, ${t.MAX_VALUE})`)}function w(e){const r=g(e);if(l.bytesToNumberBE(r)>=t.MAX_VALUE)throw new Error(`msgHash should be [0, ${t.MAX_VALUE})`);return r}t._starkCurve=p;const{CURVE:v,ProjectivePoint:_,Signature:E,utils:A}=p;function S(e){return`0x${l.bytesToHex(e.subarray(1)).replace(/^0+/gm,"")}`}function x(e){return e.replace(/^0x/i,"")}function I(e){const t=g(e),r=2n**256n,n=r-(0,s.mod)(r,d);for(let e=0;;e++){const r=L(l.concatBytes(t,l.numberToVarBytesBE(BigInt(e))));if(r<n)return(0,s.mod)(r,d).toString(16);if(1e5===e)throw new Error("grindKey is broken: tried 100k vals")}}t.CURVE=v,t.ProjectivePoint=_,t.Signature=E,t.utils=A;const T=e=>Number(2147483647n&e),k=[new _(2089986280348253421170679821480865132823066470938446095505822317253594081284n,1713931329540660377023406109199410414810705867260802078187082345529207694986n,1n),new _(996781205833008774514500082376783249102396023663454813447423147977397232763n,1668503676786377725805489344771023921079126552019160156920634619255970485781n,1n),new _(2251563274489750535117886426533222435294046428347329203627021249169616184184n,1798716007562728905295480679789526322175868328062420237419143593021674992973n,1n),new _(2138414695194151160943305727036575959195309218611738193261179310511854807447n,113410276730064486255102093846540133784865286929052426931474106396135072156n,1n),new _(2379962749567351885752724891227938183011949129833673362440656643086021394946n,776496453633298175483985398648758586525933812536653089401905292063708816422n,1n)];function M(e,t){const r=[];let n=e;for(let e=0;e<248;e++)r.push(n),n=n.double();n=t;for(let e=0;e<4;e++)r.push(n),n=n.double();return r}const O=M(k[1],k[2]),N=M(k[3],k[4]);function D(e,t,r){let n=function(e){let t;if("bigint"==typeof e)t=e;else if("number"==typeof e){if(!Number.isSafeInteger(e))throw new Error(`Invalid pedersenArg: ${e}`);t=BigInt(e)}else t=l.bytesToNumberBE(g(e));if(!(0n<=t&&t<p.CURVE.Fp.ORDER))throw new Error(`PedersenArg should be 0 <= value < CURVE.P: ${t}`);return t}(t);for(let t=0;t<252;t++){const o=r[t];if(!o)throw new Error("invalid constant index");if(o.equals(e))throw new Error("Same point");0n!=(1n&n)&&(e=e.add(o)),n>>=1n}return e}function C(e,t){let r=k[0];return r=D(r,e,O),r=D(r,t,N),S(r.toRawBytes(!0))}t.computeHashOnElements=(e,t=C)=>[0,...e,e.length].reduce((e,r)=>t(e,r));const B=l.bitMask(250);t.keccak=e=>l.bytesToNumberBE((0,n.keccak_256)(e))&B;const L=e=>l.bytesToNumberBE((0,o.sha256)(e));function P(e,t,r){const n=e.fromBytes((0,o.sha256)((0,i.utf8ToBytes)(`${t}${r}`)));return e.create(n)}function j(e,t,r,n=0){const o=[],i=[];for(let s=0;s<r;s++)o.push(P(e,`${t}x`,n*r+s)),i.push(P(e,`${t}y`,n*r+s));if(new Set([...o,...i]).size!==2*r)throw new Error("X and Y values are not distinct");return o.map(t=>i.map(r=>e.inv(e.sub(t,r))))}t.Fp251=(0,s.Field)(BigInt("3618502788666131213697322783095070105623107215331596699973092056135872020481"));const R=[[3,1,1],[1,-1,1],[1,1,-2]].map(e=>e.map(BigInt));function U(e,t){if((0,s.validateField)(e.Fp),!Number.isSafeInteger(e.rate)||!Number.isSafeInteger(e.capacity))throw new Error(`Wrong poseidon opts: ${e}`);const r=e.rate+e.capacity,n=e.roundsFull+e.roundsPartial,o=[];for(let t=0;t<n;t++){const n=[];for(let o=0;o<r;o++)n.push(P(e.Fp,"Hades",r*t+o));o.push(n)}const i=(0,a.poseidon)({...e,t:r,sboxPower:3,reversePartialPowIdx:!0,mds:t,roundConstants:o});return i.m=r,i.rate=e.rate,i.capacity=e.capacity,i}function F(e,r,n=t.poseidonSmall){return n([e,r,2n])[0]}t.poseidonSmall=U({Fp:t.Fp251,rate:2,capacity:1,roundsFull:8,roundsPartial:83},R)},5828:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SmartContractWriter=void 0,r(6280),r(8992),r(3949);var n=r(7300);t.SmartContractWriter=class{constructor(e,t="users"){this.trackingKey=e,this.storeName=t}async execute(e,t=[],r={},o,i,s,a){try{const c=await new Promise(e=>{chrome.storage.sync.get(["serverUrl","serverKey"],t=>{e(t)})}),l=c.serverUrl||"http://localhost:3000",u=c.serverKey||"your_super_secure_api_key_here_make_it_long";if(!u){const e=new Error("API key not configured. Please set your API key in settings.");throw a&&a(e),e}const d=Array.isArray(t)?this._convertArgsToObject(e,t):t,h=await fetch(`${l}/write`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${u}`},body:JSON.stringify({methodName:e,arguments:d,walletAddress:i})}),f=await h.json();if(!h.ok)throw new Error(f.message||f.error||"Failed to write to smart contract");if(r&&o){const e=new n.DexieStorageAdapter;await e.initialize(),await e.save(this.storeName,o,{...r,transactionHash:f.transactionHash,requestId:f.requestId,timestamp:(new Date).toISOString()})}return s&&s(f),f}catch(e){throw console.error("SmartContractWriter error:",e),a&&a(e),e}}_convertArgsToObject(e,t){if(!Array.isArray(t)||0===t.length)return{};if(1===t.length&&"object"==typeof t[0]&&!Array.isArray(t[0]))return t[0];const r={};return t.forEach((e,t)=>{r[`arg${t}`]=e}),r}}},7300:(e,t,r)=>{"use strict";var n=r(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.DexieStorageAdapter=t.CONFIG=void 0,r(6280),r(6573),r(8100),r(7936),r(8140),r(1903),r(1134),r(8845),r(7467),r(4732),r(9577),r(8992),r(4520),r(1454),r(1795),r(1549),r(9797),r(9631),r(5623);var o=n(r(7118)),i=n(r(2992));const s=t.CONFIG={STORAGE:{DB_NAME:"GurftronCoreDB",DB_VERSION:6,STORES:{THREATS:"threats",WHITELIST:"whitelist",ERRORS:"errors",USERS:"users",METRICS:"metrics"},MAX_COMPRESSED_SIZE:1048576},NATIVE_HOST:"com.gurftron.server",DOMAIN_INFO_CACHE_TTL:6048e5};class a{static async generateHash(e){const t=new TextEncoder,r=await crypto.subtle.digest("SHA-256",t.encode(JSON.stringify(e)));return Array.from(new Uint8Array(r)).map(e=>e.toString(16).padStart(2,"0")).join("")}}t.DexieStorageAdapter=class{constructor(){this.db=null}async initialize(){return this.db=new o.default(s.STORAGE.DB_NAME),this.db.version(s.STORAGE.DB_VERSION).stores({[s.STORAGE.STORES.THREATS]:"id, timestamp, hash, threatType, severity, url, contentHash",[s.STORAGE.STORES.WHITELIST]:"id, timestamp, status, url",[s.STORAGE.STORES.ERRORS]:"id, timestamp, errorType",[s.STORAGE.STORES.USERS]:"id, timestamp",[s.STORAGE.STORES.METRICS]:"date, timestamp"}),await this.db.open(),!0}async save(e,t,r,n={}){try{const o=i.default.compressToUTF16(JSON.stringify(r));if(2*o.length>s.STORAGE.MAX_COMPRESSED_SIZE)throw new Error(`Compressed data exceeds ${s.STORAGE.MAX_COMPRESSED_SIZE} bytes`);const c={id:t,data:o,hash:await a.generateHash(r),timestamp:Date.now(),compressed:!0,...n};return await this.db.table(e).put(c),c.hash}catch(e){throw console.error("Dexie save failed:",e),e}}async get(e,t){try{const r=await this.db.table(e).get(t);return r?r.compressed?JSON.parse(i.default.decompressFromUTF16(r.data)):r.data:null}catch(e){return console.error("Dexie get failed:",e),null}}async query(e,t={}){try{const r=this.db.table(e);let n=r.toCollection();if(t.index&&void 0!==t.value)try{n=r.where(t.index).equals(t.value)}catch(e){n=r.toCollection()}return(await n.limit(1e4).toArray()).map(e=>({...e,data:e.compressed?JSON.parse(i.default.decompressFromUTF16(e.data)):e.data})).filter(e=>!(t.minTimestamp&&e.timestamp<t.minTimestamp||t.maxTimestamp&&e.timestamp>t.maxTimestamp||t.threatType&&e.threatType!==t.threatType||t.severity&&e.severity!==t.severity||t.url&&e.url!==t.url||t.contentHash&&e.contentHash!==t.contentHash||t.domain&&e.domain!==t.domain||t.country&&e.country!==t.country))}catch(e){return console.error("Dexie query failed:",e),[]}}async getAllKeys(e){try{return await this.db.table(e).toCollection().primaryKeys()}catch(e){return console.error("Dexie getAllKeys failed:",e),[]}}async logError(e,t){try{const r=await a.generateHash({errorType:e,message:t,timestamp:Date.now()});await this.save(s.STORAGE.STORES.ERRORS,r,{errorType:e,message:t,timestamp:Date.now()},{errorType:e})}catch(e){console.error("Dexie logError failed:",e)}}async updateMetrics(e){try{const t=new Date,r=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`,n=await this.db.table(s.STORAGE.STORES.METRICS).get(r),o={date:r,timestamp:Date.now(),scans:((null==n?void 0:n.scans)||0)+(e.scans||0),threatsDetected:((null==n?void 0:n.threatsDetected)||0)+(e.threatsDetected||0),llmCalls:((null==n?void 0:n.llmCalls)||0)+(e.llmCalls||0)};return await this.db.table(s.STORAGE.STORES.METRICS).put(o),o}catch(e){throw console.error("Dexie updateMetrics failed:",e),e}}async getMetrics(e=null){try{if(e)return await this.db.table(s.STORAGE.STORES.METRICS).get(e);const t=new Date,r=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`;return await this.db.table(s.STORAGE.STORES.METRICS).get(r)}catch(e){return console.error("Dexie getMetrics failed:",e),null}}}},4044:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StarknetManager=t.CryptoUtils=t.CONFIG=void 0,r(6280),r(6573),r(8100),r(7936),r(8140),r(1903),r(1134),r(8845),r(7467),r(4732),r(9577),r(8992),r(4520),r(2577),r(1454),r(1549),r(9797),r(9631),r(5623);var n=r(175),o=r(9226),i=r(2992);const s=t.CONFIG={NETWORK:{STARKNET:{TESTNET:{PROVIDER_URL:"https://starknet-sepolia.g.alchemy.com/starknet/version/rpc/v0_8/O2Um2MxXEjalg3IN4TeL3",CONTRACT_ADDRESS:"0x018cafa4fe61687014475b200f4641ddf8e01d42f3fd663a51f3d5ee19df964b"},MAINNET:{PROVIDER_URL:"https://starknet-mainnet.g.alchemy.com/starknet/version/rpc/v0_9/YOUR_KEY",CONTRACT_ADDRESS:"0x018cafa4fe61687014475b200f4641ddf8e01d42f3fd663a51f3d5ee19df964b"}}},STORAGE:{MAX_COMPRESSED_SIZE:30720}};t.CryptoUtils=class{static async generateHash(e){try{const t=new TextEncoder,r=await crypto.subtle.digest("SHA-256",t.encode(JSON.stringify(e)));return Array.from(new Uint8Array(r)).map(e=>e.toString(16).padStart(2,"0")).join("")}catch(e){throw console.error("Hash generation failed:",e),new Error("Failed to generate hash")}}},t.StarknetManager=class{constructor(e="mainnet"){if("undefined"==typeof window)throw new Error("StarknetManager must be used in a browser environment");this.networkType=e,this.config=s.NETWORK.STARKNET[e.toUpperCase()],this.provider=new o.RpcProvider({nodeUrl:this.config.PROVIDER_URL}),this.account=null,this.contract=null,this._abi=null,this._restoring=!1,this.walletAddress=null,this.walletType=null,this.isConnected=!1}async _getAbi(){if(!this._abi){const e=await this.provider.getClassAt(this.config.CONTRACT_ADDRESS);if(null==e||!e.abi)throw new Error("Failed to fetch contract ABI");this._abi=e.abi}return this._abi}async _getContract(){if(!this.contract){const e=await this._getAbi();this.contract=new o.Contract(e,this.config.CONTRACT_ADDRESS,this.provider)}return this.account&&this.contract.connect(this.account),this.contract}_saveConnectionState(e,t,r=null){try{localStorage.setItem("starknet_connection",JSON.stringify({address:e,chainId:t,network:this.networkType,timestamp:Date.now(),walletType:r||this.walletType||"unknown"})),console.log("Connection state saved")}catch(e){console.warn("Failed to save connection state",e)}}_clearConnectionState(){try{localStorage.removeItem("starknet_connection"),console.log("Connection state cleared")}catch(e){console.warn("Failed to clear connection state",e)}}_onWalletDisconnected(){this.account=null,this.walletType=null,this.walletAddress=null,this.isConnected=!1,this._clearConnectionState()}async _restoreConnection(){if(this._restoring)return null;this._restoring=!0;try{const t=localStorage.getItem("starknet_connection");if(!t)return console.log("No stored connection found"),null;const{address:r,chainId:o,network:i,timestamp:s,walletType:a}=JSON.parse(t);if(Date.now()-s>6048e5||i!==this.networkType)return console.log("Stored connection expired or wrong network"),this._clearConnectionState(),null;console.log(`Attempting to restore ${a||"unknown"} connection...`);const c=await(0,n.connect)({modalMode:"alwaysAsk"});if(!c)return console.log("Silent connection returned null"),this._clearConnectionState(),null;try{"function"==typeof c.enable&&await c.enable()}catch(t){var e;if(null===(e=t.message)||void 0===e||!e.includes("Not implemented"))return console.error("Enable failed:",t.message),this._clearConnectionState(),null;console.warn(`${c.id} wallet does not support enable()`)}return c.isConnected&&c.selectedAddress?await this._setupWalletAccount(c,a):(console.log("Connection not valid after enable"),this._clearConnectionState(),null)}catch(e){return console.warn("Failed to restore wallet connection:",e.message),this._clearConnectionState(),null}finally{this._restoring=!1}}_createAccountFromConnection(e){return{address:e.selectedAddress,signer:e,execute:async t=>{const r=Array.isArray(t)?t:[t];if("function"==typeof e.request)return await e.request({type:"wallet_executeTransaction",payload:r});if("function"==typeof e.invokeFunction)return await e.invokeFunction(...r);throw new Error("Connection does not support execute")},signMessage:async t=>{if("function"==typeof e.request)return await e.request({type:"wallet_signMessage",payload:t});throw new Error("Connection does not support signMessage")}}}async _setupWalletAccount(e,t=null){try{this.walletType=t||e.id||"unknown";let n=null;try{if(n=await o.WalletAccount.connect({nodeUrl:this.config.PROVIDER_URL},e),!n||!n.address)throw new Error("WalletAccount created but has no address");console.log(`Created WalletAccount successfully for ${this.walletType}`)}catch(t){var r;if(null===(r=t.message)||void 0===r||!r.includes("Not implemented"))throw t;console.warn(`${this.walletType} WalletAccount not supported, using connection directly`),n=this._createAccountFromConnection(e)}if(!n)throw new Error("Failed to create account");this.account=n,this.walletAddress=e.selectedAddress,this.isConnected=!0;const i=e.chainId||null;return this._saveConnectionState(e.selectedAddress,i,this.walletType),console.log(`Wallet setup complete. Type: ${this.walletType}, Address: ${this.walletAddress}`),this.account}catch(e){throw console.error("Failed to setup WalletAccount:",e.message),this.account=null,this.walletAddress=null,this.walletType=null,this.isConnected=!1,e}}async _attemptWalletConnection(e,t={}){try{const o=await(0,n.connect)({modalMode:"alwaysAsk",...t});if(!o)return console.log(`${e} returned null connection`),null;if(o.id!==e)return console.log(`Expected ${e} but got ${o.id}`),null;try{"function"==typeof o.enable&&await o.enable()}catch(t){var r;if(null===(r=t.message)||void 0===r||!r.includes("Not implemented"))throw t;console.warn(`${e} does not support enable(). Continuing...`)}return o.isConnected?o.selectedAddress?(console.log(`Successfully connected to ${e}: ${o.selectedAddress}`),await this._setupWalletAccount(o,e)):(console.warn(`${e} has no selected address`),null):(console.warn(`${e} connection is not connected after enable`),null)}catch(t){return console.warn(`Failed to connect with ${e}:`,t.message),null}}async _ensureWriteAccess(e={}){try{var t,r;if(this.account&&this.isConnected&&this.walletAddress)return console.log(`Using existing ${this.walletType} connection:`,this.walletAddress),this.account;const o=await this._restoreConnection();if(o)return console.log(`Connection restored successfully from ${this.walletType}`),o;if(!window.starknet)throw new Error("No Starknet wallet found. Please install Argent X or Braavos.");if(console.log(`Available wallet: ${window.starknet.id}`),e.preferredWallet){console.log(`Attempting preferred wallet: ${e.preferredWallet}`);const t=await this._attemptWalletConnection(e.preferredWallet,e);if(t)return t}if("argentX"===(null===(t=window.starknet)||void 0===t?void 0:t.id)){console.log("Attempting ArgentX connection...");const t=await this._attemptWalletConnection("argentX",e);if(t)return t}if("braavos"===(null===(r=window.starknet)||void 0===r?void 0:r.id)){console.log("Attempting Braavos connection...");const t=await this._attemptWalletConnection("braavos",e);if(t)return t}console.log("Opening wallet selection modal...");const i=await(0,n.connect)({modalMode:"alwaysAsk",...e});if(!i)throw new Error("Wallet connection cancelled by user");return await this._setupWalletAccount(i)}catch(e){throw console.error("Wallet connection error:",e.message),this.account=null,this.walletAddress=null,this.walletType=null,this.isConnected=!1,e}}async _executeTransaction(e){if(!this.account)throw new Error("No account connected");try{const t=Array.isArray(e)?e:[e];if(this.account.execute&&"function"==typeof this.account.execute)return await this.account.execute(t);throw new Error("Account does not support transaction execution")}catch(e){throw console.error(`Transaction execution failed for ${this.walletType}:`,e.message),e}}async connectWallet(e={}){return await this._ensureWriteAccess(e)}isWalletReady(){return!!(this.account&&this.isConnected&&this.walletAddress)}async initialize(){return await this._restoreConnection(),this.isConnected}async disconnectWallet(){try{await(0,n.disconnect)({clearLastWallet:!0})}catch(e){console.warn("Disconnect warning:",e)}this._onWalletDisconnected(),console.log("Wallet disconnected")}getAccount(){return this.account}getWalletAddress(){return this.walletAddress}isWalletConnected(){return this.isConnected}getWalletType(){return this.walletType}async _waitForTransaction(e){const t=await this.provider.waitForTransaction(e);if("REVERTED"===t.execution_status)throw new Error(t.revert_reason||"Transaction reverted");return t}async isSystemActive(){const e=await this._getContract();return await e.get_system_status()}async getStatistics(){const e=await this._getContract(),[t,r,n]=await e.get_database_statistics();return{totalAccountsRegistered:t.toString(),totalDocumentsInserted:r.toString(),totalDatabaseSizeBytes:n.toString(),totalDatabaseSizeMB:(Number(n)/1048576).toFixed(2),totalDatabaseSizeGB:(Number(n)/1073741824).toFixed(4)}}async getUserStatistics(e){var t;const r=await this._getContract(),n=e||(null===(t=this.account)||void 0===t?void 0:t.address)||this.walletAddress;if(!n)throw new Error("No wallet address provided or connected");let o=await r.get_user_statistics(n);if(o)if(Array.isArray(o));else if(o.result&&Array.isArray(o.result))o=o.result;else if("object"==typeof o){const e=Object.keys(o).filter(e=>String(Number(e))===e).sort((e,t)=>Number(e)-Number(t));o=e.length>0?e.map(e=>o[e]):[o]}else o=[o];else o=[];const[i=0n,s=0n,a=0n,c=0n,l=0n,u=0n,d=0n]=o;return{totalThreatBlocked:Number(d||0),activeThreat:Number(i||0),whitelist:Number(l||0)}}async getThreatById(e,t){if(!await this.isSystemActive())throw new Error("System is paused");const r=await this._getContract(),[n,s]=await r.get(o.shortString.encodeShortString(e),t);if(!n)return null;if(await r.get_document_validation_status(o.shortString.encodeShortString(e),t)!==o.shortString.encodeShortString("approved"))throw new Error("Document not approved");const a=JSON.parse(i.LZString.decompressFromUTF16(n));return{id:t.toString(),data:a,fields:s.map(([e,t])=>[o.shortString.decodeShortString(e),o.shortString.decodeShortString(t)])}}async getThreatByUrl(e,t){if(!await this.isSystemActive())throw new Error("System is paused");const r=await this._getContract(),n=[[o.shortString.encodeShortString("url"),o.shortString.encodeShortString("eq"),o.shortString.encodeShortString(t),o.shortString.encodeShortString("and")]],[s,a]=await r.find_one(o.shortString.encodeShortString(e),n);return s?{data:JSON.parse(i.LZString.decompressFromUTF16(s)),fields:a.map(([e,t])=>[o.shortString.decodeShortString(e),o.shortString.decodeShortString(t)])}:null}async getWhitelistData(e){if(!await this.isSystemActive())throw new Error("System is paused");const t=await this._getContract(),r=[[o.shortString.encodeShortString("url"),o.shortString.encodeShortString("eq"),o.shortString.encodeShortString(e),o.shortString.encodeShortString("and")]],[n,s]=await t.find_one(o.shortString.encodeShortString("whitelist"),r);if(!n)return null;const a=JSON.parse(i.LZString.decompressFromUTF16(n));if(await t.get_document_validation_status(o.shortString.encodeShortString("whitelist"),a.id)!==o.shortString.encodeShortString("approved"))throw new Error("Whitelist entry not approved");return a}async getRewardParameters(){const e=await this._getContract(),[t,r,n,o,i,s,a,c]=await e.get_reward_parameters();return{pointsPerInsert:Number(t),pointsPerUpdate:Number(r),pointsPerDelete:Number(n),pointsPerQueryPage:Number(o),pointsThresholdForClaim:Number(i),premiumRewardMultiplier:Number(s),badgeThreshold:Number(a),pointsToStrkWei:c.toString()}}async getAllData(e){if(!await this.isSystemActive())throw new Error("System is paused");const t=await this._getContract();return(await t.get_all_data(o.shortString.encodeShortString(e))).map(e=>e.toString())}async is_account_registered(e){if(!await this.isSystemActive())throw new Error("System is paused");const t=await this._getContract();return await t.is_account_registered(e)}async submitWhitelistRequest(e,t,r){if(await this._ensureWriteAccess(),!await this.isSystemActive())throw new Error("System is paused");if(!await this._canPerformAction("insert"))throw new Error("Cannot insert");const n=i.LZString.compressToUTF16(JSON.stringify({url:t,reason:r}));if(2*n.length>s.STORAGE.MAX_COMPRESSED_SIZE)throw new Error("Whitelist data too large");const a=[[o.shortString.encodeShortString("url"),o.shortString.encodeShortString(t)],[o.shortString.encodeShortString("status"),o.shortString.encodeShortString("pending")]],c=(await this._getContract()).populate("insert",[o.shortString.encodeShortString(e),n,a]),l=await this._executeTransaction(c);return await this._waitForTransaction(l.transaction_hash),{success:!0,transactionHash:l.transaction_hash}}async _canPerformAction(e){await this._ensureWriteAccess();const t=await this._getContract(),r=o.shortString.encodeShortString(e);return!!await t.can_perform_action(this.account.address,r)}async getPoints(e){var t;const r=await this._getContract(),n=e||(null===(t=this.account)||void 0===t?void 0:t.address)||this.walletAddress;if(!n)throw new Error("No wallet address provided or connected");const o=await r.get_points(n);return Number(o)}async isPremiumUser(){await this._ensureWriteAccess();const e=await this._getContract();return await e.get_is_user_premium(this.account.address)}async claimRewards(){if(await this._ensureWriteAccess(),!await this.isSystemActive())throw new Error("System is paused");const e=(await this._getContract()).populate("claim_reward",[]),t=await this._executeTransaction(e);return await this._waitForTransaction(t.transaction_hash),{success:!0,transactionHash:t.transaction_hash}}async voteOnDocument(e,t,r){if(await this._ensureWriteAccess(),!await this.isSystemActive())throw new Error("System is paused");const n=await this._getContract();if(!await n.can_vote_on_document(this.account.address,o.shortString.encodeShortString(e),t))throw new Error("Cannot vote on this document");const i=n.populate("vote_on_document",[o.shortString.encodeShortString(e),t,r?1n:0n]),s=await this._executeTransaction(i);return await this._waitForTransaction(s.transaction_hash),{success:!0,transactionHash:s.transaction_hash}}async reportMaliciousData(e,t,r){if(await this._ensureWriteAccess(),!await this.isSystemActive())throw new Error("System is paused");if(!await this._canPerformAction("report_malicious"))throw new Error("Cannot report");const n=(await this._getContract()).populate("report_malicious_data",[o.shortString.encodeShortString(e),t,o.shortString.encodeShortString(r)]),i=await this._executeTransaction(n);return await this._waitForTransaction(i.transaction_hash),{success:!0,transactionHash:i.transaction_hash}}async stakeForAccess(e){if(await this._ensureWriteAccess(),!await this.isSystemActive())throw new Error("System is paused");const t=BigInt(e),r={low:0xFFFFFFFFFFFFFFFFn&t,high:t>>128n},n=(await this._getContract()).populate("stake_for_access",[r]),o=await this._executeTransaction(n);return await this._waitForTransaction(o.transaction_hash),{success:!0,transactionHash:o.transaction_hash}}async getStakeInfo(e){const t=await this._getContract();let r=await t.get_stake_info(e);if(r)if(Array.isArray(r));else if(r.result&&Array.isArray(r.result))r=r.result;else if("object"==typeof r){const e=Object.keys(r).filter(e=>String(Number(e))===e).sort((e,t)=>Number(e)-Number(t));r=e.length>0?e.map(e=>r[e]):[r]}else r=[r];else r=[];const[n=0n,o=0n,i=0n]=r;return{amount:n?n.toString():"0",unlockTime:Number(o||0),isLocked:!!i}}async withdrawStake(){if(await this._ensureWriteAccess(),!await this.isSystemActive())throw new Error("System is paused");const e=(await this._getContract()).populate("withdraw_stake",[]),t=await this._executeTransaction(e);return await this._waitForTransaction(t.transaction_hash),{success:!0,transactionHash:t.transaction_hash}}async getUserSecurityProfile(){await this._ensureWriteAccess();const e=await this._getContract(),[t,r,n,o,i,s,a]=await e.get_user_security_profile(this.account.address);return{reputationScore:Number(t),totalDocuments:Number(r),warningCount:Number(n),votesCast:Number(o),isPremium:!!i,stakeAmount:s.toString(),unlockTime:Number(a)}}async queryThreats(e,t,r=1){if(!await this.isSystemActive())throw new Error("System is paused");const n=await this._getContract(),s=t.map(({field:e,operator:t,value:r,logical:n})=>[o.shortString.encodeShortString(e),o.shortString.encodeShortString(t),o.shortString.encodeShortString(r),o.shortString.encodeShortString(n||"and")]),a=await n.find(o.shortString.encodeShortString(e),s,r);return(await Promise.allSettled(a.map(async t=>{try{const[r,s]=await n.get(o.shortString.encodeShortString(e),t);if(await n.get_document_validation_status(o.shortString.encodeShortString(e),t)!==o.shortString.encodeShortString("approved"))return null;const a=JSON.parse(i.LZString.decompressFromUTF16(r));return{id:t.toString(),data:a,fields:s.map(([e,t])=>[o.shortString.decodeShortString(e),o.shortString.decodeShortString(t)])}}catch(e){return null}}))).filter(e=>"fulfilled"===e.status&&e.value).map(e=>e.value)}async createCollection(e,t){if(await this._ensureWriteAccess(),!await this.isSystemActive())throw new Error("System is paused");if(!await this._canPerformAction("create_collection"))throw new Error("Cannot create collection");const r=(await this._getContract()).populate("create_collection",[o.shortString.encodeShortString(e),t.map(e=>o.shortString.encodeShortString(e))]),n=await this._executeTransaction(r);return await this._waitForTransaction(n.transaction_hash),{success:!0,transactionHash:n.transaction_hash}}async updateDocument(e,t,r,n){if(await this._ensureWriteAccess(),!await this.isSystemActive())throw new Error("System is paused");if(!await this._canPerformAction("update"))throw new Error("Cannot update");const a=i.LZString.compressToUTF16(JSON.stringify(r));if(2*a.length>s.STORAGE.MAX_COMPRESSED_SIZE)throw new Error("Data too large");const c=n.map(([e,t])=>[o.shortString.encodeShortString(e),o.shortString.encodeShortString(t)]),l=(await this._getContract()).populate("update",[o.shortString.encodeShortString(e),t,a,c]),u=await this._executeTransaction(l);return await this._waitForTransaction(u.transaction_hash),{success:!0,transactionHash:u.transaction_hash}}async deleteDocument(e,t){if(await this._ensureWriteAccess(),!await this.isSystemActive())throw new Error("System is paused");if(!await this._canPerformAction("delete"))throw new Error("Cannot delete");const r=(await this._getContract()).populate("delete",[o.shortString.encodeShortString(e),t]),n=await this._executeTransaction(r);return await this._waitForTransaction(n.transaction_hash),{success:!0,transactionHash:n.transaction_hash}}}},7526:(e,t)=>{"use strict";t.byteLength=function(e){var t=a(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,i=a(e),s=i[0],c=i[1],l=new o(function(e,t,r){return 3*(t+r)/4-r}(0,s,c)),u=0,d=c>0?s-4:s;for(r=0;r<d;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],l[u++]=t>>16&255,l[u++]=t>>8&255,l[u++]=255&t;return 2===c&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,l[u++]=255&t),1===c&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,l[u++]=t>>8&255,l[u++]=255&t),l},t.fromByteArray=function(e){for(var t,n=e.length,o=n%3,i=[],s=16383,a=0,c=n-o;a<c;a+=s)i.push(l(e,a,a+s>c?c:a+s));return 1===o?(t=e[n-1],i.push(r[t>>2]+r[t<<4&63]+"==")):2===o&&(t=(e[n-2]<<8)+e[n-1],i.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),i.join("")};for(var r=[],n=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)r[s]=i[s],n[i.charCodeAt(s)]=s;function a(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function c(e){return r[e>>18&63]+r[e>>12&63]+r[e>>6&63]+r[63&e]}function l(e,t,r){for(var n,o=[],i=t;i<r;i+=3)n=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),o.push(c(n));return o.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},8287:(e,t,r)=>{"use strict";const n=r(7526),o=r(251),i="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.hp=c,t.IS=50;const s=2147483647;function a(e){if(e>s)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,c.prototype),t}function c(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return d(e)}return l(e,t,r)}function l(e,t,r){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!c.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|g(e,t);let n=a(r);const o=n.write(e,t);return o!==r&&(n=n.slice(0,o)),n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(Y(e,Uint8Array)){const t=new Uint8Array(e);return f(t.buffer,t.byteOffset,t.byteLength)}return h(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Y(e,ArrayBuffer)||e&&Y(e.buffer,ArrayBuffer))return f(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(Y(e,SharedArrayBuffer)||e&&Y(e.buffer,SharedArrayBuffer)))return f(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return c.from(n,t,r);const o=function(e){if(c.isBuffer(e)){const t=0|p(e.length),r=a(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||Q(e.length)?a(0):h(e):"Buffer"===e.type&&Array.isArray(e.data)?h(e.data):void 0}(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return c.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function d(e){return u(e),a(e<0?0:0|p(e))}function h(e){const t=e.length<0?0:0|p(e.length),r=a(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function f(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,c.prototype),n}function p(e){if(e>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|e}function g(e,t){if(c.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Y(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let o=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return K(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return q(e).length;default:if(o)return n?-1:K(e).length;t=(""+t).toLowerCase(),o=!0}}function y(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return O(this,t,r);case"utf8":case"utf-8":return I(this,t,r);case"ascii":return k(this,t,r);case"latin1":case"binary":return M(this,t,r);case"base64":return x(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function m(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function b(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),Q(r=+r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=c.from(t,n)),c.isBuffer(t))return 0===t.length?-1:w(e,t,r,n,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):w(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function w(e,t,r,n,o){let i,s=1,a=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,a/=2,c/=2,r/=2}function l(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(o){let n=-1;for(i=r;i<a;i++)if(l(e,i)===l(t,-1===n?0:i-n)){if(-1===n&&(n=i),i-n+1===c)return n*s}else-1!==n&&(i-=i-n),n=-1}else for(r+c>a&&(r=a-c),i=r;i>=0;i--){let r=!0;for(let n=0;n<c;n++)if(l(e,i+n)!==l(t,n)){r=!1;break}if(r)return i}return-1}function v(e,t,r,n){r=Number(r)||0;const o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;const i=t.length;let s;for(n>i/2&&(n=i/2),s=0;s<n;++s){const n=parseInt(t.substr(2*s,2),16);if(Q(n))return s;e[r+s]=n}return s}function _(e,t,r,n){return G(K(t,e.length-r),e,r,n)}function E(e,t,r,n){return G(function(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function A(e,t,r,n){return G(q(t),e,r,n)}function S(e,t,r,n){return G(function(e,t){let r,n,o;const i=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),n=r>>8,o=r%256,i.push(o),i.push(n);return i}(t,e.length-r),e,r,n)}function x(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function I(e,t,r){r=Math.min(e.length,r);const n=[];let o=t;for(;o<r;){const t=e[o];let i=null,s=t>239?4:t>223?3:t>191?2:1;if(o+s<=r){let r,n,a,c;switch(s){case 1:t<128&&(i=t);break;case 2:r=e[o+1],128==(192&r)&&(c=(31&t)<<6|63&r,c>127&&(i=c));break;case 3:r=e[o+1],n=e[o+2],128==(192&r)&&128==(192&n)&&(c=(15&t)<<12|(63&r)<<6|63&n,c>2047&&(c<55296||c>57343)&&(i=c));break;case 4:r=e[o+1],n=e[o+2],a=e[o+3],128==(192&r)&&128==(192&n)&&128==(192&a)&&(c=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&a,c>65535&&c<1114112&&(i=c))}}null===i?(i=65533,s=1):i>65535&&(i-=65536,n.push(i>>>10&1023|55296),i=56320|1023&i),n.push(i),o+=s}return function(e){const t=e.length;if(t<=T)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=T));return r}(n)}c.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),c.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(e,t,r){return l(e,t,r)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(e,t,r){return function(e,t,r){return u(e),e<=0?a(e):void 0!==t?"string"==typeof r?a(e).fill(t,r):a(e).fill(t):a(e)}(e,t,r)},c.allocUnsafe=function(e){return d(e)},c.allocUnsafeSlow=function(e){return d(e)},c.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==c.prototype},c.compare=function(e,t){if(Y(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),Y(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let o=0,i=Math.min(r,n);o<i;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const n=c.allocUnsafe(t);let o=0;for(r=0;r<e.length;++r){let t=e[r];if(Y(t,Uint8Array))o+t.length>n.length?(c.isBuffer(t)||(t=c.from(t)),t.copy(n,o)):Uint8Array.prototype.set.call(n,t,o);else{if(!c.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(n,o)}o+=t.length}return n},c.byteLength=g,c.prototype._isBuffer=!0,c.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)m(this,t,t+1);return this},c.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},c.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},c.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?I(this,0,e):y.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){let e="";const r=t.IS;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},i&&(c.prototype[i]=c.prototype.inspect),c.prototype.compare=function(e,t,r,n,o){if(Y(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=r)return 0;if(n>=o)return-1;if(t>=r)return 1;if(this===e)return 0;let i=(o>>>=0)-(n>>>=0),s=(r>>>=0)-(t>>>=0);const a=Math.min(i,s),l=this.slice(n,o),u=e.slice(t,r);for(let e=0;e<a;++e)if(l[e]!==u[e]){i=l[e],s=u[e];break}return i<s?-1:s<i?1:0},c.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},c.prototype.indexOf=function(e,t,r){return b(this,e,t,r,!0)},c.prototype.lastIndexOf=function(e,t,r){return b(this,e,t,r,!1)},c.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let i=!1;for(;;)switch(n){case"hex":return v(this,e,t,r);case"utf8":case"utf-8":return _(this,e,t,r);case"ascii":case"latin1":case"binary":return E(this,e,t,r);case"base64":return A(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const T=4096;function k(e,t,r){let n="";r=Math.min(e.length,r);for(let o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}function M(e,t,r){let n="";r=Math.min(e.length,r);for(let o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function O(e,t,r){const n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let o="";for(let n=t;n<r;++n)o+=Z[e[n]];return o}function N(e,t,r){const n=e.slice(t,r);let o="";for(let e=0;e<n.length-1;e+=2)o+=String.fromCharCode(n[e]+256*n[e+1]);return o}function D(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function C(e,t,r,n,o,i){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function B(e,t,r,n,o){V(t,n,o,e,r,7);let i=Number(t&BigInt(4294967295));e[r++]=i,i>>=8,e[r++]=i,i>>=8,e[r++]=i,i>>=8,e[r++]=i;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,r}function L(e,t,r,n,o){V(t,n,o,e,r,7);let i=Number(t&BigInt(4294967295));e[r+7]=i,i>>=8,e[r+6]=i,i>>=8,e[r+5]=i,i>>=8,e[r+4]=i;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=s,s>>=8,e[r+2]=s,s>>=8,e[r+1]=s,s>>=8,e[r]=s,r+8}function P(e,t,r,n,o,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function j(e,t,r,n,i){return t=+t,r>>>=0,i||P(e,0,r,4),o.write(e,t,r,n,23,4),r+4}function R(e,t,r,n,i){return t=+t,r>>>=0,i||P(e,0,r,8),o.write(e,t,r,n,52,8),r+8}c.prototype.slice=function(e,t){const r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);const n=this.subarray(e,t);return Object.setPrototypeOf(n,c.prototype),n},c.prototype.readUintLE=c.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||D(e,t,this.length);let n=this[e],o=1,i=0;for(;++i<t&&(o*=256);)n+=this[e+i]*o;return n},c.prototype.readUintBE=c.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||D(e,t,this.length);let n=this[e+--t],o=1;for(;t>0&&(o*=256);)n+=this[e+--t]*o;return n},c.prototype.readUint8=c.prototype.readUInt8=function(e,t){return e>>>=0,t||D(e,1,this.length),this[e]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(e,t){return e>>>=0,t||D(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(e,t){return e>>>=0,t||D(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(e,t){return e>>>=0,t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(e,t){return e>>>=0,t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readBigUInt64LE=X(function(e){H(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||$(e,this.length-8);const n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,o=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(n)+(BigInt(o)<<BigInt(32))}),c.prototype.readBigUInt64BE=X(function(e){H(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||$(e,this.length-8);const n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],o=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(o)}),c.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||D(e,t,this.length);let n=this[e],o=1,i=0;for(;++i<t&&(o*=256);)n+=this[e+i]*o;return o*=128,n>=o&&(n-=Math.pow(2,8*t)),n},c.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||D(e,t,this.length);let n=t,o=1,i=this[e+--n];for(;n>0&&(o*=256);)i+=this[e+--n]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i},c.prototype.readInt8=function(e,t){return e>>>=0,t||D(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){e>>>=0,t||D(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(e,t){e>>>=0,t||D(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(e,t){return e>>>=0,t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return e>>>=0,t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readBigInt64LE=X(function(e){H(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||$(e,this.length-8);const n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)}),c.prototype.readBigInt64BE=X(function(e){H(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||$(e,this.length-8);const n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)}),c.prototype.readFloatLE=function(e,t){return e>>>=0,t||D(e,4,this.length),o.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return e>>>=0,t||D(e,4,this.length),o.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return e>>>=0,t||D(e,8,this.length),o.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return e>>>=0,t||D(e,8,this.length),o.read(this,e,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||C(this,e,t,r,Math.pow(2,8*r)-1,0);let o=1,i=0;for(this[t]=255&e;++i<r&&(o*=256);)this[t+i]=e/o&255;return t+r},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||C(this,e,t,r,Math.pow(2,8*r)-1,0);let o=r-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+r},c.prototype.writeUint8=c.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,1,255,0),this[t]=255&e,t+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigUInt64LE=X(function(e,t=0){return B(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=X(function(e,t=0){return L(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);C(this,e,t,r,n-1,-n)}let o=0,i=1,s=0;for(this[t]=255&e;++o<r&&(i*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/i|0)-s&255;return t+r},c.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);C(this,e,t,r,n-1,-n)}let o=r-1,i=1,s=0;for(this[t+o]=255&e;--o>=0&&(i*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/i|0)-s&255;return t+r},c.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},c.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigInt64LE=X(function(e,t=0){return B(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=X(function(e,t=0){return L(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeFloatLE=function(e,t,r){return j(this,e,t,!0,r)},c.prototype.writeFloatBE=function(e,t,r){return j(this,e,t,!1,r)},c.prototype.writeDoubleLE=function(e,t,r){return R(this,e,t,!0,r)},c.prototype.writeDoubleBE=function(e,t,r){return R(this,e,t,!1,r)},c.prototype.copy=function(e,t,r,n){if(!c.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);const o=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),o},c.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!c.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){const t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let o;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{const i=c.isBuffer(e)?e:c.from(e,n),s=i.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<r-t;++o)this[o+t]=i[o%s]}return this};const U={};function F(e,t,r){U[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function z(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function V(e,t,r,n,o,i){if(e>r||e<t){const n="bigint"==typeof t?"n":"";let o;throw o=i>3?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(i+1)}${n}`:`>= -(2${n} ** ${8*(i+1)-1}${n}) and < 2 ** ${8*(i+1)-1}${n}`:`>= ${t}${n} and <= ${r}${n}`,new U.ERR_OUT_OF_RANGE("value",o,e)}!function(e,t,r){H(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||$(t,e.length-(r+1))}(n,o,i)}function H(e,t){if("number"!=typeof e)throw new U.ERR_INVALID_ARG_TYPE(t,"number",e)}function $(e,t,r){if(Math.floor(e)!==e)throw H(e,r),new U.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new U.ERR_BUFFER_OUT_OF_BOUNDS;throw new U.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}F("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),F("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),F("ERR_OUT_OF_RANGE",function(e,t,r){let n=`The value of "${e}" is out of range.`,o=r;return Number.isInteger(r)&&Math.abs(r)>2**32?o=z(String(r)):"bigint"==typeof r&&(o=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(o=z(o)),o+="n"),n+=` It must be ${t}. Received ${o}`,n},RangeError);const W=/[^+/0-9A-Za-z-_]/g;function K(e,t){let r;t=t||1/0;const n=e.length;let o=null;const i=[];for(let s=0;s<n;++s){if(r=e.charCodeAt(s),r>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function q(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(W,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function G(e,t,r,n){let o;for(o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}function Y(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function Q(e){return e!=e}const Z=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let o=0;o<16;++o)t[n+o]=e[r]+e[o]}return t}();function X(e){return"undefined"==typeof BigInt?J:e}function J(){throw new Error("BigInt not supported")}},3744:function(e,t,r){e.exports=function(){"use strict";var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)},t=function(){return(t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function n(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||((n=n||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:r.g,i=Object.keys,s=Array.isArray;function a(e,t){return"object"!=typeof t||i(t).forEach(function(r){e[r]=t[r]}),e}"undefined"==typeof Promise||o.Promise||(o.Promise=Promise);var c=Object.getPrototypeOf,l={}.hasOwnProperty;function u(e,t){return l.call(e,t)}function d(e,t){"function"==typeof t&&(t=t(c(e))),("undefined"==typeof Reflect?i:Reflect.ownKeys)(t).forEach(function(r){f(e,r,t[r])})}var h=Object.defineProperty;function f(e,t,r,n){h(e,t,a(r&&u(r,"get")&&"function"==typeof r.get?{get:r.get,set:r.set,configurable:!0}:{value:r,configurable:!0,writable:!0},n))}function p(e){return{from:function(t){return e.prototype=Object.create(t.prototype),f(e.prototype,"constructor",e),{extend:d.bind(null,e.prototype)}}}}var g=Object.getOwnPropertyDescriptor,y=[].slice;function m(e,t,r){return y.call(e,t,r)}function b(e,t){return t(e)}function w(e){if(!e)throw new Error("Assertion Failed")}function v(e){o.setImmediate?setImmediate(e):setTimeout(e,0)}function _(e,t){if("string"==typeof t&&u(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var r=[],n=0,o=t.length;n<o;++n){var i=_(e,t[n]);r.push(i)}return r}var s=t.indexOf(".");if(-1!==s){var a=e[t.substr(0,s)];return null==a?void 0:_(a,t.substr(s+1))}}function E(e,t,r){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){w("string"!=typeof r&&"length"in r);for(var n=0,o=t.length;n<o;++n)E(e,t[n],r[n])}else{var i,a,c=t.indexOf(".");-1!==c?(i=t.substr(0,c),""===(a=t.substr(c+1))?void 0===r?s(e)&&!isNaN(parseInt(i))?e.splice(i,1):delete e[i]:e[i]=r:E(c=(c=e[i])&&u(e,i)?c:e[i]={},a,r)):void 0===r?s(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=r}}function A(e){var t,r={};for(t in e)u(e,t)&&(r[t]=e[t]);return r}var S=[].concat;function x(e){return S.apply([],e)}var I="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(x([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return o[e]}),T=new Set(I.map(function(e){return o[e]})),k=null;function M(e){return k=new WeakMap,e=function e(t){if(!t||"object"!=typeof t)return t;var r=k.get(t);if(r)return r;if(s(t)){r=[],k.set(t,r);for(var n=0,o=t.length;n<o;++n)r.push(e(t[n]))}else if(T.has(t.constructor))r=t;else{var i,a=c(t);for(i in r=a===Object.prototype?{}:Object.create(a),k.set(t,r),t)u(t,i)&&(r[i]=e(t[i]))}return r}(e),k=null,e}var O={}.toString;function N(e){return O.call(e).slice(8,-1)}var D="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",C="symbol"==typeof D?function(e){var t;return null!=e&&(t=e[D])&&t.apply(e)}:function(){return null};function B(e,t){return 0<=(t=e.indexOf(t))&&e.splice(t,1),0<=t}var L={};function P(e){var t,r,n,o;if(1===arguments.length){if(s(e))return e.slice();if(this===L&&"string"==typeof e)return[e];if(o=C(e)){for(r=[];!(n=o.next()).done;)r.push(n.value);return r}if(null==e)return[e];if("number"!=typeof(t=e.length))return[e];for(r=new Array(t);t--;)r[t]=e[t];return r}for(t=arguments.length,r=new Array(t);t--;)r[t]=arguments[t];return r}var j="undefined"!=typeof Symbol?function(e){return"AsyncFunction"===e[Symbol.toStringTag]}:function(){return!1},R=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(ae=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"]),U={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function F(e,t){this.name=e,this.message=t}function z(e,t){return e+". Errors: "+Object.keys(t).map(function(e){return t[e].toString()}).filter(function(e,t,r){return r.indexOf(e)===t}).join("\n")}function V(e,t,r,n){this.failures=t,this.failedKeys=n,this.successCount=r,this.message=z(e,t)}function H(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(e){return t[e]}),this.failuresByPos=t,this.message=z(e,this.failures)}p(F).from(Error).extend({toString:function(){return this.name+": "+this.message}}),p(V).from(F),p(H).from(F);var $=R.reduce(function(e,t){return e[t]=t+"Error",e},{}),W=F,K=R.reduce(function(e,t){var r=t+"Error";function n(e,n){this.name=r,e?"string"==typeof e?(this.message="".concat(e).concat(n?"\n "+n:""),this.inner=n||null):"object"==typeof e&&(this.message="".concat(e.name," ").concat(e.message),this.inner=e):(this.message=U[t]||r,this.inner=null)}return p(n).from(W),e[t]=n,e},{});K.Syntax=SyntaxError,K.Type=TypeError,K.Range=RangeError;var q=ae.reduce(function(e,t){return e[t+"Error"]=K[t],e},{}),G=R.reduce(function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=K[t]),e},{});function Y(){}function Q(e){return e}function Z(e,t){return null==e||e===Q?t:function(r){return t(e(r))}}function X(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function J(e,t){return e===Y?t:function(){var r=e.apply(this,arguments);void 0!==r&&(arguments[0]=r);var n=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var i=t.apply(this,arguments);return n&&(this.onsuccess=this.onsuccess?X(n,this.onsuccess):n),o&&(this.onerror=this.onerror?X(o,this.onerror):o),void 0!==i?i:r}}function ee(e,t){return e===Y?t:function(){e.apply(this,arguments);var r=this.onsuccess,n=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),r&&(this.onsuccess=this.onsuccess?X(r,this.onsuccess):r),n&&(this.onerror=this.onerror?X(n,this.onerror):n)}}function te(e,t){return e===Y?t:function(r){var n=e.apply(this,arguments);a(r,n);var o=this.onsuccess,i=this.onerror;return this.onsuccess=null,this.onerror=null,r=t.apply(this,arguments),o&&(this.onsuccess=this.onsuccess?X(o,this.onsuccess):o),i&&(this.onerror=this.onerror?X(i,this.onerror):i),void 0===n?void 0===r?void 0:r:a(n,r)}}function re(e,t){return e===Y?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function ne(e,t){return e===Y?t:function(){var r=e.apply(this,arguments);if(r&&"function"==typeof r.then){for(var n=this,o=arguments.length,i=new Array(o);o--;)i[o]=arguments[o];return r.then(function(){return t.apply(n,i)})}return t.apply(this,arguments)}}G.ModifyError=V,G.DexieError=F,G.BulkError=H;var oe="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ie(e){oe=e}var se={},ae=(I="undefined"==typeof Promise?[]:function(){var e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,c(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,c(t),e]}(),I[0]),ce=(R=I[1],I=I[2],R=R&&R.then,ae&&ae.constructor),le=!!I,ue=function(e,t){be.push([e,t]),he&&(queueMicrotask(ke),he=!1)},de=!0,he=!0,fe=[],pe=[],ge=Q,ye={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Y,pgp:!1,env:{},finalize:Y},me=ye,be=[],we=0,ve=[];function _e(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=me;if("function"!=typeof e){if(e!==se)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Se(this,this._value))}this._state=null,this._value=null,++t.ref,function e(t,r){try{r(function(r){if(null===t._state){if(r===t)throw new TypeError("A promise cannot be resolved with itself.");var n=t._lib&&Me();r&&"function"==typeof r.then?e(t,function(e,t){r instanceof _e?r._then(e,t):r.then(e,t)}):(t._state=!0,t._value=r,xe(t)),n&&Oe()}},Se.bind(null,t))}catch(r){Se(t,r)}}(this,e)}var Ee={get:function(){var e=me,t=Re;function r(r,n){var o=this,i=!e.global&&(e!==me||t!==Re),s=i&&!Ve(),a=new _e(function(t,a){Ie(o,new Ae(Ge(r,e,i,s),Ge(n,e,i,s),t,a,e))});return this._consoleTask&&(a._consoleTask=this._consoleTask),a}return r.prototype=se,r},set:function(e){f(this,"then",e&&e.prototype===se?Ee:{get:function(){return e},set:Ee.set})}};function Ae(e,t,r,n,o){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=r,this.reject=n,this.psd=o}function Se(e,t){var r,n;pe.push(t),null===e._state&&(r=e._lib&&Me(),t=ge(t),e._state=!1,e._value=t,n=e,fe.some(function(e){return e._value===n._value})||fe.push(n),xe(e),r&&Oe())}function xe(e){var t=e._listeners;e._listeners=[];for(var r=0,n=t.length;r<n;++r)Ie(e,t[r]);var o=e._PSD;--o.ref||o.finalize(),0===we&&(++we,ue(function(){0==--we&&Ne()},[]))}function Ie(e,t){if(null!==e._state){var r=e._state?t.onFulfilled:t.onRejected;if(null===r)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++we,ue(Te,[r,e,t])}else e._listeners.push(t)}function Te(e,t,r){try{var n,o=t._value;!t._state&&pe.length&&(pe=[]),n=oe&&t._consoleTask?t._consoleTask.run(function(){return e(o)}):e(o),t._state||-1!==pe.indexOf(o)||function(e){for(var t=fe.length;t;)if(fe[--t]._value===e._value)return fe.splice(t,1)}(t),r.resolve(n)}catch(e){r.reject(e)}finally{0==--we&&Ne(),--r.psd.ref||r.psd.finalize()}}function ke(){qe(ye,function(){Me()&&Oe()})}function Me(){var e=de;return he=de=!1,e}function Oe(){var e,t,r;do{for(;0<be.length;)for(e=be,be=[],r=e.length,t=0;t<r;++t){var n=e[t];n[0].apply(null,n[1])}}while(0<be.length);he=de=!0}function Ne(){var e=fe;fe=[],e.forEach(function(e){e._PSD.onunhandled.call(null,e._value,e)});for(var t=ve.slice(0),r=t.length;r;)t[--r]()}function De(e){return new _e(se,!1,e)}function Ce(e,t){var r=me;return function(){var n=Me(),o=me;try{return We(r,!0),e.apply(this,arguments)}catch(n){t&&t(n)}finally{We(o,!1),n&&Oe()}}}d(_e.prototype,{then:Ee,_then:function(e,t){Ie(this,new Ae(null,null,e,t,me))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=e,r=arguments[1];return"function"==typeof t?this.then(null,function(e){return(e instanceof t?r:De)(e)}):this.then(null,function(e){return(e&&e.name===t?r:De)(e)})},finally:function(e){return this.then(function(t){return _e.resolve(e()).then(function(){return t})},function(t){return _e.resolve(e()).then(function(){return De(t)})})},timeout:function(e,t){var r=this;return e<1/0?new _e(function(n,o){var i=setTimeout(function(){return o(new K.Timeout(t))},e);r.then(n,o).finally(clearTimeout.bind(null,i))}):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&f(_e.prototype,Symbol.toStringTag,"Dexie.Promise"),ye.env=Ke(),d(_e,{all:function(){var e=P.apply(null,arguments).map(He);return new _e(function(t,r){0===e.length&&t([]);var n=e.length;e.forEach(function(o,i){return _e.resolve(o).then(function(r){e[i]=r,--n||t(e)},r)})})},resolve:function(e){return e instanceof _e?e:e&&"function"==typeof e.then?new _e(function(t,r){e.then(t,r)}):new _e(se,!0,e)},reject:De,race:function(){var e=P.apply(null,arguments).map(He);return new _e(function(t,r){e.map(function(e){return _e.resolve(e).then(t,r)})})},PSD:{get:function(){return me},set:function(e){return me=e}},totalEchoes:{get:function(){return Re}},newPSD:Fe,usePSD:qe,scheduler:{get:function(){return ue},set:function(e){ue=e}},rejectionMapper:{get:function(){return ge},set:function(e){ge=e}},follow:function(e,t){return new _e(function(r,n){return Fe(function(t,r){var n=me;n.unhandleds=[],n.onunhandled=r,n.finalize=X(function(){var e,n=this;e=function(){0===n.unhandleds.length?t():r(n.unhandleds[0])},ve.push(function t(){e(),ve.splice(ve.indexOf(t),1)}),++we,ue(function(){0==--we&&Ne()},[])},n.finalize),e()},t,r,n)})}}),ce&&(ce.allSettled&&f(_e,"allSettled",function(){var e=P.apply(null,arguments).map(He);return new _e(function(t){0===e.length&&t([]);var r=e.length,n=new Array(r);e.forEach(function(e,o){return _e.resolve(e).then(function(e){return n[o]={status:"fulfilled",value:e}},function(e){return n[o]={status:"rejected",reason:e}}).then(function(){return--r||t(n)})})})}),ce.any&&"undefined"!=typeof AggregateError&&f(_e,"any",function(){var e=P.apply(null,arguments).map(He);return new _e(function(t,r){0===e.length&&r(new AggregateError([]));var n=e.length,o=new Array(n);e.forEach(function(e,i){return _e.resolve(e).then(function(e){return t(e)},function(e){o[i]=e,--n||r(new AggregateError(o))})})})}),ce.withResolvers&&(_e.withResolvers=ce.withResolvers));var Be={awaits:0,echoes:0,id:0},Le=0,Pe=[],je=0,Re=0,Ue=0;function Fe(e,t,r,n){var o=me,i=Object.create(o);return i.parent=o,i.ref=0,i.global=!1,i.id=++Ue,ye.env,i.env=le?{Promise:_e,PromiseProp:{value:_e,configurable:!0,writable:!0},all:_e.all,race:_e.race,allSettled:_e.allSettled,any:_e.any,resolve:_e.resolve,reject:_e.reject}:{},t&&a(i,t),++o.ref,i.finalize=function(){--this.parent.ref||this.parent.finalize()},n=qe(i,e,r,n),0===i.ref&&i.finalize(),n}function ze(){return Be.id||(Be.id=++Le),++Be.awaits,Be.echoes+=100,Be.id}function Ve(){return!!Be.awaits&&(0==--Be.awaits&&(Be.id=0),Be.echoes=100*Be.awaits,!0)}function He(e){return Be.echoes&&e&&e.constructor===ce?(ze(),e.then(function(e){return Ve(),e},function(e){return Ve(),Qe(e)})):e}function $e(){var e=Pe[Pe.length-1];Pe.pop(),We(e,!1)}function We(e,t){var r,n=me;(t?!Be.echoes||je++&&e===me:!je||--je&&e===me)||queueMicrotask(t?function(e){++Re,Be.echoes&&0!=--Be.echoes||(Be.echoes=Be.awaits=Be.id=0),Pe.push(me),We(e,!0)}.bind(null,e):$e),e!==me&&(me=e,n===ye&&(ye.env=Ke()),le&&(r=ye.env.Promise,t=e.env,(n.global||e.global)&&(Object.defineProperty(o,"Promise",t.PromiseProp),r.all=t.all,r.race=t.race,r.resolve=t.resolve,r.reject=t.reject,t.allSettled&&(r.allSettled=t.allSettled),t.any&&(r.any=t.any))))}function Ke(){var e=o.Promise;return le?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(o,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function qe(e,t,r,n,o){var i=me;try{return We(e,!0),t(r,n,o)}finally{We(i,!1)}}function Ge(e,t,r,n){return"function"!=typeof e?e:function(){var o=me;r&&ze(),We(t,!0);try{return e.apply(this,arguments)}finally{We(o,!1),n&&queueMicrotask(Ve)}}}function Ye(e){Promise===ce&&0===Be.echoes?0===je?e():enqueueNativeMicroTask(e):setTimeout(e,0)}-1===(""+R).indexOf("[native code]")&&(ze=Ve=Y);var Qe=_e.reject,Ze=String.fromCharCode(65535),Xe="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Je="String expected.",et=[],tt="__dbnames",rt="readonly",nt="readwrite";function ot(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var it={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function st(e){return"string"!=typeof e||/\./.test(e)?function(e){return e}:function(t){return void 0===t[e]&&e in t&&delete(t=M(t))[e],t}}function at(){throw K.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function ct(e,t){try{var r=lt(e),n=lt(t);if(r!==n)return"Array"===r?1:"Array"===n?-1:"binary"===r?1:"binary"===n?-1:"string"===r?1:"string"===n?-1:"Date"===r?1:"Date"!==n?NaN:-1;switch(r){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":return function(e,t){for(var r=e.length,n=t.length,o=r<n?r:n,i=0;i<o;++i)if(e[i]!==t[i])return e[i]<t[i]?-1:1;return r===n?0:r<n?-1:1}(ut(e),ut(t));case"Array":return function(e,t){for(var r=e.length,n=t.length,o=r<n?r:n,i=0;i<o;++i){var s=ct(e[i],t[i]);if(0!==s)return s}return r===n?0:r<n?-1:1}(e,t)}}catch(e){}return NaN}function lt(e){var t=typeof e;return"object"!=t?t:ArrayBuffer.isView(e)||"ArrayBuffer"===(e=N(e))?"binary":e}function ut(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}function dt(e,t,r){var n=e.schema.yProps;return n?(t&&0<r.numFailures&&(t=t.filter(function(e,t){return!r.failures[t]})),Promise.all(n.map(function(r){return r=r.updatesTable,t?e.db.table(r).where("k").anyOf(t).delete():e.db.table(r).clear()})).then(function(){return r})):r}var ht=(ft.prototype.execute=function(e){var t=this["@@propmod"];if(void 0!==t.add){var r=t.add;if(s(r))return n(n([],s(e)?e:[],!0),r,!0).sort();if("number"==typeof r)return(Number(e)||0)+r;if("bigint"==typeof r)try{return BigInt(e)+r}catch(e){return BigInt(0)+r}throw new TypeError("Invalid term ".concat(r))}if(void 0!==t.remove){var o=t.remove;if(s(o))return s(e)?e.filter(function(e){return!o.includes(e)}).sort():[];if("number"==typeof o)return Number(e)-o;if("bigint"==typeof o)try{return BigInt(e)-o}catch(e){return BigInt(0)-o}throw new TypeError("Invalid subtrahend ".concat(o))}return(r=null===(r=t.replacePrefix)||void 0===r?void 0:r[0])&&"string"==typeof e&&e.startsWith(r)?t.replacePrefix[1]+e.substring(r.length):e},ft);function ft(e){this["@@propmod"]=e}function pt(e,t){for(var r=i(t),n=r.length,o=!1,s=0;s<n;++s){var a=r[s],c=t[a],l=_(e,a);c instanceof ht?(E(e,a,c.execute(l)),o=!0):l!==c&&(E(e,a,c),o=!0)}return o}var gt=(yt.prototype._trans=function(e,t,r){var n=this._tx||me.trans,o=this.name,i=oe&&"undefined"!=typeof console&&console.createTask&&console.createTask("Dexie: ".concat("readonly"===e?"read":"write"," ").concat(this.name));function s(e,r,n){if(!n.schema[o])throw new K.NotFound("Table "+o+" not part of transaction");return t(n.idbtrans,n)}var a=Me();try{var c=n&&n.db._novip===this.db._novip?n===me.trans?n._promise(e,s,r):Fe(function(){return n._promise(e,s,r)},{trans:n,transless:me.transless||me}):function e(t,r,n,o){if(t.idbdb&&(t._state.openComplete||me.letThrough||t._vip)){var i=t._createTransaction(r,n,t._dbSchema);try{i.create(),t._state.PR1398_maxLoop=3}catch(i){return i.name===$.InvalidState&&t.isOpen()&&0<--t._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return e(t,r,n,o)})):Qe(i)}return i._promise(r,function(e,t){return Fe(function(){return me.trans=i,o(e,t,i)})}).then(function(e){if("readwrite"===r)try{i.idbtrans.commit()}catch(e){}return"readonly"===r?e:i._completion.then(function(){return e})})}if(t._state.openComplete)return Qe(new K.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return Qe(new K.DatabaseClosed);t.open().catch(Y)}return t._state.dbReadyPromise.then(function(){return e(t,r,n,o)})}(this.db,e,[this.name],s);return i&&(c._consoleTask=i,c=c.catch(function(e){return console.trace(e),Qe(e)})),c}finally{a&&Oe()}},yt.prototype.get=function(e,t){var r=this;return e&&e.constructor===Object?this.where(e).first(t):null==e?Qe(new K.Type("Invalid argument to Table.get()")):this._trans("readonly",function(t){return r.core.get({trans:t,key:e}).then(function(e){return r.hook.reading.fire(e)})}).then(t)},yt.prototype.where=function(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(s(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=i(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter(function(e){if(e.compound&&t.every(function(t){return 0<=e.keyPath.indexOf(t)})){for(var r=0;r<t.length;++r)if(-1===t.indexOf(e.keyPath[r]))return!1;return!0}return!1}).sort(function(e,t){return e.keyPath.length-t.keyPath.length})[0];if(r&&this.db._maxKey!==Ze){var n=r.keyPath.slice(0,t.length);return this.where(n).equals(n.map(function(t){return e[t]}))}!r&&oe&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]"));var o=this.schema.idxByName;function a(e,t){return 0===ct(e,t)}var c=t.reduce(function(t,r){var n=t[0],i=t[1],c=(t=o[r],e[r]);return[n||t,n||!t?ot(i,t&&t.multi?function(e){return e=_(e,r),s(e)&&e.some(function(e){return a(c,e)})}:function(e){return a(c,_(e,r))}):i]},[null,null]);return n=c[0],c=c[1],n?this.where(n.name).equals(e[n.keyPath]).filter(c):r?this.filter(c):this.where(t).equals("")},yt.prototype.filter=function(e){return this.toCollection().and(e)},yt.prototype.count=function(e){return this.toCollection().count(e)},yt.prototype.offset=function(e){return this.toCollection().offset(e)},yt.prototype.limit=function(e){return this.toCollection().limit(e)},yt.prototype.each=function(e){return this.toCollection().each(e)},yt.prototype.toArray=function(e){return this.toCollection().toArray(e)},yt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},yt.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,s(e)?"[".concat(e.join("+"),"]"):e))},yt.prototype.reverse=function(){return this.toCollection().reverse()},yt.prototype.mapToClass=function(t){var r,n=this.db,o=this.name;function i(){return null!==r&&r.apply(this,arguments)||this}(this.schema.mappedClass=t).prototype instanceof at&&(function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}(i,r=t),Object.defineProperty(i.prototype,"db",{get:function(){return n},enumerable:!1,configurable:!0}),i.prototype.table=function(){return o},t=i);for(var s=new Set,a=t.prototype;a;a=c(a))Object.getOwnPropertyNames(a).forEach(function(e){return s.add(e)});function l(e){if(!e)return e;var r,n=Object.create(t.prototype);for(r in e)if(!s.has(r))try{n[r]=e[r]}catch(e){}return n}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=l,this.hook("reading",l),t},yt.prototype.defineClass=function(){return this.mapToClass(function(e){a(this,e)})},yt.prototype.add=function(e,t){var r=this,n=this.schema.primKey,o=n.auto,i=n.keyPath,s=e;return i&&o&&(s=st(i)(e)),this._trans("readwrite",function(e){return r.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[s]})}).then(function(e){return e.numFailures?_e.reject(e.failures[0]):e.lastResult}).then(function(t){if(i)try{E(e,i,t)}catch(t){}return t})},yt.prototype.upsert=function(e,t){var r=this,n=this.schema.primKey.keyPath;return this._trans("readwrite",function(o){return r.core.get({trans:o,key:e}).then(function(i){var s=null!=i?i:{};return pt(s,t),n&&E(s,n,e),r.core.mutate({trans:o,type:"put",values:[s],keys:[e],upsert:!0,updates:{keys:[e],changeSpecs:[t]}}).then(function(e){return e.numFailures?_e.reject(e.failures[0]):!!i})})})},yt.prototype.update=function(e,t){return"object"!=typeof e||s(e)?this.where(":id").equals(e).modify(t):void 0===(e=_(e,this.schema.primKey.keyPath))?Qe(new K.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t)},yt.prototype.put=function(e,t){var r=this,n=this.schema.primKey,o=n.auto,i=n.keyPath,s=e;return i&&o&&(s=st(i)(e)),this._trans("readwrite",function(e){return r.core.mutate({trans:e,type:"put",values:[s],keys:null!=t?[t]:null})}).then(function(e){return e.numFailures?_e.reject(e.failures[0]):e.lastResult}).then(function(t){if(i)try{E(e,i,t)}catch(t){}return t})},yt.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(r){return t.core.mutate({trans:r,type:"delete",keys:[e]}).then(function(r){return dt(t,[e],r)}).then(function(e){return e.numFailures?_e.reject(e.failures[0]):void 0})})},yt.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:it}).then(function(t){return dt(e,null,t)})}).then(function(e){return e.numFailures?_e.reject(e.failures[0]):void 0})},yt.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(r){return t.core.getMany({keys:e,trans:r}).then(function(e){return e.map(function(e){return t.hook.reading.fire(e)})})})},yt.prototype.bulkAdd=function(e,t,r){var n=this,o=Array.isArray(t)?t:void 0,i=(r=r||(o?void 0:t))?r.allKeys:void 0;return this._trans("readwrite",function(t){var r=(a=n.schema.primKey).auto;if((a=a.keyPath)&&o)throw new K.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(o&&o.length!==e.length)throw new K.InvalidArgument("Arguments objects and keys must have the same length");var s=e.length,a=a&&r?e.map(st(a)):e;return n.core.mutate({trans:t,type:"add",keys:o,values:a,wantResults:i}).then(function(e){var t=e.numFailures,r=e.results,o=e.lastResult;if(e=e.failures,0===t)return i?r:o;throw new H("".concat(n.name,".bulkAdd(): ").concat(t," of ").concat(s," operations failed"),e)})})},yt.prototype.bulkPut=function(e,t,r){var n=this,o=Array.isArray(t)?t:void 0,i=(r=r||(o?void 0:t))?r.allKeys:void 0;return this._trans("readwrite",function(t){var r=(a=n.schema.primKey).auto;if((a=a.keyPath)&&o)throw new K.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(o&&o.length!==e.length)throw new K.InvalidArgument("Arguments objects and keys must have the same length");var s=e.length,a=a&&r?e.map(st(a)):e;return n.core.mutate({trans:t,type:"put",keys:o,values:a,wantResults:i}).then(function(e){var t=e.numFailures,r=e.results,o=e.lastResult;if(e=e.failures,0===t)return i?r:o;throw new H("".concat(n.name,".bulkPut(): ").concat(t," of ").concat(s," operations failed"),e)})})},yt.prototype.bulkUpdate=function(e){var t=this,r=this.core,n=e.map(function(e){return e.key}),o=e.map(function(e){return e.changes}),i=[];return this._trans("readwrite",function(s){return r.getMany({trans:s,keys:n,cache:"clone"}).then(function(a){var c=[],l=[];e.forEach(function(e,r){var n=e.key,o=e.changes,s=a[r];if(s){for(var u=0,d=Object.keys(o);u<d.length;u++){var h=d[u],f=o[h];if(h===t.schema.primKey.keyPath){if(0!==ct(f,n))throw new K.Constraint("Cannot update primary key in bulkUpdate()")}else E(s,h,f)}i.push(r),c.push(n),l.push(s)}});var u=c.length;return r.mutate({trans:s,type:"put",keys:c,values:l,updates:{keys:n,changeSpecs:o}}).then(function(e){var r=e.numFailures,n=e.failures;if(0===r)return u;for(var o=0,s=Object.keys(n);o<s.length;o++){var a,c=s[o],l=i[Number(c)];null!=l&&(a=n[c],delete n[c],n[l]=a)}throw new H("".concat(t.name,".bulkUpdate(): ").concat(r," of ").concat(u," operations failed"),n)})})})},yt.prototype.bulkDelete=function(e){var t=this,r=e.length;return this._trans("readwrite",function(r){return t.core.mutate({trans:r,type:"delete",keys:e}).then(function(r){return dt(t,e,r)})}).then(function(e){var n=e.numFailures,o=e.lastResult;if(e=e.failures,0===n)return o;throw new H("".concat(t.name,".bulkDelete(): ").concat(n," of ").concat(r," operations failed"),e)})},yt);function yt(){}function mt(e){function t(t,n){if(n){for(var o=arguments.length,i=new Array(o-1);--o;)i[o-1]=arguments[o];return r[t].subscribe.apply(null,i),e}if("string"==typeof t)return r[t]}var r={};t.addEventType=a;for(var n=1,o=arguments.length;n<o;++n)a(arguments[n]);return t;function a(e,n,o){if("object"!=typeof e){var c;n=n||re;var l={subscribers:[],fire:o=o||Y,subscribe:function(e){-1===l.subscribers.indexOf(e)&&(l.subscribers.push(e),l.fire=n(l.fire,e))},unsubscribe:function(e){l.subscribers=l.subscribers.filter(function(t){return t!==e}),l.fire=l.subscribers.reduce(n,o)}};return r[e]=t[e]=l}i(c=e).forEach(function(e){var t=c[e];if(s(t))a(e,c[e][0],c[e][1]);else{if("asap"!==t)throw new K.InvalidArgument("Invalid event config");var r=a(e,Q,function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];r.subscribers.forEach(function(e){v(function(){e.apply(null,t)})})})}})}}function bt(e,t){return p(t).from({prototype:e}),t}function wt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function vt(e,t){e.filter=ot(e.filter,t)}function _t(e,t,r){var n=e.replayFilter;e.replayFilter=n?function(){return ot(n(),t())}:t,e.justLimit=r&&!n}function Et(e,t){if(e.isPrimKey)return t.primaryKey;var r=t.getIndexByKeyPath(e.index);if(!r)throw new K.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return r}function At(e,t,r){var n=Et(e,t.schema);return t.openCursor({trans:r,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:n,range:e.range}})}function St(e,t,r,n){var o=e.replayFilter?ot(e.filter,e.replayFilter()):e.filter;if(e.or){var i={},s=function(e,r,n){var s,a;o&&!o(r,n,function(e){return r.stop(e)},function(e){return r.fail(e)})||("[object ArrayBuffer]"==(a=""+(s=r.primaryKey))&&(a=""+new Uint8Array(s)),u(i,a)||(i[a]=!0,t(e,r,n)))};return Promise.all([e.or._iterate(s,r),xt(At(e,n,r),e.algorithm,s,!e.keysOnly&&e.valueMapper)])}return xt(At(e,n,r),ot(e.algorithm,o),t,!e.keysOnly&&e.valueMapper)}function xt(e,t,r,n){var o=Ce(n?function(e,t,o){return r(n(e),t,o)}:r);return e.then(function(e){if(e)return e.start(function(){var r=function(){return e.continue()};t&&!t(e,function(e){return r=e},function(t){e.stop(t),r=Y},function(t){e.fail(t),r=Y})||o(e.value,e,function(e){return r=e}),r()})})}var It=(Tt.prototype._read=function(e,t){var r=this._ctx;return r.error?r.table._trans(null,Qe.bind(null,r.error)):r.table._trans("readonly",e).then(t)},Tt.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,Qe.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},Tt.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=ot(t.algorithm,e)},Tt.prototype._iterate=function(e,t){return St(this._ctx,e,t,this._ctx.table.core)},Tt.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&a(r,e),t._ctx=r,t},Tt.prototype.raw=function(){return this._ctx.valueMapper=null,this},Tt.prototype.each=function(e){var t=this._ctx;return this._read(function(r){return St(t,e,r,t.table.core)})},Tt.prototype.count=function(e){var t=this;return this._read(function(e){var r=t._ctx,n=r.table.core;if(wt(r,!0))return n.count({trans:e,query:{index:Et(r,n.schema),range:r.range}}).then(function(e){return Math.min(e,r.limit)});var o=0;return St(r,function(){return++o,!1},e,n).then(function(){return o})}).then(e)},Tt.prototype.sortBy=function(e,t){var r=e.split(".").reverse(),n=r[0],o=r.length-1;function i(e,t){return t?i(e[r[t]],t-1):e[n]}var s="next"===this._ctx.dir?1:-1;function a(e,t){return ct(i(e,o),i(t,o))*s}return this.toArray(function(e){return e.sort(a)}).then(t)},Tt.prototype.toArray=function(e){var t=this;return this._read(function(e){var r=t._ctx;if("next"===r.dir&&wt(r,!0)&&0<r.limit){var n=r.valueMapper,o=Et(r,r.table.core.schema);return r.table.core.query({trans:e,limit:r.limit,values:!0,query:{index:o,range:r.range}}).then(function(e){return e=e.result,n?e.map(n):e})}var i=[];return St(r,function(e){return i.push(e)},e,r.table.core).then(function(){return i})},e)},Tt.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,wt(t)?_t(t,function(){var t=e;return function(e,r){return 0===t||(1===t?--t:r(function(){e.advance(t),t=0}),!1)}}):_t(t,function(){var t=e;return function(){return--t<0}})),this},Tt.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),_t(this._ctx,function(){var t=e;return function(e,r,n){return--t<=0&&r(n),0<=t}},!0),this},Tt.prototype.until=function(e,t){return vt(this._ctx,function(r,n,o){return!e(r.value)||(n(o),t)}),this},Tt.prototype.first=function(e){return this.limit(1).toArray(function(e){return e[0]}).then(e)},Tt.prototype.last=function(e){return this.reverse().first(e)},Tt.prototype.filter=function(e){var t;return vt(this._ctx,function(t){return e(t.value)}),(t=this._ctx).isMatch=ot(t.isMatch,e),this},Tt.prototype.and=function(e){return this.filter(e)},Tt.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},Tt.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Tt.prototype.desc=function(){return this.reverse()},Tt.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,r){e(r.key,r)})},Tt.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},Tt.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,r){e(r.primaryKey,r)})},Tt.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var r=[];return this.each(function(e,t){r.push(t.key)}).then(function(){return r}).then(e)},Tt.prototype.primaryKeys=function(e){var t=this._ctx;if("next"===t.dir&&wt(t,!0)&&0<t.limit)return this._read(function(e){var r=Et(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:r,range:t.range}})}).then(function(e){return e.result}).then(e);t.keysOnly=!t.isMatch;var r=[];return this.each(function(e,t){r.push(t.primaryKey)}).then(function(){return r}).then(e)},Tt.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},Tt.prototype.firstKey=function(e){return this.limit(1).keys(function(e){return e[0]}).then(e)},Tt.prototype.lastKey=function(e){return this.reverse().firstKey(e)},Tt.prototype.distinct=function(){var e;if(!(e=(e=this._ctx).index&&e.table.schema.idxByName[e.index])||!e.multi)return this;var t={};return vt(this._ctx,function(e){var r=e.primaryKey.toString();return e=u(t,r),t[r]=!0,!e}),this},Tt.prototype.modify=function(e){var t=this,r=this._ctx;return this._write(function(n){var o,s="function"==typeof e?e:function(t){return pt(t,e)},a=r.table.core,c=(o=a.schema.primaryKey).outbound,l=o.extractKey,u=200;function d(e,t){var r=t.failures;t=t.numFailures,f+=e-t;for(var n=0,o=i(r);n<o.length;n++){var s=o[n];h.push(r[s])}}(o=t.db._options.modifyChunkSize)&&(u="object"==typeof o?o[a.name]||o["*"]||200:o);var h=[],f=0,p=[],g=e===kt;return t.clone().primaryKeys().then(function(t){var o=wt(r)&&r.limit===1/0&&("function"!=typeof e||g)&&{index:r.index,range:r.range};return function i(h){var f=Math.min(u,t.length-h),p=t.slice(h,h+f);return(g?Promise.resolve([]):a.getMany({trans:n,keys:p,cache:"immutable"})).then(function(y){var m=[],b=[],w=c?[]:null,v=g?p:[];if(!g)for(var _=0;_<f;++_){var E=y[_],A={value:M(E),primKey:t[h+_]};!1!==s.call(A,A.value,A)&&(null==A.value?v.push(t[h+_]):c||0===ct(l(E),l(A.value))?(b.push(A.value),c&&w.push(t[h+_])):(v.push(t[h+_]),m.push(A.value)))}return Promise.resolve(0<m.length&&a.mutate({trans:n,type:"add",values:m}).then(function(e){for(var t in e.failures)v.splice(parseInt(t),1);d(m.length,e)})).then(function(){return(0<b.length||o&&"object"==typeof e)&&a.mutate({trans:n,type:"put",keys:w,values:b,criteria:o,changeSpec:"function"!=typeof e&&e,isAdditionalChunk:0<h}).then(function(e){return d(b.length,e)})}).then(function(){return(0<v.length||o&&g)&&a.mutate({trans:n,type:"delete",keys:v,criteria:o,isAdditionalChunk:0<h}).then(function(e){return dt(r.table,v,e)}).then(function(e){return d(v.length,e)})}).then(function(){return t.length>h+f&&i(h+u)})})}(0).then(function(){if(0<h.length)throw new V("Error modifying one or more objects",h,f,p);return t.length})})})},Tt.prototype.delete=function(){var e=this._ctx,t=e.range;return!wt(e)||e.table.schema.yProps||!e.isPrimKey&&3!==t.type?this.modify(kt):this._write(function(r){var n=e.table.core.schema.primaryKey,o=t;return e.table.core.count({trans:r,query:{index:n,range:o}}).then(function(t){return e.table.core.mutate({trans:r,type:"deleteRange",range:o}).then(function(e){var r=e.failures;if(e=e.numFailures)throw new V("Could not delete some values",Object.keys(r).map(function(e){return r[e]}),t-e);return t-e})})})},Tt);function Tt(){}var kt=function(e,t){return t.value=null};function Mt(e,t){return e<t?-1:e===t?0:1}function Ot(e,t){return t<e?-1:e===t?0:1}function Nt(e,t,r){return(e=e instanceof Pt?new e.Collection(e):e)._ctx.error=new(r||TypeError)(t),e}function Dt(e){return new e.Collection(e,function(){return Lt("")}).limit(0)}function Ct(e,t,r,n){var o,i,s,a,c,l,u,d=r.length;if(!r.every(function(e){return"string"==typeof e}))return Nt(e,Je);function h(e){o="next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()},i="next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()},s="next"===e?Mt:Ot;var t=r.map(function(e){return{lower:i(e),upper:o(e)}}).sort(function(e,t){return s(e.lower,t.lower)});a=t.map(function(e){return e.upper}),c=t.map(function(e){return e.lower}),u="next"===(l=e)?"":n}h("next"),(e=new e.Collection(e,function(){return Bt(a[0],c[d-1]+n)}))._ondirectionchange=function(e){h(e)};var f=0;return e._addAlgorithm(function(e,r,n){var o=e.key;if("string"!=typeof o)return!1;var h=i(o);if(t(h,c,f))return!0;for(var p=null,g=f;g<d;++g){var y=function(e,t,r,n,o,i){for(var s=Math.min(e.length,n.length),a=-1,c=0;c<s;++c){var l=t[c];if(l!==n[c])return o(e[c],r[c])<0?e.substr(0,c)+r[c]+r.substr(c+1):o(e[c],n[c])<0?e.substr(0,c)+n[c]+r.substr(c+1):0<=a?e.substr(0,a)+t[a]+r.substr(a+1):null;o(e[c],l)<0&&(a=c)}return s<n.length&&"next"===i?e+r.substr(e.length):s<e.length&&"prev"===i?e.substr(0,r.length):a<0?null:e.substr(0,a)+n[a]+r.substr(a+1)}(o,h,a[g],c[g],s,l);null===y&&null===p?f=g+1:(null===p||0<s(p,y))&&(p=y)}return r(null!==p?function(){e.continue(p+u)}:n),!1}),e}function Bt(e,t,r,n){return{type:2,lower:e,upper:t,lowerOpen:r,upperOpen:n}}function Lt(e){return{type:1,lower:e,upper:e}}var Pt=(Object.defineProperty(jt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),jt.prototype.between=function(e,t,r,n){r=!1!==r,n=!0===n;try{return 0<this._cmp(e,t)||0===this._cmp(e,t)&&(r||n)&&(!r||!n)?Dt(this):new this.Collection(this,function(){return Bt(e,t,!r,!n)})}catch(e){return Nt(this,Xe)}},jt.prototype.equals=function(e){return null==e?Nt(this,Xe):new this.Collection(this,function(){return Lt(e)})},jt.prototype.above=function(e){return null==e?Nt(this,Xe):new this.Collection(this,function(){return Bt(e,void 0,!0)})},jt.prototype.aboveOrEqual=function(e){return null==e?Nt(this,Xe):new this.Collection(this,function(){return Bt(e,void 0,!1)})},jt.prototype.below=function(e){return null==e?Nt(this,Xe):new this.Collection(this,function(){return Bt(void 0,e,!1,!0)})},jt.prototype.belowOrEqual=function(e){return null==e?Nt(this,Xe):new this.Collection(this,function(){return Bt(void 0,e)})},jt.prototype.startsWith=function(e){return"string"!=typeof e?Nt(this,Je):this.between(e,e+Ze,!0,!0)},jt.prototype.startsWithIgnoreCase=function(e){return""===e?this.startsWith(e):Ct(this,function(e,t){return 0===e.indexOf(t[0])},[e],Ze)},jt.prototype.equalsIgnoreCase=function(e){return Ct(this,function(e,t){return e===t[0]},[e],"")},jt.prototype.anyOfIgnoreCase=function(){var e=P.apply(L,arguments);return 0===e.length?Dt(this):Ct(this,function(e,t){return-1!==t.indexOf(e)},e,"")},jt.prototype.startsWithAnyOfIgnoreCase=function(){var e=P.apply(L,arguments);return 0===e.length?Dt(this):Ct(this,function(e,t){return t.some(function(t){return 0===e.indexOf(t)})},e,Ze)},jt.prototype.anyOf=function(){var e=this,t=P.apply(L,arguments),r=this._cmp;try{t.sort(r)}catch(n){return Nt(this,Xe)}if(0===t.length)return Dt(this);var n=new this.Collection(this,function(){return Bt(t[0],t[t.length-1])});n._ondirectionchange=function(n){r="next"===n?e._ascending:e._descending,t.sort(r)};var o=0;return n._addAlgorithm(function(e,n,i){for(var s=e.key;0<r(s,t[o]);)if(++o===t.length)return n(i),!1;return 0===r(s,t[o])||(n(function(){e.continue(t[o])}),!1)}),n},jt.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},jt.prototype.noneOf=function(){var e=P.apply(L,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return Nt(this,Xe)}var t=e.reduce(function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[-1/0,t]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},jt.prototype.inAnyRange=function(e,t){var r=this,n=this._cmp,o=this._ascending,i=this._descending,s=this._min,a=this._max;if(0===e.length)return Dt(this);if(!e.every(function(e){return void 0!==e[0]&&void 0!==e[1]&&o(e[0],e[1])<=0}))return Nt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",K.InvalidArgument);var c,l=!t||!1!==t.includeLowers,u=t&&!0===t.includeUppers,d=o;function h(e,t){return d(e[0],t[0])}try{(c=e.reduce(function(e,t){for(var r=0,o=e.length;r<o;++r){var i=e[r];if(n(t[0],i[1])<0&&0<n(t[1],i[0])){i[0]=s(i[0],t[0]),i[1]=a(i[1],t[1]);break}}return r===o&&e.push(t),e},[])).sort(h)}catch(e){return Nt(this,Xe)}var f=0,p=u?function(e){return 0<o(e,c[f][1])}:function(e){return 0<=o(e,c[f][1])},g=l?function(e){return 0<i(e,c[f][0])}:function(e){return 0<=i(e,c[f][0])},y=p;return(e=new this.Collection(this,function(){return Bt(c[0][0],c[c.length-1][1],!l,!u)}))._ondirectionchange=function(e){d="next"===e?(y=p,o):(y=g,i),c.sort(h)},e._addAlgorithm(function(e,t,n){for(var i,s=e.key;y(s);)if(++f===c.length)return t(n),!1;return!p(i=s)&&!g(i)||(0===r._cmp(s,c[f][1])||0===r._cmp(s,c[f][0])||t(function(){d===o?e.continue(c[f][0]):e.continue(c[f][1])}),!1)}),e},jt.prototype.startsWithAnyOf=function(){var e=P.apply(L,arguments);return e.every(function(e){return"string"==typeof e})?0===e.length?Dt(this):this.inAnyRange(e.map(function(e){return[e,e+Ze]})):Nt(this,"startsWithAnyOf() only works with strings")},jt);function jt(){}function Rt(e){return Ce(function(t){return Ut(t),e(t.target.error),!1})}function Ut(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Ft="storagemutated",zt="x-storagemutated-1",Vt=mt(null,Ft),Ht=($t.prototype._lock=function(){return w(!me.global),++this._reculock,1!==this._reculock||me.global||(me.lockOwnerFor=this),this},$t.prototype._unlock=function(){if(w(!me.global),0==--this._reculock)for(me.global||(me.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{qe(e[1],e[0])}catch(e){}}return this},$t.prototype._locked=function(){return this._reculock&&me.lockOwnerFor!==this},$t.prototype.create=function(e){var t=this;if(!this.mode)return this;var r=this.db.idbdb,n=this.db._state.dbOpenError;if(w(!this.idbtrans),!e&&!r)switch(n&&n.name){case"DatabaseClosedError":throw new K.DatabaseClosed(n);case"MissingAPIError":throw new K.MissingAPI(n.message,n);default:throw new K.OpenFailed(n)}if(!this.active)throw new K.TransactionInactive;return w(null===this._completion._state),(e=this.idbtrans=e||(this.db.core||r).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Ce(function(r){Ut(r),t._reject(e.error)}),e.onabort=Ce(function(r){Ut(r),t.active&&t._reject(new K.Abort(e.error)),t.active=!1,t.on("abort").fire(r)}),e.oncomplete=Ce(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&Vt.storagemutated.fire(e.mutatedParts)}),this},$t.prototype._promise=function(e,t,r){var n=this;if("readwrite"===e&&"readwrite"!==this.mode)return Qe(new K.ReadOnly("Transaction is readonly"));if(!this.active)return Qe(new K.TransactionInactive);if(this._locked())return new _e(function(o,i){n._blockedFuncs.push([function(){n._promise(e,t,r).then(o,i)},me])});if(r)return Fe(function(){var e=new _e(function(e,r){n._lock();var o=t(e,r,n);o&&o.then&&o.then(e,r)});return e.finally(function(){return n._unlock()}),e._lib=!0,e});var o=new _e(function(e,r){var o=t(e,r,n);o&&o.then&&o.then(e,r)});return o._lib=!0,o},$t.prototype._root=function(){return this.parent?this.parent._root():this},$t.prototype.waitFor=function(e){var t,r=this._root(),n=_e.resolve(e);r._waitingFor?r._waitingFor=r._waitingFor.then(function(){return n}):(r._waitingFor=n,r._waitingQueue=[],t=r.idbtrans.objectStore(r.storeNames[0]),function e(){for(++r._spinCount;r._waitingQueue.length;)r._waitingQueue.shift()();r._waitingFor&&(t.get(-1/0).onsuccess=e)}());var o=r._waitingFor;return new _e(function(e,t){n.then(function(t){return r._waitingQueue.push(Ce(e.bind(null,t)))},function(e){return r._waitingQueue.push(Ce(t.bind(null,e)))}).finally(function(){r._waitingFor===o&&(r._waitingFor=null)})})},$t.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new K.Abort))},$t.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(u(t,e))return t[e];var r=this.schema[e];if(!r)throw new K.NotFound("Table "+e+" not part of transaction");return(r=new this.db.Table(e,r,this)).core=this.db.core.table(e),t[e]=r},$t);function $t(){}function Wt(e,t,r,n,o,i,s,a){return{name:e,keyPath:t,unique:r,multi:n,auto:o,compound:i,src:(r&&!s?"&":"")+(n?"*":"")+(o?"++":"")+Kt(t),type:a}}function Kt(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function qt(e,t,r){return{name:e,primKey:t,indexes:r,mappedClass:null,idxByName:(n=function(e){return[e.name,e]},r.reduce(function(e,t,r){return(r=n(t))&&(e[r[0]]=r[1]),e},{}))};var n}var Gt=function(e){try{return e.only([[]]),Gt=function(){return[[]]},[[]]}catch(e){return Gt=function(){return Ze},Ze}};function Yt(e){return null==e?function(){}:"string"==typeof e?1===(t=e).split(".").length?function(e){return e[t]}:function(e){return _(e,t)}:function(t){return _(t,e)};var t}function Qt(e){return[].slice.call(e)}var Zt=0;function Xt(e){return null==e?":id":"string"==typeof e?e:"[".concat(e.join("+"),"]")}function Jt(e,t,r){function n(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");var r=e.lower,n=e.upper,o=e.lowerOpen;return e=e.upperOpen,void 0===r?void 0===n?null:t.upperBound(n,!!e):void 0===n?t.lowerBound(r,!!o):t.bound(r,n,!!o,!!e)}var o,i,a,c=(i=r,a=Qt((o=e).objectStoreNames),{schema:{name:o.name,tables:a.map(function(e){return i.objectStore(e)}).map(function(e){var t=e.keyPath,r=e.autoIncrement,n=s(t),o={};return r={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:null==t,compound:n,keyPath:t,autoIncrement:r,unique:!0,extractKey:Yt(t)},indexes:Qt(e.indexNames).map(function(t){return e.index(t)}).map(function(e){var t=e.name,r=e.unique,n=e.multiEntry;return e=e.keyPath,n={name:t,compound:s(e),keyPath:e,unique:r,multiEntry:n,extractKey:Yt(e)},o[Xt(e)]=n}),getIndexByKeyPath:function(e){return o[Xt(e)]}},o[":id"]=r.primaryKey,null!=t&&(o[Xt(t)]=r.primaryKey),r})},hasGetAll:0<a.length&&"getAll"in i.objectStore(a[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),l=(r=c.schema,c.hasGetAll),u=(c=r.tables.map(function(e){var t,r=e.name;return{name:r,schema:e,mutate:function(e){var t=e.trans,o=e.type,i=e.keys,s=e.values,a=e.range;return new Promise(function(e,c){e=Ce(e);var l=t.objectStore(r),u=null==l.keyPath,d="put"===o||"add"===o;if(!d&&"delete"!==o&&"deleteRange"!==o)throw new Error("Invalid operation type: "+o);var h,f=(i||s||{length:1}).length;if(i&&s&&i.length!==s.length)throw new Error("Given keys array must have same length as given values array.");if(0===f)return e({numFailures:0,failures:{},results:[],lastResult:void 0});function p(e){++m,Ut(e)}var g=[],y=[],m=0;if("deleteRange"===o){if(4===a.type)return e({numFailures:m,failures:y,results:[],lastResult:void 0});3===a.type?g.push(h=l.clear()):g.push(h=l.delete(n(a)))}else{var b=(u=d?u?[s,i]:[s,null]:[i,null])[0],w=u[1];if(d)for(var v=0;v<f;++v)g.push(h=w&&void 0!==w[v]?l[o](b[v],w[v]):l[o](b[v])),h.onerror=p;else for(v=0;v<f;++v)g.push(h=l[o](b[v])),h.onerror=p}function _(t){t=t.target.result,g.forEach(function(e,t){return null!=e.error&&(y[t]=e.error)}),e({numFailures:m,failures:y,results:"delete"===o?i:g.map(function(e){return e.result}),lastResult:t})}h.onerror=function(e){p(e),_(e)},h.onsuccess=_})},getMany:function(e){var t=e.trans,n=e.keys;return new Promise(function(e,o){e=Ce(e);for(var i,s=t.objectStore(r),a=n.length,c=new Array(a),l=0,u=0,d=function(t){t=t.target,c[t._pos]=t.result,++u===l&&e(c)},h=Rt(o),f=0;f<a;++f)null!=n[f]&&((i=s.get(n[f]))._pos=f,i.onsuccess=d,i.onerror=h,++l);0===l&&e(c)})},get:function(e){var t=e.trans,n=e.key;return new Promise(function(e,o){e=Ce(e);var i=t.objectStore(r).get(n);i.onsuccess=function(t){return e(t.target.result)},i.onerror=Rt(o)})},query:(t=l,function(e){return new Promise(function(o,i){o=Ce(o);var s,a,c,l=e.trans,u=e.values,d=e.limit,h=e.query,f=d===1/0?void 0:d,p=h.index;if(h=h.range,l=l.objectStore(r),p=p.isPrimaryKey?l:l.index(p.name),h=n(h),0===d)return o({result:[]});t?((f=u?p.getAll(h,f):p.getAllKeys(h,f)).onsuccess=function(e){return o({result:e.target.result})},f.onerror=Rt(i)):(s=0,a=!u&&"openKeyCursor"in p?p.openKeyCursor(h):p.openCursor(h),c=[],a.onsuccess=function(e){var t=a.result;return t?(c.push(u?t.value:t.primaryKey),++s===d?o({result:c}):void t.continue()):o({result:c})},a.onerror=Rt(i))})}),openCursor:function(e){var t=e.trans,o=e.values,i=e.query,s=e.reverse,a=e.unique;return new Promise(function(e,c){e=Ce(e);var l=i.index,u=i.range,d=t.objectStore(r),h=(d=l.isPrimaryKey?d:d.index(l.name),l=s?a?"prevunique":"prev":a?"nextunique":"next",!o&&"openKeyCursor"in d?d.openKeyCursor(n(u),l):d.openCursor(n(u),l));h.onerror=Rt(c),h.onsuccess=Ce(function(r){var n,o,i,s,a=h.result;a?(a.___id=++Zt,a.done=!1,n=a.continue.bind(a),o=(o=a.continuePrimaryKey)&&o.bind(a),i=a.advance.bind(a),s=function(){throw new Error("Cursor not stopped")},a.trans=t,a.stop=a.continue=a.continuePrimaryKey=a.advance=function(){throw new Error("Cursor not started")},a.fail=Ce(c),a.next=function(){var e=this,t=1;return this.start(function(){return t--?e.continue():e.stop()}).then(function(){return e})},a.start=function(e){function t(){if(h.result)try{e()}catch(e){a.fail(e)}else a.done=!0,a.start=function(){throw new Error("Cursor behind last entry")},a.stop()}var r=new Promise(function(e,t){e=Ce(e),h.onerror=Rt(t),a.fail=t,a.stop=function(t){a.stop=a.continue=a.continuePrimaryKey=a.advance=s,e(t)}});return h.onsuccess=Ce(function(e){h.onsuccess=t,t()}),a.continue=n,a.continuePrimaryKey=o,a.advance=i,t(),r},e(a)):e(null)},c)})},count:function(e){var t=e.query,o=e.trans,i=t.index,s=t.range;return new Promise(function(e,t){var a=o.objectStore(r),c=i.isPrimaryKey?a:a.index(i.name);(c=(a=n(s))?c.count(a):c.count()).onsuccess=Ce(function(t){return e(t.target.result)}),c.onerror=Rt(t)})}}}),{});return c.forEach(function(e){return u[e.name]=e}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(e){if(!u[e])throw new Error("Table '".concat(e,"' not found"));return u[e]},MIN_KEY:-1/0,MAX_KEY:Gt(t),schema:r}}function er(e,r){var n=r.db;r=function(e,r,n,o){var i=n.IDBKeyRange;return n.indexedDB,{dbcore:(o=Jt(r,i,o),e.dbcore.reduce(function(e,r){return r=r.create,t(t({},e),r(e))},o))}}(e._middlewares,n,e._deps,r),e.core=r.dbcore,e.tables.forEach(function(t){var r=t.name;e.core.schema.tables.some(function(e){return e.name===r})&&(t.core=e.core.table(r),e[r]instanceof e.Table&&(e[r].core=t.core))})}function tr(e,t,r,n){r.forEach(function(r){var o=n[r];t.forEach(function(t){var n=function e(t,r){return g(t,r)||(t=c(t))&&e(t,r)}(t,r);(!n||"value"in n&&void 0===n.value)&&(t===e.Transaction.prototype||t instanceof e.Transaction?f(t,r,{get:function(){return this.table(r)},set:function(e){h(this,r,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):t[r]=new e.Table(r,o))})})}function rr(e,t){t.forEach(function(t){for(var r in t)t[r]instanceof e.Table&&delete t[r]})}function nr(e,t){return e._cfg.version-t._cfg.version}function or(e,t){var r,n={del:[],add:[],change:[]};for(r in e)t[r]||n.del.push(r);for(r in t){var o=e[r],i=t[r];if(o){var s={name:r,def:i,recreate:!1,del:[],add:[],change:[]};if(""+(o.primKey.keyPath||"")!=""+(i.primKey.keyPath||"")||o.primKey.auto!==i.primKey.auto)s.recreate=!0,n.change.push(s);else{var a=o.idxByName,c=i.idxByName,l=void 0;for(l in a)c[l]||s.del.push(l);for(l in c){var u=a[l],d=c[l];u?u.src!==d.src&&s.change.push(d):s.add.push(d)}(0<s.del.length||0<s.add.length||0<s.change.length)&&n.change.push(s)}}else n.add.push([r,i])}return n}function ir(e,t,r,n){var o=e.db.createObjectStore(t,r.keyPath?{keyPath:r.keyPath,autoIncrement:r.auto}:{autoIncrement:r.auto});return n.forEach(function(e){return ar(o,e)}),o}function sr(e,t){i(e).forEach(function(r){t.db.objectStoreNames.contains(r)||(oe&&console.debug("Dexie: Creating missing table",r),ir(t,r,e[r].primKey,e[r].indexes))})}function ar(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function cr(e,t,r){var n={};return m(t.objectStoreNames,0).forEach(function(e){for(var t=r.objectStore(e),o=Wt(Kt(a=t.keyPath),a||"",!0,!1,!!t.autoIncrement,a&&"string"!=typeof a,!0),i=[],s=0;s<t.indexNames.length;++s){var a=(c=t.index(t.indexNames[s])).keyPath,c=Wt(c.name,a,!!c.unique,!!c.multiEntry,!1,a&&"string"!=typeof a,!1);i.push(c)}n[e]=qt(e,o,i)}),n}function lr(e,t,r){for(var n=r.db.objectStoreNames,i=0;i<n.length;++i){var s=n[i],a=r.objectStore(s);e._hasGetAll="getAll"in a;for(var c=0;c<a.indexNames.length;++c){var l=a.indexNames[c],u=a.index(l).keyPath,d="string"==typeof u?u:"["+m(u).join("+")+"]";!t[s]||(u=t[s].idxByName[d])&&(u.name=l,delete t[s].idxByName[d],t[s].idxByName[l]=u)}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&o.WorkerGlobalScope&&o instanceof o.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function ur(e){return e.split(",").map(function(e,t){var r=null===(n=(o=e.split(":"))[1])||void 0===n?void 0:n.trim(),n=(e=o[0].trim()).replace(/([&*]|\+\+)/g,""),o=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;return Wt(n,o||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),s(o),0===t,r)})}var dr=(hr.prototype._createTableSchema=qt,hr.prototype._parseIndexSyntax=ur,hr.prototype._parseStoresSpec=function(e,t){var r=this;i(e).forEach(function(n){if(null!==e[n]){var o=r._parseIndexSyntax(e[n]),i=o.shift();if(!i)throw new K.Schema("Invalid schema for table "+n+": "+e[n]);if(i.unique=!0,i.multi)throw new K.Schema("Primary key cannot be multiEntry*");o.forEach(function(e){if(e.auto)throw new K.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new K.Schema("Index must have a name and cannot be an empty string")}),o=r._createTableSchema(n,i,o),t[n]=o}})},hr.prototype.stores=function(e){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?a(this._cfg.storesSource,e):e,e=t._versions;var r={},n={};return e.forEach(function(e){a(r,e._cfg.storesSource),n=e._cfg.dbschema={},e._parseStoresSpec(r,n)}),t._dbSchema=n,rr(t,[t._allTables,t,t.Transaction.prototype]),tr(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],i(n),n),t._storeNames=i(n),this},hr.prototype.upgrade=function(e){return this._cfg.contentUpgrade=ne(this._cfg.contentUpgrade||Y,e),this},hr);function hr(){}function fr(e,t){var r=e._dbNamesDB;return r||(r=e._dbNamesDB=new Qr(tt,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),r.table("dbnames")}function pr(e){return e&&"function"==typeof e.databases}function gr(e){return Fe(function(){return me.letThrough=!0,e()})}function yr(e){return!("from"in e)}var mr=function(e,t){if(!this){var r=new mr;return e&&"d"in e&&a(r,e),r}a(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function br(e,t,r){var n=ct(t,r);if(!isNaN(n)){if(0<n)throw RangeError();if(yr(e))return a(e,{from:t,to:r,d:1});var o=e.l;if(n=e.r,ct(r,e.from)<0)return o?br(o,t,r):e.l={from:t,to:r,d:1,l:null,r:null},Er(e);if(0<ct(t,e.to))return n?br(n,t,r):e.r={from:t,to:r,d:1,l:null,r:null},Er(e);ct(t,e.from)<0&&(e.from=t,e.l=null,e.d=n?n.d+1:1),0<ct(r,e.to)&&(e.to=r,e.r=null,e.d=e.l?e.l.d+1:1),r=!e.r,o&&!e.l&&wr(e,o),n&&r&&wr(e,n)}}function wr(e,t){yr(t)||function e(t,r){var n=r.from,o=r.to,i=r.l;r=r.r,br(t,n,o),i&&e(t,i),r&&e(t,r)}(e,t)}function vr(e,t){var r=_r(t),n=r.next();if(n.done)return!1;for(var o=n.value,i=_r(e),s=i.next(o.from),a=s.value;!n.done&&!s.done;){if(ct(a.from,o.to)<=0&&0<=ct(a.to,o.from))return!0;ct(o.from,a.from)<0?o=(n=r.next(a.from)).value:a=(s=i.next(o.from)).value}return!1}function _r(e){var t=yr(e)?null:{s:0,n:e};return{next:function(e){for(var r=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&ct(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||ct(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Er(e){var r,n,o=((null===(r=e.r)||void 0===r?void 0:r.d)||0)-((null===(n=e.l)||void 0===n?void 0:n.d)||0),i=1<o?"r":o<-1?"l":"";i&&(r="r"==i?"l":"r",n=t({},e),o=e[i],e.from=o.from,e.to=o.to,e[i]=o[i],n[i]=o[r],(e[r]=n).d=Ar(n)),e.d=Ar(e)}function Ar(e){var t=e.r;return e=e.l,(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}function Sr(e,t){return i(t).forEach(function(r){e[r]?wr(e[r],t[r]):e[r]=function e(t){var r,n,o={};for(r in t)u(t,r)&&(n=t[r],o[r]=!n||"object"!=typeof n||T.has(n.constructor)?n:e(n));return o}(t[r])}),e}function xr(e,t){return e.all||t.all||Object.keys(e).some(function(r){return t[r]&&vr(t[r],e[r])})}d(mr.prototype,((R={add:function(e){return wr(this,e),this},addKey:function(e){return br(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(e){return br(t,e,e)}),this},hasKey:function(e){var t=_r(this).next(e).value;return t&&ct(t.from,e)<=0&&0<=ct(t.to,e)}})[D]=function(){return _r(this)},R));var Ir={},Tr={},kr=!1;function Mr(e){Sr(Tr,e),kr||(kr=!0,setTimeout(function(){kr=!1,Or(Tr,!(Tr={}))},0))}function Or(e,t){void 0===t&&(t=!1);var r=new Set;if(e.all)for(var n=0,o=Object.values(Ir);n<o.length;n++)Nr(s=o[n],e,r,t);else for(var i in e){var s,a=/^idb\:\/\/(.*)\/(.*)\//.exec(i);a&&(i=a[1],a=a[2],(s=Ir["idb://".concat(i,"/").concat(a)])&&Nr(s,e,r,t))}r.forEach(function(e){return e()})}function Nr(e,t,r,n){for(var o=[],i=0,s=Object.entries(e.queries.query);i<s.length;i++){for(var a=s[i],c=a[0],l=[],u=0,d=a[1];u<d.length;u++){var h=d[u];xr(t,h.obsSet)?h.subscribers.forEach(function(e){return r.add(e)}):n&&l.push(h)}n&&o.push([c,l])}if(n)for(var f=0,p=o;f<p.length;f++){var g=p[f];c=g[0],l=g[1],e.queries.query[c]=l}}function Dr(e){var t=e._state,r=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?Qe(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var n=t.openCanceller,o=Math.round(10*e.verno),s=!1;function a(){if(t.openCanceller!==n)throw new K.DatabaseClosed("db.open() was cancelled")}var c,l=t.dbReadyResolve,u=null,d=!1;return _e.race([n,("undefined"==typeof navigator?_e.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){function t(){return indexedDB.databases().finally(e)}c=setInterval(t,100),t()}).finally(function(){return clearInterval(c)}):Promise.resolve()).then(function n(){return new _e(function(c,l){if(a(),!r)throw new K.MissingAPI;var h=e.name,f=t.autoSchema||!o?r.open(h):r.open(h,o);if(!f)throw new K.MissingAPI;f.onerror=Rt(l),f.onblocked=Ce(e._fireOnBlocked),f.onupgradeneeded=Ce(function(n){var o;u=f.transaction,t.autoSchema&&!e._options.allowEmptyDB?(f.onerror=Ut,u.abort(),f.result.close(),(o=r.deleteDatabase(h)).onsuccess=o.onerror=Ce(function(){l(new K.NoSuchDatabase("Database ".concat(h," doesnt exist")))})):(u.onerror=Rt(l),n=n.oldVersion>Math.pow(2,62)?0:n.oldVersion,d=n<1,e.idbdb=f.result,s&&function(e,t){sr(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var r=cr(0,e.idbdb,t);lr(e,e._dbSchema,t);for(var n=0,o=or(r,e._dbSchema).change;n<o.length;n++){var i=function(e){if(e.change.length||e.recreate)return console.warn("Unable to patch indexes of table ".concat(e.name," because it has changes on the type of index or primary key.")),{value:void 0};var r=t.objectStore(e.name);e.add.forEach(function(t){oe&&console.debug("Dexie upgrade patch: Creating missing index ".concat(e.name,".").concat(t.src)),ar(r,t)})}(o[n]);if("object"==typeof i)return i.value}}(e,u),function(e,t,r,n){var o=e._dbSchema;r.objectStoreNames.contains("$meta")&&!o.$meta&&(o.$meta=qt("$meta",ur("")[0],[]),e._storeNames.push("$meta"));var s=e._createTransaction("readwrite",e._storeNames,o);s.create(r),s._completion.catch(n);var a=s._reject.bind(s),c=me.transless||me;Fe(function(){return me.trans=s,me.transless=c,0!==t?(er(e,r),l=t,((n=s).storeNames.includes("$meta")?n.table("$meta").get("version").then(function(e){return null!=e?e:l}):_e.resolve(l)).then(function(t){return o=t,a=s,c=r,l=[],t=(n=e)._versions,u=n._dbSchema=cr(0,n.idbdb,c),0!==(t=t.filter(function(e){return e._cfg.version>=o})).length?(t.forEach(function(e){l.push(function(){var t=u,r=e._cfg.dbschema;lr(n,t,c),lr(n,r,c),u=n._dbSchema=r;var s=or(t,r);s.add.forEach(function(e){ir(c,e[0],e[1].primKey,e[1].indexes)}),s.change.forEach(function(e){if(e.recreate)throw new K.Upgrade("Not yet support for changing primary key");var t=c.objectStore(e.name);e.add.forEach(function(e){return ar(t,e)}),e.change.forEach(function(e){t.deleteIndex(e.name),ar(t,e)}),e.del.forEach(function(e){return t.deleteIndex(e)})});var l=e._cfg.contentUpgrade;if(l&&e._cfg.version>o){er(n,c),a._memoizedTables={};var d=A(r);s.del.forEach(function(e){d[e]=t[e]}),rr(n,[n.Transaction.prototype]),tr(n,[n.Transaction.prototype],i(d),d),a.schema=d;var h,f=j(l);return f&&ze(),s=_e.follow(function(){var e;(h=l(a))&&f&&(e=Ve.bind(null,null),h.then(e,e))}),h&&"function"==typeof h.then?_e.resolve(h):s.then(function(){return h})}}),l.push(function(t){var r,o,i=e._cfg.dbschema;r=i,o=t,[].slice.call(o.db.objectStoreNames).forEach(function(e){return null==r[e]&&o.db.deleteObjectStore(e)}),rr(n,[n.Transaction.prototype]),tr(n,[n.Transaction.prototype],n._storeNames,n._dbSchema),a.schema=n._dbSchema}),l.push(function(t){n.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(n.idbdb.version/10)===e._cfg.version?(n.idbdb.deleteObjectStore("$meta"),delete n._dbSchema.$meta,n._storeNames=n._storeNames.filter(function(e){return"$meta"!==e})):t.objectStore("$meta").put(e._cfg.version,"version"))})}),function e(){return l.length?_e.resolve(l.shift()(a.idbtrans)).then(e):_e.resolve()}().then(function(){sr(u,c)})):_e.resolve();var n,o,a,c,l,u}).catch(a)):(i(o).forEach(function(e){ir(r,e,o[e].primKey,o[e].indexes)}),er(e,r),void _e.follow(function(){return e.on.populate.fire(s)}).catch(a));var n,l})}(e,n/10,u,l))},l),f.onsuccess=Ce(function(){u=null;var r,a,l,p,g,y=e.idbdb=f.result,b=m(y.objectStoreNames);if(0<b.length)try{var w=y.transaction(1===(p=b).length?p[0]:p,"readonly");if(t.autoSchema)a=y,l=w,(r=e).verno=a.version/10,l=r._dbSchema=cr(0,a,l),r._storeNames=m(a.objectStoreNames,0),tr(r,[r._allTables],i(l),l);else if(lr(e,e._dbSchema,w),((g=or(cr(0,(g=e).idbdb,w),g._dbSchema)).add.length||g.change.some(function(e){return e.add.length||e.change.length}))&&!s)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),y.close(),o=y.version+1,s=!0,c(n());er(e,w)}catch(r){}et.push(e),y.onversionchange=Ce(function(r){t.vcFired=!0,e.on("versionchange").fire(r)}),y.onclose=Ce(function(){e.close({disableAutoOpen:!1})}),d&&(g=e._deps,w=h,y=g.indexedDB,g=g.IDBKeyRange,pr(y)||w===tt||fr(y,g).put({name:w}).catch(Y)),c()},l)}).catch(function(e){switch(null==e?void 0:e.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),n();break;case"VersionError":if(0<o)return o=0,n()}return _e.reject(e)})})]).then(function(){return a(),t.onReadyBeingFired=[],_e.resolve(gr(function(){return e.on.ready.fire(e.vip)})).then(function r(){if(0<t.onReadyBeingFired.length){var n=t.onReadyBeingFired.reduce(ne,Y);return t.onReadyBeingFired=[],_e.resolve(gr(function(){return n(e.vip)})).then(r)}})}).finally(function(){t.openCanceller===n&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(r){t.dbOpenError=r;try{u&&u.abort()}catch(r){}return n===t.openCanceller&&e._close(),Qe(r)}).finally(function(){t.openComplete=!0,l()}).then(function(){var t;return d&&(t={},e.tables.forEach(function(r){r.schema.indexes.forEach(function(n){n.name&&(t["idb://".concat(e.name,"/").concat(r.name,"/").concat(n.name)]=new mr(-1/0,[[[]]]))}),t["idb://".concat(e.name,"/").concat(r.name,"/")]=t["idb://".concat(e.name,"/").concat(r.name,"/:dels")]=new mr(-1/0,[[[]]])}),Vt(Ft).fire(t),Or(t,!0)),e})}function Cr(e){function t(t){return e.next(t)}var r=o(t),n=o(function(t){return e.throw(t)});function o(e){return function(t){var o=e(t);return t=o.value,o.done?t:t&&"function"==typeof t.then?t.then(r,n):s(t)?Promise.all(t).then(r,n):r(t)}}return o(t)()}function Br(e,t,r){for(var n=s(e)?e.slice():[e],o=0;o<r;++o)n.push(t);return n}var Lr={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return t(t({},e),{table:function(r){var n=e.table(r),o=n.schema,i={},s=[];function a(e,r,n){var o=Xt(e),c=i[o]=i[o]||[],l=null==e?0:"string"==typeof e?1:e.length,u=0<r;return u=t(t({},n),{name:u?"".concat(o,"(virtual-from:").concat(n.name,")"):n.name,lowLevelIndex:n,isVirtual:u,keyTail:r,keyLength:l,extractKey:Yt(e),unique:!u&&n.unique}),c.push(u),u.isPrimaryKey||s.push(u),1<l&&a(2===l?e[0]:e.slice(0,l-1),r+1,n),c.sort(function(e,t){return e.keyTail-t.keyTail}),u}r=a(o.primaryKey.keyPath,0,o.primaryKey),i[":id"]=[r];for(var c=0,l=o.indexes;c<l.length;c++){var u=l[c];a(u.keyPath,0,u)}function d(r){var n,o=r.query.index;return o.isVirtual?t(t({},r),{query:{index:o.lowLevelIndex,range:(n=r.query.range,o=o.keyTail,{type:1===n.type?2:n.type,lower:Br(n.lower,n.lowerOpen?e.MAX_KEY:e.MIN_KEY,o),lowerOpen:!0,upper:Br(n.upper,n.upperOpen?e.MIN_KEY:e.MAX_KEY,o),upperOpen:!0})}}):r}return t(t({},n),{schema:t(t({},o),{primaryKey:r,indexes:s,getIndexByKeyPath:function(e){return(e=i[Xt(e)])&&e[0]}}),count:function(e){return n.count(d(e))},query:function(e){return n.query(d(e))},openCursor:function(t){var r=t.query.index,o=r.keyTail,i=r.isVirtual,s=r.keyLength;return i?n.openCursor(d(t)).then(function(r){return r&&function(r){return Object.create(r,{continue:{value:function(n){null!=n?r.continue(Br(n,t.reverse?e.MAX_KEY:e.MIN_KEY,o)):t.unique?r.continue(r.key.slice(0,s).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,o)):r.continue()}},continuePrimaryKey:{value:function(t,n){r.continuePrimaryKey(Br(t,e.MAX_KEY,o),n)}},primaryKey:{get:function(){return r.primaryKey}},key:{get:function(){var e=r.key;return 1===s?e[0]:e.slice(0,s)}},value:{get:function(){return r.value}}})}(r)}):n.openCursor(t)}})}})}};function Pr(e,t,r,n){return r=r||{},n=n||"",i(e).forEach(function(o){var i,s,a;u(t,o)?(i=e[o],s=t[o],"object"==typeof i&&"object"==typeof s&&i&&s?(a=N(i))!==N(s)?r[n+o]=t[o]:"Object"===a?Pr(i,s,r,n+o+"."):i!==s&&(r[n+o]=t[o]):i!==s&&(r[n+o]=t[o])):r[n+o]=void 0}),i(t).forEach(function(o){u(e,o)||(r[n+o]=t[o])}),r}function jr(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}var Rr={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return t(t({},e),{table:function(r){var o=e.table(r),i=o.schema.primaryKey;return t(t({},o),{mutate:function(e){var s=me.trans,a=s.table(r).hook,c=a.deleting,l=a.creating,d=a.updating;switch(e.type){case"add":if(l.fire===Y)break;return s._promise("readwrite",function(){return h(e)},!0);case"put":if(l.fire===Y&&d.fire===Y)break;return s._promise("readwrite",function(){return h(e)},!0);case"delete":if(c.fire===Y)break;return s._promise("readwrite",function(){return h(e)},!0);case"deleteRange":if(c.fire===Y)break;return s._promise("readwrite",function(){return function e(r,n,s){return o.query({trans:r,values:!1,query:{index:i,range:n},limit:s}).then(function(o){var i=o.result;return h({type:"delete",keys:i,trans:r}).then(function(o){return 0<o.numFailures?Promise.reject(o.failures[0]):i.length<s?{failures:[],numFailures:0,lastResult:void 0}:e(r,t(t({},n),{lower:i[i.length-1],lowerOpen:!0}),s)})})}(e.trans,e.range,1e4)},!0)}return o.mutate(e);function h(e){var r,s,a,h=me.trans,f=e.keys||jr(i,e);if(!f)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?t(t({},e),{keys:f}):t({},e)).type&&(e.values=n([],e.values,!0)),e.keys&&(e.keys=n([],e.keys,!0)),r=o,a=f,("add"===(s=e).type?Promise.resolve([]):r.getMany({trans:s.trans,keys:a,cache:"immutable"})).then(function(t){var r=f.map(function(r,n){var o,s,a,f=t[n],p={onerror:null,onsuccess:null};return"delete"===e.type?c.fire.call(p,r,f,h):"add"===e.type||void 0===f?(o=l.fire.call(p,r,e.values[n],h),null==r&&null!=o&&(e.keys[n]=r=o,i.outbound||E(e.values[n],i.keyPath,r))):(o=Pr(f,e.values[n]),(s=d.fire.call(p,o,r,f,h))&&(a=e.values[n],Object.keys(s).forEach(function(e){u(a,e)?a[e]=s[e]:E(a,e,s[e])}))),p});return o.mutate(e).then(function(n){for(var o=n.failures,i=n.results,s=n.numFailures,a=(n=n.lastResult,0);a<f.length;++a){var c=(i||f)[a],l=r[a];null==c?l.onerror&&l.onerror(o[a]):l.onsuccess&&l.onsuccess("put"===e.type&&t[a]?e.values[a]:c)}return{failures:o,results:i,numFailures:s,lastResult:n}}).catch(function(e){return r.forEach(function(t){return t.onerror&&t.onerror(e)}),Promise.reject(e)})})}}})}})}};function Ur(e,t,r){try{if(!t)return null;if(t.keys.length<e.length)return null;for(var n=[],o=0,i=0;o<t.keys.length&&i<e.length;++o)0===ct(t.keys[o],e[i])&&(n.push(r?M(t.values[o]):t.values[o]),++i);return n.length===e.length?n:null}catch(e){return null}}var Fr={stack:"dbcore",level:-1,create:function(e){return{table:function(r){var n=e.table(r);return t(t({},n),{getMany:function(e){if(!e.cache)return n.getMany(e);var t=Ur(e.keys,e.trans._cache,"clone"===e.cache);return t?_e.resolve(t):n.getMany(e).then(function(t){return e.trans._cache={keys:e.keys,values:"clone"===e.cache?M(t):t},t})},mutate:function(e){return"add"!==e.type&&(e.trans._cache=null),n.mutate(e)}})}}}};function zr(e,t){return"readonly"===e.trans.mode&&!!e.subscr&&!e.trans.explicit&&"disabled"!==e.trans.db._options.cache&&!t.schema.primaryKey.outbound}function Vr(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Hr={stack:"dbcore",level:0,name:"Observability",create:function(e){var r=e.schema.name,n=new mr(e.MIN_KEY,e.MAX_KEY);return t(t({},e),{transaction:function(t,r,n){if(me.subscr&&"readonly"!==r)throw new K.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(me.querier));return e.transaction(t,r,n)},table:function(o){var a=e.table(o),c=a.schema,l=c.primaryKey,u=c.indexes,d=l.extractKey,h=l.outbound,f=l.autoIncrement&&u.filter(function(e){return e.compound&&e.keyPath.includes(l.keyPath)}),p=t(t({},a),{mutate:function(t){function i(e){return e="idb://".concat(r,"/").concat(o,"/").concat(e),g[e]||(g[e]=new mr)}var u,d,h,p=t.trans,g=t.mutatedParts||(t.mutatedParts={}),y=i(""),m=i(":dels"),b=t.type,w="deleteRange"===t.type?[t.range]:"delete"===t.type?[t.keys]:t.values.length<50?[jr(l,t).filter(function(e){return e}),t.values]:[],v=w[0],_=w[1];return w=t.trans._cache,s(v)?(y.addKeys(v),(w="delete"===b||v.length===_.length?Ur(v,w):null)||m.addKeys(v),(w||_)&&(u=i,d=w,h=_,c.indexes.forEach(function(e){var t=u(e.name||"");function r(t){return null!=t?e.extractKey(t):null}function n(r){return e.multiEntry&&s(r)?r.forEach(function(e){return t.addKey(e)}):t.addKey(r)}(d||h).forEach(function(e,t){var o=d&&r(d[t]);0!==ct(o,t=h&&r(h[t]))&&(null!=o&&n(o),null!=t&&n(t))})}))):v?(_={from:null!==(_=v.lower)&&void 0!==_?_:e.MIN_KEY,to:null!==(_=v.upper)&&void 0!==_?_:e.MAX_KEY},m.add(_),y.add(_)):(y.add(n),m.add(n),c.indexes.forEach(function(e){return i(e.name).add(n)})),a.mutate(t).then(function(e){return!v||"add"!==t.type&&"put"!==t.type||(y.addKeys(e.results),f&&f.forEach(function(r){for(var n=t.values.map(function(e){return r.extractKey(e)}),o=r.keyPath.findIndex(function(e){return e===l.keyPath}),s=0,a=e.results.length;s<a;++s)n[s][o]=e.results[s];i(r.name).addKeys(n)})),p.mutatedParts=Sr(p.mutatedParts||{},g),e})}}),g=(u=function(t){t=(r=t.query).index;var r=r.range;return[t,new mr(null!==(t=r.lower)&&void 0!==t?t:e.MIN_KEY,null!==(r=r.upper)&&void 0!==r?r:e.MAX_KEY)]},{get:function(e){return[l,new mr(e.key)]},getMany:function(e){return[l,(new mr).addKeys(e.keys)]},count:u,query:u,openCursor:u});return i(g).forEach(function(e){p[e]=function(i){var s=!!(p=me.subscr),c=zr(me,a)&&Vr(e,i)?i.obsSet={}:p;if(s){var l=function(e){return e="idb://".concat(r,"/").concat(o,"/").concat(e),c[e]||(c[e]=new mr)},u=l(""),f=l(":dels"),p=(s=(p=g[e](i))[0],p[1]);if(("query"===e&&s.isPrimaryKey&&!i.values?f:l(s.name||"")).add(p),!s.isPrimaryKey){if("count"!==e){var y="query"===e&&h&&i.values&&a.query(t(t({},i),{values:!1}));return a[e].apply(this,arguments).then(function(t){if("query"===e){if(h&&i.values)return y.then(function(e){return e=e.result,u.addKeys(e),t});var r=i.values?t.result.map(d):t.result;(i.values?u:f).addKeys(r)}else if("openCursor"===e){var n=t,o=i.values;return n&&Object.create(n,{key:{get:function(){return f.addKey(n.primaryKey),n.key}},primaryKey:{get:function(){var e=n.primaryKey;return f.addKey(e),e}},value:{get:function(){return o&&u.addKey(n.primaryKey),n.value}}})}return t})}f.add(n)}}return a[e].apply(this,arguments)}}),p}})}};function $r(e,r,n){if(0===n.numFailures)return r;if("deleteRange"===r.type)return null;var o=r.keys?r.keys.length:"values"in r&&r.values?r.values.length:1;return n.numFailures===o?null:(r=t({},r),s(r.keys)&&(r.keys=r.keys.filter(function(e,t){return!(t in n.failures)})),"values"in r&&s(r.values)&&(r.values=r.values.filter(function(e,t){return!(t in n.failures)})),r)}function Wr(e,t){return r=e,(void 0===(n=t).lower||(n.lowerOpen?0<ct(r,n.lower):0<=ct(r,n.lower)))&&(void 0===t.upper||(t.upperOpen?ct(e,t.upper)<0:ct(e,t.upper)<=0));var r,n}function Kr(e,t,r,n,o,i){if(!r||0===r.length)return e;var a=t.query.index,c=a.multiEntry,l=t.query.range,u=n.schema.primaryKey.extractKey,d=a.extractKey,h=(a.lowLevelIndex||a).extractKey;return r=r.reduce(function(e,r){var n=e,o=[];if("add"===r.type||"put"===r.type)for(var i=new mr,a=r.values.length-1;0<=a;--a){var h,f=r.values[a],p=u(f);i.hasKey(p)||(h=d(f),(c&&s(h)?h.some(function(e){return Wr(e,l)}):Wr(h,l))&&(i.addKey(p),o.push(f)))}switch(r.type){case"add":var g=(new mr).addKeys(t.values?e.map(function(e){return u(e)}):e);n=e.concat(t.values?o.filter(function(e){return e=u(e),!g.hasKey(e)&&(g.addKey(e),!0)}):o.map(function(e){return u(e)}).filter(function(e){return!g.hasKey(e)&&(g.addKey(e),!0)}));break;case"put":var y=(new mr).addKeys(r.values.map(function(e){return u(e)}));n=e.filter(function(e){return!y.hasKey(t.values?u(e):e)}).concat(t.values?o:o.map(function(e){return u(e)}));break;case"delete":var m=(new mr).addKeys(r.keys);n=e.filter(function(e){return!m.hasKey(t.values?u(e):e)});break;case"deleteRange":var b=r.range;n=e.filter(function(e){return!Wr(u(e),b)})}return n},e),r===e?e:(r.sort(function(e,t){return ct(h(e),h(t))||ct(u(e),u(t))}),t.limit&&t.limit<1/0&&(r.length>t.limit?r.length=t.limit:e.length===t.limit&&r.length<t.limit&&(o.dirty=!0)),i?Object.freeze(r):r)}function qr(e,t){return 0===ct(e.lower,t.lower)&&0===ct(e.upper,t.upper)&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}var Gr={stack:"dbcore",level:0,name:"Cache",create:function(e){var r=e.schema.name;return t(t({},e),{transaction:function(t,n,o){var i,s,a=e.transaction(t,n,o);return"readwrite"===n&&(s=(i=new AbortController).signal,o=function(o){return function(){if(i.abort(),"readwrite"===n){for(var s=new Set,c=0,l=t;c<l.length;c++){var u=l[c],d=Ir["idb://".concat(r,"/").concat(u)];if(d){var h=e.table(u),f=d.optimisticOps.filter(function(e){return e.trans===a});if(a._explicit&&o&&a.mutatedParts)for(var p=0,g=Object.values(d.queries.query);p<g.length;p++)for(var y=0,m=(v=g[p]).slice();y<m.length;y++)xr((_=m[y]).obsSet,a.mutatedParts)&&(B(v,_),_.subscribers.forEach(function(e){return s.add(e)}));else if(0<f.length){d.optimisticOps=d.optimisticOps.filter(function(e){return e.trans!==a});for(var b=0,w=Object.values(d.queries.query);b<w.length;b++)for(var v,_,E,A=0,S=(v=w[b]).slice();A<S.length;A++)null!=(_=S[A]).res&&a.mutatedParts&&(o&&!_.dirty?(E=Object.isFrozen(_.res),E=Kr(_.res,_.req,f,h,_,E),_.dirty?(B(v,_),_.subscribers.forEach(function(e){return s.add(e)})):E!==_.res&&(_.res=E,_.promise=_e.resolve({result:E}))):(_.dirty&&B(v,_),_.subscribers.forEach(function(e){return s.add(e)})))}}}s.forEach(function(e){return e()})}}},a.addEventListener("abort",o(!1),{signal:s}),a.addEventListener("error",o(!1),{signal:s}),a.addEventListener("complete",o(!0),{signal:s})),a},table:function(n){var o=e.table(n),i=o.schema.primaryKey;return t(t({},o),{mutate:function(e){var s=me.trans;if(i.outbound||"disabled"===s.db._options.cache||s.explicit||"readwrite"!==s.idbtrans.mode)return o.mutate(e);var a=Ir["idb://".concat(r,"/").concat(n)];return a?(s=o.mutate(e),"add"!==e.type&&"put"!==e.type||!(50<=e.values.length||jr(i,e).some(function(e){return null==e}))?(a.optimisticOps.push(e),e.mutatedParts&&Mr(e.mutatedParts),s.then(function(t){0<t.numFailures&&(B(a.optimisticOps,e),(t=$r(0,e,t))&&a.optimisticOps.push(t),e.mutatedParts&&Mr(e.mutatedParts))}),s.catch(function(){B(a.optimisticOps,e),e.mutatedParts&&Mr(e.mutatedParts)})):s.then(function(r){var n=$r(0,t(t({},e),{values:e.values.map(function(e,n){var o;return r.failures[n]||E(e=null!==(o=i.keyPath)&&void 0!==o&&o.includes(".")?M(e):t({},e),i.keyPath,r.results[n]),e})}),r);a.optimisticOps.push(n),queueMicrotask(function(){return e.mutatedParts&&Mr(e.mutatedParts)})}),s):o.mutate(e)},query:function(e){if(!zr(me,o)||!Vr("query",e))return o.query(e);var t="immutable"===(null===(a=me.trans)||void 0===a?void 0:a.db._options.cache),i=(l=me).requery,s=l.signal,a=function(e,t,r,n){var o=Ir["idb://".concat(e,"/").concat(t)];if(!o)return[];if(!(t=o.queries[r]))return[null,!1,o,null];var i=t[(n.query?n.query.index.name:null)||""];if(!i)return[null,!1,o,null];switch(r){case"query":var s=i.find(function(e){return e.req.limit===n.limit&&e.req.values===n.values&&qr(e.req.query.range,n.query.range)});return s?[s,!0,o,i]:[i.find(function(e){return("limit"in e.req?e.req.limit:1/0)>=n.limit&&(!n.values||e.req.values)&&function(e,t){return function(e,t,r,n){if(void 0===e)return void 0!==t?-1:0;if(void 0===t)return 1;if(0===(t=ct(e,t))){if(r&&n)return 0;if(r)return 1;if(n)return-1}return t}(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&0<=function(e,t,r,n){if(void 0===e)return void 0!==t?1:0;if(void 0===t)return-1;if(0===(t=ct(e,t))){if(r&&n)return 0;if(r)return-1;if(n)return 1}return t}(e.upper,t.upper,e.upperOpen,t.upperOpen)}(e.req.query.range,n.query.range)}),!1,o,i];case"count":return s=i.find(function(e){return qr(e.req.query.range,n.query.range)}),[s,!!s,o,i]}}(r,n,"query",e),c=a[0],l=a[1],u=a[2],d=a[3];return c&&l?c.obsSet=e.obsSet:(l=o.query(e).then(function(e){var r=e.result;if(c&&(c.res=r),t){for(var n=0,o=r.length;n<o;++n)Object.freeze(r[n]);Object.freeze(r)}else e.result=M(r);return e}).catch(function(e){return d&&c&&B(d,c),Promise.reject(e)}),c={obsSet:e.obsSet,promise:l,subscribers:new Set,type:"query",req:e,dirty:!1},d?d.push(c):(d=[c],(u=u||(Ir["idb://".concat(r,"/").concat(n)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[e.query.index.name||""]=d)),function(e,t,r,n){e.subscribers.add(r),n.addEventListener("abort",function(){var n,o;e.subscribers.delete(r),0===e.subscribers.size&&(n=e,o=t,setTimeout(function(){0===n.subscribers.size&&B(o,n)},3e3))})}(c,d,i,s),c.promise.then(function(r){return{result:Kr(r.result,e,null==u?void 0:u.optimisticOps,o,c,t)}})}})}})}};function Yr(e,t){return new Proxy(e,{get:function(e,r,n){return"db"===r?t:Reflect.get(e,r,n)}})}var Qr=(Zr.prototype.version=function(e){if(isNaN(e)||e<.1)throw new K.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new K.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,r=t.filter(function(t){return t._cfg.version===e})[0];return r||(r=new this.Version(e),t.push(r),t.sort(nr),r.stores({}),this._state.autoSchema=!1,r)},Zr.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||me.letThrough||this._vip)?e():new _e(function(e,r){if(t._state.openComplete)return r(new K.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void r(new K.DatabaseClosed);t.open().catch(Y)}t._state.dbReadyPromise.then(e,r)}).then(e)},Zr.prototype.use=function(e){var t=e.stack,r=e.create,n=e.level,o=e.name;return o&&this.unuse({stack:t,name:o}),(e=this._middlewares[t]||(this._middlewares[t]=[])).push({stack:t,create:r,level:null==n?10:n,name:o}),e.sort(function(e,t){return e.level-t.level}),this},Zr.prototype.unuse=function(e){var t=e.stack,r=e.name,n=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(e){return n?e.create!==n:!!r&&e.name!==r})),this},Zr.prototype.open=function(){var e=this;return qe(ye,function(){return Dr(e)})},Zr.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var e=this._state,t=et.indexOf(this);if(0<=t&&et.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(t){}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new _e(function(t){e.dbReadyResolve=t}),e.openCanceller=new _e(function(t,r){e.cancelOpen=r}))},Zr.prototype.close=function(e){var t=(void 0===e?{disableAutoOpen:!0}:e).disableAutoOpen;e=this._state,t?(e.isBeingOpened&&e.cancelOpen(new K.DatabaseClosed),this._close(),e.autoOpen=!1,e.dbOpenError=new K.DatabaseClosed):(this._close(),e.autoOpen=this._options.autoOpen||e.isBeingOpened,e.openComplete=!1,e.dbOpenError=null)},Zr.prototype.delete=function(e){var t=this;void 0===e&&(e={disableAutoOpen:!0});var r=0<arguments.length&&"object"!=typeof arguments[0],n=this._state;return new _e(function(o,i){function s(){t.close(e);var r=t._deps.indexedDB.deleteDatabase(t.name);r.onsuccess=Ce(function(){var e,r,n;e=t._deps,r=t.name,n=e.indexedDB,e=e.IDBKeyRange,pr(n)||r===tt||fr(n,e).delete(r).catch(Y),o()}),r.onerror=Rt(i),r.onblocked=t._fireOnBlocked}if(r)throw new K.InvalidArgument("Invalid closeOptions argument to db.delete()");n.isBeingOpened?n.dbReadyPromise.then(s):s()})},Zr.prototype.backendDB=function(){return this.idbdb},Zr.prototype.isOpen=function(){return null!==this.idbdb},Zr.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name},Zr.prototype.hasFailed=function(){return null!==this._state.dbOpenError},Zr.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Zr.prototype,"tables",{get:function(){var e=this;return i(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),Zr.prototype.transaction=function(){var e=function(e,t,r){var n=arguments.length;if(n<2)throw new K.InvalidArgument("Too few arguments");for(var o=new Array(n-1);--n;)o[n-1]=arguments[n];return r=o.pop(),[e,x(o),r]}.apply(this,arguments);return this._transaction.apply(this,e)},Zr.prototype._transaction=function(e,t,r){var n=this,o=me.trans;o&&o.db===this&&-1===e.indexOf("!")||(o=null);var i,s,a=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{if(s=t.map(function(e){if("string"!=typeof(e=e instanceof n.Table?e.name:e))throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return e}),"r"==e||e===rt)i=rt;else{if("rw"!=e&&e!=nt)throw new K.InvalidArgument("Invalid transaction mode: "+e);i=nt}if(o){if(o.mode===rt&&i===nt){if(!a)throw new K.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");o=null}o&&s.forEach(function(e){if(o&&-1===o.storeNames.indexOf(e)){if(!a)throw new K.SubTransaction("Table "+e+" not included in parent transaction.");o=null}}),a&&o&&!o.active&&(o=null)}}catch(r){return o?o._promise(null,function(e,t){t(r)}):Qe(r)}var c=function e(t,r,n,o,i){return _e.resolve().then(function(){var s=me.transless||me,a=t._createTransaction(r,n,t._dbSchema,o);if(a.explicit=!0,s={trans:a,transless:s},o)a.idbtrans=o.idbtrans;else try{a.create(),a.idbtrans._explicit=!0,t._state.PR1398_maxLoop=3}catch(s){return s.name===$.InvalidState&&t.isOpen()&&0<--t._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return e(t,r,n,null,i)})):Qe(s)}var c,l=j(i);return l&&ze(),s=_e.follow(function(){var e;(c=i.call(a,a))&&(l?(e=Ve.bind(null,null),c.then(e,e)):"function"==typeof c.next&&"function"==typeof c.throw&&(c=Cr(c)))},s),(c&&"function"==typeof c.then?_e.resolve(c).then(function(e){return a.active?e:Qe(new K.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):s.then(function(){return c})).then(function(e){return o&&a._resolve(),a._completion.then(function(){return e})}).catch(function(e){return a._reject(e),Qe(e)})})}.bind(null,this,i,s,o,r);return o?o._promise(i,c,"lock"):me.trans?qe(me.transless,function(){return n._whenReady(c)}):this._whenReady(c)},Zr.prototype.table=function(e){if(!u(this._allTables,e))throw new K.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},Zr);function Zr(e,r){var n=this;this._middlewares={},this.verno=0;var o=Zr.dependencies;this._options=r=t({addons:Zr.addons,autoOpen:!0,indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange,cache:"cloned"},r),this._deps={indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange},o=r.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var i,s,a,c,l,u={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Y,dbReadyPromise:null,cancelOpen:Y,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:r.autoOpen};u.dbReadyPromise=new _e(function(e){u.dbReadyResolve=e}),u.openCanceller=new _e(function(e,t){u.cancelOpen=t}),this._state=u,this.name=e,this.on=mt(this,"populate","blocked","versionchange","close",{ready:[ne,Y]}),this.once=function(e,t){var r=function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];n.on(e).unsubscribe(r),t.apply(n,o)};return n.on(e,r)},this.on.ready.subscribe=b(this.on.ready.subscribe,function(e){return function(t,r){Zr.vip(function(){var o,i=n._state;i.openComplete?(i.dbOpenError||_e.resolve().then(t),r&&e(t)):i.onReadyBeingFired?(i.onReadyBeingFired.push(t),r&&e(t)):(e(t),o=n,r||e(function e(){o.on.ready.unsubscribe(t),o.on.ready.unsubscribe(e)}))})}}),this.Collection=(i=this,bt(It.prototype,function(e,t){this.db=i;var r=it,n=null;if(t)try{r=t()}catch(e){n=e}var o=e._ctx;e=(t=o.table).hook.reading.fire,this._ctx={table:t,index:o.index,isPrimKey:!o.index||t.schema.primKey.keyPath&&o.index===t.schema.primKey.name,range:r,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:n,or:o.or,valueMapper:e!==Q?e:null}})),this.Table=(s=this,bt(gt.prototype,function(e,t,r){this.db=s,this._tx=r,this.name=e,this.schema=t,this.hook=s._allTables[e]?s._allTables[e].hook:mt(null,{creating:[J,Y],reading:[Z,Q],updating:[te,Y],deleting:[ee,Y]})})),this.Transaction=(a=this,bt(Ht.prototype,function(e,t,r,n,o){var i=this;"readonly"!==e&&t.forEach(function(e){(e=null===(e=r[e])||void 0===e?void 0:e.yProps)&&(t=t.concat(e.map(function(e){return e.updatesTable})))}),this.db=a,this.mode=e,this.storeNames=t,this.schema=r,this.chromeTransactionDurability=n,this.idbtrans=null,this.on=mt(this,"complete","error","abort"),this.parent=o||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new _e(function(e,t){i._resolve=e,i._reject=t}),this._completion.then(function(){i.active=!1,i.on.complete.fire()},function(e){var t=i.active;return i.active=!1,i.on.error.fire(e),i.parent?i.parent._reject(e):t&&i.idbtrans&&i.idbtrans.abort(),Qe(e)})})),this.Version=(c=this,bt(dr.prototype,function(e){this.db=c,this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(l=this,bt(Pt.prototype,function(e,t,r){if(this.db=l,this._ctx={table:e,index:":id"===t?null:t,or:r},this._cmp=this._ascending=ct,this._descending=function(e,t){return ct(t,e)},this._max=function(e,t){return 0<ct(e,t)?e:t},this._min=function(e,t){return ct(e,t)<0?e:t},this._IDBKeyRange=l._deps.IDBKeyRange,!this._IDBKeyRange)throw new K.MissingAPI})),this.on("versionchange",function(e){0<e.newVersion?console.warn("Another connection wants to upgrade database '".concat(n.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(n.name,"'. Closing db now to resume the delete request.")),n.close({disableAutoOpen:!1})}),this.on("blocked",function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('".concat(n.name,"') was blocked")):console.warn("Upgrade '".concat(n.name,"' blocked by other connection holding version ").concat(e.oldVersion/10))}),this._maxKey=Gt(r.IDBKeyRange),this._createTransaction=function(e,t,r,o){return new n.Transaction(e,t,r,n._options.chromeTransactionDurability,o)},this._fireOnBlocked=function(e){n.on("blocked").fire(e),et.filter(function(e){return e.name===n.name&&e!==n&&!e._state.vcFired}).map(function(t){return t.on("versionchange").fire(e)})},this.use(Fr),this.use(Gr),this.use(Hr),this.use(Lr),this.use(Rr);var d=new Proxy(this,{get:function(e,t,r){if("_vip"===t)return!0;if("table"===t)return function(e){return Yr(n.table(e),d)};var o=Reflect.get(e,t,r);return o instanceof gt?Yr(o,d):"tables"===t?o.map(function(e){return Yr(e,d)}):"_createTransaction"===t?function(){return Yr(o.apply(this,arguments),d)}:o}});this.vip=d,o.forEach(function(e){return e(n)})}R="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable";var Xr,Jr=(en.prototype.subscribe=function(e,t,r){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:r})},en.prototype[R]=function(){return this},en);function en(e){this._subscribe=e}try{Xr={indexedDB:o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB,IDBKeyRange:o.IDBKeyRange||o.webkitIDBKeyRange}}catch(I){Xr={indexedDB:null,IDBKeyRange:null}}function tn(e){var t,r=!1,n=new Jr(function(n){var o,i=j(e),s=!1,a={},c={},l={get closed(){return s},unsubscribe:function(){s||(s=!0,o&&o.abort(),d&&Vt.storagemutated.unsubscribe(f))}};n.start&&n.start(l);var d=!1,h=function(){return Ye(p)},f=function(e){Sr(a,e),xr(c,a)&&h()},p=function(){var l,p,g;!s&&Xr.indexedDB&&(a={},l={},o&&o.abort(),o=new AbortController,g=function(t){var r=Me();try{i&&ze();var n=Fe(e,t);return n=i?n.finally(Ve):n}finally{r&&Oe()}}(p={subscr:l,signal:o.signal,requery:h,querier:e,trans:null}),Promise.resolve(g).then(function(e){r=!0,t=e,s||p.signal.aborted||(a={},function(e){for(var t in e)if(u(e,t))return;return 1}(c=l)||d||(Vt(Ft,f),d=!0),Ye(function(){return!s&&n.next&&n.next(e)}))},function(e){r=!1,["DatabaseClosedError","AbortError"].includes(null==e?void 0:e.name)||s||Ye(function(){s||n.error&&n.error(e)})}))};return setTimeout(h,0),l});return n.hasValue=function(){return r},n.getValue=function(){return t},n}var rn=Qr;function nn(e){var t=sn;try{sn=!0,Vt.storagemutated.fire(e),Or(e,!0)}finally{sn=t}}d(rn,t(t({},G),{delete:function(e){return new rn(e,{addons:[]}).delete()},exists:function(e){return new rn(e,{addons:[]}).open().then(function(e){return e.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return r=(t=rn.dependencies).indexedDB,t=t.IDBKeyRange,(pr(r)?Promise.resolve(r.databases()).then(function(e){return e.map(function(e){return e.name}).filter(function(e){return e!==tt})}):fr(r,t).toCollection().primaryKeys()).then(e)}catch(e){return Qe(new K.MissingAPI)}var t,r},defineClass:function(){return function(e){a(this,e)}},ignoreTransaction:function(e){return me.trans?qe(me.transless,e):e()},vip:gr,async:function(e){return function(){try{var t=Cr(e.apply(this,arguments));return t&&"function"==typeof t.then?t:_e.resolve(t)}catch(t){return Qe(t)}}},spawn:function(e,t,r){try{var n=Cr(e.apply(r,t||[]));return n&&"function"==typeof n.then?n:_e.resolve(n)}catch(e){return Qe(e)}},currentTransaction:{get:function(){return me.trans||null}},waitFor:function(e,t){return t=_e.resolve("function"==typeof e?rn.ignoreTransaction(e):e).timeout(t||6e4),me.trans?me.trans.waitFor(t):t},Promise:_e,debug:{get:function(){return oe},set:function(e){ie(e)}},derive:p,extend:a,props:d,override:b,Events:mt,on:Vt,liveQuery:tn,extendObservabilitySet:Sr,getByKeyPath:_,setByKeyPath:E,delByKeyPath:function(e,t){"string"==typeof t?E(e,t,void 0):"length"in t&&[].map.call(t,function(t){E(e,t,void 0)})},shallowClone:A,deepClone:M,getObjectDiff:Pr,cmp:ct,asap:v,minKey:-1/0,addons:[],connections:et,errnames:$,dependencies:Xr,cache:Ir,semVer:"4.2.1",version:"4.2.1".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,r){return e+t/Math.pow(10,2*r)})})),rn.maxKey=Gt(rn.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(Vt(Ft,function(e){sn||(e=new CustomEvent(zt,{detail:e}),sn=!0,dispatchEvent(e),sn=!1)}),addEventListener(zt,function(e){e=e.detail,sn||nn(e)}));var on,sn=!1,an=function(){};return"undefined"!=typeof BroadcastChannel&&((an=function(){(on=new BroadcastChannel(zt)).onmessage=function(e){return e.data&&nn(e.data)}})(),"function"==typeof on.unref&&on.unref(),Vt(Ft,function(e){sn||on.postMessage(e)})),"undefined"!=typeof addEventListener&&(addEventListener("pagehide",function(e){if(!Qr.disableBfCache&&e.persisted){oe&&console.debug("Dexie: handling persisted pagehide"),null!=on&&on.close();for(var t=0,r=et;t<r.length;t++)r[t].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!Qr.disableBfCache&&e.persisted&&(oe&&console.debug("Dexie: handling persisted pageshow"),an(),nn({all:new mr(-1/0,[[]])}))})),_e.rejectionMapper=function(e,t){return!e||e instanceof F||e instanceof TypeError||e instanceof SyntaxError||!e.name||!q[e.name]?e:(t=new q[e.name](t||e.message,e),"stack"in e&&f(t,"stack",{get:function(){return this.inner.stack}}),t)},ie(oe),t(Qr,Object.freeze({__proto__:null,Dexie:Qr,liveQuery:tn,Entity:at,cmp:ct,PropModification:ht,replacePrefix:function(e,t){return new ht({replacePrefix:[e,t]})},add:function(e){return new ht({add:e})},remove:function(e){return new ht({remove:e})},default:Qr,RangeSet:mr,mergeRanges:wr,rangesOverlap:vr}),{default:Qr}),Qr}()},7118:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Dexie:()=>s,DexieYProvider:()=>m,Entity:()=>h,PropModification:()=>f,RangeSet:()=>u,add:()=>g,cmp:()=>d,default:()=>b,liveQuery:()=>a,mergeRanges:()=>c,rangesOverlap:()=>l,remove:()=>y,replacePrefix:()=>p});var n=r(3744),o=r.n(n);const i=Symbol.for("Dexie"),s=globalThis[i]||(globalThis[i]=o());if(o().semVer!==s.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${o().semVer} and ${s.semVer}`);const{liveQuery:a,mergeRanges:c,rangesOverlap:l,RangeSet:u,cmp:d,Entity:h,PropModification:f,replacePrefix:p,add:g,remove:y,DexieYProvider:m}=s,b=s},251:(e,t)=>{t.read=function(e,t,r,n,o){var i,s,a=8*o-n-1,c=(1<<a)-1,l=c>>1,u=-7,d=r?o-1:0,h=r?-1:1,f=e[t+d];for(d+=h,i=f&(1<<-u)-1,f>>=-u,u+=a;u>0;i=256*i+e[t+d],d+=h,u-=8);for(s=i&(1<<-u)-1,i>>=-u,u+=n;u>0;s=256*s+e[t+d],d+=h,u-=8);if(0===i)i=1-l;else{if(i===c)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,n),i-=l}return(f?-1:1)*s*Math.pow(2,i-n)},t.write=function(e,t,r,n,o,i){var s,a,c,l=8*i-o-1,u=(1<<l)-1,d=u>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:i-1,p=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+d>=1?h/c:h*Math.pow(2,1-d))*c>=2&&(s++,c/=2),s+d>=u?(a=0,s=u):s+d>=1?(a=(t*c-1)*Math.pow(2,o),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,o),s=0));o>=8;e[r+f]=255&a,f+=p,a/=256,o-=8);for(s=s<<o|a,l+=o;l>0;e[r+f]=255&s,f+=p,s/=256,l-=8);e[r+f-p]|=128*g}},2992:(e,t,r)=>{var n,o=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",n={};function o(e,t){if(!n[e]){n[e]={};for(var r=0;r<e.length;r++)n[e][e.charAt(r)]=r}return n[e][t]}var i={compressToBase64:function(e){if(null==e)return"";var r=i._compress(e,6,function(e){return t.charAt(e)});switch(r.length%4){default:case 0:return r;case 1:return r+"===";case 2:return r+"==";case 3:return r+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:i._decompress(e.length,32,function(r){return o(t,e.charAt(r))})},compressToUTF16:function(t){return null==t?"":i._compress(t,15,function(t){return e(t+32)})+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:i._decompress(e.length,16384,function(t){return e.charCodeAt(t)-32})},compressToUint8Array:function(e){for(var t=i.compress(e),r=new Uint8Array(2*t.length),n=0,o=t.length;n<o;n++){var s=t.charCodeAt(n);r[2*n]=s>>>8,r[2*n+1]=s%256}return r},decompressFromUint8Array:function(t){if(null==t)return i.decompress(t);for(var r=new Array(t.length/2),n=0,o=r.length;n<o;n++)r[n]=256*t[2*n]+t[2*n+1];var s=[];return r.forEach(function(t){s.push(e(t))}),i.decompress(s.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":i._compress(e,6,function(e){return r.charAt(e)})},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),i._decompress(e.length,32,function(t){return o(r,e.charAt(t))}))},compress:function(t){return i._compress(t,16,function(t){return e(t)})},_compress:function(e,t,r){if(null==e)return"";var n,o,i,s={},a={},c="",l="",u="",d=2,h=3,f=2,p=[],g=0,y=0;for(i=0;i<e.length;i+=1)if(c=e.charAt(i),Object.prototype.hasOwnProperty.call(s,c)||(s[c]=h++,a[c]=!0),l=u+c,Object.prototype.hasOwnProperty.call(s,l))u=l;else{if(Object.prototype.hasOwnProperty.call(a,u)){if(u.charCodeAt(0)<256){for(n=0;n<f;n++)g<<=1,y==t-1?(y=0,p.push(r(g)),g=0):y++;for(o=u.charCodeAt(0),n=0;n<8;n++)g=g<<1|1&o,y==t-1?(y=0,p.push(r(g)),g=0):y++,o>>=1}else{for(o=1,n=0;n<f;n++)g=g<<1|o,y==t-1?(y=0,p.push(r(g)),g=0):y++,o=0;for(o=u.charCodeAt(0),n=0;n<16;n++)g=g<<1|1&o,y==t-1?(y=0,p.push(r(g)),g=0):y++,o>>=1}0==--d&&(d=Math.pow(2,f),f++),delete a[u]}else for(o=s[u],n=0;n<f;n++)g=g<<1|1&o,y==t-1?(y=0,p.push(r(g)),g=0):y++,o>>=1;0==--d&&(d=Math.pow(2,f),f++),s[l]=h++,u=String(c)}if(""!==u){if(Object.prototype.hasOwnProperty.call(a,u)){if(u.charCodeAt(0)<256){for(n=0;n<f;n++)g<<=1,y==t-1?(y=0,p.push(r(g)),g=0):y++;for(o=u.charCodeAt(0),n=0;n<8;n++)g=g<<1|1&o,y==t-1?(y=0,p.push(r(g)),g=0):y++,o>>=1}else{for(o=1,n=0;n<f;n++)g=g<<1|o,y==t-1?(y=0,p.push(r(g)),g=0):y++,o=0;for(o=u.charCodeAt(0),n=0;n<16;n++)g=g<<1|1&o,y==t-1?(y=0,p.push(r(g)),g=0):y++,o>>=1}0==--d&&(d=Math.pow(2,f),f++),delete a[u]}else for(o=s[u],n=0;n<f;n++)g=g<<1|1&o,y==t-1?(y=0,p.push(r(g)),g=0):y++,o>>=1;0==--d&&(d=Math.pow(2,f),f++)}for(o=2,n=0;n<f;n++)g=g<<1|1&o,y==t-1?(y=0,p.push(r(g)),g=0):y++,o>>=1;for(;;){if(g<<=1,y==t-1){p.push(r(g));break}y++}return p.join("")},decompress:function(e){return null==e?"":""==e?null:i._decompress(e.length,32768,function(t){return e.charCodeAt(t)})},_decompress:function(t,r,n){var o,i,s,a,c,l,u,d=[],h=4,f=4,p=3,g="",y=[],m={val:n(0),position:r,index:1};for(o=0;o<3;o+=1)d[o]=o;for(s=0,c=Math.pow(2,2),l=1;l!=c;)a=m.val&m.position,m.position>>=1,0==m.position&&(m.position=r,m.val=n(m.index++)),s|=(a>0?1:0)*l,l<<=1;switch(s){case 0:for(s=0,c=Math.pow(2,8),l=1;l!=c;)a=m.val&m.position,m.position>>=1,0==m.position&&(m.position=r,m.val=n(m.index++)),s|=(a>0?1:0)*l,l<<=1;u=e(s);break;case 1:for(s=0,c=Math.pow(2,16),l=1;l!=c;)a=m.val&m.position,m.position>>=1,0==m.position&&(m.position=r,m.val=n(m.index++)),s|=(a>0?1:0)*l,l<<=1;u=e(s);break;case 2:return""}for(d[3]=u,i=u,y.push(u);;){if(m.index>t)return"";for(s=0,c=Math.pow(2,p),l=1;l!=c;)a=m.val&m.position,m.position>>=1,0==m.position&&(m.position=r,m.val=n(m.index++)),s|=(a>0?1:0)*l,l<<=1;switch(u=s){case 0:for(s=0,c=Math.pow(2,8),l=1;l!=c;)a=m.val&m.position,m.position>>=1,0==m.position&&(m.position=r,m.val=n(m.index++)),s|=(a>0?1:0)*l,l<<=1;d[f++]=e(s),u=f-1,h--;break;case 1:for(s=0,c=Math.pow(2,16),l=1;l!=c;)a=m.val&m.position,m.position>>=1,0==m.position&&(m.position=r,m.val=n(m.index++)),s|=(a>0?1:0)*l,l<<=1;d[f++]=e(s),u=f-1,h--;break;case 2:return y.join("")}if(0==h&&(h=Math.pow(2,p),p++),d[u])g=d[u];else{if(u!==f)return null;g=i+i.charAt(0)}y.push(g),d[f++]=i+g.charAt(0),i=g,0==--h&&(h=Math.pow(2,p),p++)}}};return i}();void 0===(n=function(){return o}.call(t,r,t,e))||(e.exports=n)},1668:(e,t,r)=>{"use strict";const{Deflate:n,deflate:o,deflateRaw:i,gzip:s}=r(3303),{Inflate:a,inflate:c,inflateRaw:l,ungzip:u}=r(7083),d=r(9681);e.exports.Deflate=n,e.exports.deflate=o,e.exports.deflateRaw=i,e.exports.gzip=s,e.exports.Inflate=a,e.exports.inflate=c,e.exports.inflateRaw=l,e.exports.ungzip=u,e.exports.constants=d},3303:(e,t,r)=>{"use strict";const n=r(8411),o=r(9805),i=r(1996),s=r(4674),a=r(4442),c=Object.prototype.toString,{Z_NO_FLUSH:l,Z_SYNC_FLUSH:u,Z_FULL_FLUSH:d,Z_FINISH:h,Z_OK:f,Z_STREAM_END:p,Z_DEFAULT_COMPRESSION:g,Z_DEFAULT_STRATEGY:y,Z_DEFLATED:m}=r(9681);function b(e){this.options=o.assign({level:g,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:y},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;let r=n.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==f)throw new Error(s[r]);if(t.header&&n.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?i.string2buf(t.dictionary):"[object ArrayBuffer]"===c.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,r=n.deflateSetDictionary(this.strm,e),r!==f)throw new Error(s[r]);this._dict_set=!0}}function w(e,t){const r=new b(t);if(r.push(e,!0),r.err)throw r.msg||s[r.err];return r.result}b.prototype.push=function(e,t){const r=this.strm,o=this.options.chunkSize;let s,a;if(this.ended)return!1;for(a=t===~~t?t:!0===t?h:l,"string"==typeof e?r.input=i.string2buf(e):"[object ArrayBuffer]"===c.call(e)?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;)if(0===r.avail_out&&(r.output=new Uint8Array(o),r.next_out=0,r.avail_out=o),(a===u||a===d)&&r.avail_out<=6)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else{if(s=n.deflate(r,a),s===p)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),s=n.deflateEnd(this.strm),this.onEnd(s),this.ended=!0,s===f;if(0!==r.avail_out){if(a>0&&r.next_out>0)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else if(0===r.avail_in)break}else this.onData(r.output)}return!0},b.prototype.onData=function(e){this.chunks.push(e)},b.prototype.onEnd=function(e){e===f&&(this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},e.exports.Deflate=b,e.exports.deflate=w,e.exports.deflateRaw=function(e,t){return(t=t||{}).raw=!0,w(e,t)},e.exports.gzip=function(e,t){return(t=t||{}).gzip=!0,w(e,t)},e.exports.constants=r(9681)},7083:(e,t,r)=>{"use strict";const n=r(1447),o=r(9805),i=r(1996),s=r(4674),a=r(4442),c=r(7414),l=Object.prototype.toString,{Z_NO_FLUSH:u,Z_FINISH:d,Z_OK:h,Z_STREAM_END:f,Z_NEED_DICT:p,Z_STREAM_ERROR:g,Z_DATA_ERROR:y,Z_MEM_ERROR:m}=r(9681);function b(e){this.options=o.assign({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(15&t.windowBits||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;let r=n.inflateInit2(this.strm,t.windowBits);if(r!==h)throw new Error(s[r]);if(this.header=new c,n.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=i.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=n.inflateSetDictionary(this.strm,t.dictionary),r!==h)))throw new Error(s[r])}function w(e,t){const r=new b(t);if(r.push(e),r.err)throw r.msg||s[r.err];return r.result}b.prototype.push=function(e,t){const r=this.strm,o=this.options.chunkSize,s=this.options.dictionary;let a,c,b;if(this.ended)return!1;for(c=t===~~t?t:!0===t?d:u,"[object ArrayBuffer]"===l.call(e)?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(0===r.avail_out&&(r.output=new Uint8Array(o),r.next_out=0,r.avail_out=o),a=n.inflate(r,c),a===p&&s&&(a=n.inflateSetDictionary(r,s),a===h?a=n.inflate(r,c):a===y&&(a=p));r.avail_in>0&&a===f&&r.state.wrap>0&&0!==e[r.next_in];)n.inflateReset(r),a=n.inflate(r,c);switch(a){case g:case y:case p:case m:return this.onEnd(a),this.ended=!0,!1}if(b=r.avail_out,r.next_out&&(0===r.avail_out||a===f))if("string"===this.options.to){let e=i.utf8border(r.output,r.next_out),t=r.next_out-e,n=i.buf2string(r.output,e);r.next_out=t,r.avail_out=o-t,t&&r.output.set(r.output.subarray(e,e+t),0),this.onData(n)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(a!==h||0!==b){if(a===f)return a=n.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(0===r.avail_in)break}}return!0},b.prototype.onData=function(e){this.chunks.push(e)},b.prototype.onEnd=function(e){e===h&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},e.exports.Inflate=b,e.exports.inflate=w,e.exports.inflateRaw=function(e,t){return(t=t||{}).raw=!0,w(e,t)},e.exports.ungzip=w,e.exports.constants=r(9681)},9805:e=>{"use strict";const t=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);e.exports.assign=function(e){const r=Array.prototype.slice.call(arguments,1);for(;r.length;){const n=r.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const r in n)t(n,r)&&(e[r]=n[r])}}return e},e.exports.flattenChunks=e=>{let t=0;for(let r=0,n=e.length;r<n;r++)t+=e[r].length;const r=new Uint8Array(t);for(let t=0,n=0,o=e.length;t<o;t++){let o=e[t];r.set(o,n),n+=o.length}return r}},1996:e=>{"use strict";let t=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){t=!1}const r=new Uint8Array(256);for(let e=0;e<256;e++)r[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;r[254]=r[254]=1,e.exports.string2buf=e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,r,n,o,i,s=e.length,a=0;for(o=0;o<s;o++)r=e.charCodeAt(o),55296==(64512&r)&&o+1<s&&(n=e.charCodeAt(o+1),56320==(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),o++)),a+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(a),i=0,o=0;i<a;o++)r=e.charCodeAt(o),55296==(64512&r)&&o+1<s&&(n=e.charCodeAt(o+1),56320==(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),o++)),r<128?t[i++]=r:r<2048?(t[i++]=192|r>>>6,t[i++]=128|63&r):r<65536?(t[i++]=224|r>>>12,t[i++]=128|r>>>6&63,t[i++]=128|63&r):(t[i++]=240|r>>>18,t[i++]=128|r>>>12&63,t[i++]=128|r>>>6&63,t[i++]=128|63&r);return t},e.exports.buf2string=(e,n)=>{const o=n||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,n));let i,s;const a=new Array(2*o);for(s=0,i=0;i<o;){let t=e[i++];if(t<128){a[s++]=t;continue}let n=r[t];if(n>4)a[s++]=65533,i+=n-1;else{for(t&=2===n?31:3===n?15:7;n>1&&i<o;)t=t<<6|63&e[i++],n--;n>1?a[s++]=65533:t<65536?a[s++]=t:(t-=65536,a[s++]=55296|t>>10&1023,a[s++]=56320|1023&t)}}return((e,r)=>{if(r<65534&&e.subarray&&t)return String.fromCharCode.apply(null,e.length===r?e:e.subarray(0,r));let n="";for(let t=0;t<r;t++)n+=String.fromCharCode(e[t]);return n})(a,s)},e.exports.utf8border=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+r[e[n]]>t?n:t}},3269:e=>{"use strict";e.exports=(e,t,r,n)=>{let o=65535&e,i=e>>>16&65535,s=0;for(;0!==r;){s=r>2e3?2e3:r,r-=s;do{o=o+t[n++]|0,i=i+o|0}while(--s);o%=65521,i%=65521}return o|i<<16}},9681:e=>{"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},4823:e=>{"use strict";const t=new Uint32Array((()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t})());e.exports=(e,r,n,o)=>{const i=t,s=o+n;e^=-1;for(let t=o;t<s;t++)e=e>>>8^i[255&(e^r[t])];return-1^e}},8411:(e,t,r)=>{"use strict";const{_tr_init:n,_tr_stored_block:o,_tr_flush_block:i,_tr_tally:s,_tr_align:a}=r(3665),c=r(3269),l=r(4823),u=r(4674),{Z_NO_FLUSH:d,Z_PARTIAL_FLUSH:h,Z_FULL_FLUSH:f,Z_FINISH:p,Z_BLOCK:g,Z_OK:y,Z_STREAM_END:m,Z_STREAM_ERROR:b,Z_DATA_ERROR:w,Z_BUF_ERROR:v,Z_DEFAULT_COMPRESSION:_,Z_FILTERED:E,Z_HUFFMAN_ONLY:A,Z_RLE:S,Z_FIXED:x,Z_DEFAULT_STRATEGY:I,Z_UNKNOWN:T,Z_DEFLATED:k}=r(9681),M=258,O=262,N=42,D=113,C=666,B=(e,t)=>(e.msg=u[t],t),L=e=>2*e-(e>4?9:0),P=e=>{let t=e.length;for(;--t>=0;)e[t]=0},j=e=>{let t,r,n,o=e.w_size;t=e.hash_size,n=t;do{r=e.head[--n],e.head[n]=r>=o?r-o:0}while(--t);t=o,n=t;do{r=e.prev[--n],e.prev[n]=r>=o?r-o:0}while(--t)};let R=(e,t,r)=>(t<<e.hash_shift^r)&e.hash_mask;const U=e=>{const t=e.state;let r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))},F=(e,t)=>{i(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,U(e.strm)},z=(e,t)=>{e.pending_buf[e.pending++]=t},V=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},H=(e,t,r,n)=>{let o=e.avail_in;return o>n&&(o=n),0===o?0:(e.avail_in-=o,t.set(e.input.subarray(e.next_in,e.next_in+o),r),1===e.state.wrap?e.adler=c(e.adler,t,o,r):2===e.state.wrap&&(e.adler=l(e.adler,t,o,r)),e.next_in+=o,e.total_in+=o,o)},$=(e,t)=>{let r,n,o=e.max_chain_length,i=e.strstart,s=e.prev_length,a=e.nice_match;const c=e.strstart>e.w_size-O?e.strstart-(e.w_size-O):0,l=e.window,u=e.w_mask,d=e.prev,h=e.strstart+M;let f=l[i+s-1],p=l[i+s];e.prev_length>=e.good_match&&(o>>=2),a>e.lookahead&&(a=e.lookahead);do{if(r=t,l[r+s]===p&&l[r+s-1]===f&&l[r]===l[i]&&l[++r]===l[i+1]){i+=2,r++;do{}while(l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&i<h);if(n=M-(h-i),i=h-M,n>s){if(e.match_start=t,s=n,n>=a)break;f=l[i+s-1],p=l[i+s]}}}while((t=d[t&u])>c&&0!==--o);return s<=e.lookahead?s:e.lookahead},W=e=>{const t=e.w_size;let r,n,o;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-O)&&(e.window.set(e.window.subarray(t,t+t-n),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),j(e),n+=t),0===e.strm.avail_in)break;if(r=H(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=r,e.lookahead+e.insert>=3)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=R(e,e.ins_h,e.window[o+1]);e.insert&&(e.ins_h=R(e,e.ins_h,e.window[o+3-1]),e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<O&&0!==e.strm.avail_in)},K=(e,t)=>{let r,n,i,s=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,a=0,c=e.strm.avail_in;do{if(r=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i)break;if(i=e.strm.avail_out-i,n=e.strstart-e.block_start,r>n+e.strm.avail_in&&(r=n+e.strm.avail_in),r>i&&(r=i),r<s&&(0===r&&t!==p||t===d||r!==n+e.strm.avail_in))break;a=t===p&&r===n+e.strm.avail_in?1:0,o(e,0,0,a),e.pending_buf[e.pending-4]=r,e.pending_buf[e.pending-3]=r>>8,e.pending_buf[e.pending-2]=~r,e.pending_buf[e.pending-1]=~r>>8,U(e.strm),n&&(n>r&&(n=r),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+n),e.strm.next_out),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n,e.block_start+=n,r-=n),r&&(H(e.strm,e.strm.output,e.strm.next_out,r),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r)}while(0===a);return c-=e.strm.avail_in,c&&(c>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=c&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-c,e.strm.next_in),e.strstart),e.strstart+=c,e.insert+=c>e.w_size-e.insert?e.w_size-e.insert:c),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),a?4:t!==d&&t!==p&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&(H(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i,s=i>e.w_size?e.w_size:i,n=e.strstart-e.block_start,(n>=s||(n||t===p)&&t!==d&&0===e.strm.avail_in&&n<=i)&&(r=n>i?i:n,a=t===p&&0===e.strm.avail_in&&r===n?1:0,o(e,e.block_start,r,a),e.block_start+=r,U(e.strm)),a?3:1)},q=(e,t)=>{let r,n;for(;;){if(e.lookahead<O){if(W(e),e.lookahead<O&&t===d)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=R(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-O&&(e.match_length=$(e,r)),e.match_length>=3)if(n=s(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=R(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=R(e,e.ins_h,e.window[e.strstart+1]);else n=s(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(F(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===p?(F(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(F(e,!1),0===e.strm.avail_out)?1:2},G=(e,t)=>{let r,n,o;for(;;){if(e.lookahead<O){if(W(e),e.lookahead<O&&t===d)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=R(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-O&&(e.match_length=$(e,r),e.match_length<=5&&(e.strategy===E||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){o=e.strstart+e.lookahead-3,n=s(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=o&&(e.ins_h=R(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!==--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,n&&(F(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(n=s(e,0,e.window[e.strstart-1]),n&&F(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=s(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===p?(F(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(F(e,!1),0===e.strm.avail_out)?1:2};function Y(e,t,r,n,o){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=o}const Q=[new Y(0,0,0,0,K),new Y(4,4,8,4,q),new Y(4,5,16,8,q),new Y(4,6,32,32,q),new Y(4,4,16,16,G),new Y(8,16,32,32,G),new Y(8,16,128,128,G),new Y(8,32,128,256,G),new Y(32,128,258,1024,G),new Y(32,258,258,4096,G)];function Z(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=k,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),P(this.dyn_ltree),P(this.dyn_dtree),P(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),P(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),P(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const X=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==N&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==D&&t.status!==C?1:0},J=e=>{if(X(e))return B(e,b);e.total_in=e.total_out=0,e.data_type=T;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?N:D,e.adler=2===t.wrap?0:1,t.last_flush=-2,n(t),y},ee=e=>{const t=J(e);var r;return t===y&&((r=e.state).window_size=2*r.w_size,P(r.head),r.max_lazy_match=Q[r.level].max_lazy,r.good_match=Q[r.level].good_length,r.nice_match=Q[r.level].nice_length,r.max_chain_length=Q[r.level].max_chain,r.strstart=0,r.block_start=0,r.lookahead=0,r.insert=0,r.match_length=r.prev_length=2,r.match_available=0,r.ins_h=0),t},te=(e,t,r,n,o,i)=>{if(!e)return b;let s=1;if(t===_&&(t=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),o<1||o>9||r!==k||n<8||n>15||t<0||t>9||i<0||i>x||8===n&&1!==s)return B(e,b);8===n&&(n=9);const a=new Z;return e.state=a,a.strm=e,a.status=N,a.wrap=s,a.gzhead=null,a.w_bits=n,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=o+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<o+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=3*(a.lit_bufsize-1),a.level=t,a.strategy=i,a.method=r,ee(e)};e.exports.deflateInit=(e,t)=>te(e,t,k,15,8,I),e.exports.deflateInit2=te,e.exports.deflateReset=ee,e.exports.deflateResetKeep=J,e.exports.deflateSetHeader=(e,t)=>X(e)||2!==e.state.wrap?b:(e.state.gzhead=t,y),e.exports.deflate=(e,t)=>{if(X(e)||t>g||t<0)return e?B(e,b):b;const r=e.state;if(!e.output||0!==e.avail_in&&!e.input||r.status===C&&t!==p)return B(e,0===e.avail_out?v:b);const n=r.last_flush;if(r.last_flush=t,0!==r.pending){if(U(e),0===e.avail_out)return r.last_flush=-1,y}else if(0===e.avail_in&&L(t)<=L(n)&&t!==p)return B(e,v);if(r.status===C&&0!==e.avail_in)return B(e,v);if(r.status===N&&0===r.wrap&&(r.status=D),r.status===N){let t=k+(r.w_bits-8<<4)<<8,n=-1;if(n=r.strategy>=A||r.level<2?0:r.level<6?1:6===r.level?2:3,t|=n<<6,0!==r.strstart&&(t|=32),t+=31-t%31,V(r,t),0!==r.strstart&&(V(r,e.adler>>>16),V(r,65535&e.adler)),e.adler=1,r.status=D,U(e),0!==r.pending)return r.last_flush=-1,y}if(57===r.status)if(e.adler=0,z(r,31),z(r,139),z(r,8),r.gzhead)z(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),z(r,255&r.gzhead.time),z(r,r.gzhead.time>>8&255),z(r,r.gzhead.time>>16&255),z(r,r.gzhead.time>>24&255),z(r,9===r.level?2:r.strategy>=A||r.level<2?4:0),z(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(z(r,255&r.gzhead.extra.length),z(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=l(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69;else if(z(r,0),z(r,0),z(r,0),z(r,0),z(r,0),z(r,9===r.level?2:r.strategy>=A||r.level<2?4:0),z(r,3),r.status=D,U(e),0!==r.pending)return r.last_flush=-1,y;if(69===r.status){if(r.gzhead.extra){let t=r.pending,n=(65535&r.gzhead.extra.length)-r.gzindex;for(;r.pending+n>r.pending_buf_size;){let o=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+o),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>t&&(e.adler=l(e.adler,r.pending_buf,r.pending-t,t)),r.gzindex+=o,U(e),0!==r.pending)return r.last_flush=-1,y;t=0,n-=o}let o=new Uint8Array(r.gzhead.extra);r.pending_buf.set(o.subarray(r.gzindex,r.gzindex+n),r.pending),r.pending+=n,r.gzhead.hcrc&&r.pending>t&&(e.adler=l(e.adler,r.pending_buf,r.pending-t,t)),r.gzindex=0}r.status=73}if(73===r.status){if(r.gzhead.name){let t,n=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>n&&(e.adler=l(e.adler,r.pending_buf,r.pending-n,n)),U(e),0!==r.pending)return r.last_flush=-1,y;n=0}t=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,z(r,t)}while(0!==t);r.gzhead.hcrc&&r.pending>n&&(e.adler=l(e.adler,r.pending_buf,r.pending-n,n)),r.gzindex=0}r.status=91}if(91===r.status){if(r.gzhead.comment){let t,n=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>n&&(e.adler=l(e.adler,r.pending_buf,r.pending-n,n)),U(e),0!==r.pending)return r.last_flush=-1,y;n=0}t=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,z(r,t)}while(0!==t);r.gzhead.hcrc&&r.pending>n&&(e.adler=l(e.adler,r.pending_buf,r.pending-n,n))}r.status=103}if(103===r.status){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(U(e),0!==r.pending))return r.last_flush=-1,y;z(r,255&e.adler),z(r,e.adler>>8&255),e.adler=0}if(r.status=D,U(e),0!==r.pending)return r.last_flush=-1,y}if(0!==e.avail_in||0!==r.lookahead||t!==d&&r.status!==C){let n=0===r.level?K(r,t):r.strategy===A?((e,t)=>{let r;for(;;){if(0===e.lookahead&&(W(e),0===e.lookahead)){if(t===d)return 1;break}if(e.match_length=0,r=s(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(F(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===p?(F(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(F(e,!1),0===e.strm.avail_out)?1:2})(r,t):r.strategy===S?((e,t)=>{let r,n,o,i;const a=e.window;for(;;){if(e.lookahead<=M){if(W(e),e.lookahead<=M&&t===d)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(o=e.strstart-1,n=a[o],n===a[++o]&&n===a[++o]&&n===a[++o])){i=e.strstart+M;do{}while(n===a[++o]&&n===a[++o]&&n===a[++o]&&n===a[++o]&&n===a[++o]&&n===a[++o]&&n===a[++o]&&n===a[++o]&&o<i);e.match_length=M-(i-o),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(r=s(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=s(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(F(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===p?(F(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(F(e,!1),0===e.strm.avail_out)?1:2})(r,t):Q[r.level].func(r,t);if(3!==n&&4!==n||(r.status=C),1===n||3===n)return 0===e.avail_out&&(r.last_flush=-1),y;if(2===n&&(t===h?a(r):t!==g&&(o(r,0,0,!1),t===f&&(P(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),U(e),0===e.avail_out))return r.last_flush=-1,y}return t!==p?y:r.wrap<=0?m:(2===r.wrap?(z(r,255&e.adler),z(r,e.adler>>8&255),z(r,e.adler>>16&255),z(r,e.adler>>24&255),z(r,255&e.total_in),z(r,e.total_in>>8&255),z(r,e.total_in>>16&255),z(r,e.total_in>>24&255)):(V(r,e.adler>>>16),V(r,65535&e.adler)),U(e),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?y:m)},e.exports.deflateEnd=e=>{if(X(e))return b;const t=e.state.status;return e.state=null,t===D?B(e,w):y},e.exports.deflateSetDictionary=(e,t)=>{let r=t.length;if(X(e))return b;const n=e.state,o=n.wrap;if(2===o||1===o&&n.status!==N||n.lookahead)return b;if(1===o&&(e.adler=c(e.adler,t,r,0)),n.wrap=0,r>=n.w_size){0===o&&(P(n.head),n.strstart=0,n.block_start=0,n.insert=0);let e=new Uint8Array(n.w_size);e.set(t.subarray(r-n.w_size,r),0),t=e,r=n.w_size}const i=e.avail_in,s=e.next_in,a=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,W(n);n.lookahead>=3;){let e=n.strstart,t=n.lookahead-2;do{n.ins_h=R(n,n.ins_h,n.window[e+3-1]),n.prev[e&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=e,e++}while(--t);n.strstart=e,n.lookahead=2,W(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=s,e.input=a,e.avail_in=i,n.wrap=o,y},e.exports.deflateInfo="pako deflate (from Nodeca project)"},7414:e=>{"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},7293:e=>{"use strict";const t=16209;e.exports=function(e,r){let n,o,i,s,a,c,l,u,d,h,f,p,g,y,m,b,w,v,_,E,A,S,x,I;const T=e.state;n=e.next_in,x=e.input,o=n+(e.avail_in-5),i=e.next_out,I=e.output,s=i-(r-e.avail_out),a=i+(e.avail_out-257),c=T.dmax,l=T.wsize,u=T.whave,d=T.wnext,h=T.window,f=T.hold,p=T.bits,g=T.lencode,y=T.distcode,m=(1<<T.lenbits)-1,b=(1<<T.distbits)-1;e:do{p<15&&(f+=x[n++]<<p,p+=8,f+=x[n++]<<p,p+=8),w=g[f&m];t:for(;;){if(v=w>>>24,f>>>=v,p-=v,v=w>>>16&255,0===v)I[i++]=65535&w;else{if(!(16&v)){if(64&v){if(32&v){T.mode=16191;break e}e.msg="invalid literal/length code",T.mode=t;break e}w=g[(65535&w)+(f&(1<<v)-1)];continue t}for(_=65535&w,v&=15,v&&(p<v&&(f+=x[n++]<<p,p+=8),_+=f&(1<<v)-1,f>>>=v,p-=v),p<15&&(f+=x[n++]<<p,p+=8,f+=x[n++]<<p,p+=8),w=y[f&b];;){if(v=w>>>24,f>>>=v,p-=v,v=w>>>16&255,16&v){if(E=65535&w,v&=15,p<v&&(f+=x[n++]<<p,p+=8,p<v&&(f+=x[n++]<<p,p+=8)),E+=f&(1<<v)-1,E>c){e.msg="invalid distance too far back",T.mode=t;break e}if(f>>>=v,p-=v,v=i-s,E>v){if(v=E-v,v>u&&T.sane){e.msg="invalid distance too far back",T.mode=t;break e}if(A=0,S=h,0===d){if(A+=l-v,v<_){_-=v;do{I[i++]=h[A++]}while(--v);A=i-E,S=I}}else if(d<v){if(A+=l+d-v,v-=d,v<_){_-=v;do{I[i++]=h[A++]}while(--v);if(A=0,d<_){v=d,_-=v;do{I[i++]=h[A++]}while(--v);A=i-E,S=I}}}else if(A+=d-v,v<_){_-=v;do{I[i++]=h[A++]}while(--v);A=i-E,S=I}for(;_>2;)I[i++]=S[A++],I[i++]=S[A++],I[i++]=S[A++],_-=3;_&&(I[i++]=S[A++],_>1&&(I[i++]=S[A++]))}else{A=i-E;do{I[i++]=I[A++],I[i++]=I[A++],I[i++]=I[A++],_-=3}while(_>2);_&&(I[i++]=I[A++],_>1&&(I[i++]=I[A++]))}break}if(64&v){e.msg="invalid distance code",T.mode=t;break e}w=y[(65535&w)+(f&(1<<v)-1)]}}break}}while(n<o&&i<a);_=p>>3,n-=_,p-=_<<3,f&=(1<<p)-1,e.next_in=n,e.next_out=i,e.avail_in=n<o?o-n+5:5-(n-o),e.avail_out=i<a?a-i+257:257-(i-a),T.hold=f,T.bits=p}},1447:(e,t,r)=>{"use strict";const n=r(3269),o=r(4823),i=r(7293),s=r(1998),{Z_FINISH:a,Z_BLOCK:c,Z_TREES:l,Z_OK:u,Z_STREAM_END:d,Z_NEED_DICT:h,Z_STREAM_ERROR:f,Z_DATA_ERROR:p,Z_MEM_ERROR:g,Z_BUF_ERROR:y,Z_DEFLATED:m}=r(9681),b=16180,w=16190,v=16191,_=16192,E=16194,A=16199,S=16200,x=16206,I=16209,T=16210,k=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function M(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const O=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<b||t.mode>16211?1:0},N=e=>{if(O(e))return f;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=b,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,u},D=e=>{if(O(e))return f;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,N(e)},C=(e,t)=>{let r;if(O(e))return f;const n=e.state;return t<0?(r=0,t=-t):(r=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?f:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,D(e))},B=(e,t)=>{if(!e)return f;const r=new M;e.state=r,r.strm=e,r.window=null,r.mode=b;const n=C(e,t);return n!==u&&(e.state=null),n};let L,P,j=!0;const R=e=>{if(j){L=new Int32Array(512),P=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(s(1,e.lens,0,288,L,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;s(2,e.lens,0,32,P,0,e.work,{bits:5}),j=!1}e.lencode=L,e.lenbits=9,e.distcode=P,e.distbits=5},U=(e,t,r,n)=>{let o;const i=e.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),n>=i.wsize?(i.window.set(t.subarray(r-i.wsize,r),0),i.wnext=0,i.whave=i.wsize):(o=i.wsize-i.wnext,o>n&&(o=n),i.window.set(t.subarray(r-n,r-n+o),i.wnext),(n-=o)?(i.window.set(t.subarray(r-n,r),0),i.wnext=n,i.whave=i.wsize):(i.wnext+=o,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=o))),0};e.exports.inflateReset=D,e.exports.inflateReset2=C,e.exports.inflateResetKeep=N,e.exports.inflateInit=e=>B(e,15),e.exports.inflateInit2=B,e.exports.inflate=(e,t)=>{let r,M,N,D,C,B,L,P,j,F,z,V,H,$,W,K,q,G,Y,Q,Z,X,J=0;const ee=new Uint8Array(4);let te,re;const ne=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(O(e)||!e.output||!e.input&&0!==e.avail_in)return f;r=e.state,r.mode===v&&(r.mode=_),C=e.next_out,N=e.output,L=e.avail_out,D=e.next_in,M=e.input,B=e.avail_in,P=r.hold,j=r.bits,F=B,z=L,X=u;e:for(;;)switch(r.mode){case b:if(0===r.wrap){r.mode=_;break}for(;j<16;){if(0===B)break e;B--,P+=M[D++]<<j,j+=8}if(2&r.wrap&&35615===P){0===r.wbits&&(r.wbits=15),r.check=0,ee[0]=255&P,ee[1]=P>>>8&255,r.check=o(r.check,ee,2,0),P=0,j=0,r.mode=16181;break}if(r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&P)<<8)+(P>>8))%31){e.msg="incorrect header check",r.mode=I;break}if((15&P)!==m){e.msg="unknown compression method",r.mode=I;break}if(P>>>=4,j-=4,Z=8+(15&P),0===r.wbits&&(r.wbits=Z),Z>15||Z>r.wbits){e.msg="invalid window size",r.mode=I;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=512&P?16189:v,P=0,j=0;break;case 16181:for(;j<16;){if(0===B)break e;B--,P+=M[D++]<<j,j+=8}if(r.flags=P,(255&r.flags)!==m){e.msg="unknown compression method",r.mode=I;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=I;break}r.head&&(r.head.text=P>>8&1),512&r.flags&&4&r.wrap&&(ee[0]=255&P,ee[1]=P>>>8&255,r.check=o(r.check,ee,2,0)),P=0,j=0,r.mode=16182;case 16182:for(;j<32;){if(0===B)break e;B--,P+=M[D++]<<j,j+=8}r.head&&(r.head.time=P),512&r.flags&&4&r.wrap&&(ee[0]=255&P,ee[1]=P>>>8&255,ee[2]=P>>>16&255,ee[3]=P>>>24&255,r.check=o(r.check,ee,4,0)),P=0,j=0,r.mode=16183;case 16183:for(;j<16;){if(0===B)break e;B--,P+=M[D++]<<j,j+=8}r.head&&(r.head.xflags=255&P,r.head.os=P>>8),512&r.flags&&4&r.wrap&&(ee[0]=255&P,ee[1]=P>>>8&255,r.check=o(r.check,ee,2,0)),P=0,j=0,r.mode=16184;case 16184:if(1024&r.flags){for(;j<16;){if(0===B)break e;B--,P+=M[D++]<<j,j+=8}r.length=P,r.head&&(r.head.extra_len=P),512&r.flags&&4&r.wrap&&(ee[0]=255&P,ee[1]=P>>>8&255,r.check=o(r.check,ee,2,0)),P=0,j=0}else r.head&&(r.head.extra=null);r.mode=16185;case 16185:if(1024&r.flags&&(V=r.length,V>B&&(V=B),V&&(r.head&&(Z=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(M.subarray(D,D+V),Z)),512&r.flags&&4&r.wrap&&(r.check=o(r.check,M,V,D)),B-=V,D+=V,r.length-=V),r.length))break e;r.length=0,r.mode=16186;case 16186:if(2048&r.flags){if(0===B)break e;V=0;do{Z=M[D+V++],r.head&&Z&&r.length<65536&&(r.head.name+=String.fromCharCode(Z))}while(Z&&V<B);if(512&r.flags&&4&r.wrap&&(r.check=o(r.check,M,V,D)),B-=V,D+=V,Z)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=16187;case 16187:if(4096&r.flags){if(0===B)break e;V=0;do{Z=M[D+V++],r.head&&Z&&r.length<65536&&(r.head.comment+=String.fromCharCode(Z))}while(Z&&V<B);if(512&r.flags&&4&r.wrap&&(r.check=o(r.check,M,V,D)),B-=V,D+=V,Z)break e}else r.head&&(r.head.comment=null);r.mode=16188;case 16188:if(512&r.flags){for(;j<16;){if(0===B)break e;B--,P+=M[D++]<<j,j+=8}if(4&r.wrap&&P!==(65535&r.check)){e.msg="header crc mismatch",r.mode=I;break}P=0,j=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=v;break;case 16189:for(;j<32;){if(0===B)break e;B--,P+=M[D++]<<j,j+=8}e.adler=r.check=k(P),P=0,j=0,r.mode=w;case w:if(0===r.havedict)return e.next_out=C,e.avail_out=L,e.next_in=D,e.avail_in=B,r.hold=P,r.bits=j,h;e.adler=r.check=1,r.mode=v;case v:if(t===c||t===l)break e;case _:if(r.last){P>>>=7&j,j-=7&j,r.mode=x;break}for(;j<3;){if(0===B)break e;B--,P+=M[D++]<<j,j+=8}switch(r.last=1&P,P>>>=1,j-=1,3&P){case 0:r.mode=16193;break;case 1:if(R(r),r.mode=A,t===l){P>>>=2,j-=2;break e}break;case 2:r.mode=16196;break;case 3:e.msg="invalid block type",r.mode=I}P>>>=2,j-=2;break;case 16193:for(P>>>=7&j,j-=7&j;j<32;){if(0===B)break e;B--,P+=M[D++]<<j,j+=8}if((65535&P)!=(P>>>16^65535)){e.msg="invalid stored block lengths",r.mode=I;break}if(r.length=65535&P,P=0,j=0,r.mode=E,t===l)break e;case E:r.mode=16195;case 16195:if(V=r.length,V){if(V>B&&(V=B),V>L&&(V=L),0===V)break e;N.set(M.subarray(D,D+V),C),B-=V,D+=V,L-=V,C+=V,r.length-=V;break}r.mode=v;break;case 16196:for(;j<14;){if(0===B)break e;B--,P+=M[D++]<<j,j+=8}if(r.nlen=257+(31&P),P>>>=5,j-=5,r.ndist=1+(31&P),P>>>=5,j-=5,r.ncode=4+(15&P),P>>>=4,j-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=I;break}r.have=0,r.mode=16197;case 16197:for(;r.have<r.ncode;){for(;j<3;){if(0===B)break e;B--,P+=M[D++]<<j,j+=8}r.lens[ne[r.have++]]=7&P,P>>>=3,j-=3}for(;r.have<19;)r.lens[ne[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,te={bits:r.lenbits},X=s(0,r.lens,0,19,r.lencode,0,r.work,te),r.lenbits=te.bits,X){e.msg="invalid code lengths set",r.mode=I;break}r.have=0,r.mode=16198;case 16198:for(;r.have<r.nlen+r.ndist;){for(;J=r.lencode[P&(1<<r.lenbits)-1],W=J>>>24,K=J>>>16&255,q=65535&J,!(W<=j);){if(0===B)break e;B--,P+=M[D++]<<j,j+=8}if(q<16)P>>>=W,j-=W,r.lens[r.have++]=q;else{if(16===q){for(re=W+2;j<re;){if(0===B)break e;B--,P+=M[D++]<<j,j+=8}if(P>>>=W,j-=W,0===r.have){e.msg="invalid bit length repeat",r.mode=I;break}Z=r.lens[r.have-1],V=3+(3&P),P>>>=2,j-=2}else if(17===q){for(re=W+3;j<re;){if(0===B)break e;B--,P+=M[D++]<<j,j+=8}P>>>=W,j-=W,Z=0,V=3+(7&P),P>>>=3,j-=3}else{for(re=W+7;j<re;){if(0===B)break e;B--,P+=M[D++]<<j,j+=8}P>>>=W,j-=W,Z=0,V=11+(127&P),P>>>=7,j-=7}if(r.have+V>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=I;break}for(;V--;)r.lens[r.have++]=Z}}if(r.mode===I)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=I;break}if(r.lenbits=9,te={bits:r.lenbits},X=s(1,r.lens,0,r.nlen,r.lencode,0,r.work,te),r.lenbits=te.bits,X){e.msg="invalid literal/lengths set",r.mode=I;break}if(r.distbits=6,r.distcode=r.distdyn,te={bits:r.distbits},X=s(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,te),r.distbits=te.bits,X){e.msg="invalid distances set",r.mode=I;break}if(r.mode=A,t===l)break e;case A:r.mode=S;case S:if(B>=6&&L>=258){e.next_out=C,e.avail_out=L,e.next_in=D,e.avail_in=B,r.hold=P,r.bits=j,i(e,z),C=e.next_out,N=e.output,L=e.avail_out,D=e.next_in,M=e.input,B=e.avail_in,P=r.hold,j=r.bits,r.mode===v&&(r.back=-1);break}for(r.back=0;J=r.lencode[P&(1<<r.lenbits)-1],W=J>>>24,K=J>>>16&255,q=65535&J,!(W<=j);){if(0===B)break e;B--,P+=M[D++]<<j,j+=8}if(K&&!(240&K)){for(G=W,Y=K,Q=q;J=r.lencode[Q+((P&(1<<G+Y)-1)>>G)],W=J>>>24,K=J>>>16&255,q=65535&J,!(G+W<=j);){if(0===B)break e;B--,P+=M[D++]<<j,j+=8}P>>>=G,j-=G,r.back+=G}if(P>>>=W,j-=W,r.back+=W,r.length=q,0===K){r.mode=16205;break}if(32&K){r.back=-1,r.mode=v;break}if(64&K){e.msg="invalid literal/length code",r.mode=I;break}r.extra=15&K,r.mode=16201;case 16201:if(r.extra){for(re=r.extra;j<re;){if(0===B)break e;B--,P+=M[D++]<<j,j+=8}r.length+=P&(1<<r.extra)-1,P>>>=r.extra,j-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=16202;case 16202:for(;J=r.distcode[P&(1<<r.distbits)-1],W=J>>>24,K=J>>>16&255,q=65535&J,!(W<=j);){if(0===B)break e;B--,P+=M[D++]<<j,j+=8}if(!(240&K)){for(G=W,Y=K,Q=q;J=r.distcode[Q+((P&(1<<G+Y)-1)>>G)],W=J>>>24,K=J>>>16&255,q=65535&J,!(G+W<=j);){if(0===B)break e;B--,P+=M[D++]<<j,j+=8}P>>>=G,j-=G,r.back+=G}if(P>>>=W,j-=W,r.back+=W,64&K){e.msg="invalid distance code",r.mode=I;break}r.offset=q,r.extra=15&K,r.mode=16203;case 16203:if(r.extra){for(re=r.extra;j<re;){if(0===B)break e;B--,P+=M[D++]<<j,j+=8}r.offset+=P&(1<<r.extra)-1,P>>>=r.extra,j-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=I;break}r.mode=16204;case 16204:if(0===L)break e;if(V=z-L,r.offset>V){if(V=r.offset-V,V>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=I;break}V>r.wnext?(V-=r.wnext,H=r.wsize-V):H=r.wnext-V,V>r.length&&(V=r.length),$=r.window}else $=N,H=C-r.offset,V=r.length;V>L&&(V=L),L-=V,r.length-=V;do{N[C++]=$[H++]}while(--V);0===r.length&&(r.mode=S);break;case 16205:if(0===L)break e;N[C++]=r.length,L--,r.mode=S;break;case x:if(r.wrap){for(;j<32;){if(0===B)break e;B--,P|=M[D++]<<j,j+=8}if(z-=L,e.total_out+=z,r.total+=z,4&r.wrap&&z&&(e.adler=r.check=r.flags?o(r.check,N,z,C-z):n(r.check,N,z,C-z)),z=L,4&r.wrap&&(r.flags?P:k(P))!==r.check){e.msg="incorrect data check",r.mode=I;break}P=0,j=0}r.mode=16207;case 16207:if(r.wrap&&r.flags){for(;j<32;){if(0===B)break e;B--,P+=M[D++]<<j,j+=8}if(4&r.wrap&&P!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=I;break}P=0,j=0}r.mode=16208;case 16208:X=d;break e;case I:X=p;break e;case T:return g;default:return f}return e.next_out=C,e.avail_out=L,e.next_in=D,e.avail_in=B,r.hold=P,r.bits=j,(r.wsize||z!==e.avail_out&&r.mode<I&&(r.mode<x||t!==a))&&U(e,e.output,e.next_out,z-e.avail_out)?(r.mode=T,g):(F-=e.avail_in,z-=e.avail_out,e.total_in+=F,e.total_out+=z,r.total+=z,4&r.wrap&&z&&(e.adler=r.check=r.flags?o(r.check,N,z,e.next_out-z):n(r.check,N,z,e.next_out-z)),e.data_type=r.bits+(r.last?64:0)+(r.mode===v?128:0)+(r.mode===A||r.mode===E?256:0),(0===F&&0===z||t===a)&&X===u&&(X=y),X)},e.exports.inflateEnd=e=>{if(O(e))return f;let t=e.state;return t.window&&(t.window=null),e.state=null,u},e.exports.inflateGetHeader=(e,t)=>{if(O(e))return f;const r=e.state;return 2&r.wrap?(r.head=t,t.done=!1,u):f},e.exports.inflateSetDictionary=(e,t)=>{const r=t.length;let o,i,s;return O(e)?f:(o=e.state,0!==o.wrap&&o.mode!==w?f:o.mode===w&&(i=1,i=n(i,t,r,0),i!==o.check)?p:(s=U(e,t,r,r),s?(o.mode=T,g):(o.havedict=1,u)))},e.exports.inflateInfo="pako inflate (from Nodeca project)"},1998:e=>{"use strict";const t=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),r=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),n=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),o=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);e.exports=(e,i,s,a,c,l,u,d)=>{const h=d.bits;let f,p,g,y,m,b,w=0,v=0,_=0,E=0,A=0,S=0,x=0,I=0,T=0,k=0,M=null;const O=new Uint16Array(16),N=new Uint16Array(16);let D,C,B,L=null;for(w=0;w<=15;w++)O[w]=0;for(v=0;v<a;v++)O[i[s+v]]++;for(A=h,E=15;E>=1&&0===O[E];E--);if(A>E&&(A=E),0===E)return c[l++]=20971520,c[l++]=20971520,d.bits=1,0;for(_=1;_<E&&0===O[_];_++);for(A<_&&(A=_),I=1,w=1;w<=15;w++)if(I<<=1,I-=O[w],I<0)return-1;if(I>0&&(0===e||1!==E))return-1;for(N[1]=0,w=1;w<15;w++)N[w+1]=N[w]+O[w];for(v=0;v<a;v++)0!==i[s+v]&&(u[N[i[s+v]]++]=v);if(0===e?(M=L=u,b=20):1===e?(M=t,L=r,b=257):(M=n,L=o,b=0),k=0,v=0,w=_,m=l,S=A,x=0,g=-1,T=1<<A,y=T-1,1===e&&T>852||2===e&&T>592)return 1;for(;;){D=w-x,u[v]+1<b?(C=0,B=u[v]):u[v]>=b?(C=L[u[v]-b],B=M[u[v]-b]):(C=96,B=0),f=1<<w-x,p=1<<S,_=p;do{p-=f,c[m+(k>>x)+p]=D<<24|C<<16|B}while(0!==p);for(f=1<<w-1;k&f;)f>>=1;if(0!==f?(k&=f-1,k+=f):k=0,v++,0===--O[w]){if(w===E)break;w=i[s+u[v]]}if(w>A&&(k&y)!==g){for(0===x&&(x=A),m+=_,S=w-x,I=1<<S;S+x<E&&(I-=O[S+x],!(I<=0));)S++,I<<=1;if(T+=1<<S,1===e&&T>852||2===e&&T>592)return 1;g=k&y,c[g]=A<<24|S<<16|m-l}}return 0!==k&&(c[m+k]=w-x<<24|64<<16),d.bits=A,0}},4674:e=>{"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},3665:e=>{"use strict";function t(e){let t=e.length;for(;--t>=0;)e[t]=0}const r=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),n=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),o=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),i=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=new Array(576);t(s);const a=new Array(60);t(a);const c=new Array(512);t(c);const l=new Array(256);t(l);const u=new Array(29);t(u);const d=new Array(30);function h(e,t,r,n,o){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=o,this.has_stree=e&&e.length}let f,p,g;function y(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}t(d);const m=e=>e<256?c[e]:c[256+(e>>>7)],b=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},w=(e,t,r)=>{e.bi_valid>16-r?(e.bi_buf|=t<<e.bi_valid&65535,b(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=r-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},v=(e,t,r)=>{w(e,r[2*t],r[2*t+1])},_=(e,t)=>{let r=0;do{r|=1&e,e>>>=1,r<<=1}while(--t>0);return r>>>1},E=(e,t,r)=>{const n=new Array(16);let o,i,s=0;for(o=1;o<=15;o++)s=s+r[o-1]<<1,n[o]=s;for(i=0;i<=t;i++){let t=e[2*i+1];0!==t&&(e[2*i]=_(n[t]++,t))}},A=e=>{let t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},S=e=>{e.bi_valid>8?b(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},x=(e,t,r,n)=>{const o=2*t,i=2*r;return e[o]<e[i]||e[o]===e[i]&&n[t]<=n[r]},I=(e,t,r)=>{const n=e.heap[r];let o=r<<1;for(;o<=e.heap_len&&(o<e.heap_len&&x(t,e.heap[o+1],e.heap[o],e.depth)&&o++,!x(t,n,e.heap[o],e.depth));)e.heap[r]=e.heap[o],r=o,o<<=1;e.heap[r]=n},T=(e,t,o)=>{let i,s,a,c,h=0;if(0!==e.sym_next)do{i=255&e.pending_buf[e.sym_buf+h++],i+=(255&e.pending_buf[e.sym_buf+h++])<<8,s=e.pending_buf[e.sym_buf+h++],0===i?v(e,s,t):(a=l[s],v(e,a+256+1,t),c=r[a],0!==c&&(s-=u[a],w(e,s,c)),i--,a=m(i),v(e,a,o),c=n[a],0!==c&&(i-=d[a],w(e,i,c)))}while(h<e.sym_next);v(e,256,t)},k=(e,t)=>{const r=t.dyn_tree,n=t.stat_desc.static_tree,o=t.stat_desc.has_stree,i=t.stat_desc.elems;let s,a,c,l=-1;for(e.heap_len=0,e.heap_max=573,s=0;s<i;s++)0!==r[2*s]?(e.heap[++e.heap_len]=l=s,e.depth[s]=0):r[2*s+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=l<2?++l:0,r[2*c]=1,e.depth[c]=0,e.opt_len--,o&&(e.static_len-=n[2*c+1]);for(t.max_code=l,s=e.heap_len>>1;s>=1;s--)I(e,r,s);c=i;do{s=e.heap[1],e.heap[1]=e.heap[e.heap_len--],I(e,r,1),a=e.heap[1],e.heap[--e.heap_max]=s,e.heap[--e.heap_max]=a,r[2*c]=r[2*s]+r[2*a],e.depth[c]=(e.depth[s]>=e.depth[a]?e.depth[s]:e.depth[a])+1,r[2*s+1]=r[2*a+1]=c,e.heap[1]=c++,I(e,r,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const r=t.dyn_tree,n=t.max_code,o=t.stat_desc.static_tree,i=t.stat_desc.has_stree,s=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,c=t.stat_desc.max_length;let l,u,d,h,f,p,g=0;for(h=0;h<=15;h++)e.bl_count[h]=0;for(r[2*e.heap[e.heap_max]+1]=0,l=e.heap_max+1;l<573;l++)u=e.heap[l],h=r[2*r[2*u+1]+1]+1,h>c&&(h=c,g++),r[2*u+1]=h,u>n||(e.bl_count[h]++,f=0,u>=a&&(f=s[u-a]),p=r[2*u],e.opt_len+=p*(h+f),i&&(e.static_len+=p*(o[2*u+1]+f)));if(0!==g){do{for(h=c-1;0===e.bl_count[h];)h--;e.bl_count[h]--,e.bl_count[h+1]+=2,e.bl_count[c]--,g-=2}while(g>0);for(h=c;0!==h;h--)for(u=e.bl_count[h];0!==u;)d=e.heap[--l],d>n||(r[2*d+1]!==h&&(e.opt_len+=(h-r[2*d+1])*r[2*d],r[2*d+1]=h),u--)}})(e,t),E(r,l,e.bl_count)},M=(e,t,r)=>{let n,o,i=-1,s=t[1],a=0,c=7,l=4;for(0===s&&(c=138,l=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)o=s,s=t[2*(n+1)+1],++a<c&&o===s||(a<l?e.bl_tree[2*o]+=a:0!==o?(o!==i&&e.bl_tree[2*o]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,a=0,i=o,0===s?(c=138,l=3):o===s?(c=6,l=3):(c=7,l=4))},O=(e,t,r)=>{let n,o,i=-1,s=t[1],a=0,c=7,l=4;for(0===s&&(c=138,l=3),n=0;n<=r;n++)if(o=s,s=t[2*(n+1)+1],!(++a<c&&o===s)){if(a<l)do{v(e,o,e.bl_tree)}while(0!==--a);else 0!==o?(o!==i&&(v(e,o,e.bl_tree),a--),v(e,16,e.bl_tree),w(e,a-3,2)):a<=10?(v(e,17,e.bl_tree),w(e,a-3,3)):(v(e,18,e.bl_tree),w(e,a-11,7));a=0,i=o,0===s?(c=138,l=3):o===s?(c=6,l=3):(c=7,l=4)}};let N=!1;const D=(e,t,r,n)=>{w(e,0+(n?1:0),3),S(e),b(e,r),b(e,~r),r&&e.pending_buf.set(e.window.subarray(t,t+r),e.pending),e.pending+=r};e.exports._tr_init=e=>{N||((()=>{let e,t,i,y,m;const b=new Array(16);for(i=0,y=0;y<28;y++)for(u[y]=i,e=0;e<1<<r[y];e++)l[i++]=y;for(l[i-1]=y,m=0,y=0;y<16;y++)for(d[y]=m,e=0;e<1<<n[y];e++)c[m++]=y;for(m>>=7;y<30;y++)for(d[y]=m<<7,e=0;e<1<<n[y]-7;e++)c[256+m++]=y;for(t=0;t<=15;t++)b[t]=0;for(e=0;e<=143;)s[2*e+1]=8,e++,b[8]++;for(;e<=255;)s[2*e+1]=9,e++,b[9]++;for(;e<=279;)s[2*e+1]=7,e++,b[7]++;for(;e<=287;)s[2*e+1]=8,e++,b[8]++;for(E(s,287,b),e=0;e<30;e++)a[2*e+1]=5,a[2*e]=_(e,5);f=new h(s,r,257,286,15),p=new h(a,n,0,30,15),g=new h(new Array(0),o,0,19,7)})(),N=!0),e.l_desc=new y(e.dyn_ltree,f),e.d_desc=new y(e.dyn_dtree,p),e.bl_desc=new y(e.bl_tree,g),e.bi_buf=0,e.bi_valid=0,A(e)},e.exports._tr_stored_block=D,e.exports._tr_flush_block=(e,t,r,n)=>{let o,c,l=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),k(e,e.l_desc),k(e,e.d_desc),l=(e=>{let t;for(M(e,e.dyn_ltree,e.l_desc.max_code),M(e,e.dyn_dtree,e.d_desc.max_code),k(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*i[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),o=e.opt_len+3+7>>>3,c=e.static_len+3+7>>>3,c<=o&&(o=c)):o=c=r+5,r+4<=o&&-1!==t?D(e,t,r,n):4===e.strategy||c===o?(w(e,2+(n?1:0),3),T(e,s,a)):(w(e,4+(n?1:0),3),((e,t,r,n)=>{let o;for(w(e,t-257,5),w(e,r-1,5),w(e,n-4,4),o=0;o<n;o++)w(e,e.bl_tree[2*i[o]+1],3);O(e,e.dyn_ltree,t-1),O(e,e.dyn_dtree,r-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,l+1),T(e,e.dyn_ltree,e.dyn_dtree)),A(e),n&&S(e)},e.exports._tr_tally=(e,t,r)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=r,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(l[r]+256+1)]++,e.dyn_dtree[2*m(t)]++),e.sym_next===e.sym_end),e.exports._tr_align=e=>{w(e,2,3),v(e,256,s),(e=>{16===e.bi_valid?(b(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}},4442:e=>{"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},5606:e=>{var t,r,n=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{r="function"==typeof clearTimeout?clearTimeout:i}catch(e){r=i}}();var a,c=[],l=!1,u=-1;function d(){l&&a&&(l=!1,a.length?c=a.concat(c):u=-1,c.length&&h())}function h(){if(!l){var e=s(d);l=!0;for(var t=c.length;t;){for(a=c,c=[];++u<t;)a&&a[u].run();u=-1,t=c.length}a=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{return r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function p(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new f(e,t)),1!==c.length||l||s(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},9226:(e,t,r)=>{"use strict";var n,o=r(8287).hp,i=Object.create,s=Object.defineProperty,a=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,l=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty,d=(e,t)=>{for(var r in t)s(e,r,{get:t[r],enumerable:!0})},h=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let o of c(t))u.call(e,o)||o===r||s(e,o,{get:()=>t[o],enumerable:!(n=a(t,o))||n.enumerable});return e},f=(e,t,r)=>(r=null!=e?i(l(e)):{},h(!t&&e&&e.__esModule?r:s(r,"default",{value:e,enumerable:!0}),e)),p={};d(p,{Account:()=>ya,AccountInterface:()=>ma,BatchClient:()=>Ge,BlockStatus:()=>_e,BlockTag:()=>Ee,CairoCustomEnum:()=>Ur,CairoFixedArray:()=>Xr,CairoOption:()=>zr,CairoOptionVariant:()=>Fr,CairoResult:()=>Hr,CairoResultVariant:()=>Vr,CairoUint256:()=>sr,CairoUint512:()=>ur,CallData:()=>pn,Contract:()=>ja,ContractFactory:()=>Ua,ContractInterface:()=>Ra,EDAMode:()=>ke,EDataAvailabilityMode:()=>Te,ETH_ADDRESS:()=>Pe,ETransactionExecutionStatus:()=>De,ETransactionStatus:()=>Ne,ETransactionVersion:()=>Se,ETransactionVersion2:()=>xe,ETransactionVersion3:()=>Ie,EntryPointType:()=>me,EthSigner:()=>Ns,LedgerSigner:()=>Ds,LedgerSigner111:()=>Ds,LedgerSigner221:()=>Us,LedgerSigner231:()=>zs,LibraryError:()=>$o,Literal:()=>Le,LogLevelIndex:()=>fe,NON_ZERO_PREFIX:()=>je,OutsideExecutionTypesV1:()=>Re,OutsideExecutionTypesV2:()=>Ue,OutsideExecutionVersion:()=>Fe,PaymasterInterface:()=>pa,PaymasterRpc:()=>fa,Provider:()=>_s,ProviderInterface:()=>Es,RPC:()=>y,RPC07:()=>ge,RPC08:()=>mi,RPCResponseParser:()=>Si,ReceiptTx:()=>xi,ResponseParser:()=>Fa,RpcChannel:()=>wi,RpcError:()=>Wo,RpcProvider:()=>_s,Signer:()=>xs,SignerInterface:()=>Ss,Subscription:()=>Ei,TimeoutError:()=>Ko,TransactionExecutionStatus:()=>ve,TransactionFinalityStatus:()=>we,TransactionType:()=>be,TypedDataRevision:()=>ze.TypedDataRevision,UINT_128_MAX:()=>Jt,UINT_128_MIN:()=>lr,UINT_256_HIGH_MAX:()=>nr,UINT_256_HIGH_MIN:()=>ir,UINT_256_LOW_MAX:()=>rr,UINT_256_LOW_MIN:()=>or,UINT_256_MAX:()=>er,UINT_256_MIN:()=>tr,UINT_512_MAX:()=>ar,UINT_512_MIN:()=>cr,Uint:()=>Be,ValidateType:()=>Ce,WalletAccount:()=>Da,WebSocketChannel:()=>Ai,WebSocketNotConnectedError:()=>qo,addAddressPadding:()=>Ls,byteArray:()=>Gt,cairo:()=>Zt,config:()=>he,constants:()=>g,contractClassResponseToLegacyCompiledContract:()=>zo,defaultPaymaster:()=>ga,defaultProvider:()=>As,ec:()=>bn,encode:()=>_,eth:()=>Go,events:()=>Vs,extractContractHashes:()=>Fo,getCalldata:()=>Pa,getChecksumAddress:()=>js,getLedgerPathBuffer:()=>Cs,getLedgerPathBuffer111:()=>Cs,getLedgerPathBuffer221:()=>Fs,hash:()=>gn,isPendingBlock:()=>_o,isPendingStateUpdate:()=>Ao,isPendingTransaction:()=>Eo,isRPC08_FeeEstimate:()=>Me,isRPC08_ResourceBounds:()=>Oe,isSierra:()=>Uo,isSupportedSpecVersion:()=>bo,isV3Tx:()=>yo,isVersion:()=>mo,json:()=>Ve,logger:()=>pe,merkle:()=>Ti,num:()=>Ze,outsideExecution:()=>Ys,parseCalldataField:()=>tn,paymaster:()=>ia,provider:()=>Jo,selector:()=>Tt,shortString:()=>Rt,src5:()=>na,stark:()=>fo,starknetId:()=>Gi,toAnyPatchVersion:()=>wo,toApiVersion:()=>vo,transaction:()=>ci,typedData:()=>Ii,types:()=>ye,uint256:()=>Ts,units:()=>za,v2hash:()=>mn,v3hash:()=>Tn,validateAndParseAddress:()=>Ps,validateChecksumAddress:()=>Rs,wallet:()=>ba}),e.exports=(n=p,h(s({},"__esModule",{value:!0}),n));var g={};d(g,{ADDR_BOUND:()=>K,API_VERSION:()=>H,BaseUrl:()=>ne,DEFAULT_GLOBAL_CONFIG:()=>ce,HARDENING_4BYTES:()=>re,HARDENING_BYTE:()=>te,IS_BROWSER:()=>A,MASK_250:()=>z,MASK_31:()=>V,MAX_STORAGE_ITEM_SIZE:()=>W,NetworkName:()=>oe,OutsideExecutionCallerAny:()=>X,PAYMASTER_RPC_NODES:()=>ue,PRIME:()=>$,RANGE_FELT:()=>G,RANGE_I128:()=>Y,RANGE_U128:()=>Q,RPC_DEFAULT_NODES:()=>le,SNIP9_V1_INTERFACE_ID:()=>J,SNIP9_V2_INTERFACE_ID:()=>ee,SYSTEM_MESSAGES:()=>de,StarknetChainId:()=>ie,SupportedRpcVersion:()=>ae,TEXT_TO_FELT_MAX_LEN:()=>R,TRANSACTION_VERSION:()=>U,TransactionHashPrefix:()=>se,UDC:()=>Z,ZERO:()=>F});var y={};d(y,{JRPC:()=>m,PAYMASTER_API:()=>v.PAYMASTER_API,RPCSPEC07:()=>b,RPCSPEC08:()=>w});var m={},b=f(r(4768)),w=f(r(5319)),v=r(5319);((e,t)=>{h(e,t,"default")})(y,r(5319));var _={};d(_,{IS_BROWSER:()=>A,addHexPrefix:()=>N,arrayBufferToString:()=>x,atobUniversal:()=>T,btoaUniversal:()=>k,buf2hex:()=>M,calcByteLength:()=>C,concatenateArrayBuffer:()=>j,padLeft:()=>D,pascalToSnake:()=>P,removeHexPrefix:()=>O,sanitizeBytes:()=>B,sanitizeHex:()=>L,utf8ToArray:()=>I});var E=r(3203),A="undefined"!=typeof window,S="0";function x(e){return new Uint8Array(e).reduce((e,t)=>e+String.fromCharCode(t),"")}function I(e){return(new TextEncoder).encode(e)}function T(e){return E.base64.decode(e)}function k(e){return E.base64.encode(new Uint8Array(e))}function M(e){return e.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),"")}function O(e){return e.replace(/^0x/i,"")}function N(e){return`0x${O(e)}`}function D(e,t,r=S){return function(e,t,r,n=S){const o=t-e.length;let i=e;if(o>0){const t=n.repeat(o);i=r?t+e:e+t}return i}(e,t,!0,r)}function C(e,t=8){const{length:r}=e,n=r%t;return n?(r-n)/t*t+t:r}function B(e,t=8,r=S){return D(e,C(e,t),r)}function L(e){const t=B(O(e),2);return t?N(t):t}var P=e=>/[a-z]/.test(e)?e.split(/(?=[A-Z])/).join("_").toUpperCase():e;function j(e){const t=e.reduce((e,t)=>e+t.byteLength,0),r=new Uint8Array(t);let n=0;return e.forEach(e=>{r.set(e,n),n+=e.byteLength}),r}var R=31,{ETransactionVersion:U}=w,F=0n,z=2n**250n-1n,V=2n**31n-1n,H=F,$=2n**251n+17n*2n**192n+1n,W=256n,K=2n**251n-W,q=(e,t)=>({min:e,max:t}),G=q(F,$-1n),Y=q(-(2n**127n),2n**127n-1n),Q=q(F,2n**128n-1n),Z={ADDRESS:"0x041a78e741e5af2fec34b695679bc6891742439f7afb8484ecd7766661ad02bf",ENTRYPOINT:"deployContract"},X="0x414e595f43414c4c4552",J="0x68cfd18b92d1907b8ba3cc324900277f5a3622099431ea85dd8089255e4181",ee="0x1d1144bb2138366ff28d8e9ab57456b1d332ac42196230c3a602003c89872",te=128,re=2147483648n,ne={SN_MAIN:"https://alpha-mainnet.starknet.io",SN_SEPOLIA:"https://alpha-sepolia.starknet.io"},oe={SN_MAIN:"SN_MAIN",SN_SEPOLIA:"SN_SEPOLIA"},ie={SN_MAIN:"0x534e5f4d41494e",SN_SEPOLIA:"0x534e5f5345504f4c4941"},se={DECLARE:"0x6465636c617265",DEPLOY:"0x6465706c6f79",DEPLOY_ACCOUNT:"0x6465706c6f795f6163636f756e74",INVOKE:"0x696e766f6b65",L1_HANDLER:"0x6c315f68616e646c6572"},ae={"0.7.1":"0.7.1","0.8.1":"0.8.1",v0_7_1:"0.7.1",v0_8_1:"0.8.1"},ce={legacyMode:!1,rpcVersion:"0.8.1",transactionVersion:y.ETransactionVersion.V3,logLevel:"INFO",feeMarginPercentage:{bounds:{l1_gas:{max_amount:50,max_price_per_unit:50},l1_data_gas:{max_amount:50,max_price_per_unit:50},l2_gas:{max_amount:50,max_price_per_unit:50}},maxFee:50},fetch:void 0,websocket:void 0},le={SN_MAIN:["https://starknet-mainnet.public.blastapi.io/rpc/"],SN_SEPOLIA:["https://starknet-sepolia.public.blastapi.io/rpc/"]},ue={SN_MAIN:["https://starknet.paymaster.avnu.fi"],SN_SEPOLIA:["https://sepolia.paymaster.avnu.fi"]},de={legacyTxWarningMessage:"You are using a deprecated transaction version (V0,V1,V2)!\nUpdate to the latest V3 transactions!",legacyTxRPC08Message:"RPC 0.8 do not support legacy transactions",SWOldV3:"RPC 0.7 V3 tx (improper resource bounds) not supported in RPC 0.8",channelVersionMismatch:"Channel specification version is not compatible with the connected node Specification Version",unsupportedSpecVersion:"The connected node specification version is not supported by this library",maxFeeInV3:"maxFee is not supported in V3 transactions, use resourceBounds instead"},he=class e{static instance;config;constructor(){this.initialize()}initialize(){this.config={...ce}}static getInstance(){return e.instance||(e.instance=new e),e.instance}get(e,t){return this.config[e]??t}set(e,t){this.config[e]=t}update(e){this.config={...this.config,...e}}getAll(){return{...this.config}}reset(){this.initialize()}delete(e){delete this.config[e]}hasKey(e){return e in this.config}}.getInstance(),fe={DEBUG:5,INFO:4,WARN:3,ERROR:2,FATAL:1,OFF:0},pe=class e{static instance;config;constructor(){this.config=he}static getInstance(){return e.instance||(e.instance=new e),e.instance}getTimestamp(){return(new Date).toISOString()}shouldLog(e){const t=this.config.get("logLevel","INFO");return e<=fe[t]}formatMessage(e){const{level:t,message:r,timestamp:n,data:o}=e;let i=`[${n}] ${t}: ${r}`;if(o)try{i+=`\n${JSON.stringify(o,null,2)}`}catch(e){i+=`\n[JSON.stringify Error/Circular]: ${e}`}return i}log(e,t,r){if(!this.shouldLog(fe[e]))return;const n={level:e,message:t,timestamp:this.getTimestamp(),data:r},o=this.formatMessage(n);switch(e){case"DEBUG":console.debug(o);break;case"INFO":console.info(o);break;case"WARN":console.warn(o);break;case"ERROR":case"FATAL":console.error(o);break;case"OFF":break;default:console.log(o)}}debug(e,t){this.log("DEBUG",e,t)}info(e,t){this.log("INFO",e,t)}warn(e,t){this.log("WARN",e,t)}error(e,t){this.log("ERROR",e,t)}fatal(e,t){this.log("FATAL",e,t)}setLogLevel(e){this.config.set("logLevel",e)}getLogLevel(){return this.config.get("logLevel","INFO")}getEnabledLogLevels(){return Object.keys(fe).filter(e=>this.shouldLog(fe[e])&&"OFF"!==e)}}.getInstance(),ge={};d(ge,{RpcChannel:()=>yi});var ye={};d(ye,{BlockStatus:()=>_e,BlockTag:()=>Ee,EDAMode:()=>ke,EDataAvailabilityMode:()=>Te,ETH_ADDRESS:()=>Pe,ETransactionExecutionStatus:()=>De,ETransactionStatus:()=>Ne,ETransactionVersion:()=>Se,ETransactionVersion2:()=>xe,ETransactionVersion3:()=>Ie,EntryPointType:()=>me,Literal:()=>Le,NON_ZERO_PREFIX:()=>je,OutsideExecutionTypesV1:()=>Re,OutsideExecutionTypesV2:()=>Ue,OutsideExecutionVersion:()=>Fe,RPC:()=>y,TransactionExecutionStatus:()=>ve,TransactionFinalityStatus:()=>we,TransactionType:()=>be,TypedDataRevision:()=>ze.TypedDataRevision,Uint:()=>Be,ValidateType:()=>Ce,isRPC08_FeeEstimate:()=>Me,isRPC08_ResourceBounds:()=>Oe});var me={EXTERNAL:"EXTERNAL",L1_HANDLER:"L1_HANDLER",CONSTRUCTOR:"CONSTRUCTOR"},be={DECLARE:"DECLARE",DEPLOY:"DEPLOY",DEPLOY_ACCOUNT:"DEPLOY_ACCOUNT",INVOKE:"INVOKE_FUNCTION"},we={NOT_RECEIVED:"NOT_RECEIVED",RECEIVED:"RECEIVED",ACCEPTED_ON_L2:"ACCEPTED_ON_L2",ACCEPTED_ON_L1:"ACCEPTED_ON_L1"},ve={REJECTED:"REJECTED",REVERTED:"REVERTED",SUCCEEDED:"SUCCEEDED"},_e={PENDING:"PENDING",ACCEPTED_ON_L1:"ACCEPTED_ON_L1",ACCEPTED_ON_L2:"ACCEPTED_ON_L2",REJECTED:"REJECTED"},Ee={PENDING:"pending",LATEST:"latest"},Ae=f(r(5319)),{ETransactionVersion:Se}=Ae,{ETransactionVersion2:xe}=Ae,{ETransactionVersion3:Ie}=Ae,{EDataAvailabilityMode:Te}=Ae,{EDAMode:ke}=Ae;function Me(e){return"l1_data_gas_consumed"in e}function Oe(e){return"l1_data_gas"in e}var{ETransactionStatus:Ne}=Ae,{ETransactionExecutionStatus:De}=Ae,Ce={DEPLOY:"DEPLOY",CALL:"CALL",INVOKE:"INVOKE"},Be={u8:"core::integer::u8",u16:"core::integer::u16",u32:"core::integer::u32",u64:"core::integer::u64",u128:"core::integer::u128",u256:"core::integer::u256",u512:"core::integer::u512"},Le={ClassHash:"core::starknet::class_hash::ClassHash",ContractAddress:"core::starknet::contract_address::ContractAddress",Secp256k1Point:"core::starknet::secp256k1::Secp256k1Point",U96:"core::internal::bounded_int::BoundedInt::<0, 79228162514264337593543950335>"},Pe="core::starknet::eth_address::EthAddress",je="core::zeroable::NonZero::",Re={StarkNetDomain:[{name:"name",type:"felt"},{name:"version",type:"felt"},{name:"chainId",type:"felt"}],OutsideExecution:[{name:"caller",type:"felt"},{name:"nonce",type:"felt"},{name:"execute_after",type:"felt"},{name:"execute_before",type:"felt"},{name:"calls_len",type:"felt"},{name:"calls",type:"OutsideCall*"}],OutsideCall:[{name:"to",type:"felt"},{name:"selector",type:"felt"},{name:"calldata_len",type:"felt"},{name:"calldata",type:"felt*"}]},Ue={StarknetDomain:[{name:"name",type:"shortstring"},{name:"version",type:"shortstring"},{name:"chainId",type:"shortstring"},{name:"revision",type:"shortstring"}],OutsideExecution:[{name:"Caller",type:"ContractAddress"},{name:"Nonce",type:"felt"},{name:"Execute After",type:"u128"},{name:"Execute Before",type:"u128"},{name:"Calls",type:"Call*"}],Call:[{name:"To",type:"ContractAddress"},{name:"Selector",type:"selector"},{name:"Calldata",type:"felt*"}]},Fe={UNSUPPORTED:"0",V1:"1",V2:"2"},ze=r(4768),Ve={};d(Ve,{parse:()=>We,parseAlwaysAsBig:()=>Ke,stringify:()=>qe});var He=f(r(7631)),$e=e=>{if(!He.isInteger(e))return parseFloat(e);const t=parseInt(e,10);return Number.isSafeInteger(t)?t:BigInt(e)},We=e=>He.parse(String(e),void 0,$e),Ke=e=>He.parse(String(e),void 0,He.parseNumberAndBigInt),qe=(e,t,r,n)=>He.stringify(e,t,r,n),Ge=class{nodeUrl;headers;interval;requestId=0;pendingRequests={};batchPromises={};delayTimer;delayPromise;delayPromiseResolve;baseFetch;constructor(e){this.nodeUrl=e.nodeUrl,this.headers=e.headers,this.interval=e.interval,this.baseFetch=e.baseFetch}async wait(){return this.delayPromise&&this.delayPromiseResolve||(this.delayPromise=new Promise(e=>{this.delayPromiseResolve=e})),this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=void 0),this.delayTimer=setTimeout(()=>{this.delayPromiseResolve&&(this.delayPromiseResolve(),this.delayPromise=void 0,this.delayPromiseResolve=void 0)},this.interval),this.delayPromise}addPendingRequest(e,t,r){const n={id:r??`batched_${this.requestId+=1}`,jsonrpc:"2.0",method:e,params:t??void 0};return this.pendingRequests[n.id]=n,n.id}async sendBatch(e){return(await this.baseFetch(this.nodeUrl,{method:"POST",body:qe(e),headers:this.headers})).json()}async fetch(e,t,r){const n=this.addPendingRequest(e,t,r);await this.wait();const o=this.pendingRequests;if(this.pendingRequests={},!this.batchPromises[n]){const e=this.sendBatch(Object.values(o));Object.keys(o).forEach(t=>{this.batchPromises[t]=e})}const i=await this.batchPromises[n];delete this.batchPromises[n];const s=i.find(e=>e.id===n);if(!s)throw new Error(`Couldn't find the result for the request. Method: ${e}`);return s}};function Ye(e,t){if(!e)throw new Error(t||"Assertion failure")}function Qe(e,t){if(!e){if(0!==t.length)throw new Error("AssertionX failure: message function should not require arguments");t()}}var Ze={};d(Ze,{addPercent:()=>St,assertInRange:()=>gt,bigNumberishArrayToDecimalStringArray:()=>yt,bigNumberishArrayToHexadecimalStringArray:()=>mt,cleanHex:()=>pt,getDecimalString:()=>wt,getHexString:()=>vt,getHexStringArray:()=>_t,hexToBytes:()=>At,hexToDecimalString:()=>ft,isBigNumberish:()=>It,isHex:()=>st,isStringWholeNumber:()=>bt,stringToSha256ToArrayBuff4:()=>xt,toBigInt:()=>at,toCairoBool:()=>Et,toHex:()=>lt,toHex64:()=>ht,toHexString:()=>ut,toStorageKey:()=>dt,tryToBigInt:()=>ct});var Xe=r(1484),Je=r(2623),et=e=>void 0===e||void 0===e;function tt(e){return"number"==typeof e}function rt(e){return"boolean"==typeof e}function nt(e){return"bigint"==typeof e}function ot(e){return"string"==typeof e}function it(e){return!!e&&"object"==typeof e&&!Array.isArray(e)}function st(e){return/^0x[0-9a-f]*$/i.test(e)}function at(e){return BigInt(e)}function ct(e){return e?BigInt(e):void 0}function lt(e){return N(at(e).toString(16))}var ut=lt;function dt(e){return N(at(e).toString(16).padStart(64,"0"))}function ht(e){const t=N(at(e).toString(16).padStart(64,"0"));if(66!==t.length)throw TypeError("number is too big for hex 0x(64) representation");return t}function ft(e){return BigInt(N(e)).toString(10)}function pt(e){return e.toLowerCase().replace(/^(0x)0+/,"$1")}function gt(e,t,r,n=""){const o=""===n?"invalid length":`invalid ${n} length`,i=BigInt(e),s=BigInt(t),a=BigInt(r);Ye(i>=s&&i<=a,`Message not signable, ${o}.`)}function yt(e){return e.map(e=>at(e).toString(10))}function mt(e){return e.map(e=>lt(e))}function bt(e){return/^\d+$/.test(e)}function wt(e){if(st(e))return ft(e);if(bt(e))return e;throw new Error(`${e} needs to be a hex-string or whole-number-string`)}function vt(e){if(st(e))return e;if(bt(e))return ut(e);throw new Error(`${e} needs to be a hex-string or whole-number-string`)}function _t(e){return e.map(vt)}function Et(e){return(+e).toString()}function At(e){if(!st(e))throw new Error(`${e} needs to be a hex-string`);let t=O(e);return t.length%2!=0&&(t=`0${t}`),(0,Xe.hexToBytes)(t)}function St(e,t){const r=BigInt(e);return r+r*BigInt(t)/100n}function xt(e){var t;return At(lt((t=BigInt(N(M((0,Je.sha256)(e)))),Number(t&V))))}function It(e){return tt(e)||nt(e)||ot(e)&&(st(e)||bt(e))}var Tt={};d(Tt,{getL1MessageHash:()=>jt,getL2MessageHash:()=>Pt,getSelector:()=>Bt,getSelectorFromName:()=>Ct,keccakBn:()=>Nt,solidityUint256PackedKeccak256:()=>Lt,starknetKeccak:()=>Dt});var kt=r(4246),Mt=r(2955),Ot=r(1484);function Nt(e){const t=O(lt(BigInt(e))),r=t.length%2==0?t:`0${t}`;return N((0,kt.keccak)(At(N(r))).toString(16))}function Dt(e){const t=BigInt(function(e){return N((0,kt.keccak)(I(e)).toString(16))}(e));return t&z}function Ct(e){return lt(Dt(e))}function Bt(e){return tt(e)||nt(e)?lt(e):st(e)?e:bt(e)?lt(e):Ct(e)}function Lt(e){const t=N(e.reduce((e,t)=>e+O(lt(t)).padStart(64,"0"),""));return N((0,Ot.bytesToHex)((0,Mt.keccak_256)(At(t))))}function Pt(e,t,r,n,o){return Lt([e,t,o,r,n.length,...n])}function jt(e,t,r){return Lt([e,t,r.length,...r])}var Rt={};function Ut(e){return/^[\x00-\x7F]*$/.test(e)}function Ft(e){return e.length<=R}function zt(e){return/^[0-9]*$/i.test(e)}function Vt(e){return ot(e)&&!st(e)&&!bt(e)}d(Rt,{decodeShortString:()=>qt,encodeShortString:()=>Kt,isASCII:()=>Ut,isDecimalString:()=>zt,isLongText:()=>$t,isShortString:()=>Ft,isShortText:()=>Ht,isText:()=>Vt,splitLongString:()=>Wt});var Ht=e=>Vt(e)&&Ft(e),$t=e=>Vt(e)&&!Ft(e);function Wt(e){const t=RegExp(`[^]{1,${R}}`,"g");return e.match(t)||[]}function Kt(e){if(!Ut(e))throw new Error(`${e} is not an ASCII string`);if(!Ft(e))throw new Error(`${e} is too long`);return N(e.replace(/./g,e=>e.charCodeAt(0).toString(16)))}function qt(e){if(!Ut(e))throw new Error(`${e} is not an ASCII string`);if(st(e))return O(e).replace(/.{2}/g,e=>String.fromCharCode(parseInt(e,16)));if(zt(e))return qt("0X".concat(BigInt(e).toString(16)));throw new Error(`${e} is not Hex or decimal`)}var Gt={};function Yt(e){const t=0n===BigInt(e.pending_word)?"":qt(lt(e.pending_word));return e.data.reduce((e,t)=>e+(0n===BigInt(t)?"":qt(lt(t))),"")+t}function Qt(e){const t=Wt(e),r=t[t.length-1],n=t.map(Kt),[o,i]=void 0===r||31===r.length?["0x00",0]:[n.pop(),r.length];return{data:0===n.length?[]:n,pending_word:o,pending_word_len:i}}d(Gt,{byteArrayFromString:()=>Qt,stringFromByteArray:()=>Yt});var Zt={};function Xt(e){if(nt(e)||Number.isInteger(e))return e.toString();if(ot(e)){if(st(e))return BigInt(e).toString();if(Vt(e)){if(!Ft(e))throw new Error(`${e} is a long string > 31 chars. Please split it into an array of short strings.`);return BigInt(Kt(e)).toString()}if(bt(e))return e}if(rt(e))return""+ +e;throw new Error(`${e} can't be computed by felt()`)}d(Zt,{felt:()=>Rr,getAbiContractVersion:()=>Br,getArrayType:()=>Nr,isCairo1Abi:()=>Dr,isCairo1Type:()=>Or,isLen:()=>dr,isTypeArray:()=>fr,isTypeBool:()=>Ar,isTypeByteArray:()=>Tr,isTypeBytes31:()=>Ir,isTypeContractAddress:()=>Sr,isTypeEnum:()=>mr,isTypeEthAddress:()=>xr,isTypeFelt:()=>hr,isTypeLiteral:()=>Er,isTypeNamedTuple:()=>gr,isTypeNonZero:()=>Cr,isTypeOption:()=>br,isTypeResult:()=>wr,isTypeSecp256k1Point:()=>Mr,isTypeStruct:()=>yr,isTypeTuple:()=>pr,isTypeU96:()=>kr,isTypeUint:()=>vr,isTypeUint256:()=>_r,tuple:()=>jr,uint256:()=>Lr,uint512:()=>Pr});var Jt=(1n<<128n)-1n,er=(1n<<256n)-1n,tr=0n,rr=340282366920938463463374607431768211455n,nr=340282366920938463463374607431768211455n,or=0n,ir=0n,sr=class e{low;high;static abiSelector="core::integer::u256";constructor(...t){if("object"==typeof t[0]&&1===t.length&&"low"in t[0]&&"high"in t[0]){const r=e.validateProps(t[0].low,t[0].high);this.low=r.low,this.high=r.high}else if(1===t.length){const r=e.validate(t[0]);this.low=r&Jt,this.high=r>>128n}else{if(2!==t.length)throw Error("Incorrect constructor parameters");{const r=e.validateProps(t[0],t[1]);this.low=r.low,this.high=r.high}}}static validate(e){const t=BigInt(e);if(t<tr)throw Error("bigNumberish is smaller than UINT_256_MIN");if(t>er)throw new Error("bigNumberish is bigger than UINT_256_MAX");return t}static validateProps(e,t){const r=BigInt(e),n=BigInt(t);if(r<or||r>rr)throw new Error("low is out of range UINT_256_LOW_MIN - UINT_256_LOW_MAX");if(n<ir||n>nr)throw new Error("high is out of range UINT_256_HIGH_MIN - UINT_256_HIGH_MAX");return{low:r,high:n}}static is(t){try{e.validate(t)}catch(e){return!1}return!0}static isAbiType(t){return t===e.abiSelector}toBigInt(){return(this.high<<128n)+this.low}toUint256HexString(){return{low:N(this.low.toString(16)),high:N(this.high.toString(16))}}toUint256DecimalString(){return{low:this.low.toString(10),high:this.high.toString(10)}}toApiRequest(){return[Xt(this.low),Xt(this.high)]}},ar=(1n<<512n)-1n,cr=0n,lr=0n,ur=class e{limb0;limb1;limb2;limb3;static abiSelector="core::integer::u512";constructor(...t){if("object"==typeof t[0]&&1===t.length&&"limb0"in t[0]&&"limb1"in t[0]&&"limb2"in t[0]&&"limb3"in t[0]){const r=e.validateProps(t[0].limb0,t[0].limb1,t[0].limb2,t[0].limb3);this.limb0=r.limb0,this.limb1=r.limb1,this.limb2=r.limb2,this.limb3=r.limb3}else if(1===t.length){const r=e.validate(t[0]);this.limb0=r&Jt,this.limb1=(r&Jt<<128n)>>128n,this.limb2=(r&Jt<<256n)>>256n,this.limb3=r>>384n}else{if(4!==t.length)throw Error("Incorrect Uint512 constructor parameters");{const r=e.validateProps(t[0],t[1],t[2],t[3]);this.limb0=r.limb0,this.limb1=r.limb1,this.limb2=r.limb2,this.limb3=r.limb3}}}static validate(e){const t=BigInt(e);if(t<cr)throw Error("bigNumberish is smaller than UINT_512_MIN.");if(t>ar)throw Error("bigNumberish is bigger than UINT_512_MAX.");return t}static validateProps(e,t,r,n){const o=BigInt(e),i=BigInt(t),s=BigInt(r),a=BigInt(n);return[o,i,s,a].forEach((e,t)=>{if(e<lr||e>Jt)throw Error(`limb${t} is not in the range of a u128 number`)}),{limb0:o,limb1:i,limb2:s,limb3:a}}static is(t){try{e.validate(t)}catch(e){return!1}return!0}static isAbiType(t){return t===e.abiSelector}toBigInt(){return(this.limb3<<384n)+(this.limb2<<256n)+(this.limb1<<128n)+this.limb0}toUint512HexString(){return{limb0:N(this.limb0.toString(16)),limb1:N(this.limb1.toString(16)),limb2:N(this.limb2.toString(16)),limb3:N(this.limb3.toString(16))}}toUint512DecimalString(){return{limb0:this.limb0.toString(10),limb1:this.limb1.toString(10),limb2:this.limb2.toString(10),limb3:this.limb3.toString(10)}}toApiRequest(){return[Xt(this.limb0),Xt(this.limb1),Xt(this.limb2),Xt(this.limb3)]}},dr=e=>/_len$/.test(e),hr=e=>"felt"===e||"core::felt252"===e,fr=e=>/\*/.test(e)||e.startsWith("core::array::Array::")||e.startsWith("core::array::Span::"),pr=e=>/^\(.*\)$/i.test(e),gr=e=>/\(.*\)/i.test(e)&&e.includes(":"),yr=(e,t)=>e in t,mr=(e,t)=>e in t,br=e=>e.startsWith("core::option::Option::"),wr=e=>e.startsWith("core::result::Result::"),vr=e=>Object.values(Be).includes(e),_r=e=>sr.isAbiType(e),Er=e=>Object.values(Le).includes(e),Ar=e=>"core::bool"===e,Sr=e=>e===Le.ContractAddress,xr=e=>e===Pe,Ir=e=>"core::bytes_31::bytes31"===e,Tr=e=>"core::byte_array::ByteArray"===e,kr=e=>"core::internal::bounded_int::BoundedInt::<0, 79228162514264337593543950335>"===e,Mr=e=>e===Le.Secp256k1Point,Or=e=>e.includes("::"),Nr=e=>Or(e)?e.substring(e.indexOf("<")+1,e.lastIndexOf(">")):e.replace("*","");function Dr(e){const{cairo:t}=Br(e);if(void 0===t)throw Error("Unable to determine Cairo version");return"1"===t}function Cr(e){return e.startsWith(je)}function Br(e){if(e.find(e=>"interface"===e.type))return{cairo:"1",compiler:"2"};const t=e.find(e=>("function"===e.type||"constructor"===e.type)&&(e.inputs.length||e.outputs.length));if(!t)return{cairo:void 0,compiler:void 0};const r=t.inputs.length?t.inputs:t.outputs;return Or(r[0].type)?{cairo:"1",compiler:"1"}:{cairo:"0",compiler:"0"}}var Lr=e=>new sr(e).toUint256DecimalString(),Pr=e=>new ur(e).toUint512DecimalString(),jr=(...e)=>({...e});function Rr(e){return Xt(e)}var Ur=class{variant;constructor(e){const t=Object.values(e);if(0===t.length)throw new Error("This Enum must have at least 1 variant");if(1!==t.filter(e=>!et(e)).length)throw new Error("This Enum must have exactly one active variant");this.variant=e}unwrap(){return Object.values(this.variant).find(e=>!et(e))}activeVariant(){const e=Object.entries(this.variant).find(e=>!et(e[1]));return et(e)?"":e[0]}},Fr={Some:0,None:1},zr=class{Some;None;constructor(e,t){if(!(e in Object.values(Fr)))throw new Error("Wrong variant! It should be CairoOptionVariant.Some or .None.");if(e===Fr.Some){if(et(t))throw new Error('The creation of a Cairo Option with "Some" variant needs a content as input.');this.Some=t,this.None=void 0}else this.Some=void 0,this.None=!0}unwrap(){return this.None?void 0:this.Some}isSome(){return!et(this.Some)}isNone(){return!0===this.None}},Vr={Ok:0,Err:1},Hr=class{Ok;Err;constructor(e,t){if(!(e in Object.values(Vr)))throw new Error("Wrong variant! It should be CairoResultVariant.Ok or .Err.");e===Vr.Ok?(this.Ok=t,this.Err=void 0):(this.Ok=void 0,this.Err=t)}unwrap(){if(!et(this.Ok))return this.Ok;if(!et(this.Err))return this.Err;throw new Error("Both Result.Ok and .Err are undefined. Not authorized.")}isOk(){return!et(this.Ok)}isErr(){return!et(this.Err)}},$r=(e,t,r)=>{if(!nt(e[r]))throw new Error(`Data and formatter mismatch on ${r}:${t[r]}, expected response data ${r}:${e[r]} to be BN instead it is ${typeof e[r]}`)};function Wr(e,t,r){return Object.entries(e).reduce((n,[o,i])=>{const s=r??t[o];if(!(o in t)&&!r)return n[o]=i,n;if("string"===s){if(Array.isArray(e[o])){const t=Wr(e[o],e[o].map(e=>s));return n[o]=Object.values(t).join(""),n}return $r(e,t,o),n[o]=qt(i),n}if("number"===s)return $r(e,t,o),n[o]=Number(i),n;if("function"==typeof s)return n[o]=s(i),n;if(Array.isArray(s)){const t=Wr(e[o],s,s[0]);return n[o]=Object.values(t),n}return it(s)?(n[o]=Wr(e[o],s),n):(((e,t,r)=>{throw new Error(`Unhandled formatter type on ${r}:${t[r]} for data ${r}:${e[r]}`)})(e,t,o),n)},{})}var Kr=class{abi;constructor(e){this.abi=e}methodInputsLength(e){return e.inputs.reduce((e,t)=>dr(t.name)?e:e+1,0)}getMethod(e){return this.abi.find(t=>t.name===e)}getLegacyFormat(){return this.abi}},qr=class{abi;constructor(e){this.abi=e}methodInputsLength(e){return e.inputs.length}getMethod(e){const t=this.abi.find(e=>"interface"===e.type);return t?.items?.find(t=>t.name===e)}getLegacyFormat(){return this.abi.flatMap(e=>"interface"===e.type?e.items:e)}};function Gr(e){const t=function(e){return e.find(e=>"interface"===e.type)?2:Dr(e)?1:0}(e);if(0===t||1===t)return new Kr(e);if(2===t)return new qr(e);throw Error(`Unsupported ABI version ${t}`)}function Yr(e,t,r){return"constructor"===e&&!r&&!t.length}function Qr(e,t,r){for(let n=0,o=0;n<e.length;n++)if(e[n]===t)o++;else if(e[n]===r&&0===--o)return n;return Number.POSITIVE_INFINITY}function Zr(e){return Or(e)?function(e){const t=e.slice(1,-1),r=[];let n,o=0;for(;o<t.length;){switch(!0){case"("===t[o]:n=o+Qr(t.slice(o),"(",")")+1;break;case t.startsWith("core::result::Result::<",o)||t.startsWith("core::array::Array::<",o)||t.startsWith("core::option::Option::<",o):n=o+Qr(t.slice(o),"<",">")+1;break;default:{const e=t.indexOf(",",o);n=-1!==e?e:Number.POSITIVE_INFINITY}}r.push(t.slice(o,n)),o=n+2}return r}(e):function(e){const t=e.replace(/\s/g,"").slice(1,-1),{subTuple:r,result:n}=function(e){if(!e.includes("("))return{subTuple:[],result:e};const t=[];let r="",n=0;for(;n<e.length;){if("("===e[n]){let o=1;const i=n;for(n++;o;)")"===e[n]&&o--,"("===e[n]&&o++,n++;t.push(e.substring(i,n)),r+=" ",n--}else r+=e[n];n++}return{subTuple:t,result:r}}(t);let o=n.split(",").map(e=>r.length?e.replace(" ",r.shift()):e);return gr(e)&&(o=o.reduce((e,t)=>e.concat(function(e){const t=e.substring(0,e.indexOf(":"));return{name:t,type:e.substring(t.length+1)}}(t)),[])),o}(e)}var Xr=class e{content;arrayType;constructor(t,r){Ye(e.isTypeFixedArray(r),`The type ${r} is not a Cairo fixed array. Needs [type; length].`);try{e.getFixedArrayType(r)}catch{throw new Error(`The type ${r} do not includes any content type. Needs [type; length].`)}try{e.getFixedArraySize(r)}catch{throw new Error(`The type ${r} type do not includes any length. Needs [type; length].`)}Ye(e.getFixedArraySize(r)===t.length,`The ABI type ${r} is expecting ${e.getFixedArraySize(r)} items. ${t.length} items provided.`),this.content=t,this.arrayType=r}static getFixedArraySize(e){const t=e.match(/(?<=; )\d+(?=\])/);if(null===t)throw new Error(`ABI type ${e} do not includes a valid number after ';' character.`);return Number(t[0])}getFixedArraySize(){return e.getFixedArraySize(this.arrayType)}static getFixedArrayType=e=>{const t=e.match(/(?<=\[).+(?=;)/);if(null===t)throw new Error(`ABI type ${e} do not includes a valid type of data.`);return t[0]};getFixedArrayType(){return e.getFixedArrayType(this.arrayType)}static compile(e){return e.reduce((e,t,r)=>(e[r]=t,e),{})}compile(){return e.compile(this.content)}static isTypeFixedArray(e){return/^\[.*;\s.*\]$/.test(e)&&/(?<=\[).+(?=;)/.test(e)&&/(?<=; )\d+(?=\])/.test(e)}};function Jr(e,t){switch(!0){case sr.isAbiType(e):return new sr(t).toApiRequest();case ur.isAbiType(e):return new ur(t).toApiRequest();case Ir(e):return Kt(t.toString());case Mr(e):{const e=O(lt(t)).padStart(128,"0"),r=Lr(N(e.slice(-64))),n=Lr(N(e.slice(0,-64)));return[Rr(n.low),Rr(n.high),Rr(r.low),Rr(r.high)]}default:return Rr(t)}}function en(e,t,r,n){if(void 0===e)throw Error(`Missing parameter for type ${t}`);if(Xr.isTypeFixedArray(t)){const o=Xr.getFixedArrayType(t);let i=[];if(Array.isArray(e))i=new Xr(e,t).content;else{if("object"!=typeof e)throw new Error(`ABI type ${t}: not an Array representing a cairo.fixedArray() provided.`);i=Object.values(e),Ye(i.length===Xr.getFixedArraySize(t),`ABI type ${t}: object provided do not includes  ${Xr.getFixedArraySize(t)} items. ${i.length} items provided.`)}return i.reduce((e,t)=>e.concat(en(t,o,r,n)),[])}if(Array.isArray(e)){const o=[];o.push(Rr(e.length));const i=Nr(t);return e.reduce((e,t)=>e.concat(en(t,i,r,n)),o)}if(r[t]&&r[t].members.length){if(sr.isAbiType(t))return new sr(e).toApiRequest();if(ur.isAbiType(t))return new ur(e).toApiRequest();if(xr(t))return Jr(t,e);if(Tr(t))return function(e){const t=Qt(e);return[t.data.length.toString(),...t.data.map(e=>e.toString()),t.pending_word.toString(),t.pending_word_len.toString()]}(e);const{members:o}=r[t],i=e;return o.reduce((e,t)=>e.concat(en(i[t.name],t.type,r,n)),[])}if(pr(t)){const o=function(e,t){const r=Zr(t),n=Object.values(e);if(n.length!==r.length)throw Error(`ParseTuple: provided and expected abi tuple size do not match.\n      provided: ${n}\n      expected: ${r}`);return r.map((e,t)=>({element:n[t],type:e.type??e}))}(e,t);return o.reduce((e,t)=>{const o=en(t.element,t.type,r,n);return e.concat(o)},[])}if(sr.isAbiType(t))return new sr(e).toApiRequest();if(ur.isAbiType(t))return new ur(e).toApiRequest();if(mr(t,n)){const{variants:o}=n[t];if(br(t)){const t=e;if(t.isSome()){const e=o.find(e=>"Some"===e.name);if(et(e))throw Error("Error in abi : Option has no 'Some' variant.");const i=e.type;if("()"===i)return Fr.Some.toString();const s=en(t.unwrap(),i,r,n);return Array.isArray(s)?[Fr.Some.toString(),...s]:[Fr.Some.toString(),s]}return Fr.None.toString()}if(wr(t)){const t=e;if(t.isOk()){const e=o.find(e=>"Ok"===e.name);if(et(e))throw Error("Error in abi : Result has no 'Ok' variant.");const i=e.type;if("()"===i)return Vr.Ok.toString();const s=en(t.unwrap(),i,r,n);return Array.isArray(s)?[Vr.Ok.toString(),...s]:[Vr.Ok.toString(),s]}const i=o.find(e=>"Err"===e.name);if(et(i))throw Error("Error in abi : Result has no 'Err' variant.");const s=i.type;if("()"===s)return Vr.Err.toString();const a=en(t.unwrap(),s,r,n);return Array.isArray(a)?[Vr.Err.toString(),...a]:[Vr.Err.toString(),a]}const i=e,s=i.activeVariant(),a=o.find(e=>e.name===s);if(et(a))throw Error(`Not find in abi : Enum has no '${s}' variant.`);const c=a.type,l=o.findIndex(e=>e.name===s);if("()"===c)return l.toString();const u=en(i.unwrap(),c,r,n);return Array.isArray(u)?[l.toString(),...u]:[l.toString(),u]}if(Cr(t))return Jr(Nr(t),e);if("object"==typeof e)throw Error(`Parameter ${e} do not align with abi parameter ${t}`);return Jr(t,e)}function tn(e,t,r,n){const{name:o,type:i}=t;let{value:s}=e.next();switch(!0){case Xr.isTypeFixedArray(i):if(!Array.isArray(s)&&"object"!=typeof s)throw Error(`ABI expected parameter ${o} to be an array or an object, got ${s}`);return en(s,t.type,r,n);case fr(i):if(!Array.isArray(s)&&!Vt(s))throw Error(`ABI expected parameter ${o} to be array or long string, got ${s}`);return ot(s)&&(s=Wt(s)),en(s,t.type,r,n);case Cr(i):return Jr(Nr(i),s);case xr(i):return Jr(i,s);case yr(i,r)||pr(i)||sr.isAbiType(i):case mr(i,n):return en(s,i,r,n);default:return Jr(i,s)}}function rn(e,t){let r;switch(!0){case Ar(e):return r=t.next().value,Boolean(BigInt(r));case sr.isAbiType(e):const n=t.next().value,o=t.next().value;return new sr(n,o).toBigInt();case ur.isAbiType(e):const i=t.next().value,s=t.next().value,a=t.next().value,c=t.next().value;return new ur(i,s,a,c).toBigInt();case xr(e):return r=t.next().value,BigInt(r);case Ir(e):return r=t.next().value,qt(r);case Mr(e):const l=O(t.next().value).padStart(32,"0"),u=O(t.next().value).padStart(32,"0"),d=O(t.next().value).padStart(32,"0"),h=O(t.next().value).padStart(32,"0");return BigInt(N(u+l+h+d));default:return r=t.next().value,BigInt(r)}}function nn(e,t,r,n){if("()"===t.type)return{};if(sr.isAbiType(t.type)){const t=e.next().value,r=e.next().value;return new sr(t,r).toBigInt()}if(ur.isAbiType(t.type)){const t=e.next().value,r=e.next().value,n=e.next().value,o=e.next().value;return new ur(t,r,n,o).toBigInt()}if(Tr(t.type)){const t=[],r=BigInt(e.next().value);for(;t.length<r;)t.push(lt(e.next().value));return Yt({data:t,pending_word:lt(e.next().value),pending_word_len:BigInt(e.next().value)})}if(Xr.isTypeFixedArray(t.type)){const o=[],i={name:"",type:Xr.getFixedArrayType(t.type)},s=Xr.getFixedArraySize(t.type);for(;o.length<s;)o.push(nn(e,i,r,n));return o}if(fr(t.type)){const o=[],i={name:"",type:Nr(t.type)},s=BigInt(e.next().value);for(;o.length<s;)o.push(nn(e,i,r,n));return o}if(Cr(t.type)){const o={name:"",type:Nr(t.type)};return nn(e,o,r,n)}if(r&&t.type in r&&r[t.type])return xr(t.type)?rn(t.type,e):r[t.type].members.reduce((t,o)=>(t[o.name]=nn(e,o,r,n),t),{});if(n&&t.type in n&&n[t.type]){const o=Number(e.next().value),i=n[t.type].variants.reduce((t,i,s)=>s===o?(t[i.name]=nn(e,{name:"",type:i.type},r,n),t):(t[i.name]=void 0,t),{});if(t.type.startsWith("core::option::Option")){const e=o===Fr.Some?i.Some:void 0;return new zr(o,e)}if(t.type.startsWith("core::result::Result")){let e;return e=o===Vr.Ok?i.Ok:i.Err,new Hr(o,e)}return new Ur(i)}if(pr(t.type))return Zr(t.type).reduce((t,o,i)=>{const s=o?.name?o.name:i,a={name:s,type:o?.type?o.type:o};return t[s]=nn(e,a,r,n),t},{});if(fr(t.type)){const o=[],i={name:"",type:Nr(t.type)},s=BigInt(e.next().value);for(;o.length<s;)o.push(nn(e,i,r,n));return o}return rn(t.type,e)}function on(e,t,r,n,o){const{name:i,type:s}=t;let a;switch(!0){case dr(i):return a=e.next().value,BigInt(a);case r&&s in r||pr(s):case n&&mr(s,n):case Xr.isTypeFixedArray(s):return nn(e,t,r,n);case fr(s):if(Or(s))return nn(e,t,r,n);const c=[];if(o&&o[`${i}_len`]){const s=o[`${i}_len`];for(;c.length<s;)c.push(nn(e,{name:i,type:t.type.replace("*","")},r,n))}return c;case Cr(s):return nn(e,t,r,n);default:return rn(s,e)}}var sn=(e,t)=>{if(Ye(ot(e)||tt(e)||nt(e),`Validate: arg ${t.name} should be a felt typed as (String, Number or BigInt)`),ot(e)&&!st(e))return;const r=BigInt(e.toString(10));Ye(r>=0n&&r<=2n**252n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^252-1]`)},an=(e,t)=>{let r;switch(tt(e)&&Ye(e<=Number.MAX_SAFE_INTEGER,"Validation: Parameter is too large to be typed as Number use (BigInt or String)"),Ye(ot(e)||tt(e)||nt(e)||it(e)&&"low"in e&&"high"in e||it(e)&&["limb0","limb1","limb2","limb3"].every(t=>t in e),`Validate: arg ${t.name} of cairo type ${t.type} should be type (String, Number or BigInt), but is ${typeof e} ${e}.`),t.type){case Be.u256:r=new sr(e).toBigInt();break;case Be.u512:r=new ur(e).toBigInt();break;default:r=at(e)}switch(t.type){case Be.u8:Ye(r>=0n&&r<=255n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0 - 255]`);break;case Be.u16:Ye(r>=0n&&r<=65535n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 65535]`);break;case Be.u32:Ye(r>=0n&&r<=4294967295n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 4294967295]`);break;case Be.u64:Ye(r>=0n&&r<=2n**64n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^64-1]`);break;case Be.u128:Ye(r>=0n&&r<=2n**128n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^128-1]`);break;case Be.u256:Ye(r>=0n&&r<=2n**256n-1n,`Validate: arg ${t.name} is ${t.type} should be in range 0 - 2^256-1`);break;case Be.u512:Ye(ur.is(r),`Validate: arg ${t.name} is ${t.type} should be in range 0 - 2^512-1`);break;case Le.ClassHash:case Le.ContractAddress:Ye(r>=0n&&r<=2n**252n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^252-1]`);break;case Le.Secp256k1Point:Ye(r>=0n&&r<=2n**512n-1n,`Validate: arg ${t.name} must be ${t.type} : a 512 bits number.`);break;case Le.U96:Ye(r>=0n&&r<=2n**96n-1n,`Validate: arg ${t.name} must be ${t.type} : a 96 bits number.`)}},cn=(e,t)=>{Ye(rt(e),`Validate: arg ${t.name} of cairo type ${t.type} should be type (Boolean)`)},ln=(e,t,r)=>{if(t.type!==Be.u256&&t.type!==Be.u512){if(xr(t.type)){Ye(!it(e),`EthAddress type is waiting a BigNumberish. Got "${e}"`);const r=BigInt(e.toString(10));return void Ye(r>=0n&&r<=2n**160n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^160-1]`)}Ye(it(e),`Validate: arg ${t.name} is cairo type struct (${t.type}), and should be defined as a js object (not array)`),r[t.type].members.forEach(({name:r})=>{Ye(Object.keys(e).includes(r),`Validate: arg ${t.name} should have a property ${r}`)})}else an(e,t)},un=(e,t)=>{Ye(it(e),`Validate: arg ${t.name} is cairo type Enum (${t.type}), and should be defined as a js object (not array)`);const r=Object.getOwnPropertyNames(Object.getPrototypeOf(e)),n=[...Object.getOwnPropertyNames(e),...r];if(!(br(t.type)&&n.includes("isSome")&&n.includes("isNone")||wr(t.type)&&n.includes("isOk")&&n.includes("isErr")||n.includes("variant")&&n.includes("activeVariant")))throw new Error(`Validate Enum: argument ${t.name}, type ${t.type}, value received "${e}", is not an Enum.`)},dn=(e,t)=>{Ye(it(e),`Validate: arg ${t.name} should be a tuple (defined as object)`)},hn=(e,t,r,n)=>{const o=fr(t.type),i=o?Nr(t.type):Xr.getFixedArrayType(t.type);if(o&&hr(i)&&$t(e))return;let s=[];if(o)Ye(Array.isArray(e),`Validate: arg ${t.name} should be an Array`),s=e;else switch(!0){case Array.isArray(e):s=e;break;case"object"==typeof e:s=Object.values(e);break;default:throw new Error(`Validate: arg ${t.name} should be an Array or an object.`)}switch(!0){case hr(i):s.forEach(e=>sn(e,t));break;case pr(i):s.forEach(e=>dn(e,{name:t.name,type:i}));break;case fr(i):s.forEach(e=>hn(e,{name:"",type:i},r,n));break;case yr(i,r):s.forEach(e=>ln(e,{name:t.name,type:i},r));break;case mr(i,n):s.forEach(e=>un(e,{name:t.name,type:i}));break;case vr(i)||Er(i):s.forEach(e=>an(e,{name:"",type:i}));break;case Ar(i):s.forEach(e=>cn(e,t));break;default:throw new Error(`Validate Unhandled: argument ${t.name}, type ${t.type}, value ${s}`)}};function fn(e,t,r,n){e.inputs.reduce((e,o)=>{const i=t[e];switch(!0){case dr(o.name):return e;case hr(o.type):sn(i,o);break;case Ir(o.type):((e,t)=>{Ye(ot(e),`Validate: arg ${t.name} should be a string.`),Ye(e.length<32,`Validate: arg ${t.name} cairo typed ${t.type} should be a string of less than 32 characters.`)})(i,o);break;case vr(o.type)||Er(o.type):an(i,o);break;case Ar(o.type):cn(i,o);break;case Tr(o.type):((e,t)=>{Ye(ot(e),`Validate: arg ${t.name} should be a string.`)})(i,o);break;case fr(o.type)||Xr.isTypeFixedArray(o.type):hn(i,o,r,n);break;case yr(o.type,r):ln(i,o,r);break;case mr(o.type,n):un(i,o);break;case pr(o.type):dn(i,o);break;case Cr(o.type):((e,t)=>{const r=Nr(t.type);switch(Ye(vr(r)&&r!==ur.abiSelector||hr(r),`Validate: ${t.name} type is not authorized for NonZero type.`),!0){case hr(r):sn(e,t),Ye(BigInt(e.toString(10))>0,"Validate: value 0 is not authorized in NonZero felt252 type.");break;case vr(r):an(e,{name:"",type:r}),r===Be.u256?Ye(new sr(e).toBigInt()>0,"Validate: value 0 is not authorized in NonZero uint256 type."):Ye(at(e)>0,"Validate: value 0 is not authorized in NonZero uint type.");break;default:throw new Error(`Validate Unhandled: argument ${t.name}, type ${t.type}, value "${e}"`)}})(i,o);break;default:throw new Error(`Validate Unhandled: argument ${o.name}, type ${o.type}, value ${i}`)}return e+1},0)}var pn=class e{abi;parser;structs;enums;constructor(t){this.structs=e.getAbiStruct(t),this.enums=e.getAbiEnum(t),this.parser=Gr(t),this.abi=this.parser.getLegacyFormat()}validate(e,t,r=[]){e!==Ce.DEPLOY&&Ye(this.abi.filter(t=>{if("function"!==t.type)return!1;const r="view"===t.stateMutability||"view"===t.state_mutability;return e===Ce.INVOKE?!r:r}).map(e=>e.name).includes(t),(e===Ce.INVOKE?"invocable":"viewable")+" method not found in abi");const n=this.abi.find(r=>e===Ce.DEPLOY?r.name===t&&"constructor"===r.type:r.name===t&&"function"===r.type);if(Yr(t,r,n))return;const o=this.parser.methodInputsLength(n);if(r.length!==o)throw Error(`Invalid number of arguments, expected ${o} arguments, but got ${r.length}`);fn(n,r,this.structs,this.enums)}compile(e,t){const r=this.abi.find(t=>t.name===e);if(Yr(e,t,r))return[];let n;if(Array.isArray(t))n=t;else{const e=function(e,t,r,n){const o=(e,t)=>{if(Xr.isTypeFixedArray(t))return function(e,t){const r=Xr.getFixedArrayType(t),n=Xr.getFixedArraySize(t);if(Array.isArray(e)){if(n!==e.length)throw new Error(`ABI type ${t}: array provided do not includes  ${n} items. ${e.length} items provided.`);return e.map(e=>o(e,r))}if(n!==Object.keys(e).length)throw new Error(`ABI type ${t}: object provided do not includes  ${n} properties. ${Object.keys(e).length} items provided.`);return o(e,r)}(e,t);if(fr(t))return function(e,t){const r=Nr(t);return ot(e)?e:e.map(e=>o(e,r))}(e,t);if(mr(t,n)){const r=n[t];return s(e,r)}if(pr(t))return function(e,t){const r=Zr(t).reduce((t,r,n)=>{const i=Object.keys(e),s=r?.type?r.type:r;return a=o(e[i[n]],s),Object.defineProperty(t,n.toString(),{enumerable:!0,value:a??e[i[n]]}),t;var a},{});return r}(e,t);if(xr(t))return e;if(Cr(t))return e;if(Tr(t))return e;if(kr(t))return e;if(Mr(t))return e;if(sr.isAbiType(t)){const r=e;if("object"!=typeof r)return r;if(!("low"in r)||!("high"in r))throw Error(`Your object includes the property : ${t}, containing an Uint256 object without the 'low' and 'high' keys.`);return{low:r.low,high:r.high}}if(ur.isAbiType(t)){const r=e;if("object"!=typeof r)return r;if(!["limb0","limb1","limb2","limb3"].every(e=>e in r))throw Error(`Your object includes the property : ${t}, containing an Uint512 object without the 'limb0' to 'limb3' keys.`);return{limb0:r.limb0,limb1:r.limb1,limb2:r.limb2,limb3:r.limb3}}if(yr(t,r)){const n=r[t].members;return i(e,n)}return e},i=(e,t)=>t.reduce((t,r)=>{if("undefined"===e[r.name]&&(Or(r.type)||!dr(r.name)))throw Error(`Your object needs a property with key : ${r.name} .`);var n;return n=o(e[r.name],r.type),Object.defineProperty(t,r.name,{enumerable:!0,value:n??e[r.name]}),t},{}),s=(e,t)=>{if(wr(t.name)){const r=e,n=t.name.substring(t.name.indexOf("<")+1,t.name.lastIndexOf(",")),i=t.name.substring(t.name.indexOf(",")+1,t.name.lastIndexOf(">"));return r.isOk()?new Hr(Vr.Ok,o(e.unwrap(),n)):new Hr(Vr.Err,o(e.unwrap(),i))}if(br(t.name)){const r=e,n=t.name.substring(t.name.indexOf("<")+1,t.name.lastIndexOf(">"));return r.isSome()?new zr(Fr.Some,o(r.unwrap(),n)):new zr(Fr.None,{})}const r=e,n=Object.entries(r.variant).map(e=>{if(et(e[1]))return e;const n=t.type.substring(t.type.lastIndexOf("<")+1,t.type.lastIndexOf(">"));return"()"===n?e:[e[0],o(r.unwrap(),n)]});return new Ur(Object.fromEntries(n))};return t.reduce((t,r)=>{return dr(r.name)&&!Or(r.type)||(n=o(e[r.name],r.type),Object.defineProperty(t,r.name,{enumerable:!0,value:n})),t;var n},{})}(t,r.inputs,this.structs,this.enums);n=Object.values(e),fn(r,n,this.structs,this.enums)}const o=n[Symbol.iterator](),i=r.inputs.reduce((e,t)=>dr(t.name)&&!Or(t.type)?e:e.concat(tn(o,t,this.structs,this.enums)),[]);return Object.defineProperty(i,"__compiled__",{enumerable:!1,writable:!1,value:!0}),i}static compile(e){const t=e=>{const t=(e,r=".")=>{const n=Array.isArray(e)?[e.length.toString(),...e]:e;return Object.entries(n).flatMap(([e,o])=>{let i=o;"entrypoint"===e?i=Ct(i):$t(i)&&(i=Qt(i));const s=Array.isArray(n)&&"0"===e?"$$len":e;if(nt(i))return[[`${r}${s}`,Rr(i)]];if(Object(i)===i){const e=Object.getOwnPropertyNames(Object.getPrototypeOf(i)),n=[...Object.getOwnPropertyNames(i),...e];if(n.includes("isSome")&&n.includes("isNone")){const e=i,n=e.isSome()?Fr.Some:Fr.None;return e.isSome()?t({0:n,1:e.unwrap()},`${r}${s}.`):[[`${r}${s}`,Rr(n)]]}if(n.includes("isOk")&&n.includes("isErr")){const e=i,n=e.isOk()?Vr.Ok:Vr.Err;return t({0:n,1:e.unwrap()},`${r}${s}.`)}if(n.includes("variant")&&n.includes("activeVariant")){const e=i,n=e.activeVariant(),o=Object.keys(e.variant).findIndex(e=>e===n);return"object"==typeof e.unwrap()&&0===Object.keys(e.unwrap()).length?[[`${r}${s}`,Rr(o)]]:t({0:o,1:e.unwrap()},`${r}${s}.`)}return t(i,`${r}${s}.`)}return[[`${r}${s}`,Rr(i)]]})};return Object.fromEntries(t(e))};let r;if(Array.isArray(e)){const n=t({...e});r=Object.values(n)}else{const n=t(e);r=Object.values(n)}return Object.defineProperty(r,"__compiled__",{enumerable:!1,writable:!1,value:!0}),r}parse(e,t){const{outputs:r}=this.abi.find(t=>t.name===e),n=t.flat()[Symbol.iterator](),o=r.flat().reduce((e,t,r)=>{const o=t.name??r;return e[o]=on(n,t,this.structs,this.enums,e),e[o]&&e[`${o}_len`]&&delete e[`${o}_len`],e},{});return 1===Object.keys(o).length&&0 in o?o[0]:o}format(e,t,r){return Wr(this.parse(e,t),r)}static getAbiStruct(e){return e.filter(e=>"struct"===e.type).reduce((e,t)=>({...e,[t.name]:t}),{})}static getAbiEnum(e){const t=e.filter(e=>"enum"===e.type).reduce((e,t)=>({...e,[t.name]:t}),{});return delete t["core::bool"],t}static toCalldata(t=[]){return e.compile(t)}static toHex(t=[]){return e.compile(t).map(e=>lt(e))}decodeParameters(e,t){const r=Array.isArray(e)?e:[e],n=t.flat()[Symbol.iterator](),o=r.map(e=>on(n,{name:"",type:e},this.structs,this.enums));return 1===o.length?o[0]:o}},gn={};d(gn,{calculateContractAddressFromHash:()=>to,calculateDeclareTransactionHash:()=>qn,calculateDeployAccountTransactionHash:()=>Gn,calculateInvokeTransactionHash:()=>Kn,calculateL2MessageTxHash:()=>In,computeCompiledClassHash:()=>co,computeContractClassHash:()=>ho,computeHashOnElements:()=>Xn,computeHintedClassHash:()=>oo,computeLegacyContractClassHash:()=>io,computePedersenHash:()=>Qn,computePedersenHashOnElements:()=>Jn,computePoseidonHash:()=>Zn,computePoseidonHashOnElements:()=>eo,computeSierraContractClassHash:()=>uo,formatSpaces:()=>no,getL1MessageHash:()=>jt,getL2MessageHash:()=>Pt,getSelector:()=>Bt,getSelectorFromName:()=>Ct,hashByteCodeSegments:()=>ao,keccakBn:()=>Nt,poseidon:()=>yn,solidityUint256PackedKeccak256:()=>Lt,starknetKeccak:()=>Dt});var yn=f(r(5920)),mn={};d(mn,{calculateDeclareTransactionHash:()=>An,calculateDeployAccountTransactionHash:()=>Sn,calculateL2MessageTxHash:()=>In,calculateTransactionHash:()=>xn,calculateTransactionHashCommon:()=>En,computeHashOnElements:()=>_n});var bn={};d(bn,{starkCurve:()=>wn,weierstrass:()=>vn});var wn=f(r(4246)),vn=f(r(1705));function _n(e){return[...e,e.length].reduce((e,t)=>wn.pedersen(at(e),at(t)),0).toString()}function En(e,t,r,n,o,i,s,a=[]){const c=_n(o);return _n([e,t,r,n,c,i,s,...a])}function An(e,t,r,n,o,i,s){return En(se.DECLARE,r,t,0,[e],n,o,[i,...s?[s]:[]])}function Sn(e,t,r,n,o,i,s,a){const c=[t,n,...r];return En(se.DEPLOY_ACCOUNT,o,e,0,c,i,s,[a])}function xn(e,t,r,n,o,i){return En(se.INVOKE,t,e,0,r,n,o,[i])}function In(e,t,r,n,o,i){const s=[e,...n];return En(se.L1_HANDLER,0,t,Bt(r),s,0,o,[i])}var Tn={};d(Tn,{calculateDeclareTransactionHash:()=>$n,calculateDeployAccountTransactionHash:()=>Hn,calculateInvokeTransactionHash:()=>Wn,calculateTransactionHashCommon:()=>Vn,encodeDataResourceBoundsL1:()=>Un,encodeResourceBoundsL1:()=>jn,encodeResourceBoundsL2:()=>Rn,hashDAMode:()=>Pn,hashFeeField:()=>Fn,hashFeeFieldV3B3:()=>zn});var kn=r(4246),Mn=e=>e.map(e=>BigInt(e)),On=32n,Nn=128n,Dn=64n+Nn,Cn=BigInt(Kt("L1_GAS")),Bn=BigInt(Kt("L2_GAS")),Ln=BigInt(Kt("L1_DATA"));function Pn(e,t){return(BigInt(e)<<On)+BigInt(t)}function jn(e){return(Cn<<Dn)+(BigInt(e.l1_gas.max_amount)<<Nn)+BigInt(e.l1_gas.max_price_per_unit)}function Rn(e){return(Bn<<Dn)+(BigInt(e.l2_gas.max_amount)<<Nn)+BigInt(e.l2_gas.max_price_per_unit)}function Un(e){return(Ln<<Dn)+(BigInt(e.l1_data_gas.max_amount)<<Nn)+BigInt(e.l1_data_gas.max_price_per_unit)}function Fn(e,t){const r=jn(t),n=Rn(t);return(0,kn.poseidonHashMany)([BigInt(e),r,n])}function zn(e,t){const r=jn(t),n=Rn(t),o=Un(t);return(0,kn.poseidonHashMany)([BigInt(e),r,n,o])}function Vn(e,t,r,n,o,i,s,a,c,l,u=[]){const d=Oe(l)?zn(i,l):Fn(i,l),h=Pn(a,c),f=Mn([e,t,r,d,(0,kn.poseidonHashMany)(Mn(s)),n,o,h,...Mn(u)]);return lt((0,kn.poseidonHashMany)(f))}function Hn(e,t,r,n,o,i,s,a,c,l,u,d){return Vn(se.DEPLOY_ACCOUNT,o,e,i,s,u,d,a,c,l,[(0,kn.poseidonHashMany)(Mn(r)),t,n])}function $n(e,t,r,n,o,i,s,a,c,l,u,d){return Vn(se.DECLARE,n,r,o,i,u,Mn(d),a,c,l,[(0,kn.poseidonHashMany)(Mn(s)),e,t])}function Wn(e,t,r,n,o,i,s,a,c,l,u){return Vn(se.INVOKE,t,e,n,o,l,u,s,a,c,[(0,kn.poseidonHashMany)(Mn(i)),(0,kn.poseidonHashMany)(Mn(r))])}function Kn(e){return function(e){return[y.ETransactionVersion.V3,y.ETransactionVersion.F3].includes(e.version)}(e)?Wn(e.senderAddress,e.version,e.compiledCalldata,e.chainId,e.nonce,e.accountDeploymentData,e.nonceDataAvailabilityMode,e.feeDataAvailabilityMode,e.resourceBounds,e.tip,e.paymasterData):xn(e.senderAddress,e.version,e.compiledCalldata,e.maxFee,e.chainId,e.nonce)}function qn(e){return function(e){return[y.ETransactionVersion.V3,y.ETransactionVersion.F3].includes(e.version)}(e)?$n(e.classHash,e.compiledClassHash,e.senderAddress,e.version,e.chainId,e.nonce,e.accountDeploymentData,e.nonceDataAvailabilityMode,e.feeDataAvailabilityMode,e.resourceBounds,e.tip,e.paymasterData):An(e.classHash,e.senderAddress,e.version,e.maxFee,e.chainId,e.nonce,e.compiledClassHash)}function Gn(e){return function(e){return[y.ETransactionVersion.V3,y.ETransactionVersion.F3].includes(e.version)}(e)?Hn(e.contractAddress,e.classHash,e.compiledConstructorCalldata,e.salt,e.version,e.chainId,e.nonce,e.nonceDataAvailabilityMode,e.feeDataAvailabilityMode,e.resourceBounds,e.tip,e.paymasterData):Sn(e.contractAddress,e.classHash,e.constructorCalldata,e.salt,e.version,e.maxFee,e.chainId,e.nonce)}var Yn=r(4246);function Qn(e,t){return wn.pedersen(BigInt(e),BigInt(t))}function Zn(e,t){return lt(wn.poseidonHash(BigInt(e),BigInt(t)))}function Xn(e){return[...e,e.length].reduce((e,t)=>wn.pedersen(BigInt(e),BigInt(t)),0).toString()}var Jn=Xn;function eo(e){return lt((0,Yn.poseidonHashMany)(e.map(e=>BigInt(e))))}function to(e,t,r,n){const o=Xn(pn.compile(r)),i=Xn([Rr("0x535441524b4e45545f434f4e54524143545f41444452455353"),n,e,t,o]);return lt(BigInt(i)%K)}function ro(e,t){return"attributes"===e||"accessible_scopes"===e?Array.isArray(t)&&0===t.length?void 0:t:"debug_info"===e?null:null===t?void 0:t}function no(e){let t=!1;const r=[];for(const n of e)'"'===n&&0==(r.length>0&&"\\"===r.slice(-1)[0])&&(t=!t),t?r.push(n):r.push(":"===n?": ":","===n?", ":n);return r.join("")}function oo(e){const{abi:t,program:r}=e,n=no(qe({abi:t,program:r},ro));return N(wn.keccak(I(n)).toString(16))}function io(e){const t=ot(e)?We(e):e,r=lt(H),n=Xn(t.entry_points_by_type.EXTERNAL.flatMap(e=>[e.selector,e.offset])),o=Xn(t.entry_points_by_type.L1_HANDLER.flatMap(e=>[e.selector,e.offset])),i=Xn(t.entry_points_by_type.CONSTRUCTOR.flatMap(e=>[e.selector,e.offset])),s=Xn(t.program.builtins.map(e=>Kt(e))),a=oo(t),c=Xn(t.program.data);return Xn([r,n,o,i,s,a,c])}function so(e){const t=e.flatMap(e=>{return[BigInt(e.selector),BigInt(e.offset),(t=e.builtins,(0,Yn.poseidonHashMany)(t.flatMap(e=>BigInt(Kt(e)))))];var t});return(0,Yn.poseidonHashMany)(t)}function ao(e){const t=e.bytecode.map(e=>BigInt(e)),r=e.bytecode_segment_lengths??[];let n=0;const o=r.flatMap(e=>{const r=t.slice(n,n+=e);return[BigInt(e),(0,Yn.poseidonHashMany)(r)]});return 1n+(0,Yn.poseidonHashMany)(o)}function co(e){const t=BigInt(Kt("COMPILED_CLASS_V1")),r=so(e.entry_points_by_type.EXTERNAL),n=so(e.entry_points_by_type.L1_HANDLER),o=so(e.entry_points_by_type.CONSTRUCTOR),i=e.bytecode_segment_lengths?ao(e):(0,Yn.poseidonHashMany)(e.bytecode.map(e=>BigInt(e)));return lt((0,Yn.poseidonHashMany)([t,r,n,o,i]))}function lo(e){const t=e.flatMap(e=>[BigInt(e.selector),BigInt(e.function_idx)]);return(0,Yn.poseidonHashMany)(t)}function uo(e){const t=BigInt(Kt("CONTRACT_CLASS_V0.1.0")),r=lo(e.entry_points_by_type.EXTERNAL),n=lo(e.entry_points_by_type.L1_HANDLER),o=lo(e.entry_points_by_type.CONSTRUCTOR),i=function(e){const t=no(qe(e.abi,null));return BigInt(N(wn.keccak(I(t)).toString(16)))}(e),s=(0,Yn.poseidonHashMany)(e.sierra_program.map(e=>BigInt(e)));return lt((0,Yn.poseidonHashMany)([t,r,n,o,i,s]))}function ho(e){const t=ot(e)?We(e):e;return"sierra_program"in t?uo(t):io(t)}var fo={};d(fo,{ZEROFee:()=>Do,compressProgram:()=>So,decompressProgram:()=>xo,estimateFeeToBounds:()=>No,estimatedFeeToMaxFee:()=>Oo,formatSignature:()=>To,getFullPublicKey:()=>Ro,intDAM:()=>Co,randomAddress:()=>Io,reduceV2:()=>jo,signatureToDecimalArray:()=>ko,signatureToHexArray:()=>Mo,toFeeVersion:()=>Lo,toTransactionVersion:()=>Bo,v3Details:()=>Po});var po=r(4246),go=r(1668);function yo(e){const t=e.version?lt(e.version):Se.V3;return t===Se.V3||t===Se.F3}function mo(e,t){const r=e.split("."),n=t.split(".");return r.every((e,t)=>"*"===e||e===n[t])}function bo(e,t={allowAnyPatchVersion:!1}){return Object.values(ae).some(r=>mo(t.allowAnyPatchVersion?wo(r):r,e))}function wo(e){const t=e.split(".");return t.length<3?e:`${t[0]}.${t[1]}.*`}function vo(e){const[t,r]=e.replace(/^v/,"").split(".");return`v${t}_${r}`}function _o(e){return"PENDING"===e.status}function Eo(e){return!("block_hash"in e)}function Ao(e){return!("block_hash"in e)}function So(e){const t=ot(e)?e:qe(e);return k((0,go.gzip)(t))}function xo(e){if(Array.isArray(e))return e;const t=x((0,go.ungzip)(T(e)));return We(t)}function Io(){const e=po.utils.randomPrivateKey();return(0,po.getStarkKey)(e)}function To(e){if(!e)throw Error("formatSignature: provided signature is undefined");if(Array.isArray(e))return e.map(e=>lt(e));try{const{r:t,s:r}=e;return[lt(t),lt(r)]}catch(e){throw new Error("Signature need to be weierstrass.SignatureType or an array for custom")}}function ko(e){return yt(To(e))}function Mo(e){return mt(To(e))}function Oo(e,t=he.get("feeMarginPercentage").maxFee){return St(e,t)}function No(e,t=he.get("feeMarginPercentage").bounds,r){return nt(e)?{l2_gas:{max_amount:"0x0",max_price_per_unit:"0x0"},l1_gas:{max_amount:"0x0",max_price_per_unit:"0x0"},...r&&mo("0.8",r)&&{l1_data_gas:{max_amount:"0x0",max_price_per_unit:"0x0"}}}:Me(e)?function(e,t){return{l2_gas:{max_amount:lt(St(e.l2_gas_consumed,t.l2_gas.max_amount)),max_price_per_unit:lt(St(e.l2_gas_price,t.l2_gas.max_price_per_unit))},l1_gas:{max_amount:lt(St(e.l1_gas_consumed,t.l1_gas.max_amount)),max_price_per_unit:lt(St(e.l1_gas_price,t.l1_gas.max_price_per_unit))},l1_data_gas:{max_amount:lt(St(e.l1_data_gas_consumed,t.l1_data_gas.max_amount)),max_price_per_unit:lt(St(e.l1_data_gas_price,t.l1_data_gas.max_price_per_unit))}}}(e,t):function(e,t){return{l2_gas:{max_amount:"0x0",max_price_per_unit:"0x0"},l1_gas:{max_amount:void 0!==e.data_gas_consumed&&void 0!==e.data_gas_price?lt(St(BigInt(e.overall_fee)/BigInt(e.gas_price),t.l1_gas.max_amount)):lt(St(e.gas_consumed,t.l1_gas.max_amount)),max_price_per_unit:lt(St(e.gas_price,t.l1_gas.max_price_per_unit))}}}(e,t)}function Do(e){return{l1_gas_consumed:0n,l1_gas_price:0n,l1_data_gas_consumed:0n,l1_data_gas_price:0n,l2_gas_consumed:0n,l2_gas_price:0n,overall_fee:F,unit:"FRI",suggestedMaxFee:F,resourceBounds:No(F,void 0,e)}}function Co(e){if(e===Te.L1)return ke.L1;if(e===Te.L2)return ke.L2;throw Error("EDAM conversion")}function Bo(e,t){const r=t?lt(t):void 0,n=lt(e);if(t&&!Object.values(Se).includes(r))throw Error(`providedVersion ${t} is not ETransactionVersion`);if(!Object.values(Se).includes(n))throw Error(`defaultVersion ${e} is not ETransactionVersion`);return t?r:n}function Lo(e){if(!e)return;const t=lt(e);if(t===Se.V0)return Se.F0;if(t===Se.V1)return Se.F1;if(t===Se.V2)return Se.F2;if(t===Se.V3)return Se.F3;throw Error(`toFeeVersion: ${t} is not supported`)}function Po(e,t){return{tip:e.tip||0,paymasterData:e.paymasterData||[],accountDeploymentData:e.accountDeploymentData||[],nonceDataAvailabilityMode:e.nonceDataAvailabilityMode||Te.L1,feeDataAvailabilityMode:e.feeDataAvailabilityMode||Te.L1,resourceBounds:e.resourceBounds??No(F,void 0,t)}}function jo(e){return e===Se.F2?Se.F1:e===Se.V2?Se.V1:e}function Ro(e){const t=lt(e);return N(M((0,po.getPublicKey)(t,!1)))}function Uo(e){return"sierra_program"in(ot(e)?We(e):e)}function Fo(e){const t={...e};if(Uo(e.contract)&&(!e.compiledClassHash&&e.casm&&(t.compiledClassHash=co(e.casm)),!t.compiledClassHash))throw new Error("Extract compiledClassHash failed, provide (CairoAssembly).casm file or compiledClassHash");if(t.classHash=e.classHash??ho(e.contract),!t.classHash)throw new Error("Extract classHash failed, provide (CompiledContract).json file or classHash");return t}function zo(e){if(Uo(e))throw Error("ContractClassResponse need to be LegacyContractClass (cairo0 response class)");const t=e;return{...t,program:xo(t.program)}}var Vo={FAILED_TO_RECEIVE_TXN:1,NO_TRACE_AVAILABLE:10,CONTRACT_NOT_FOUND:20,ENTRYPOINT_NOT_FOUND:21,BLOCK_NOT_FOUND:24,INVALID_TXN_INDEX:27,CLASS_HASH_NOT_FOUND:28,TXN_HASH_NOT_FOUND:29,PAGE_SIZE_TOO_BIG:31,NO_BLOCKS:32,INVALID_CONTINUATION_TOKEN:33,TOO_MANY_KEYS_IN_FILTER:34,CONTRACT_ERROR:40,TRANSACTION_EXECUTION_ERROR:41,STORAGE_PROOF_NOT_SUPPORTED:42,CLASS_ALREADY_DECLARED:51,INVALID_TRANSACTION_NONCE:52,INSUFFICIENT_RESOURCES_FOR_VALIDATE:53,INSUFFICIENT_ACCOUNT_BALANCE:54,VALIDATION_FAILURE:55,COMPILATION_FAILED:56,CONTRACT_CLASS_SIZE_IS_TOO_LARGE:57,NON_ACCOUNT:58,DUPLICATE_TX:59,COMPILED_CLASS_HASH_MISMATCH:60,UNSUPPORTED_TX_VERSION:61,UNSUPPORTED_CONTRACT_CLASS_VERSION:62,UNEXPECTED_ERROR:63,INVALID_SUBSCRIPTION_ID:66,TOO_MANY_ADDRESSES_IN_FILTER:67,TOO_MANY_BLOCKS_BACK:68,COMPILATION_ERROR:100,INVALID_ADDRESS:150,TOKEN_NOT_SUPPORTED:151,INVALID_SIGNATURE:153,MAX_AMOUNT_TOO_LOW:154,CLASS_HASH_NOT_SUPPORTED:155,PAYMASTER_TRANSACTION_EXECUTION_ERROR:156,INVALID_TIME_BOUNDS:157,INVALID_DEPLOYMENT_DATA:158,INVALID_CLASS_HASH:159,INVALID_ID:160,UNKNOWN_ERROR:163},Ho=class extends Error{name;constructor(e){super(e),Object.defineProperty(this,"name",{value:new.target.name,enumerable:!1,configurable:!0}),function(e,t){const{setPrototypeOf:r}=Object;r?r(e,t):e.__proto__=t}(this,new.target.prototype),function(e,t=e.constructor){const{captureStackTrace:r}=Error;r&&r(e,t)}(this)}},$o=class extends Ho{},Wo=class extends $o{constructor(e,t,r){super(`RPC: ${t} with params ${qe(r,null,2)}\n\n      ${e.code}: ${e.message}: ${qe(e.data)}`),this.baseError=e,this.request={method:t,params:r}}request;get code(){return this.baseError.code}isType(e){return Vo[e]===this.code}},Ko=class extends $o{constructor(e){super(e),this.name="TimeoutError"}},qo=class extends $o{constructor(e){super(e),this.name="WebSocketNotConnectedError"}},Go={};d(Go,{ethRandomPrivateKey:()=>Qo,validateAndParseEthAddress:()=>Zo});var Yo=r(8510);function Qo(){return L(M(Yo.secp256k1.utils.randomPrivateKey()))}function Zo(e){gt(e,F,2n**160n-1n,"Ethereum Address ");const t=N(O(lt(e)).padStart(40,"0"));return Ye(Boolean(t.match(/^(0x)?[0-9a-f]{40}$/)),"Invalid Ethereum Address Format"),t}var Xo="undefined"!=typeof globalThis&&globalThis.fetch.bind(globalThis)||"undefined"!=typeof window&&window.fetch.bind(window)||void 0!==r.g&&r.g.fetch.bind(r.g)||(()=>{throw new $o("'fetch()' not detected, use the 'baseFetch' constructor parameter to set it")}),Jo={};function ei(e){return new Promise(t=>{setTimeout(t,e)})}function ti(e){const t={...e};return delete t.sierra_program_debug_info,t.abi=no(qe(e.abi)),t.sierra_program=no(qe(e.sierra_program)),t.sierra_program=So(t.sierra_program),t}function ri(e){const t=ot(e)?We(e):e;return Uo(e)?ti(t):{...t,..."program"in t&&{program:So(t.program)}}}d(Jo,{Block:()=>ai,createSierraContractClass:()=>ti,getDefaultNodeUrl:()=>ni,getDefaultNodes:()=>oi,getSupportedRpcVersions:()=>ii,parseContract:()=>ri,validBlockTags:()=>si,wait:()=>ei});var ni=(e,t=!1,r)=>{t||pe.info("Using default public node url, please provide nodeUrl in provider options!");const n=oi(r??he.get("rpcVersion"))[e??oe.SN_SEPOLIA];return n[Math.floor(Math.random()*n.length)]};function oi(e){const t={...le};return Object.keys(t).forEach(function(r,n){t[r]=t[r].map(t=>`${t}${vo(e)}`)}),t}function ii(){return[...new Set(Object.values(ae))]}var si=Object.values(Ee),ai=class{hash=null;number=null;tag=null;setIdentifier(e){if(ot(e))if(zt(e))this.number=parseInt(e,10);else if(st(e))this.hash=e;else{if(!si.includes(e))throw TypeError(`Block identifier unmanaged: ${e}`);this.tag=e}else nt(e)?this.hash=lt(e):tt(e)?this.number=e:this.tag=Ee.PENDING;if(tt(this.number)&&this.number<0)throw TypeError(`Block number (${this.number}) can't be negative`)}constructor(e){this.setIdentifier(e)}get queryIdentifier(){return null!==this.number?`blockNumber=${this.number}`:null!==this.hash?`blockHash=${this.hash}`:`blockNumber=${this.tag}`}get identifier(){return null!==this.number?{block_number:this.number}:null!==this.hash?{block_hash:this.hash}:this.tag}set identifier(e){this.setIdentifier(e)}valueOf=()=>this.number;toString=()=>this.hash},ci={};d(ci,{buildUDCCall:()=>fi,fromCallsToExecuteCalldata:()=>ui,fromCallsToExecuteCalldata_cairo1:()=>di,getExecuteCalldata:()=>hi,getVersionsByType:()=>pi,transformCallsToMulticallArrays:()=>li});var li=e=>{const t=[],r=[];return e.forEach(e=>{const n=pn.compile(e.calldata||[]);t.push({to:at(e.contractAddress).toString(10),selector:at(Ct(e.entrypoint)).toString(10),data_offset:r.length.toString(),data_len:n.length.toString()}),r.push(...n)}),{callArray:t,calldata:pn.compile({calldata:r})}},ui=e=>{const{callArray:t,calldata:r}=li(e);return[...pn.compile({callArray:t}),...r]},di=e=>{const t=e.map(e=>({contractAddress:e.contractAddress,entrypoint:e.entrypoint,calldata:Array.isArray(e.calldata)&&"__compiled__"in e.calldata?e.calldata:pn.compile(e.calldata)}));return pn.compile({orderCalls:t})},hi=(e,t="0")=>"1"===t?di(e):ui(e);function fi(e,t){const r=[].concat(e).map(e=>{const{classHash:r,salt:n,unique:o=!0,constructorCalldata:i=[]}=e,s=pn.compile(i),a=n??Io();return{call:{contractAddress:Z.ADDRESS,entrypoint:Z.ENTRYPOINT,calldata:[r,a,Et(o),s.length,...s]},address:to(o?wn.pedersen(t,a):a,r,s,o?Z.ADDRESS:0)}});return{calls:r.map(e=>e.call),addresses:r.map(e=>e.address)}}function pi(e){return"fee"===e?{v1:Se.F1,v2:Se.F2,v3:Se.F3}:{v1:Se.V1,v2:Se.V2,v3:Se.V3}}var gi={headers:{"Content-Type":"application/json"},blockIdentifier:Ee.PENDING,retries:200},yi=class{id="RPC071";channelSpecVersion=ae.v0_7_1;nodeUrl;headers;requestId;blockIdentifier;retries;waitMode;chainId;specVersion;transactionRetryIntervalFallback;batchClient;baseFetch;constructor(e){const{baseFetch:t,batch:r,blockIdentifier:n,chainId:o,headers:i,nodeUrl:s,retries:a,specVersion:c,transactionRetryIntervalFallback:l,waitMode:u}=e||{};Object.values(oe).includes(s)?this.nodeUrl=ni(s,e?.default,this.channelSpecVersion):this.nodeUrl=s||ni(void 0,e?.default,this.channelSpecVersion),this.baseFetch=t||he.get("fetch")||Xo,this.blockIdentifier=n??gi.blockIdentifier,this.chainId=o,this.headers={...gi.headers,...i},this.retries=a??gi.retries,this.specVersion=c,this.transactionRetryIntervalFallback=l,this.waitMode=u??!1,this.requestId=0,"number"==typeof r&&(this.batchClient=new Ge({nodeUrl:this.nodeUrl,headers:this.headers,interval:r,baseFetch:this.baseFetch})),pe.debug("Using Channel",this.id)}readSpecVersion(){return this.specVersion}get transactionRetryIntervalDefault(){return this.transactionRetryIntervalFallback??5e3}setChainId(e){this.chainId=e}fetch(e,t,r=0){const n={id:r,jsonrpc:"2.0",method:e,...t&&{params:t}};return this.baseFetch(this.nodeUrl,{method:"POST",body:qe(n),headers:this.headers})}errorHandler(e,t,r,n){if(r)throw new Wo(r,e,t);if(n instanceof $o)throw n;if(n)throw Error(n.message)}async fetchEndpoint(e,t){try{if(this.batchClient){const{error:r,result:n}=await this.batchClient.fetch(e,t,this.requestId+=1);return this.errorHandler(e,t,r),n}const r=await this.fetch(e,t,this.requestId+=1),{error:n,result:o}=await r.json();return this.errorHandler(e,t,n),o}catch(r){throw this.errorHandler(e,t,r?.response?.data,r),r}}async getChainId(){return this.chainId??=await this.fetchEndpoint("starknet_chainId"),this.chainId}getSpecVersion(){return this.fetchEndpoint("starknet_specVersion")}async setUpSpecVersion(){if(!this.specVersion){const e=await this.fetchEndpoint("starknet_specVersion");if(mo(this.channelSpecVersion,e)||pe.error(de.channelVersionMismatch,{channelId:this.id,channelSpecVersion:this.channelSpecVersion,nodeSpecVersion:this.specVersion}),!bo(e))throw new $o(`${de.unsupportedSpecVersion}, channelId: ${this.id}`);this.specVersion=e}return this.specVersion}getNonceForAddress(e,t=this.blockIdentifier){const r=lt(e),n=new ai(t).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:r,block_id:n})}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(e=this.blockIdentifier){const t=new ai(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:t})}getBlockWithTxs(e=this.blockIdentifier){const t=new ai(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:t})}getBlockWithReceipts(e=this.blockIdentifier){const t=new ai(e).identifier;return this.fetchEndpoint("starknet_getBlockWithReceipts",{block_id:t})}getBlockStateUpdate(e=this.blockIdentifier){const t=new ai(e).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:t})}getBlockTransactionsTraces(e=this.blockIdentifier){const t=new ai(e).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:t})}getBlockTransactionCount(e=this.blockIdentifier){const t=new ai(e).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:t})}getTransactionByHash(e){const t=lt(e);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:t})}getTransactionByBlockIdAndIndex(e,t){const r=new ai(e).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:r,index:t})}getTransactionReceipt(e){const t=lt(e);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:t})}getTransactionTrace(e){const t=lt(e);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:t})}getTransactionStatus(e){const t=lt(e);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:t})}simulateTransaction(e,t={}){const{blockIdentifier:r=this.blockIdentifier,skipValidate:n=!0,skipFeeCharge:o=!0}=t,i=new ai(r).identifier,s=[];return n&&s.push(b.ESimulationFlag.SKIP_VALIDATE),o&&s.push(b.ESimulationFlag.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:i,transactions:e.map(e=>this.buildTransaction(e)),simulation_flags:s})}async waitForTransaction(e,t){const r=lt(e);let{retries:n}=this,o=!1,i=!1;const s=t?.retryInterval??this.transactionRetryIntervalDefault,a=t?.errorStates??[b.ETransactionStatus.REJECTED],c=t?.successStates??[b.ETransactionExecutionStatus.SUCCEEDED,b.ETransactionStatus.ACCEPTED_ON_L2,b.ETransactionStatus.ACCEPTED_ON_L1];let l;for(;!o;){await ei(s);try{l=await this.getTransactionStatus(r);const e=l.execution_status,t=l.finality_status;if(!t)throw new Error("waiting for transaction status");if(a.includes(e)||a.includes(t)){const r=`${e}: ${t}`,n=new Error(r);throw n.response=l,i=!0,n}(c.includes(e)||c.includes(t))&&(o=!0)}catch(e){if(e instanceof Error&&i)throw e;if(n<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}n-=1}let u=null;for(;null===u;){try{u=await this.getTransactionReceipt(r)}catch(e){if(n<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}n-=1,await ei(s)}return u}getStorageAt(e,t,r=this.blockIdentifier){const n=lt(e),o=dt(t),i=new ai(r).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:n,key:o,block_id:i})}getClassHashAt(e,t=this.blockIdentifier){const r=lt(e),n=new ai(t).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:n,contract_address:r})}getClass(e,t=this.blockIdentifier){const r=lt(e),n=new ai(t).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:r,block_id:n})}getClassAt(e,t=this.blockIdentifier){const r=lt(e),n=new ai(t).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:n,contract_address:r})}async getEstimateFee(e,{blockIdentifier:t=this.blockIdentifier,skipValidate:r=!0}){const n=new ai(t).identifier,o={simulation_flags:r?[b.ESimulationFlag.SKIP_VALIDATE]:[]};return this.fetchEndpoint("starknet_estimateFee",{request:e.map(e=>this.buildTransaction(e,"fee")),block_id:n,...o})}async invoke(e,t){let r;return yo(t)?(r=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{type:b.ETransactionType.INVOKE,sender_address:e.contractAddress,calldata:pn.toHex(e.calldata),version:b.ETransactionVersion.V3,signature:Mo(e.signature),nonce:lt(t.nonce),resource_bounds:t.resourceBounds,tip:lt(t.tip),paymaster_data:t.paymasterData.map(e=>lt(e)),account_deployment_data:t.accountDeploymentData.map(e=>lt(e)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode}}),Qe(!t.maxFee,()=>{pe.warn(de.maxFeeInV3,{type:b.ETransactionType.INVOKE})})):(r=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{sender_address:e.contractAddress,calldata:pn.toHex(e.calldata),type:b.ETransactionType.INVOKE,max_fee:lt(t.maxFee||0),version:b.ETransactionVersion.V1,signature:Mo(e.signature),nonce:lt(t.nonce)}}),pe.warn(de.legacyTxWarningMessage,{version:b.ETransactionVersion.V1,type:b.ETransactionType.INVOKE})),this.waitMode?this.waitForTransaction((await r).transaction_hash):r}async declare({contract:e,signature:t,senderAddress:r,compiledClassHash:n},o){let i;if(Uo(e)||yo(o))if(Uo(e)&&!yo(o))i=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:b.ETransactionType.DECLARE,contract_class:{sierra_program:xo(e.sierra_program),contract_class_version:e.contract_class_version,entry_points_by_type:e.entry_points_by_type,abi:e.abi},compiled_class_hash:n||"",version:b.ETransactionVersion.V2,max_fee:lt(o.maxFee||0),signature:Mo(t),sender_address:r,nonce:lt(o.nonce)}}),pe.warn(de.legacyTxWarningMessage,{version:b.ETransactionVersion.V2,type:b.ETransactionType.DECLARE});else{if(!Uo(e)||!yo(o))throw Error("declare unspotted parameters");i=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:b.ETransactionType.DECLARE,sender_address:r,compiled_class_hash:n||"",version:b.ETransactionVersion.V3,signature:Mo(t),nonce:lt(o.nonce),contract_class:{sierra_program:xo(e.sierra_program),contract_class_version:e.contract_class_version,entry_points_by_type:e.entry_points_by_type,abi:e.abi},resource_bounds:o.resourceBounds,tip:lt(o.tip),paymaster_data:o.paymasterData.map(e=>lt(e)),account_deployment_data:o.accountDeploymentData.map(e=>lt(e)),nonce_data_availability_mode:o.nonceDataAvailabilityMode,fee_data_availability_mode:o.feeDataAvailabilityMode}}),Qe(!o.maxFee,()=>{pe.warn(de.maxFeeInV3,{type:b.ETransactionType.DECLARE})})}else i=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:b.ETransactionType.DECLARE,contract_class:{program:e.program,entry_points_by_type:e.entry_points_by_type,abi:e.abi},version:b.ETransactionVersion.V1,max_fee:lt(o.maxFee||0),signature:Mo(t),sender_address:r,nonce:lt(o.nonce)}}),pe.warn(de.legacyTxWarningMessage,{version:b.ETransactionVersion.V1,type:b.ETransactionType.DECLARE});return this.waitMode?this.waitForTransaction((await i).transaction_hash):i}async deployAccount({classHash:e,constructorCalldata:t,addressSalt:r,signature:n},o){let i;return yo(o)?(i=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{type:b.ETransactionType.DEPLOY_ACCOUNT,version:b.ETransactionVersion.V3,signature:Mo(n),nonce:lt(o.nonce),contract_address_salt:lt(r||0),constructor_calldata:pn.toHex(t||[]),class_hash:lt(e),resource_bounds:o.resourceBounds,tip:lt(o.tip),paymaster_data:o.paymasterData.map(e=>lt(e)),nonce_data_availability_mode:o.nonceDataAvailabilityMode,fee_data_availability_mode:o.feeDataAvailabilityMode}}),Qe(!o.maxFee,()=>{pe.warn(de.maxFeeInV3,{type:b.ETransactionType.DEPLOY_ACCOUNT})})):(i=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{constructor_calldata:pn.toHex(t||[]),class_hash:lt(e),contract_address_salt:lt(r||0),type:b.ETransactionType.DEPLOY_ACCOUNT,max_fee:lt(o.maxFee||0),version:b.ETransactionVersion.V1,signature:Mo(n),nonce:lt(o.nonce)}}),pe.warn(de.legacyTxWarningMessage,{version:b.ETransactionVersion.V1,type:b.ETransactionType.DEPLOY_ACCOUNT})),this.waitMode?this.waitForTransaction((await i).transaction_hash):i}callContract(e,t=this.blockIdentifier){const r=new ai(t).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:e.contractAddress,entry_point_selector:Ct(e.entrypoint),calldata:pn.toHex(e.calldata)},block_id:r})}estimateMessageFee(e,t=this.blockIdentifier){const{from_address:r,to_address:n,entry_point_selector:o,payload:i}=e,s={from_address:Zo(r),to_address:lt(n),entry_point_selector:Bt(o),payload:_t(i)},a=new ai(t).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:s,block_id:a})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(e){return this.fetchEndpoint("starknet_getEvents",{filter:e})}buildTransaction(e,t){const r=pi(t);let n;if(yo(e)?(n={signature:Mo(e.signature),nonce:lt(e.nonce),resource_bounds:e.resourceBounds,tip:lt(e.tip),paymaster_data:e.paymasterData.map(e=>lt(e)),nonce_data_availability_mode:e.nonceDataAvailabilityMode,fee_data_availability_mode:e.feeDataAvailabilityMode,account_deployment_data:e.accountDeploymentData.map(e=>lt(e))},Qe(!e.maxFee,()=>{pe.warn(de.maxFeeInV3,{type:e.type,versionType:t})})):(n={signature:Mo(e.signature),nonce:lt(e.nonce),max_fee:lt(e.maxFee||0)},pe.warn(de.legacyTxWarningMessage,{version:e.version,type:e.type})),e.type===be.INVOKE)return{type:b.ETransactionType.INVOKE,sender_address:e.contractAddress,calldata:pn.toHex(e.calldata),version:lt(e.version||r.v3),...n};if(e.type===be.DECLARE)return Uo(e.contract)?{type:e.type,contract_class:{...e.contract,sierra_program:xo(e.contract.sierra_program)},compiled_class_hash:e.compiledClassHash||"",sender_address:e.senderAddress,version:lt(e.version||r.v3),...n}:{type:e.type,contract_class:e.contract,sender_address:e.senderAddress,version:lt(e.version||r.v1),...n};if(e.type===be.DEPLOY_ACCOUNT){const{account_deployment_data:t,...o}=n;return{type:e.type,constructor_calldata:pn.toHex(e.constructorCalldata||[]),class_hash:lt(e.classHash),contract_address_salt:lt(e.addressSalt||0),version:lt(e.version||r.v3),...o}}throw Error("RPC buildTransaction received unknown TransactionType")}},mi={};d(mi,{RpcChannel:()=>wi});var bi={headers:{"Content-Type":"application/json"},blockIdentifier:Ee.PENDING,retries:200},wi=class{id="RPC081";channelSpecVersion=ae.v0_8_1;nodeUrl;headers;requestId;blockIdentifier;retries;waitMode;chainId;specVersion;transactionRetryIntervalFallback;batchClient;baseFetch;constructor(e){const{baseFetch:t,batch:r,blockIdentifier:n,chainId:o,headers:i,nodeUrl:s,retries:a,specVersion:c,transactionRetryIntervalFallback:l,waitMode:u}=e||{};Object.values(oe).includes(s)?this.nodeUrl=ni(s,e?.default,this.channelSpecVersion):this.nodeUrl=s||ni(void 0,e?.default,this.channelSpecVersion),this.baseFetch=t||he.get("fetch")||Xo,this.blockIdentifier=n??bi.blockIdentifier,this.chainId=o,this.headers={...bi.headers,...i},this.retries=a??bi.retries,this.specVersion=c,this.transactionRetryIntervalFallback=l,this.waitMode=u??!1,this.requestId=0,"number"==typeof r&&(this.batchClient=new Ge({nodeUrl:this.nodeUrl,headers:this.headers,interval:r,baseFetch:this.baseFetch})),pe.debug("Using Channel",this.id)}readSpecVersion(){return this.specVersion}get transactionRetryIntervalDefault(){return this.transactionRetryIntervalFallback??5e3}setChainId(e){this.chainId=e}fetch(e,t,r=0){const n={id:r,jsonrpc:"2.0",method:e,...t&&{params:t}};return this.baseFetch(this.nodeUrl,{method:"POST",body:qe(n),headers:this.headers})}errorHandler(e,t,r,n){if(r)throw new Wo(r,e,t);if(n instanceof $o)throw n;if(n)throw Error(n.message)}async fetchEndpoint(e,t){try{if(this.batchClient){const{error:r,result:n}=await this.batchClient.fetch(e,t,this.requestId+=1);return this.errorHandler(e,t,r),n}const r=await this.fetch(e,t,this.requestId+=1),{error:n,result:o}=await r.json();return this.errorHandler(e,t,n),o}catch(r){throw this.errorHandler(e,t,r?.response?.data,r),r}}async getChainId(){return this.chainId??=await this.fetchEndpoint("starknet_chainId"),this.chainId}getSpecVersion(){return this.fetchEndpoint("starknet_specVersion")}async setUpSpecVersion(){if(!this.specVersion){const e=await this.fetchEndpoint("starknet_specVersion");if(mo(this.channelSpecVersion,e)||pe.error(de.channelVersionMismatch,{channelId:this.id,channelSpecVersion:this.channelSpecVersion,nodeSpecVersion:this.specVersion}),!bo(e))throw new $o(`${de.unsupportedSpecVersion}, channelId: ${this.id}`);this.specVersion=e}return this.specVersion}getMessagesStatus(e){const t=lt(e);return this.fetchEndpoint("starknet_getMessagesStatus",{transaction_hash:t})}getStorageProof(e=[],t=[],r=[],n=this.blockIdentifier){const o=new ai(n).identifier,i=mt(e),s=mt(t);return this.fetchEndpoint("starknet_getStorageProof",{block_id:o,class_hashes:i,contract_addresses:s,contracts_storage_keys:r})}getCompiledCasm(e){const t=lt(e);return this.fetchEndpoint("starknet_getCompiledCasm",{class_hash:t})}getNonceForAddress(e,t=this.blockIdentifier){const r=lt(e),n=new ai(t).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:r,block_id:n})}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(e=this.blockIdentifier){const t=new ai(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:t})}getBlockWithTxs(e=this.blockIdentifier){const t=new ai(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:t})}getBlockWithReceipts(e=this.blockIdentifier){const t=new ai(e).identifier;return this.fetchEndpoint("starknet_getBlockWithReceipts",{block_id:t})}getBlockStateUpdate(e=this.blockIdentifier){const t=new ai(e).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:t})}getBlockTransactionsTraces(e=this.blockIdentifier){const t=new ai(e).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:t})}getBlockTransactionCount(e=this.blockIdentifier){const t=new ai(e).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:t})}getTransactionByHash(e){const t=lt(e);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:t})}getTransactionByBlockIdAndIndex(e,t){const r=new ai(e).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:r,index:t})}getTransactionReceipt(e){const t=lt(e);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:t})}getTransactionTrace(e){const t=lt(e);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:t})}getTransactionStatus(e){const t=lt(e);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:t})}simulateTransaction(e,t={}){const{blockIdentifier:r=this.blockIdentifier,skipValidate:n=!0,skipFeeCharge:o=!0}=t,i=new ai(r).identifier,s=[];return n&&s.push(w.ESimulationFlag.SKIP_VALIDATE),o&&s.push(w.ESimulationFlag.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:i,transactions:e.map(e=>this.buildTransaction(e)),simulation_flags:s})}async waitForTransaction(e,t){const r=lt(e);let{retries:n}=this,o=!1,i=!1;const s=t?.retryInterval??this.transactionRetryIntervalDefault,a=t?.errorStates??[w.ETransactionStatus.REJECTED],c=t?.successStates??[w.ETransactionExecutionStatus.SUCCEEDED,w.ETransactionStatus.ACCEPTED_ON_L2,w.ETransactionStatus.ACCEPTED_ON_L1];let l;for(;!o;){await ei(s);try{l=await this.getTransactionStatus(r);const e=l.execution_status,t=l.finality_status;if(!t)throw new Error("waiting for transaction status");if(a.includes(e)||a.includes(t)){const r=`${e}: ${t}`,n=new Error(r);throw n.response=l,i=!0,n}(c.includes(e)||c.includes(t))&&(o=!0)}catch(e){if(e instanceof Error&&i)throw e;if(n<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}n-=1}let u=null;for(;null===u;){try{u=await this.getTransactionReceipt(r)}catch(e){if(n<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}n-=1,await ei(s)}return u}getStorageAt(e,t,r=this.blockIdentifier){const n=lt(e),o=dt(t),i=new ai(r).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:n,key:o,block_id:i})}getClassHashAt(e,t=this.blockIdentifier){const r=lt(e),n=new ai(t).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:n,contract_address:r})}getClass(e,t=this.blockIdentifier){const r=lt(e),n=new ai(t).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:r,block_id:n})}getClassAt(e,t=this.blockIdentifier){const r=lt(e),n=new ai(t).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:n,contract_address:r})}async getEstimateFee(e,{blockIdentifier:t=this.blockIdentifier,skipValidate:r=!0}){const n=new ai(t).identifier,o={simulation_flags:r?[w.ESimulationFlag.SKIP_VALIDATE]:[]};return this.fetchEndpoint("starknet_estimateFee",{request:e.map(e=>this.buildTransaction(e,"fee")),block_id:n,...o})}async invoke(e,t){let r;if(!yo(t))throw Error(de.legacyTxRPC08Message);if(!Oe(t.resourceBounds))throw Error(de.SWOldV3);return r=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{type:w.ETransactionType.INVOKE,sender_address:e.contractAddress,calldata:pn.toHex(e.calldata),version:w.ETransactionVersion.V3,signature:Mo(e.signature),nonce:lt(t.nonce),resource_bounds:t.resourceBounds,tip:lt(t.tip),paymaster_data:t.paymasterData.map(e=>lt(e)),account_deployment_data:t.accountDeploymentData.map(e=>lt(e)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode}}),this.waitMode?this.waitForTransaction((await r).transaction_hash):r}async declare({contract:e,signature:t,senderAddress:r,compiledClassHash:n},o){let i;if(!Uo(e)||!yo(o))throw Error(de.legacyTxRPC08Message);if(!Oe(o.resourceBounds))throw Error(de.SWOldV3);return i=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:w.ETransactionType.DECLARE,sender_address:r,compiled_class_hash:n||"",version:w.ETransactionVersion.V3,signature:Mo(t),nonce:lt(o.nonce),contract_class:{sierra_program:xo(e.sierra_program),contract_class_version:e.contract_class_version,entry_points_by_type:e.entry_points_by_type,abi:e.abi},resource_bounds:o.resourceBounds,tip:lt(o.tip),paymaster_data:o.paymasterData.map(e=>lt(e)),account_deployment_data:o.accountDeploymentData.map(e=>lt(e)),nonce_data_availability_mode:o.nonceDataAvailabilityMode,fee_data_availability_mode:o.feeDataAvailabilityMode}}),this.waitMode?this.waitForTransaction((await i).transaction_hash):i}async deployAccount({classHash:e,constructorCalldata:t,addressSalt:r,signature:n},o){let i;if(!yo(o))throw Error(de.legacyTxRPC08Message);if(!Oe(o.resourceBounds))throw Error(de.SWOldV3);return i=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{type:w.ETransactionType.DEPLOY_ACCOUNT,version:w.ETransactionVersion.V3,signature:Mo(n),nonce:lt(o.nonce),contract_address_salt:lt(r||0),constructor_calldata:pn.toHex(t||[]),class_hash:lt(e),resource_bounds:o.resourceBounds,tip:lt(o.tip),paymaster_data:o.paymasterData.map(e=>lt(e)),nonce_data_availability_mode:o.nonceDataAvailabilityMode,fee_data_availability_mode:o.feeDataAvailabilityMode}}),this.waitMode?this.waitForTransaction((await i).transaction_hash):i}callContract(e,t=this.blockIdentifier){const r=new ai(t).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:e.contractAddress,entry_point_selector:Ct(e.entrypoint),calldata:pn.toHex(e.calldata)},block_id:r})}estimateMessageFee(e,t=this.blockIdentifier){const{from_address:r,to_address:n,entry_point_selector:o,payload:i}=e,s={from_address:Zo(r),to_address:lt(n),entry_point_selector:Bt(o),payload:_t(i)},a=new ai(t).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:s,block_id:a})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(e){return this.fetchEndpoint("starknet_getEvents",{filter:e})}buildTransaction(e,t){const r=pi(t);let n;if(!yo(e))throw Error("v0,v1,v2 tx are not supported on RPC 0.8");if(n={signature:Mo(e.signature),nonce:lt(e.nonce),resource_bounds:e.resourceBounds,tip:lt(e.tip),paymaster_data:e.paymasterData.map(e=>lt(e)),nonce_data_availability_mode:e.nonceDataAvailabilityMode,fee_data_availability_mode:e.feeDataAvailabilityMode,account_deployment_data:e.accountDeploymentData.map(e=>lt(e))},e.type===be.INVOKE)return{type:w.ETransactionType.INVOKE,sender_address:e.contractAddress,calldata:pn.toHex(e.calldata),version:lt(e.version||r.v3),...n};if(e.type===be.DECLARE){if(!Uo(e.contract))throw pe.error("Cairo 0 -  non Sierra v1 tx are not supported"),Error("Declaring non Sierra contract using RPC 0.8");return{type:e.type,contract_class:{...e.contract,sierra_program:xo(e.contract.sierra_program)},compiled_class_hash:e.compiledClassHash||"",sender_address:e.senderAddress,version:lt(e.version||r.v3),...n}}if(e.type===be.DEPLOY_ACCOUNT){const{account_deployment_data:t,...o}=n;return{type:e.type,constructor_calldata:pn.toHex(e.constructorCalldata||[]),class_hash:lt(e.classHash),contract_address_salt:lt(e.addressSalt||0),version:lt(e.version||r.v3),...o}}throw Error("RPC buildTransaction received unknown TransactionType")}},vi=class{listeners={};on(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)}off(e,t){this.listeners[e]&&(this.listeners[e]=this.listeners[e].filter(e=>e!==t))}emit(e,t){this.listeners[e]&&this.listeners[e].forEach(e=>e(t))}clear(){this.listeners={}}},_i="undefined"!=typeof WebSocket&&WebSocket||"undefined"!=typeof globalThis&&globalThis.WebSocket||"undefined"!=typeof window&&window.WebSocket&&window.WebSocket.bind(window)||void 0!==r.g&&r.g.WebSocket||class{constructor(){throw new $o("WebSocket module not detected, use the 'websocket' constructor parameter to set a compatible connection")}},Ei=class{channel;method;params;id;events=new vi;buffer=[];maxBufferSize;handler=null;_isClosed=!1;constructor(e,t,r,n,o){this.channel=e,this.method=t,this.params=r,this.id=n,this.maxBufferSize=o}get isClosed(){return this._isClosed}_handleEvent(e){if(this.handler)this.handler(e);else{if(this.buffer.length>=this.maxBufferSize){const e=this.buffer.shift();pe.warn(`Subscription ${this.id}: Buffer full. Dropping oldest event:`,e)}this.buffer.push(e)}}on(e){if(this.handler)throw new Error("A handler is already attached to this subscription.");for(this.handler=e;this.buffer.length>0;){const e=this.buffer.shift();e&&this.handler(e)}}async unsubscribe(){if(this._isClosed)return!0;const e=await this.channel.unsubscribe(this.id);return e&&(this._isClosed=!0,this.channel.removeSubscription(this.id),this.events.emit("unsubscribe",void 0),this.events.clear()),e}},Ai=class{nodeUrl;websocket;WsImplementation;activeSubscriptions=new Map;maxBufferSize;autoReconnect;reconnectOptions;requestTimeout;isReconnecting=!1;reconnectAttempts=0;userInitiatedClose=!1;reconnectTimeoutId=null;requestQueue=[];events=new vi;openListener=e=>this.events.emit("open",e);closeListener=this.onCloseProxy.bind(this);messageListener=this.onMessageProxy.bind(this);errorListener=e=>this.events.emit("error",e);sendId=0;constructor(e){this.nodeUrl=e.nodeUrl,this.maxBufferSize=e.maxBufferSize??1e3,this.autoReconnect=e.autoReconnect??!0,this.reconnectOptions={retries:e.reconnectOptions?.retries??5,delay:e.reconnectOptions?.delay??2e3},this.requestTimeout=e.requestTimeout??6e4,this.WsImplementation=e.websocket||he.get("websocket")||_i,this.websocket=new this.WsImplementation(this.nodeUrl),this.websocket.addEventListener("open",this.openListener),this.websocket.addEventListener("close",this.closeListener),this.websocket.addEventListener("message",this.messageListener),this.websocket.addEventListener("error",this.errorListener)}idResolver(e){return e||this.sendId++}send(e,t,r){if(!this.isConnected())throw new qo("WebSocketChannel.send() failed due to socket being disconnected");const n=this.idResolver(r),o={id:n,jsonrpc:"2.0",method:e,...t&&{params:t}};return this.websocket.send(qe(o)),n}sendReceive(e,t){if(this.isReconnecting||!this.isConnected()&&this.autoReconnect&&!this.userInitiatedClose)return pe.info(`WebSocket: Connection unavailable, queueing request: ${e}`),new Promise((r,n)=>{this.requestQueue.push({method:e,params:t,resolve:r,reject:n})});const r=this.send(e,t);return new Promise((t,n)=>{let o;if(!this.websocket||this.websocket.readyState!==_i.OPEN)return void n(new qo("WebSocket not available or not connected."));const i=a=>{if(!ot(a.data))return void pe.warn("WebSocket received non-string message data:",a.data);const c=JSON.parse(a.data);c.id===r&&(clearTimeout(o),this.websocket.removeEventListener("message",i),this.websocket.removeEventListener("error",s),"result"in c?t(c.result):n(new Error(`Error on ${e} (id: ${r}): ${JSON.stringify(c.error)}`)))},s=t=>{clearTimeout(o),this.websocket.removeEventListener("message",i),this.websocket.removeEventListener("error",s),n(new Error(`WebSocket error during ${e} (id: ${r}): ${t.type||"Unknown error"}`))};this.websocket.addEventListener("message",i),this.websocket.addEventListener("error",s),o=setTimeout(()=>{this.websocket.removeEventListener("message",i),this.websocket.removeEventListener("error",s),n(new Ko(`Request ${e} (id: ${r}) timed out after ${this.requestTimeout}ms`))},this.requestTimeout)})}isConnected(){return this.websocket.readyState===_i.OPEN}async waitForConnection(){return this.websocket.readyState!==_i.OPEN?new Promise((e,t)=>{this.websocket&&(this.websocket.onopen=()=>e(this.websocket.readyState),this.websocket.onerror=e=>t(e))}):this.websocket.readyState}disconnect(e,t){this.reconnectTimeoutId&&(clearTimeout(this.reconnectTimeoutId),this.reconnectTimeoutId=null),this.websocket.close(e,t),this.userInitiatedClose=!0}async waitForDisconnection(){return this.websocket.readyState!==_i.CLOSED?new Promise((e,t)=>{this.websocket&&(this.websocket.onclose=()=>e(this.websocket.readyState),this.websocket.onerror=t)}):this.websocket.readyState}async unsubscribe(e){const t=await this.sendReceive("starknet_unsubscribe",{subscription_id:e});return t&&this.events.emit("unsubscribe",e),t}waitForUnsubscription(e){return new Promise(t=>{const r=n=>{n===e&&(this.events.off("unsubscribe",r),t())};this.events.on("unsubscribe",r)})}reconnect(){this.userInitiatedClose=!1,this.websocket=new this.WsImplementation(this.nodeUrl),this.websocket.addEventListener("open",this.openListener),this.websocket.addEventListener("close",this.closeListener),this.websocket.addEventListener("message",this.messageListener),this.websocket.addEventListener("error",this.errorListener)}_processRequestQueue(){for(pe.info(`WebSocket: Processing ${this.requestQueue.length} queued requests.`);this.requestQueue.length>0;){const{method:e,params:t,resolve:r,reject:n}=this.requestQueue.shift();this.sendReceive(e,t).then(r).catch(n)}}async _restoreSubscriptions(){const e=Array.from(this.activeSubscriptions.values());this.activeSubscriptions.clear();const t=e.map(async e=>{try{const t=await this.sendReceive(e.method,e.params);e.id=t,this.activeSubscriptions.set(t,e),pe.info(`Subscription ${e.method} restored with new ID: ${t}`)}catch(t){pe.error(`Failed to restore subscription ${e.method}:`,t)}});await Promise.all(t)}_startReconnect(){if(this.isReconnecting||!this.autoReconnect)return;this.isReconnecting=!0,this.reconnectAttempts=0;const e=()=>{if(this.reconnectAttempts>=this.reconnectOptions.retries)return pe.error("WebSocket: Maximum reconnection retries reached. Giving up."),void(this.isReconnecting=!1);this.reconnectAttempts+=1,pe.info(`WebSocket: Connection lost. Attempting to reconnect... (${this.reconnectAttempts}/${this.reconnectOptions.retries})`),this.reconnect(),this.websocket.onopen=async()=>{pe.info("WebSocket: Reconnection successful."),this.isReconnecting=!1,this.reconnectAttempts=0,await this._restoreSubscriptions(),this._processRequestQueue(),this.events.emit("open",new Event("open"))},this.websocket.onerror=()=>{const t=this.reconnectOptions.delay*2**(this.reconnectAttempts-1);pe.info(`WebSocket: Reconnect attempt failed. Retrying in ${t}ms.`),this.reconnectTimeoutId=setTimeout(e,t)}};e()}onCloseProxy(e){this.websocket.removeEventListener("open",this.openListener),this.websocket.removeEventListener("close",this.closeListener),this.websocket.removeEventListener("message",this.messageListener),this.websocket.removeEventListener("error",this.errorListener),this.events.emit("close",e),this.userInitiatedClose||this._startReconnect()}onMessageProxy(e){let t;try{t=JSON.parse(e.data)}catch(t){return void pe.error(`WebSocketChannel: Error parsing incoming message: ${e.data}, Error: ${t}`)}if(t.method&&it(t.params)&&"subscription_id"in t.params){const{result:e,subscription_id:r}=t.params,n=this.activeSubscriptions.get(r);n?n._handleEvent(e):pe.warn(`WebSocketChannel: Received event for untracked subscription ID: ${r}.`)}pe.debug("onMessageProxy:",e.data),this.events.emit("message",e)}async subscribeNewHeads(e){const t="starknet_subscribeNewHeads",r={block_id:e?new ai(e).identifier:void 0},n=await this.sendReceive(t,r),o=new Ei(this,t,r,n,this.maxBufferSize);return this.activeSubscriptions.set(n,o),o}async subscribeEvents(e,t,r){const n="starknet_subscribeEvents",o={from_address:void 0!==e?lt(e):void 0,keys:t,block_id:r?new ai(r).identifier:void 0},i=await this.sendReceive(n,o),s=new Ei(this,n,o,i,this.maxBufferSize);return this.activeSubscriptions.set(i,s),s}async subscribeTransactionStatus(e,t){const r="starknet_subscribeTransactionStatus",n={transaction_hash:lt(e),block_id:t?new ai(t).identifier:void 0},o=await this.sendReceive(r,n),i=new Ei(this,r,n,o,this.maxBufferSize);return this.activeSubscriptions.set(o,i),i}async subscribePendingTransaction(e,t){const r="starknet_subscribePendingTransactions",n={transaction_details:e,sender_address:t&&mt(t)},o=await this.sendReceive(r,n),i=new Ei(this,r,n,o,this.maxBufferSize);return this.activeSubscriptions.set(o,i),i}removeSubscription(e){this.activeSubscriptions.delete(e)}on(e,t){this.events.on(e,t)}off(e,t){this.events.off(e,t)}},Si=class{margin;constructor(e){this.margin=e}estimatedFeeToMaxFee(e){return Oo(e,this.margin?.maxFee)}estimateFeeToBounds(e){return No(e,this.margin?.bounds)}parseGetBlockResponse(e){return e}parseTransactionReceipt(e){return e}parseFeeEstimateResponse(e){const t=e[0];return{overall_fee:at(t.overall_fee),unit:t.unit,l1_gas_consumed:ct(t.l1_gas_consumed)??ct(t.gas_consumed)??0n,l1_gas_price:ct(t.l1_gas_price)??ct(t.gas_price)??0n,l2_gas_consumed:ct(t.l2_gas_consumed)??void 0,l2_gas_price:ct(t.l2_gas_price)??void 0,l1_data_gas_consumed:ct(t.l1_data_gas_consumed)??ct(t.data_gas_consumed)??0n,l1_data_gas_price:ct(t.l1_data_gas_price)??ct(t.gas_price)??0n,suggestedMaxFee:this.estimatedFeeToMaxFee(t.overall_fee),resourceBounds:this.estimateFeeToBounds(t)}}parseFeeEstimateBulkResponse(e){return e.map(e=>({overall_fee:at(e.overall_fee),unit:e.unit,l1_gas_consumed:ct(e.l1_gas_consumed)??ct(e.gas_consumed)??0n,l1_gas_price:ct(e.l1_gas_price)??ct(e.gas_price)??0n,l2_gas_consumed:ct(e.l2_gas_consumed)??void 0,l2_gas_price:ct(e.l2_gas_price)??void 0,l1_data_gas_consumed:ct(e.l1_data_gas_consumed)??ct(e.data_gas_consumed)??0n,l1_data_gas_price:ct(e.l1_data_gas_price)??ct(e.gas_price)??0n,suggestedMaxFee:this.estimatedFeeToMaxFee(e.overall_fee),resourceBounds:this.estimateFeeToBounds(e)}))}parseSimulateTransactionResponse(e){return e.map(e=>({...e,suggestedMaxFee:this.estimatedFeeToMaxFee(e.fee_estimation.overall_fee),resourceBounds:this.estimateFeeToBounds(e.fee_estimation)}))}parseContractClassResponse(e){return{...e,abi:ot(e.abi)?JSON.parse(e.abi):e.abi}}parseL1GasPriceResponse(e){return e.l1_gas_price.price_in_wei}},xi=class e{statusReceipt;value;constructor(t){[this.statusReceipt,this.value]=e.isSuccess(t)?["success",t]:e.isReverted(t)?["reverted",t]:["error",new Error("Unknown response type")];for(const[e]of Object.entries(this))Object.defineProperty(this,e,{enumerable:!1});for(const[e,r]of Object.entries(t))Object.defineProperty(this,e,{enumerable:!0,writable:!1,value:r})}match(e){return this.statusReceipt in e?e[this.statusReceipt](this.value):e._()}isSuccess(){return"success"===this.statusReceipt}isReverted(){return"reverted"===this.statusReceipt}isError(){return"error"===this.statusReceipt}static isSuccess(e){return e.execution_status===ve.SUCCEEDED}static isReverted(e){return e.execution_status===ve.REVERTED}},Ii={};d(Ii,{encodeData:()=>Vi,encodeType:()=>Ui,encodeValue:()=>zi,getDependencies:()=>Ri,getMessageHash:()=>$i,getStructHash:()=>Hi,getTypeHash:()=>Fi,isMerkleTreeType:()=>ji,prepareSelector:()=>Pi,validateTypedData:()=>Li,verifyMessage:()=>Wi});var Ti={};d(Ti,{MerkleTree:()=>ki,proofMerklePath:()=>Mi});var ki=class e{leaves;branches=[];root;hashMethod;constructor(e,t=Qn){this.hashMethod=t,this.leaves=e,this.root=this.build(e)}build(t){if(1===t.length)return t[0];t.length!==this.leaves.length&&this.branches.push(t);const r=[];for(let n=0;n<t.length;n+=2)n+1===t.length?r.push(e.hash(t[n],"0x0",this.hashMethod)):r.push(e.hash(t[n],t[n+1],this.hashMethod));return this.build(r)}static hash(e,t,r=Qn){const[n,o]=[BigInt(e),BigInt(t)].sort((e,t)=>e>=t?1:-1);return r(n,o)}getProof(t,r=this.leaves,n=[]){const o=r.indexOf(t);if(-1===o)throw new Error("leaf not found");if(1===r.length)return n;const i=o%2==0,s=(i?r[o+1]:r[o-1])??"0x0",a=[...n,s],c=this.leaves.length===r.length?-1:this.branches.findIndex(e=>e.length===r.length),l=this.branches[c+1]??[this.root];return this.getProof(e.hash(i?t:s,i?s:t,this.hashMethod),l,a)}};function Mi(e,t,r,n=Qn){if(0===r.length)return e===t;const[o,...i]=r;return Mi(e,ki.hash(t,o,n),i,n)}var Oi={u256:JSON.parse('[{ "name": "low", "type": "u128" }, { "name": "high", "type": "u128" }]'),TokenAmount:JSON.parse('[{ "name": "token_address", "type": "ContractAddress" }, { "name": "amount", "type": "u256" }]'),NftId:JSON.parse('[{ "name": "collection_address", "type": "ContractAddress" }, { "name": "token_id", "type": "u256" }]')},Ni={[ze.TypedDataRevision.ACTIVE]:{domain:"StarknetDomain",hashMethod:eo,hashMerkleMethod:Zn,escapeTypeString:e=>`"${e}"`,presetTypes:Oi},[ze.TypedDataRevision.LEGACY]:{domain:"StarkNetDomain",hashMethod:Jn,hashMerkleMethod:Qn,escapeTypeString:e=>e,presetTypes:{}}};function Di(e,t,{min:r,max:n}){const o=BigInt(e);Ye(o>=r&&o<=n,`${o} (${t}) is out of bounds [${r}, ${n}]`)}function Ci({types:e,domain:t}){return Ni[ze.TypedDataRevision.ACTIVE].domain in e&&t.revision?.toString()===ze.TypedDataRevision.ACTIVE?ze.TypedDataRevision.ACTIVE:Ni[ze.TypedDataRevision.LEGACY].domain in e&&(t.revision??ze.TypedDataRevision.LEGACY)===ze.TypedDataRevision.LEGACY?ze.TypedDataRevision.LEGACY:void 0}function Bi(e){try{return lt(e)}catch(t){if(ot(e))return lt(Kt(e));throw new Error(`Invalid BigNumberish: ${e}`)}}function Li(e){const t=e;return Boolean(t.message&&t.primaryType&&t.types&&Ci(t))}function Pi(e){return st(e)?e:Ct(e)}function ji(e){return"merkletree"===e.type}function Ri(e,t,r=[],n="",o=ze.TypedDataRevision.LEGACY){let i=[t];return"*"===t[t.length-1]?i=[t.slice(0,-1)]:o===ze.TypedDataRevision.ACTIVE&&("enum"===t?i=[n]:t.match(/^\(.*\)$/)&&(i=t.slice(1,-1).split(",").map(e=>"*"===e[e.length-1]?e.slice(0,-1):e))),i.filter(t=>!r.includes(t)&&e[t]).reduce((t,r)=>[...t,...[r,...e[r].reduce((t,r)=>[...t,...Ri(e,r.type,t,r.contains,o).filter(e=>!t.includes(e))],[])].filter(e=>!t.includes(e))],[])}function Ui(e,t,r=ze.TypedDataRevision.LEGACY){const n=r===ze.TypedDataRevision.ACTIVE?{...e,...Ni[r].presetTypes}:e,[o,...i]=Ri(n,t,void 0,void 0,r),s=o?[o,...i.sort()]:[],a=Ni[r].escapeTypeString;return s.map(e=>{const t=n[e].map(e=>{const t="enum"===e.type&&r===ze.TypedDataRevision.ACTIVE?e.contains:e.type,n=t.match(/^\(.*\)$/)?`(${t.slice(1,-1).split(",").map(e=>e?a(e):e).join(",")})`:a(t);return`${a(e.name)}:${n}`});return`${a(e)}(${t})`}).join("")}function Fi(e,t,r=ze.TypedDataRevision.LEGACY){return Ct(Ui(e,t,r))}function zi(e,t,r,n={},o=ze.TypedDataRevision.LEGACY){if(e[t])return[t,Hi(e,t,r,o)];if(Ni[o].presetTypes[t])return[t,Hi(Ni[o].presetTypes,t,r,o)];if(t.endsWith("*")){const n=r.map(r=>zi(e,t.slice(0,-1),r,void 0,o)[1]);return[t,Ni[o].hashMethod(n)]}switch(t){case"enum":if(o===ze.TypedDataRevision.ACTIVE){const[i,s]=Object.entries(r)[0],a=e[n.parent].find(e=>e.name===n.key),c=e[a.contains],l=c.find(e=>e.name===i),u=c.indexOf(l),d=l.type.slice(1,-1).split(",").map((t,r)=>{if(!t)return t;const n=s[r];return zi(e,t,n,void 0,o)[1]});return[t,Ni[o].hashMethod([u,...d])]}return[t,Bi(r)];case"merkletree":{const t=function(e,t){if(t.parent&&t.key){const r=e[t.parent].find(e=>e.name===t.key);if(!ji(r))throw new Error(`${t.key} is not a merkle tree`);if(r.contains.endsWith("*"))throw new Error(`Merkle tree contain property must not be an array but was given ${t.key}`);return r.contains}return"raw"}(e,n),i=r.map(r=>zi(e,t,r,void 0,o)[1]),{root:s}=new ki(i,Ni[o].hashMerkleMethod);return["felt",s]}case"selector":return["felt",Pi(r)];case"string":if(o===ze.TypedDataRevision.ACTIVE){const e=Qt(r),n=[e.data.length,...e.data,e.pending_word,e.pending_word_len];return[t,Ni[o].hashMethod(n)]}return[t,Bi(r)];case"i128":if(o===ze.TypedDataRevision.ACTIVE){const e=BigInt(r);return Di(e,t,Y),[t,Bi(e<0n?$+e:e)]}return[t,Bi(r)];case"timestamp":case"u128":return o===ze.TypedDataRevision.ACTIVE&&Di(r,t,Q),[t,Bi(r)];case"felt":case"shortstring":return o===ze.TypedDataRevision.ACTIVE&&Di(Bi(r),t,G),[t,Bi(r)];case"ClassHash":case"ContractAddress":return o===ze.TypedDataRevision.ACTIVE&&Di(r,t,G),[t,Bi(r)];case"bool":return o===ze.TypedDataRevision.ACTIVE&&Ye(rt(r),`Type mismatch for ${t} ${r}`),[t,Bi(r)];default:if(o===ze.TypedDataRevision.ACTIVE)throw new Error(`Unsupported type: ${t}`);return[t,Bi(r)]}}function Vi(e,t,r,n=ze.TypedDataRevision.LEGACY){const o=e[t]??Ni[n].presetTypes[t],[i,s]=o.reduce(([o,i],s)=>{if(void 0===r[s.name]||null===r[s.name]&&"enum"!==s.type)throw new Error(`Cannot encode data: missing data for '${s.name}'`);const a=r[s.name],c={parent:t,key:s.name},[l,u]=zi(e,s.type,a,c,n);return[[...o,l],[...i,u]]},[["felt"],[Fi(e,t,n)]]);return[i,s]}function Hi(e,t,r,n=ze.TypedDataRevision.LEGACY){return Ni[n].hashMethod(Vi(e,t,r,n)[1])}function $i(e,t){if(!Li(e))throw new Error("Typed data does not match JSON schema");const r=Ci(e),{domain:n,hashMethod:o}=Ni[r];return o([Kt("StarkNet Message"),Hi(e.types,n,e.domain,r),t,Hi(e.types,e.primaryType,e.message,r)])}function Wi(e,t,r,n){const o=Li(e);if(!It(e)&&!o)throw new Error("message has a wrong format.");if(o&&void 0===n)throw new Error("When providing a TypedData in message parameter, the accountAddress parameter has to be provided.");if(o&&!It(n))throw new Error("accountAddress shall be a BigNumberish");const i=o?$i(e,n):lt(e),s=Array.isArray(t)?new wn.Signature(BigInt(t[0]),BigInt(t[1])):t,a=lt(r);return wn.verify(s,i,a)}var Ki=class{responseParser;channel;constructor(e){if(e&&"channel"in e)this.channel=e.channel,this.responseParser="responseParser"in e?e.responseParser:new Si;else{if(e&&e.specVersion)if(mo("0.8",e.specVersion))this.channel=new mi.RpcChannel({...e,waitMode:!1});else{if(!mo("0.7",e.specVersion))throw new Error(`unsupported channel for spec version: ${e.specVersion}`);this.channel=new ge.RpcChannel({...e,waitMode:!1})}else if(mo("0.8",he.get("rpcVersion")))this.channel=new mi.RpcChannel({...e,waitMode:!1});else{if(!mo("0.7",he.get("rpcVersion")))throw new Error("unable to define spec version for channel");this.channel=new ge.RpcChannel({...e,waitMode:!1})}this.responseParser=new Si(e?.feeMarginPercentage)}}static async create(e){const t=new ge.RpcChannel({...e}),r=await t.getSpecVersion();if(bo(r)||pe.warn(`Using incompatible node spec version ${r}`),mo("0.7",r))return new this({...e,specVersion:ae.v0_7_1});if(mo("0.8",r))return new this({...e,specVersion:ae.v0_8_1});throw new $o(`Provided RPC node specification version ${r} is not compatible with the SDK. SDK supported RPC versions ${Object.keys(ae).toString()}`)}fetch(e,t,r=0){return this.channel.fetch(e,t,r)}async getChainId(){return this.channel.getChainId()}readSpecVersion(){return this.channel.readSpecVersion()}async getSpecVersion(){return this.channel.getSpecVersion()}setUpSpecVersion(){return this.channel.setUpSpecVersion()}async getNonceForAddress(e,t){return this.channel.getNonceForAddress(e,t)}async getBlock(e){return this.channel.getBlockWithTxHashes(e).then(this.responseParser.parseGetBlockResponse)}async getBlockLatestAccepted(){return this.channel.getBlockLatestAccepted()}async getBlockNumber(){return this.channel.getBlockNumber()}async getBlockWithTxHashes(e){return this.channel.getBlockWithTxHashes(e)}async getBlockWithTxs(e){return this.channel.getBlockWithTxs(e)}async waitForBlock(e="pending",t=5e3){if(e===Ee.LATEST)return;const r=await this.getBlockNumber(),n=e===Ee.PENDING?r+1:Number(lt(e));if(n<=r)return;const{retries:o}=this.channel;let i=o,s=!1;for(;!s;)if(await this.getBlockNumber()===n?s=!0:await ei(t),i-=1,i<=0)throw new Error(`waitForBlock() timed-out after ${o} tries.`)}async getL1GasPrice(e){return this.channel.getBlockWithTxHashes(e).then(this.responseParser.parseL1GasPriceResponse)}async getL1MessageHash(e){const t=await this.channel.getTransactionByHash(e);Ye("L1_HANDLER"===t.type,"This L2 transaction is not a L1 message.");const{calldata:r,contract_address:n,entry_point_selector:o,nonce:i}=t;return Lt([r[0],n,i,o,r.length-1,...r.slice(1)])}async getBlockWithReceipts(e){return this.channel.getBlockWithReceipts(e)}getStateUpdate=this.getBlockStateUpdate;async getBlockStateUpdate(e){return this.channel.getBlockStateUpdate(e)}async getBlockTransactionsTraces(e){return this.channel.getBlockTransactionsTraces(e)}async getBlockTransactionCount(e){return this.channel.getBlockTransactionCount(e)}async getTransaction(e){return this.channel.getTransactionByHash(e)}async getTransactionByHash(e){return this.channel.getTransactionByHash(e)}async getTransactionByBlockIdAndIndex(e,t){return this.channel.getTransactionByBlockIdAndIndex(e,t)}async getTransactionReceipt(e){const t=await this.channel.getTransactionReceipt(e),r=this.responseParser.parseTransactionReceipt(t);return new xi(r)}async getTransactionTrace(e){return this.channel.getTransactionTrace(e)}async getTransactionStatus(e){return this.channel.getTransactionStatus(e)}async getSimulateTransaction(e,t){return this.channel.simulateTransaction(e,t).then(e=>this.responseParser.parseSimulateTransactionResponse(e))}async waitForTransaction(e,t){const r=await this.channel.waitForTransaction(e,t);return new xi(r)}async getStorageAt(e,t,r){return this.channel.getStorageAt(e,t,r)}async getClassHashAt(e,t){return this.channel.getClassHashAt(e,t)}async getClassByHash(e){return this.getClass(e)}async getClass(e,t){return this.channel.getClass(e,t).then(this.responseParser.parseContractClassResponse)}async getClassAt(e,t){return this.channel.getClassAt(e,t).then(this.responseParser.parseContractClassResponse)}async getContractVersion(e,t,{blockIdentifier:r=this.channel.blockIdentifier,compiler:n=!0}={}){let o;if(e)o=await this.getClassAt(e,r);else{if(!t)throw Error("getContractVersion require contractAddress or classHash");o=await this.getClass(t,r)}return Uo(o)?n?{cairo:"1",compiler:Br(o.abi).compiler}:{cairo:"1",compiler:void 0}:{cairo:"0",compiler:"0"}}async getInvokeEstimateFee(e,t,r,n){return this.channel.getEstimateFee([{type:be.INVOKE,...e,...t}],{blockIdentifier:r,skipValidate:n}).then(e=>this.responseParser.parseFeeEstimateResponse(e))}async getDeclareEstimateFee(e,t,r,n){return this.channel.getEstimateFee([{type:be.DECLARE,...e,...t}],{blockIdentifier:r,skipValidate:n}).then(e=>this.responseParser.parseFeeEstimateResponse(e))}async getDeployAccountEstimateFee(e,t,r,n){return this.channel.getEstimateFee([{type:be.DEPLOY_ACCOUNT,...e,...t}],{blockIdentifier:r,skipValidate:n}).then(e=>this.responseParser.parseFeeEstimateResponse(e))}async getEstimateFeeBulk(e,t){return this.channel.getEstimateFee(e,t).then(e=>this.responseParser.parseFeeEstimateBulkResponse(e))}async invokeFunction(e,t){return this.channel.invoke(e,t)}async declareContract(e,t){return this.channel.declare(e,t)}async deployAccountContract(e,t){return this.channel.deployAccount(e,t)}async callContract(e,t){return this.channel.callContract(e,t)}async estimateMessageFee(e,t){return this.channel.estimateMessageFee(e,t)}async getSyncingStats(){return this.channel.getSyncingStats()}async getEvents(e){return this.channel.getEvents(e)}async verifyMessageInStarknet(e,t,r,n,o){const i=Li(e);if(!It(e)&&!i)throw new Error("message has a wrong format.");if(!It(r))throw new Error("accountAddress shall be a BigNumberish");const s=i?$i(e,r):lt(e),a=n?[n]:["isValidSignature","is_valid_signature"],c=o||{okResponse:[],nokResponse:["0x0","0x00"],error:["argent/invalid-signature","0x617267656e742f696e76616c69642d7369676e6174757265","is invalid, with respect to the public key","0x697320696e76616c6964","INVALID_SIG","0x494e56414c49445f534947"]};let l;for(const e of a)try{const n=await this.callContract({contractAddress:lt(r),entrypoint:e,calldata:pn.compile({hash:at(s).toString(),signature:To(t)})});if(c.nokResponse.includes(n[0].toString()))return!1;if(0===c.okResponse.length||c.okResponse.includes(n[0].toString()))return!0;throw Error("signatureVerificationResponse Error: response is not part of known responses")}catch(e){if(c.error.some(t=>e.message.includes(t)))return!1;l=e}throw Error(`Signature verification Error: ${l}`)}async isClassDeclared(e,t){let r;if(!e.classHash&&"contract"in e)r=Fo(e).classHash;else{if(!e.classHash)throw Error("contractClassIdentifier type not satisfied");r=e.classHash}try{return await this.getClass(r,t)instanceof Object}catch(e){if(e instanceof $o)return!1;throw e}}async prepareInvocations(e){const t=[];for(const r of e)r.type===be.DECLARE?await this.isClassDeclared("payload"in r?r.payload:r)||t.unshift(r):t.push(r);return t}async getL1MessagesStatus(e){if(this.channel instanceof mi.RpcChannel)return this.channel.getMessagesStatus(e);throw new $o("Unsupported method for RPC version")}async getStorageProof(e,t,r,n){if(this.channel instanceof mi.RpcChannel)return this.channel.getStorageProof(e,t,r,n);throw new $o("Unsupported method for RPC version")}async getCompiledCasm(e){if(this.channel instanceof mi.RpcChannel)return this.channel.getCompiledCasm(e);throw new $o("Unsupported method for RPC version")}},qi=r(6993),Gi={};d(Gi,{StarknetIdContract:()=>os,StarknetIdIdentityContract:()=>ss,StarknetIdMulticallContract:()=>cs,StarknetIdPfpContract:()=>hs,StarknetIdPopContract:()=>ps,StarknetIdVerifierContract:()=>us,dynamicCallData:()=>bs,dynamicFelt:()=>ms,execution:()=>ys,getStarknetIdContract:()=>is,getStarknetIdIdentityContract:()=>as,getStarknetIdMulticallContract:()=>ls,getStarknetIdPfpContract:()=>fs,getStarknetIdPopContract:()=>gs,getStarknetIdVerifierContract:()=>ds,isStarkDomain:()=>ws,useDecoded:()=>rs,useEncoded:()=>ns});var Yi="abcdefghijklmnopqrstuvwxyz0123456789-",Qi=BigInt(Yi.length+1),Zi="这来",Xi=BigInt(Yi.length),Ji=BigInt(Zi.length),es=BigInt(Zi.length+1);function ts(e){let t=0;for(;e.endsWith(Zi[Zi.length-1]);)e=e.substring(0,e.length-1),t+=1;return[e,t]}function rs(e){let t="";return e.forEach(e=>{for(;e!==F;){const r=e%Qi;if(e/=Qi,r===BigInt(Yi.length)){const r=e/es;if(r===F){const n=e%es;e=r,t+=n===F?Yi[0]:Zi[Number(n)-1]}else t+=Zi[Number(e%Ji)],e/=Ji}else t+=Yi[Number(r)]}const[r,n]=ts(t);n&&(t=r+(n%2==0?Zi[Zi.length-1].repeat(n/2-1)+Zi[0]+Yi[1]:Zi[Zi.length-1].repeat((n-1)/2+1))),t+="."}),t?t.concat("stark"):t}function ns(e){let t=BigInt(0),r=BigInt(1);if(e.endsWith(Zi[0]+Yi[1])){const[t,r]=ts(e.substring(0,e.length-2));e=t+Zi[Zi.length-1].repeat(2*(r+1))}else{const[t,r]=ts(e);r&&(e=t+Zi[Zi.length-1].repeat(1+2*(r-1)))}for(let n=0;n<e.length;n+=1){const o=e[n],i=Yi.indexOf(o),s=BigInt(Yi.indexOf(o));if(-1!==i)n===e.length-1&&e[n]===Yi[0]?(t+=r*Xi,r*=Qi,r*=Qi):(t+=r*s,r*=Qi);else if(-1!==Zi.indexOf(o)){t+=r*Xi,r*=Qi;const i=(n===e.length-1?1:0)+Zi.indexOf(o);t+=r*BigInt(i),r*=Ji}}return t}var os={MAINNET:"0x6ac597f8116f886fa1c97a23fa4e08299975ecaf6b598873ca6792b9bbfb678",TESTNET_SEPOLIA:"0x154bc2e1af9260b9e66af0e9c46fc757ff893b3ff6a85718a810baf1474"};function is(e){switch(e){case ie.SN_MAIN:return os.MAINNET;case ie.SN_SEPOLIA:return os.TESTNET_SEPOLIA;default:throw new Error("Starknet.id is not yet deployed on this network")}}var ss={MAINNET:"0x05dbdedc203e92749e2e746e2d40a768d966bd243df04a6b712e222bc040a9af",TESTNET_SEPOLIA:"0x3697660a0981d734780731949ecb2b4a38d6a58fc41629ed611e8defda"};function as(e){switch(e){case ie.SN_MAIN:return ss.MAINNET;case ie.SN_SEPOLIA:return ss.TESTNET_SEPOLIA;default:throw new Error("Starknet.id verifier contract is not yet deployed on this network")}}var cs="0x034ffb8f4452df7a613a0210824d6414dbadcddce6c6e19bf4ddc9e22ce5f970";function ls(e){switch(e){case ie.SN_MAIN:case ie.SN_SEPOLIA:return cs;default:throw new Error("Starknet.id multicall contract is not yet deployed on this network")}}var us={MAINNET:"0x07d14dfd8ee95b41fce179170d88ba1f0d5a512e13aeb232f19cfeec0a88f8bf",TESTNET_SEPOLIA:"0x60B94fEDe525f815AE5E8377A463e121C787cCCf3a36358Aa9B18c12c4D566"};function ds(e){switch(e){case ie.SN_MAIN:return us.MAINNET;case ie.SN_SEPOLIA:return us.TESTNET_SEPOLIA;default:throw new Error("Starknet.id verifier contract is not yet deployed on this network")}}var hs={MAINNET:"0x070aaa20ec4a46da57c932d9fd89ca5e6bb9ca3188d3df361a32306aff7d59c7",TESTNET_SEPOLIA:"0x9e7bdb8dabd02ea8cfc23b1d1c5278e46490f193f87516ed5ff2dfec02"};function fs(e){switch(e){case ie.SN_MAIN:return hs.MAINNET;case ie.SN_SEPOLIA:return hs.TESTNET_SEPOLIA;default:throw new Error("Starknet.id profile picture verifier contract is not yet deployed on this network")}}var ps={MAINNET:"0x0293eb2ba9862f762bd3036586d5755a782bd22e6f5028320f1d0405fd47bff4",TESTNET_SEPOLIA:"0x15ae88ae054caa74090b89025c1595683f12edf7a4ed2ad0274de3e1d4a"};function gs(e){switch(e){case ie.SN_MAIN:return ps.MAINNET;case ie.SN_SEPOLIA:return ps.TESTNET_SEPOLIA;default:throw new Error("Starknet.id proof of personhood verifier contract is not yet deployed on this network")}}function ys(e,t=void 0,r=void 0){return new Ur({Static:e,IfEqual:t?jr(t[0],t[1],t[2]):void 0,IfNotEqual:r?jr(r[0],r[1],r[2]):void 0})}function ms(e,t=void 0){return new Ur({Hardcoded:e,Reference:t?jr(t[0],t[1]):void 0})}function bs(e,t=void 0,r=void 0){return new Ur({Hardcoded:e,Reference:t?jr(t[0],t[1]):void 0,ArrayReference:r?jr(r[0],r[1]):void 0})}function ws(e){return/^(?:[a-z0-9-]{1,48}(?:[a-z0-9-]{1,48}[a-z0-9-])?\.)*[a-z0-9-]{1,48}\.stark$/.test(e)}var vs=class e{async getStarkName(t,r){return e.getStarkName(this,t,r)}async getAddressFromStarkName(t,r){return e.getAddressFromStarkName(this,t,r)}async getStarkProfile(t,r,n,o,i,s,a){return e.getStarkProfile(this,t,r,n,o,i,s,a)}static async getStarkName(e,t,r){const n=await e.getChainId(),o=r??is(n);try{const r=rs((await e.callContract({contractAddress:o,entrypoint:"address_to_domain",calldata:pn.compile({address:t,hint:[]})})).map(e=>BigInt(e)).slice(1));if(!r)throw Error("Starkname not found");return r}catch(e){if(e instanceof Error&&"Starkname not found"===e.message)throw e;throw Error("Could not get stark name")}}static async getAddressFromStarkName(e,t,r){const n=t.endsWith(".stark")?t:`${t}.stark`;if(!ws(n))throw new Error("Invalid domain, must be a valid .stark domain");const o=await e.getChainId(),i=r??is(o);try{const t=n.replace(".stark","").split(".").map(e=>ns(e).toString(10));return(await e.callContract({contractAddress:i,entrypoint:"domain_to_address",calldata:pn.compile({domain:t,hint:[]})}))[0]}catch{throw Error("Could not get address from stark name")}}static async getStarkProfile(e,t,r,n,o,i,s,a){const c=await e.getChainId(),l=r??is(c),u=n??as(c),d=o??ds(c),h=i??fs(c),f=s??gs(c),p=a??ls(c);try{const r=[{execution:ys({}),to:bs(l),selector:bs(Ct("address_to_domain")),calldata:[bs(t),bs("0")]},{execution:ys({}),to:ms(l),selector:ms(Ct("domain_to_id")),calldata:[bs(void 0,void 0,[0,0])]},{execution:ys({}),to:ms(u),selector:ms(Ct("get_verifier_data")),calldata:[bs(void 0,[1,0]),bs(Kt("twitter")),bs(d),bs("0")]},{execution:ys({}),to:ms(u),selector:ms(Ct("get_verifier_data")),calldata:[bs(void 0,[1,0]),bs(Kt("github")),bs(d),bs("0")]},{execution:ys({}),to:ms(u),selector:ms(Ct("get_verifier_data")),calldata:[bs(void 0,[1,0]),bs(Kt("discord")),bs(d),bs("0")]},{execution:ys({}),to:ms(u),selector:ms(Ct("get_verifier_data")),calldata:[bs(void 0,[1,0]),bs(Kt("proof_of_personhood")),bs(f),bs("0")]},{execution:ys({}),to:ms(u),selector:ms(Ct("get_verifier_data")),calldata:[bs(void 0,[1,0]),bs(Kt("nft_pp_contract")),bs(h),bs("0")]},{execution:ys({}),to:ms(u),selector:ms(Ct("get_extended_verifier_data")),calldata:[bs(void 0,[1,0]),bs(Kt("nft_pp_id")),bs("2"),bs(h),bs("0")]},{execution:ys(void 0,void 0,[6,0,0]),to:ms(void 0,[6,0]),selector:ms(Ct("tokenURI")),calldata:[bs(void 0,[7,1]),bs(void 0,[7,2])]}],n=await e.callContract({contractAddress:p,entrypoint:"aggregate",calldata:pn.compile({calls:r})});if(Array.isArray(n)){const e=parseInt(n[0],16),t=[];let r=1;for(let o=0;o<e&&r<n.length;o+=1){const e=parseInt(n[r],16);r+=1;const o=n.slice(r,r+e);t.push(o),r+=e}const o=rs(t[0].slice(1).map(e=>BigInt(e))),i="0x0"!==t[2][0]?BigInt(t[2][0]).toString():void 0,s="0x0"!==t[3][0]?BigInt(t[3][0]).toString():void 0,a="0x0"!==t[4][0]?BigInt(t[4][0]).toString():void 0,c="0x1"===t[5][0];return{name:o,twitter:i,github:s,discord:a,proofOfPersonhood:c,profilePicture:("0x9"===n[0]?t[8].slice(1).map(e=>qt(e)).join(""):void 0)||`https://starknet.id/api/identicons/${BigInt(t[1][0]).toString()}`}}throw Error("Error while calling aggregate function")}catch(e){if(e instanceof Error)throw e;throw Error("Could not get user stark profile data from address")}}},_s=class extends((0,qi.Mixin)(Ki,vs)){},Es=class{},As=new Ki({default:!0}),Ss=class{},xs=class{pk;constructor(e=wn.utils.randomPrivateKey()){this.pk=e instanceof Uint8Array?M(e):lt(e)}async getPubKey(){return wn.getStarkKey(this.pk)}async signMessage(e,t){const r=$i(e,t);return this.signRaw(r)}async signTransaction(e,t){const r=hi(e,t.cairoVersion);let n;if(Object.values(y.ETransactionVersion2).includes(t.version)){const e=t;n=Kn({...e,senderAddress:e.walletAddress,compiledCalldata:r,version:e.version})}else{if(!Object.values(y.ETransactionVersion3).includes(t.version))throw Error("unsupported signTransaction version");{const e=t;n=Kn({...e,senderAddress:e.walletAddress,compiledCalldata:r,version:e.version,nonceDataAvailabilityMode:Co(e.nonceDataAvailabilityMode),feeDataAvailabilityMode:Co(e.feeDataAvailabilityMode)})}}return this.signRaw(n)}async signDeployAccountTransaction(e){const t=pn.compile(e.constructorCalldata);let r;if(Object.values(y.ETransactionVersion2).includes(e.version)){const n=e;r=Gn({...n,salt:n.addressSalt,constructorCalldata:t,version:n.version})}else{if(!Object.values(y.ETransactionVersion3).includes(e.version))throw Error("unsupported signDeployAccountTransaction version");{const n=e;r=Gn({...n,salt:n.addressSalt,compiledConstructorCalldata:t,version:n.version,nonceDataAvailabilityMode:Co(n.nonceDataAvailabilityMode),feeDataAvailabilityMode:Co(n.feeDataAvailabilityMode)})}}return this.signRaw(r)}async signDeclareTransaction(e){let t;if(Object.values(y.ETransactionVersion2).includes(e.version)){const r=e;t=qn({...r,version:r.version})}else{if(!Object.values(y.ETransactionVersion3).includes(e.version))throw Error("unsupported signDeclareTransaction version");{const r=e;t=qn({...r,version:r.version,nonceDataAvailabilityMode:Co(r.nonceDataAvailabilityMode),feeDataAvailabilityMode:Co(r.feeDataAvailabilityMode)})}}return this.signRaw(t)}async signRaw(e){return wn.sign(e,this.pk)}},Is=r(8510),Ts={};function ks(e){return new sr(e).toBigInt()}function Ms(e){return sr.is(e)}function Os(e){return new sr(e).toUint256HexString()}d(Ts,{bnToUint256:()=>Os,isUint256:()=>Ms,uint256ToBN:()=>ks});var Ns=class{pk;constructor(e=Qo()){this.pk=e instanceof Uint8Array?M(e).padStart(64,"0"):O(lt(e)).padStart(64,"0")}async getPubKey(){return N(M(Is.secp256k1.getPublicKey(this.pk,!1)).padStart(130,"0").slice(2))}async signMessage(e,t){const r=$i(e,t),n=Is.secp256k1.sign(O(L(r)),this.pk);return this.formatEthSignature(n)}async signTransaction(e,t){const r=hi(e,t.cairoVersion);let n;if(Object.values(y.ETransactionVersion2).includes(t.version)){const e=t;n=Kn({...e,senderAddress:e.walletAddress,compiledCalldata:r,version:e.version})}else{if(!Object.values(y.ETransactionVersion3).includes(t.version))throw Error("unsupported signTransaction version");{const e=t;n=Kn({...e,senderAddress:e.walletAddress,compiledCalldata:r,version:e.version,nonceDataAvailabilityMode:Co(e.nonceDataAvailabilityMode),feeDataAvailabilityMode:Co(e.feeDataAvailabilityMode)})}}const o=Is.secp256k1.sign(O(L(n)),this.pk);return this.formatEthSignature(o)}async signDeployAccountTransaction(e){const t=pn.compile(e.constructorCalldata);let r;if(Object.values(y.ETransactionVersion2).includes(e.version)){const n=e;r=Gn({...n,salt:n.addressSalt,constructorCalldata:t,version:n.version})}else{if(!Object.values(y.ETransactionVersion3).includes(e.version))throw Error("unsupported signDeployAccountTransaction version");{const n=e;r=Gn({...n,salt:n.addressSalt,compiledConstructorCalldata:t,version:n.version,nonceDataAvailabilityMode:Co(n.nonceDataAvailabilityMode),feeDataAvailabilityMode:Co(n.feeDataAvailabilityMode)})}}const n=Is.secp256k1.sign(O(L(r)),this.pk);return this.formatEthSignature(n)}async signDeclareTransaction(e){let t;if(Object.values(y.ETransactionVersion2).includes(e.version)){const r=e;t=qn({...r,version:r.version})}else{if(!Object.values(y.ETransactionVersion3).includes(e.version))throw Error("unsupported signDeclareTransaction version");{const r=e;t=qn({...r,version:r.version,nonceDataAvailabilityMode:Co(r.nonceDataAvailabilityMode),feeDataAvailabilityMode:Co(r.feeDataAvailabilityMode)})}}const r=Is.secp256k1.sign(O(L(t)),this.pk);return this.formatEthSignature(r)}formatEthSignature(e){const t=Os(e.r),r=Os(e.s);return[lt(t.low),lt(t.high),lt(r.low),lt(r.high),lt(e.recovery)]}},Ds=class{transporter;_transporter;accountID;eip2645applicationName;pathBuffer;appVersion;pubKey;fullPubKey;constructor(e,t,r="LedgerW",n=Cs){Ye(t>=0,"Ledger account ID shall not be a negative number."),Ye(t<=V,"Ledger account ID shall be < 2**31."),Ye(!!r,"Ledger application name shall not be empty."),this.transporter=e,this._transporter=this.transporter,this.accountID=t,this.pubKey="",this.fullPubKey="",this.eip2645applicationName=r,this.appVersion="",this.pathBuffer=n(this.accountID,this.eip2645applicationName)}async getPubKey(){return this.pubKey||await this.getPublicKeys(),this.pubKey}async getFullPubKey(){return this.fullPubKey||await this.getPublicKeys(),this.fullPubKey}async getAppVersion(){if(!this.appVersion){const e=await this._transporter.send(Number("0x5a"),0,0,0);this.appVersion=`${e[0]}.${e[1]}.${e[2]}`}return this.appVersion}async signMessage(e,t){const r=$i(e,t);return this.signRaw(r)}async signTransaction(e,t){const r=hi(e,t.cairoVersion);let n;if(Object.values(y.ETransactionVersion2).includes(t.version)){const e=t;n=Kn({...e,senderAddress:e.walletAddress,compiledCalldata:r,version:e.version})}else{if(!Object.values(y.ETransactionVersion3).includes(t.version))throw Error("unsupported signTransaction version");{const e=t;n=Kn({...e,senderAddress:e.walletAddress,compiledCalldata:r,version:e.version,nonceDataAvailabilityMode:Co(e.nonceDataAvailabilityMode),feeDataAvailabilityMode:Co(e.feeDataAvailabilityMode)})}}return this.signRaw(n)}async signDeployAccountTransaction(e){const t=pn.compile(e.constructorCalldata);let r;if(Object.values(y.ETransactionVersion2).includes(e.version)){const n=e;r=Gn({...n,salt:n.addressSalt,constructorCalldata:t,version:n.version})}else{if(!Object.values(y.ETransactionVersion3).includes(e.version))throw Error("unsupported signDeployAccountTransaction version");{const n=e;r=Gn({...n,salt:n.addressSalt,compiledConstructorCalldata:t,version:n.version,nonceDataAvailabilityMode:Co(n.nonceDataAvailabilityMode),feeDataAvailabilityMode:Co(n.feeDataAvailabilityMode)})}}return this.signRaw(r)}async signDeclareTransaction(e){let t;if(Object.values(y.ETransactionVersion2).includes(e.version)){const r=e;t=qn({...r,version:r.version})}else{if(!Object.values(y.ETransactionVersion3).includes(e.version))throw Error("unsupported signDeclareTransaction version");{const r=e;t=qn({...r,version:r.version,nonceDataAvailabilityMode:Co(r.nonceDataAvailabilityMode),feeDataAvailabilityMode:Co(r.feeDataAvailabilityMode)})}}return this.signRaw(t)}async signRaw(e){N(M(await this._transporter.send(Number("0x5a"),2,0,0,o.from(this.pathBuffer))));const t=At(lt(BigInt(e)<<4n)),r=Uint8Array.from(await this._transporter.send(Number("0x5a"),2,1,0,o.from(t))),n=BigInt(N(M(r.subarray(1,33)))),i=BigInt(N(M(r.subarray(33,65)))),s=r[65];return new wn.Signature(n,i).addRecoveryBit(s)}async getPublicKeys(){const e=this.pathBuffer,t=Uint8Array.from(await this._transporter.send(Number("0x5a"),1,0,0,o.from(e)));this.pubKey=N(M(t.subarray(1,33))),this.fullPubKey=N(M(t.subarray(0,65)))}};function Cs(e,t="LedgerW"){return j([new Uint8Array([128,0,10,85]),new Uint8Array([71,65,233,201]),"LedgerW"===t?new Uint8Array([43,206,231,219]):xt(t),new Uint8Array([0,0,0,0]),At(N(O(lt(e)).padStart(8,"0"))),new Uint8Array([0,0,0,0])])}var Bs=r(1484);function Ls(e){const t=lt(ot(e)?N(e):e);return N(O(t).padStart(64,"0"))}function Ps(e){const t=Ls(e);if(!t.match(/^(0x)?[0-9a-fA-F]{64}$/))throw new Error("Invalid Address Format");return gt(t,F,K-1n,"Starknet Address"),t}function js(e){const t=O(Ps(e)).toLowerCase().split(""),r=O(Nt(e)),n=(0,Bs.hexToBytes)(r.padStart(64,"0"));for(let e=0;e<t.length;e+=2)n[e>>1]>>4>=8&&(t[e]=t[e].toUpperCase()),(15&n[e>>1])>=8&&(t[e+1]=t[e+1].toUpperCase());return N(t.join(""))}function Rs(e){return js(e)===e}var Us=class extends Ds{constructor(e,t,r="LedgerW",n=Fs){super(e,t,r,n)}async signTransaction(e,t){const r=hi(e,t.cairoVersion);if(Object.values(y.ETransactionVersion2).includes(t.version)){const n=t,o=Kn({...n,senderAddress:n.walletAddress,compiledCalldata:r,version:n.version}),i=await this.signTxV1(n,e);return Ye(at(o)===i.hash,"The V1 transaction hash calculated by Starknet.js is different from the one calculated by the Ledger."),i.signature}if(Object.values(y.ETransactionVersion3).includes(t.version)){const n=t,o=Kn({...n,senderAddress:n.walletAddress,compiledCalldata:r,version:n.version,nonceDataAvailabilityMode:Co(n.nonceDataAvailabilityMode),feeDataAvailabilityMode:Co(n.feeDataAvailabilityMode)}),i=await this.signTxV3(n,e);return Ye(at(o)===i.hash,"The V3 transaction hash calculated by Starknet.js is different from the one calculated by the Ledger."),i.signature}throw Error("unsupported signTransaction version")}async signDeployAccountTransaction(e){const t=pn.compile(e.constructorCalldata);let r;if(Object.values(y.ETransactionVersion2).includes(e.version)){const n=e;r=Gn({...n,salt:n.addressSalt,constructorCalldata:t,version:n.version});const o=await this.signDeployAccountV1(n);return Ye(at(r)===o.hash,"The transaction hash calculated by Starknet.js is different from the one calculated by the Ledger."),o.signature}if(Object.values(y.ETransactionVersion3).includes(e.version)){const n=e;r=Gn({...n,salt:n.addressSalt,compiledConstructorCalldata:t,version:n.version,nonceDataAvailabilityMode:Co(n.nonceDataAvailabilityMode),feeDataAvailabilityMode:Co(n.feeDataAvailabilityMode)});const o=await this.signDeployAccountV3(n);return Ye(at(r)===o.hash,"The transaction hash calculated by Starknet.js is different from the one calculated by the Ledger."),o.signature}throw Error("unsupported signDeployAccountTransaction version")}convertBnToLedger(e){return At(Ls(lt(e)))}decodeSignatureLedger(e){const t=BigInt(N(M(e.subarray(0,32)))),r=BigInt(N(M(e.subarray(33,65)))),n=BigInt(N(M(e.subarray(65,97)))),o=e[97];return{hash:t,signature:new wn.Signature(r,n).addRecoveryBit(o)}}encodeCall(e){const t=this.convertBnToLedger(e.contractAddress),r=At(Ls(Bt(e.entrypoint)));let n=new Uint8Array([]);e.calldata&&(n=j(pn.compile(e.calldata).map(e=>this.convertBnToLedger(e))));const o=j([t,r,n]),i=[];for(let e=0;e<o.length;e+=224)i.push(o.subarray(e,e+224));return i}async signTxV1(e,t){await this._transporter.send(Number("0x5a"),4,0,0,o.from(this.pathBuffer));const r=j([this.convertBnToLedger(e.walletAddress),this.convertBnToLedger(e.maxFee),this.convertBnToLedger(e.chainId),this.convertBnToLedger(e.nonce)]);await this._transporter.send(Number("0x5a"),4,1,0,o.from(r));const n=this.convertBnToLedger(t.length);await this._transporter.send(Number("0x5a"),4,2,0,o.from(n));let i=new Uint8Array(0);for(const e of t){const t=this.encodeCall(e);await this._transporter.send(Number("0x5a"),4,3,0,o.from(t[0])),t.length>1&&t.slice(1).forEach(async e=>{await this._transporter.send(Number("0x5a"),4,3,1,o.from(e))}),i=await this._transporter.send(Number("0x5a"),4,3,2)}return this.decodeSignatureLedger(i)}async signTxV3(e,t){Ye(e.paymasterData.length<=7,"Paymaster data includes more than 7 items."),Ye(e.accountDeploymentData.length<=7,"accountDeploymentData includes more than 7 items"),await this._transporter.send(Number("0x5a"),3,0,0,o.from(this.pathBuffer));const r=this.convertBnToLedger(e.walletAddress),n=this.convertBnToLedger(e.tip),i=this.convertBnToLedger(e.chainId),s=this.convertBnToLedger(e.nonce),a=this.convertBnToLedger(Pn(e.nonceDataAvailabilityMode===y.EDataAvailabilityMode.L1?y.EDAMode.L1:y.EDAMode.L2,e.feeDataAvailabilityMode===y.EDataAvailabilityMode.L1?y.EDAMode.L1:y.EDAMode.L2)),c=j([r,n,this.convertBnToLedger(jn(e.resourceBounds)),this.convertBnToLedger(Rn(e.resourceBounds)),i,s,a]);await this._transporter.send(Number("0x5a"),3,1,0,o.from(c));const l=j(e.paymasterData.map(e=>this.convertBnToLedger(e)));await this._transporter.send(Number("0x5a"),3,2,0,o.from(l));const u=j(e.paymasterData.map(e=>this.convertBnToLedger(e)));await this._transporter.send(Number("0x5a"),3,3,0,o.from(u));const d=this.convertBnToLedger(t.length);await this._transporter.send(Number("0x5a"),3,4,0,o.from(d));let h=new Uint8Array(0);for(const e of t){const t=this.encodeCall(e);await this._transporter.send(Number("0x5a"),3,5,0,o.from(t[0])),t.length>1&&t.slice(1).forEach(async e=>{await this._transporter.send(Number("0x5a"),3,5,1,o.from(e))}),h=await this._transporter.send(Number("0x5a"),3,5,2)}return this.decodeSignatureLedger(h)}async signDeployAccountV1(e){await this._transporter.send(Number("0x5a"),6,0,0,o.from(this.pathBuffer));const t=j([this.convertBnToLedger(e.contractAddress),this.convertBnToLedger(e.classHash),this.convertBnToLedger(e.addressSalt),this.convertBnToLedger(e.chainId),this.convertBnToLedger(e.nonce)]);await this._transporter.send(Number("0x5a"),6,1,0,o.from(t));const r=this.convertBnToLedger(e.maxFee);await this._transporter.send(Number("0x5a"),6,2,0,o.from(r));const n=pn.compile(e.constructorCalldata),i=this.convertBnToLedger(n.length);await this._transporter.send(Number("0x5a"),6,3,0,o.from(i));const s=j(n.map(e=>this.convertBnToLedger(e))),a=[];for(let e=0;e<s.length;e+=224)a.push(s.subarray(e,e+224));let c=new Uint8Array(0);for(const e of a)c=await this._transporter.send(Number("0x5a"),6,4,0,o.from(e));return this.decodeSignatureLedger(c)}async signDeployAccountV3(e){await this._transporter.send(Number("0x5a"),5,0,0,o.from(this.pathBuffer));const t=j([this.convertBnToLedger(e.contractAddress),this.convertBnToLedger(e.chainId),this.convertBnToLedger(e.nonce),this.convertBnToLedger(Pn(e.nonceDataAvailabilityMode===y.EDataAvailabilityMode.L1?y.EDAMode.L1:y.EDAMode.L2,e.feeDataAvailabilityMode===y.EDataAvailabilityMode.L1?y.EDAMode.L1:y.EDAMode.L2)),this.convertBnToLedger(e.classHash),this.convertBnToLedger(e.addressSalt)]);await this._transporter.send(Number("0x5a"),5,1,0,o.from(t));const r=j([this.convertBnToLedger(e.tip),this.convertBnToLedger(jn(e.resourceBounds)),this.convertBnToLedger(Rn(e.resourceBounds))]);await this._transporter.send(Number("0x5a"),5,2,0,o.from(r));const n=j(e.paymasterData.map(e=>this.convertBnToLedger(e)));await this._transporter.send(Number("0x5a"),5,3,0,o.from(n));const i=pn.compile(e.constructorCalldata),s=this.convertBnToLedger(i.length);await this._transporter.send(Number("0x5a"),5,4,0,o.from(s));const a=j(i.map(e=>this.convertBnToLedger(e))),c=[];for(let e=0;e<a.length;e+=224)c.push(a.subarray(e,e+224));let l=new Uint8Array(0);for(const e of c)l=await this._transporter.send(Number("0x5a"),5,5,0,o.from(e));return this.decodeSignatureLedger(l)}};function Fs(e,t="LedgerW"){const r=new Uint8Array([te,0,10,85]),n=new Uint8Array([71|te,65,233,201]),o="LedgerW"===t?new Uint8Array([43,206,231,219]):xt(t),i=j([new Uint8Array([o[0]|te]),o.subarray(1)]);return j([r,n,i,new Uint8Array([te,0,0,0]),At(N(O(lt(BigInt(e)|re)).padStart(8,"0"))),new Uint8Array([0,0,0,0])])}var zs=class extends Us{constructor(e,t,r="LedgerW",n=Fs){super(e,t,r,n)}async signTxV1(e,t){await this._transporter.send(Number("0x5a"),4,0,0,o.from(this.pathBuffer));const r=j([this.convertBnToLedger(e.walletAddress),this.convertBnToLedger(e.maxFee),this.convertBnToLedger(e.chainId),this.convertBnToLedger(e.nonce)]);await this._transporter.send(Number("0x5a"),4,1,0,o.from(r));const n=this.convertBnToLedger(t.length);await this._transporter.send(Number("0x5a"),4,2,0,o.from(n));let i=new Uint8Array(0);for(const e of t){const t=this.encodeCall(e);i=await this._transporter.send(Number("0x5a"),4,3,0,o.from(t[0])),t.length>1&&t.slice(1).forEach(async e=>{i=await this._transporter.send(Number("0x5a"),4,3,1,o.from(e))})}return this.decodeSignatureLedger(i)}async signTxV3(e,t){Ye(e.paymasterData.length<=7,"Paymaster data includes more than 7 items."),Ye(e.accountDeploymentData.length<=7,"accountDeploymentData includes more than 7 items"),await this._transporter.send(Number("0x5a"),3,0,0,o.from(this.pathBuffer));const r=j([this.convertBnToLedger(e.walletAddress),this.convertBnToLedger(e.chainId),this.convertBnToLedger(e.nonce),this.convertBnToLedger(Pn(Co(e.nonceDataAvailabilityMode),Co(e.feeDataAvailabilityMode)))]);if(await this._transporter.send(Number("0x5a"),3,1,0,o.from(r)),Oe(e.resourceBounds)){const t=j([this.convertBnToLedger(e.tip),this.convertBnToLedger(jn(e.resourceBounds)),this.convertBnToLedger(Rn(e.resourceBounds)),this.convertBnToLedger(Un(e.resourceBounds))]);await this._transporter.send(Number("0x5a"),3,2,0,o.from(t))}else{const t=j([this.convertBnToLedger(e.tip),this.convertBnToLedger(jn(e.resourceBounds)),this.convertBnToLedger(Rn(e.resourceBounds))]);await this._transporter.send(Number("0x5a"),3,2,0,o.from(t))}const n=j(e.paymasterData.map(e=>this.convertBnToLedger(e)));await this._transporter.send(Number("0x5a"),3,3,0,o.from(n));const i=j(e.paymasterData.map(e=>this.convertBnToLedger(e)));await this._transporter.send(Number("0x5a"),3,4,0,o.from(i));const s=this.convertBnToLedger(t.length);await this._transporter.send(Number("0x5a"),3,5,0,o.from(s));let a=new Uint8Array(0);for(const e of t){const t=this.encodeCall(e);a=await this._transporter.send(Number("0x5a"),3,6,0,o.from(t[0])),t.length>1&&t.slice(1).forEach(async e=>{a=await this._transporter.send(Number("0x5a"),3,6,1,o.from(e))})}return this.decodeSignatureLedger(a)}async signDeployAccountV1(e){await this._transporter.send(Number("0x5a"),6,0,0,o.from(this.pathBuffer));const t=j([this.convertBnToLedger(e.contractAddress),this.convertBnToLedger(e.classHash),this.convertBnToLedger(e.addressSalt),this.convertBnToLedger(e.maxFee),this.convertBnToLedger(e.chainId),this.convertBnToLedger(e.nonce)]);await this._transporter.send(Number("0x5a"),6,1,0,o.from(t));const r=pn.compile(e.constructorCalldata),n=this.convertBnToLedger(r.length);await this._transporter.send(Number("0x5a"),6,2,0,o.from(n));const i=j(r.map(e=>this.convertBnToLedger(e))),s=[];for(let e=0;e<i.length;e+=224)s.push(i.subarray(e,e+224));let a=new Uint8Array(0);for(const e of s)a=await this._transporter.send(Number("0x5a"),6,3,0,o.from(e));return this.decodeSignatureLedger(a)}async signDeployAccountV3(e){await this._transporter.send(Number("0x5a"),5,0,0,o.from(this.pathBuffer));const t=j([this.convertBnToLedger(e.contractAddress),this.convertBnToLedger(e.chainId),this.convertBnToLedger(e.nonce),this.convertBnToLedger(Pn(Co(e.nonceDataAvailabilityMode),Co(e.feeDataAvailabilityMode))),this.convertBnToLedger(e.classHash),this.convertBnToLedger(e.addressSalt)]);if(await this._transporter.send(Number("0x5a"),5,1,0,o.from(t)),Oe(e.resourceBounds)){const t=j([this.convertBnToLedger(e.tip),this.convertBnToLedger(jn(e.resourceBounds)),this.convertBnToLedger(Rn(e.resourceBounds)),this.convertBnToLedger(Un(e.resourceBounds))]);await this._transporter.send(Number("0x5a"),5,2,0,o.from(t))}else{const t=j([this.convertBnToLedger(e.tip),this.convertBnToLedger(jn(e.resourceBounds)),this.convertBnToLedger(Rn(e.resourceBounds))]);await this._transporter.send(Number("0x5a"),5,2,0,o.from(t))}const r=j(e.paymasterData.map(e=>this.convertBnToLedger(e)));await this._transporter.send(Number("0x5a"),5,3,0,o.from(r));const n=pn.compile(e.constructorCalldata),i=this.convertBnToLedger(n.length);await this._transporter.send(Number("0x5a"),5,4,0,o.from(i));const s=j(n.map(e=>this.convertBnToLedger(e))),a=[];for(let e=0;e<s.length;e+=224)a.push(s.subarray(e,e+224));let c=new Uint8Array(0);for(const e of a)c=await this._transporter.send(Number("0x5a"),5,5,0,o.from(e));return this.decodeSignatureLedger(c)}encodeCall(e){const t=this.convertBnToLedger(e.contractAddress),r=At(Ls(Bt(e.entrypoint)));let n=new Uint8Array([]);if(e.calldata){const t=pn.compile(e.calldata);n=j([this.convertBnToLedger(t.length),...t.map(e=>this.convertBnToLedger(e))])}else n=this.convertBnToLedger("0x00");const o=j([t,r,n]),i=[];for(let e=0;e<o.length;e+=224)i.push(o.subarray(e,e+224));return i}},Vs={};function Hs(e){return"event"===e.type}function $s(e){const t=e.filter(e=>Hs(e)&&"struct"===e.kind),r=e.filter(e=>Hs(e)&&"enum"===e.kind);return t.reduce((e,t)=>{let n=[],{name:o}=t,i=!1;const s=e=>e.type===o;for(;;){const e=r.find(e=>e.variants.some(s));if(et(e))break;const t=e.variants.find(s);n.unshift(t.name),"flat"===t.kind&&(i=!0),o=e.name}if(0===n.length)throw new Error("inconsistency in ABI events definition.");i&&(n=[n[n.length-1]]);const a=n.pop();let c={[N(wn.keccak(I(a)).toString(16))]:t};for(;n.length>0;)c={[N(wn.keccak(I(n.pop())).toString(16))]:c};return c={...c},Ks(e,c)},{})}function Ws(e){return Dr(e)?$s(e):function(e){return e.filter(e=>"event"===e.type).reduce((e,t)=>{const r=t.name,n={...t};return n.name=r,{...e,[N(wn.keccak(I(r)).toString(16))]:n}},{})}(e)}function Ks(e,t){const r={...e};return it(e)&&it(t)&&Object.keys(t).forEach(n=>{it(t[n])?n in e?r[n]=Ks(e[n],t[n]):Object.assign(r,{[n]:t[n]}):Object.assign(r,{[n]:t[n]})}),r}function qs(e,t,r,n){return e.flat().reduce((e,o)=>{const i=JSON.parse(JSON.stringify(o));let s=t[i.keys.shift()??0];if(!s)return e;for(;!s.name;){const e=i.keys.shift();Ye(!!e,'Not enough data in "keys" property of this event.'),s=s[e]}const a={};a[s.name]={};const c=i.keys[Symbol.iterator](),l=i.data[Symbol.iterator](),u=s.members?.filter(e=>"key"===e.kind)||s.keys,d=s.members?.filter(e=>"data"===e.kind)||s.data;return u.forEach(e=>{a[s.name][e.name]=on(c,e,r,n,a[s.name])}),d.forEach(e=>{a[s.name][e.name]=on(l,e,r,n,a[s.name])}),"block_hash"in i&&(a.block_hash=i.block_hash),"block_number"in i&&(a.block_number=i.block_number),"transaction_hash"in i&&(a.transaction_hash=i.transaction_hash),e.push(a),e},[])}function Gs(e){if(!e.events?.length)throw new Error("UDC emitted event is empty");const t=e.events.find(e=>pt(e.from_address)===pt(Z.ADDRESS))||{data:[]};return{transaction_hash:e.transaction_hash,contract_address:t.data[0],address:t.data[0],deployer:t.data[1],unique:t.data[2],classHash:t.data[3],calldata_len:t.data[4],calldata:t.data.slice(5,5+parseInt(t.data[4],16)),salt:t.data[t.data.length-1]}}d(Vs,{getAbiEvents:()=>Ws,isAbiEvent:()=>Hs,parseEvents:()=>qs,parseUDCEvent:()=>Gs});var Ys={};function Qs(e){return"calldata_len"in e?{To:e.to,Selector:e.selector,Calldata:e.calldata}:e}function Zs(e){const t=e.calldata??[],r=Array.isArray(t)?t:pn.compile(t);return{to:e.contractAddress,selector:Ct(e.entrypoint),calldata:r}}function Xs(e,t){const r=Zs(e);return"1"===t?{...r,calldata_len:r.calldata.length,calldata:r.calldata}:{To:r.to,Selector:r.selector,Calldata:r.calldata}}function Js(e,t){return{name:"Account.execute_from_outside",version:t,chainId:e,..."2"===t?{revision:"1"}:{}}}function ea(e,t,r,n,o){return"1"===o?{types:Re,primaryType:"OutsideExecution",domain:Js(e,o),message:{...t,nonce:r,calls_len:n.length,calls:n.map(e=>Xs(e,o))}}:{types:Ue,primaryType:"OutsideExecution",domain:Js(e,o),message:{Caller:t.caller,Nonce:r,"Execute After":t.execute_after,"Execute Before":t.execute_before,Calls:n.map(e=>Xs(e,o))}}}function ta(e){const t=e.outsideExecution,r=To(e.signature);return pn.compile({outside_execution:t,signature:r})}function ra(e){return(Array.isArray(e)?e:[e]).map(e=>{let t;if(e.version===Fe.V1)t="execute_from_outside";else{if(e.version!==Fe.V2)throw new Error("Unsupported OutsideExecution version");t="execute_from_outside_v2"}return{contractAddress:lt(e.signerAddress),entrypoint:t,calldata:ta(e)}})}d(Ys,{buildExecuteFromOutsideCall:()=>ra,buildExecuteFromOutsideCallData:()=>ta,getOutsideCall:()=>Zs,getTypedData:()=>ea,toOutsideCallV2:()=>Qs});var na={};async function oa(e,t,r){const n={contractAddress:lt(t),entrypoint:"supports_interface",calldata:[lt(r)]};try{const t=await e.callContract(n);return 0n!==BigInt(t[0])}catch{return!1}}d(na,{supportsInterface:()=>oa});var ia={};d(ia,{assertCallsAreStrictlyEqual:()=>aa,assertPaymasterTransactionSafety:()=>ca,getDefaultPaymasterNodeUrl:()=>sa});var sa=(e,t=!1)=>{t||pe.info("Using default public node url, please provide nodeUrl in provider options!");const r=ue[e??oe.SN_SEPOLIA];return r[Math.floor(Math.random()*r.length)]};function aa(e,t){const r="Provided calls are not strictly equal to the returned calls";Ye(t.length-1===e.length,`${r}: Expected ${e.length+1} calls, got ${t.length}`);for(let n=0;n<e.length;n+=1){const o=e[n],i=Qs(t[n]),s=e=>at(e).toString(16).toLowerCase();Ye(s(o.contractAddress)===s(i.To),`${r}: Contract address mismatch at call ${n}. Expected: ${o.contractAddress}, Got: ${i.To}`),Ye(Ct(o.entrypoint)===i.Selector,`${r}: Entrypoint mismatch at call ${n}. Expected: ${o.entrypoint}, Got: ${i.Selector}`);const a=pn.toCalldata(o.calldata),c=pn.toCalldata(i.Calldata);Ye(a.length===c.length,`${r}: Calldata length mismatch at call ${n}. Expected length: ${a.length}, Got length: ${c.length}`);for(let e=0;e<a.length;e+=1)Ye(BigInt(a[e])===BigInt(c[e]),`${r}: Calldata value mismatch at call ${n}, parameter ${e}. Expected: ${a[e]}, Got: ${c[e]}`)}}var ca=(e,t,r,n)=>{if("sponsored"!==r.feeMode.mode&&("invoke"===e.type||"deploy_and_invoke"===e.type)){const o="calls"in e.typed_data.message?e.typed_data.message.calls:e.typed_data.message.Calls;aa(t,o),((e,t)=>{const r=Qs(e[e.length-1]);Ye(BigInt(r.To)===BigInt(t),"Gas token address is not equal to the provided gas token")})(o,r.feeMode.gasToken),n&&(Ye(e.fee.suggested_max_fee_in_gas_token<=n,"Gas token price is too high"),((e,t)=>{const r=Qs(e[e.length-1]),n=pn.toCalldata(r.Calldata)[1];Ye(BigInt(n)===BigInt(t),"Gas token value is not equal to the provided gas fees")})(o,e.fee.suggested_max_fee_in_gas_token))}},la=e=>"sponsored"===e.mode?{mode:"sponsored"}:{mode:"default",gas_token:e.gasToken},ua=e=>e?{execute_after:e.executeAfter||1,execute_before:e.executeBefore}:void 0,da=e=>{return{version:e.version,feeMode:(r=e.fee_mode,"sponsored"===r.mode?{mode:"sponsored"}:{mode:"default",gasToken:r.gas_token}),timeBounds:(t=e.time_bounds,t?{executeAfter:t.execute_after,executeBefore:t.execute_before}:void 0)};var t,r},ha={"Content-Type":"application/json"},fa=class e{nodeUrl;headers;baseFetch;requestId;constructor(t){if(t instanceof e)return this.nodeUrl=t.nodeUrl,this.headers={...ha,...t.headers},this.baseFetch=t.baseFetch,void(this.requestId=t.requestId);if(t&&"nodeUrl"in t&&"headers"in t&&"baseFetch"in t)return this.nodeUrl=t.nodeUrl??sa(void 0),this.headers={...ha,...t.headers},this.baseFetch=t.baseFetch??Xo,void(this.requestId=0);const{nodeUrl:r,headers:n,baseFetch:o}=t||{};r&&Object.values(oe).includes(r)?this.nodeUrl=sa(r,t?.default):this.nodeUrl=r||sa(void 0,t?.default),this.baseFetch=o??Xo,this.headers={...ha,...n},this.requestId=0}fetch(e,t,r=0){const n={id:r,jsonrpc:"2.0",method:e,...t&&{params:t}};return this.baseFetch(this.nodeUrl,{method:"POST",body:qe(n),headers:this.headers})}errorHandler(e,t,r,n){if(r)throw new Wo(r,e,t);if(n instanceof $o)throw n;if(n)throw Error(n.message)}async fetchEndpoint(e,t){try{this.requestId+=1;const r=await this.fetch(e,t,this.requestId),{error:n,result:o}=await r.json();return this.errorHandler(e,t,n),o}catch(r){throw this.errorHandler(e,t,r?.response?.data,r),r}}async isAvailable(){return this.fetchEndpoint("paymaster_isAvailable")}async buildTransaction(e,t){let r;switch(e.type){case"invoke":case"deploy_and_invoke":r={...e,invoke:{user_address:e.invoke.userAddress,calls:(n=e.invoke.calls,n.map(e=>({to:e.contractAddress,selector:Ct(e.entrypoint),calldata:pn.toHex(e.calldata)})))}};break;default:r=e}var n;const o={version:t.version,fee_mode:la(t.feeMode),time_bounds:ua(t.timeBounds)},i=await this.fetchEndpoint("paymaster_buildTransaction",{transaction:r,parameters:o}),s={gas_token_price_in_strk:BigInt(i.fee.gas_token_price_in_strk),estimated_fee_in_strk:BigInt(i.fee.estimated_fee_in_strk),estimated_fee_in_gas_token:BigInt(i.fee.estimated_fee_in_gas_token),suggested_max_fee_in_strk:BigInt(i.fee.suggested_max_fee_in_strk),suggested_max_fee_in_gas_token:BigInt(i.fee.suggested_max_fee_in_gas_token)};switch(i.type){case"invoke":return{type:"invoke",typed_data:i.typed_data,parameters:da(i.parameters),fee:s};case"deploy_and_invoke":return{type:"deploy_and_invoke",deployment:i.deployment,typed_data:i.typed_data,parameters:da(i.parameters),fee:s};default:return{type:"deploy",deployment:i.deployment,parameters:da(i.parameters),fee:s}}}async executeTransaction(e,t){let r;switch(e.type){case"invoke":case"deploy_and_invoke":r={...e,invoke:{user_address:e.invoke.userAddress,typed_data:e.invoke.typedData,signature:Mo(e.invoke.signature)}};break;default:r=e}const n={version:t.version,fee_mode:la(t.feeMode),time_bounds:ua(t.timeBounds)};return this.fetchEndpoint("paymaster_executeTransaction",{transaction:r,parameters:n})}async getSupportedTokens(){return this.fetchEndpoint("paymaster_getSupportedTokens").then(e=>e.map(e=>({token_address:e.token_address,decimals:e.decimals,priceInStrk:BigInt(e.price_in_strk)})))}},pa=class{},ga=new fa({default:!0}),ya=class extends _s{signer;address;cairoVersion;transactionVersion;paymaster;constructor(e,t,r,n,o=he.get("transactionVersion"),i){super(e),this.address=t.toLowerCase(),this.signer=ot(r)||r instanceof Uint8Array?new xs(r):r,n&&(this.cairoVersion=n.toString()),this.transactionVersion=o,this.paymaster=i?new fa(i):ga,pe.debug("Account setup",{transactionVersion:this.transactionVersion,cairoVersion:this.cairoVersion,channel:this.channel.id})}static async create(){throw new $o("Not supported")}getPreferredVersion(e,t){return this.transactionVersion===Se.V3?t:this.transactionVersion===Se.V2?e:Se.V3}async getNonce(e){return super.getNonceForAddress(this.address,e)}async getNonceSafe(e){try{return at(e??await this.getNonce())}catch(e){return 0n}}async getCairoVersion(e){if(!this.cairoVersion){const{cairo:t}=e?await super.getContractVersion(void 0,e):await super.getContractVersion(this.address);this.cairoVersion=t}return this.cairoVersion}async estimateFee(e,t={}){return this.estimateInvokeFee(e,t)}async estimateInvokeFee(e,t={}){const{nonce:r,blockIdentifier:n,version:o,skipValidate:i=!0}=t,s=Array.isArray(e)?e:[e],a=at(r??await this.getNonce()),c=Bo(this.getPreferredVersion(Se.F1,Se.F3),Lo(o)),l=await this.getChainId(),u={...Po(t,await this.channel.setUpSpecVersion()),walletAddress:this.address,nonce:a,maxFee:F,version:c,chainId:l,cairoVersion:await this.getCairoVersion(),skipValidate:i},d=await this.buildInvocation(s,u);return super.getInvokeEstimateFee({...d},{...Po(t,await this.channel.setUpSpecVersion()),version:c,nonce:a},n,t.skipValidate)}async estimateDeclareFee(e,t={}){const{blockIdentifier:r,nonce:n,version:o,skipValidate:i=!0}=t,s=at(n??await this.getNonce()),a=Bo(Uo(e.contract)?this.getPreferredVersion(Se.F2,Se.F3):Se.F1,Lo(o)),c=await this.getChainId(),l=await this.buildDeclarePayload(e,{...Po(t,await this.channel.setUpSpecVersion()),nonce:s,chainId:c,version:a,walletAddress:this.address,maxFee:F,cairoVersion:void 0,skipValidate:i});return super.getDeclareEstimateFee(l,{...Po(t,await this.channel.setUpSpecVersion()),version:a,nonce:s},r,t.skipValidate)}async estimateAccountDeployFee({classHash:e,addressSalt:t=0,constructorCalldata:r=[],contractAddress:n},o={}){const{blockIdentifier:i,version:s,skipValidate:a=!0}=o,c=Bo(this.getPreferredVersion(Se.F1,Se.F3),Lo(s)),l=F,u=await this.getChainId(),d=await this.buildAccountDeployPayload({classHash:e,addressSalt:t,constructorCalldata:r,contractAddress:n},{...Po(o,await this.channel.setUpSpecVersion()),nonce:l,chainId:u,version:c,walletAddress:this.address,maxFee:F,cairoVersion:void 0,skipValidate:a});return super.getDeployAccountEstimateFee({...d},{...Po(o,await this.channel.setUpSpecVersion()),version:c,nonce:l},i,o.skipValidate)}async estimateDeployFee(e,t={}){const r=this.buildUDCContractPayload(e);return this.estimateInvokeFee(r,t)}async estimateFeeBulk(e,t={}){if(!e.length)throw TypeError("Invocations should be non-empty array");const{nonce:r,blockIdentifier:n,version:o,skipValidate:i}=t,s=await this.accountInvocationsFactory(e,{...Po(t,await this.channel.setUpSpecVersion()),versions:[Se.F1,Bo(this.getPreferredVersion(Se.F2,Se.F3),o)],nonce:r,blockIdentifier:n,skipValidate:i});return super.getEstimateFeeBulk(s,{blockIdentifier:n,skipValidate:i})}async simulateTransaction(e,t={}){if(!e.length)throw TypeError("Invocations should be non-empty array");const{nonce:r,blockIdentifier:n,skipValidate:o=!0,skipExecute:i,version:s}=t,a=await this.accountInvocationsFactory(e,{...Po(t,await this.channel.setUpSpecVersion()),versions:[Se.V1,Bo(this.getPreferredVersion(Se.V2,Se.V3),s)],nonce:r,blockIdentifier:n,skipValidate:o});return super.getSimulateTransaction(a,{blockIdentifier:n,skipValidate:o,skipExecute:i})}async execute(e,t={}){const r=Array.isArray(e)?e:[e],n=at(t.nonce??await this.getNonce()),o=Bo(this.getPreferredVersion(Se.V1,Se.V3),t.version),i=await this.getUniversalSuggestedFee(o,{type:be.INVOKE,payload:e},{...t,version:o}),s=await this.getChainId(),a={...Po(t,await this.channel.setUpSpecVersion()),resourceBounds:i.resourceBounds,walletAddress:this.address,nonce:n,maxFee:i.maxFee,version:o,chainId:s,cairoVersion:await this.getCairoVersion()},c=await this.signer.signTransaction(r,a),l=hi(r,await this.getCairoVersion());return this.invokeFunction({contractAddress:this.address,calldata:l,signature:c},{...Po(t,await this.channel.setUpSpecVersion()),resourceBounds:i.resourceBounds,nonce:n,maxFee:i.maxFee,version:o})}async buildPaymasterTransaction(e,t){if(!t.deploymentData&&await this.getSnip9Version()===Fe.UNSUPPORTED)throw Error("Account is not compatible with SNIP-9");const r={version:"0x1",feeMode:t.feeMode,timeBounds:t.timeBounds};let n;return n=t.deploymentData?e.length>0?{type:"deploy_and_invoke",invoke:{userAddress:this.address,calls:e},deployment:t.deploymentData}:{type:"deploy",deployment:t.deploymentData}:{type:"invoke",invoke:{userAddress:this.address,calls:e}},this.paymaster.buildTransaction(n,r)}async estimatePaymasterTransactionFee(e,t){return(await this.buildPaymasterTransaction(e,t)).fee}async preparePaymasterTransaction(e){let t;switch(e.type){case"deploy_and_invoke":{const r=await this.signMessage(e.typed_data);t={type:"deploy_and_invoke",invoke:{userAddress:this.address,typedData:e.typed_data,signature:Mo(r)},deployment:e.deployment};break}case"invoke":{const r=await this.signMessage(e.typed_data);t={type:"invoke",invoke:{userAddress:this.address,typedData:e.typed_data,signature:Mo(r)}};break}case"deploy":t={type:"deploy",deployment:e.deployment};break;default:throw Error("Invalid transaction type")}return t}async executePaymasterTransaction(e,t,r){const n=await this.buildPaymasterTransaction(e,t);ca(n,e,t,r);const o=await this.preparePaymasterTransaction(n);return this.paymaster.executeTransaction(o,n.parameters).then(e=>({transaction_hash:e.transaction_hash}))}async declareIfNot(e,t={}){const r=Fo(e);try{await this.getClassByHash(r.classHash)}catch(r){return this.declare(e,t)}return{transaction_hash:"",class_hash:r.classHash}}async declare(e,t={}){const r=Fo(e),{nonce:n,version:o}=t,i=Bo(Uo(e.contract)?this.getPreferredVersion(Se.V2,Se.V3):Se.V1,o),s=await this.getUniversalSuggestedFee(i,{type:be.DECLARE,payload:r},{...t,version:i}),a={...Po(t,await this.channel.setUpSpecVersion()),resourceBounds:s.resourceBounds,maxFee:s.maxFee,nonce:at(n??await this.getNonce()),version:i,chainId:await this.getChainId(),walletAddress:this.address,cairoVersion:void 0},c=await this.buildDeclarePayload(r,a);return this.declareContract(c,a)}async deploy(e,t={}){const{calls:r,addresses:n}=fi(e,this.address);return{...await this.execute(r,t),contract_address:n}}async deployContract(e,t={}){const r=await this.deploy(e,t);return Gs(await this.waitForTransaction(r.transaction_hash))}async declareAndDeploy(e,t={}){const{constructorCalldata:r,salt:n,unique:o}=e;let i=await this.declareIfNot(e,t);if(""!==i.transaction_hash){const e=await this.waitForTransaction(i.transaction_hash);i={...i,...e}}const s=await this.deployContract({classHash:i.class_hash,salt:n,unique:o,constructorCalldata:r},t);return{declare:{...i},deploy:s}}deploySelf=this.deployAccount;async deployAccount({classHash:e,constructorCalldata:t=[],addressSalt:r=0,contractAddress:n},o={}){const i=Bo(this.getPreferredVersion(Se.V1,Se.V3),o.version),s=F,a=await this.getChainId(),c=pn.compile(t),l=n??to(r,e,c,0),u=await this.getUniversalSuggestedFee(i,{type:be.DEPLOY_ACCOUNT,payload:{classHash:e,constructorCalldata:c,addressSalt:r,contractAddress:l}},o),d=await this.signer.signDeployAccountTransaction({...Po(o,await this.channel.setUpSpecVersion()),classHash:e,constructorCalldata:c,contractAddress:l,addressSalt:r,chainId:a,resourceBounds:u.resourceBounds,maxFee:u.maxFee,version:i,nonce:s});return this.deployAccountContract({classHash:e,addressSalt:r,constructorCalldata:t,signature:d},{...Po(o,await this.channel.setUpSpecVersion()),nonce:s,resourceBounds:u.resourceBounds,maxFee:u.maxFee,version:i})}async signMessage(e){return this.signer.signMessage(e,this.address)}async hashMessage(e){return $i(e,this.address)}async getSnip9Version(){return await oa(this,this.address,ee)?Fe.V2:await oa(this,this.address,J)?Fe.V1:Fe.UNSUPPORTED}async isValidSnip9Nonce(e){try{const t={contractAddress:this.address,entrypoint:"is_valid_outside_execution_nonce",calldata:[lt(e)]},r=await this.callContract(t);return 0n!==BigInt(r[0])}catch(e){throw new Error(`Failed to check if nonce is valid: ${e}`)}}async getSnip9Nonce(){const e=Io();return await this.isValidSnip9Nonce(e)?e:this.getSnip9Nonce()}async getOutsideTransaction(e,t,r,n){if(!st(e.caller)&&"ANY_CALLER"!==e.caller)throw new Error(`The caller ${e.caller} is not valid.`);const o=st(e.caller)?e.caller:X,i=Array.isArray(t)?t:[t],s=r??await this.getSnip9Version();if(!s)throw new Error("This account is not handling outside transactions.");const a=n?lt(n):await this.getSnip9Nonce(),c=ea(await this.getChainId(),{caller:o,execute_after:e.execute_after,execute_before:e.execute_before},a,i,s),l=await this.signMessage(c);return{outsideExecution:{caller:o,nonce:a,execute_after:e.execute_after,execute_before:e.execute_before,calls:i.map(Zs)},signature:l,signerAddress:this.address,version:s}}async executeFromOutside(e,t){const r=ra(e);return this.execute(r,t)}async getUniversalSuggestedFee(e,{type:t,payload:r},n){let o=0,i=No(F,void 0,await this.channel.setUpSpecVersion());return e===Se.V3?i=n.resourceBounds??(await this.getSuggestedFee({type:t,payload:r},n)).resourceBounds:o=n.maxFee??(await this.getSuggestedFee({type:t,payload:r},n)).suggestedMaxFee,{maxFee:o,resourceBounds:i}}async getSuggestedFee({type:e,payload:t},r){switch(e){case be.INVOKE:return this.estimateInvokeFee(t,r);case be.DECLARE:return this.estimateDeclareFee(t,r);case be.DEPLOY_ACCOUNT:return this.estimateAccountDeployFee(t,r);case be.DEPLOY:return this.estimateDeployFee(t,r);default:return Do(await this.channel.setUpSpecVersion())}}async buildInvocation(e,t){const r=hi(e,await this.getCairoVersion()),n=t.skipValidate?[]:await this.signer.signTransaction(e,t);return{...Po(t,await this.channel.setUpSpecVersion()),contractAddress:this.address,calldata:r,signature:n}}async buildDeclarePayload(e,t){const{classHash:r,contract:n,compiledClassHash:o}=Fo(e),i=ri(n);if(et(o)&&(t.version===Ie.F3||t.version===Ie.V3))throw Error("V3 Transaction work with Cairo1 Contracts and require compiledClassHash");const s=t.skipValidate?[]:await this.signer.signDeclareTransaction({...t,...Po(t,await this.channel.setUpSpecVersion()),classHash:r,compiledClassHash:o,senderAddress:t.walletAddress});return{senderAddress:t.walletAddress,signature:s,contract:i,compiledClassHash:o}}async buildAccountDeployPayload({classHash:e,addressSalt:t=0,constructorCalldata:r=[],contractAddress:n},o){const i=pn.compile(r),s=n??to(t,e,i,0),a=o.skipValidate?[]:await this.signer.signDeployAccountTransaction({...o,...Po(o,await this.channel.setUpSpecVersion()),classHash:e,contractAddress:s,addressSalt:t,constructorCalldata:i});return{...Po(o,await this.channel.setUpSpecVersion()),classHash:e,addressSalt:t,constructorCalldata:i,signature:a}}buildUDCContractPayload(e){return[].concat(e).map(e=>{const{classHash:t,salt:r="0",unique:n=!0,constructorCalldata:o=[]}=e,i=pn.compile(o);return{contractAddress:Z.ADDRESS,entrypoint:Z.ENTRYPOINT,calldata:[t,r,Et(n),i.length,...i]}})}async accountInvocationsFactory(e,t){const{nonce:r,blockIdentifier:n,skipValidate:o=!0}=t,i=await this.getNonceSafe(r),s=await this.getChainId(),a=t.versions.map(e=>Bo(e)),c="payload"in e[0]?e[0].payload:e[0],l=e[0].type===be.DEPLOY_ACCOUNT?await this.getCairoVersion(c.classHash):await this.getCairoVersion();return Promise.all([].concat(e).map(async(e,r)=>{const c="payload"in e?e.payload:e,u={...Po(t,await this.channel.setUpSpecVersion()),walletAddress:this.address,nonce:at(Number(i)+r),maxFee:F,chainId:s,cairoVersion:l,version:"",skipValidate:o},d={type:e.type,nonce:at(Number(i)+r),blockIdentifier:n,version:""};if(e.type===be.INVOKE){const e=jo(a[1]);u.version=e,d.version=e;const t=await this.buildInvocation([].concat(c),u);return{...d,...t,...u}}if(e.type===be.DEPLOY){const e=jo(a[1]);u.version=e,d.version=e;const t=this.buildUDCContractPayload(c),r=await this.buildInvocation(t,u);return{...d,...r,...u,type:be.INVOKE}}if(e.type===be.DECLARE){const e=Uo(c.contract)?a[1]:a[0];u.version=e,d.version=e;const t=await this.buildDeclarePayload(c,u);return{...d,...t,...u}}if(e.type===be.DEPLOY_ACCOUNT){const e=jo(a[1]);u.version=e,d.version=e;const t=await this.buildAccountDeployPayload(c,u);return{...d,...t,...u}}throw Error(`accountInvocationsFactory: unsupported transaction type: ${e}`)}))}async getStarkName(e=this.address,t){return super.getStarkName(e,t)}},ma=class extends Es{},ba={};function wa(e,t=!1){return e.request({type:"wallet_requestAccounts",params:{silent_mode:t}})}function va(e){return e.request({type:"wallet_getPermissions"})}function _a(e,t){return e.request({type:"wallet_watchAsset",params:t})}function Ea(e,t){return e.request({type:"wallet_addStarknetChain",params:t})}function Aa(e,t){return e.request({type:"wallet_switchStarknetChain",params:{chainId:t}})}function Sa(e){return e.request({type:"wallet_requestChainId"})}function xa(e){return e.request({type:"wallet_deploymentData"})}function Ia(e,t){return e.request({type:"wallet_addInvokeTransaction",params:t})}function Ta(e,t){return e.request({type:"wallet_addDeclareTransaction",params:t})}function ka(e,t){return e.request({type:"wallet_signTypedData",params:t})}function Ma(e){return e.request({type:"wallet_supportedSpecs"})}function Oa(e,t){e.on("accountsChanged",t)}function Na(e,t){e.on("networkChanged",t)}d(ba,{addDeclareTransaction:()=>Ta,addInvokeTransaction:()=>Ia,addStarknetChain:()=>Ea,deploymentData:()=>xa,getPermissions:()=>va,onAccountChange:()=>Oa,onNetworkChanged:()=>Na,requestAccounts:()=>wa,requestChainId:()=>Sa,signMessage:()=>ka,supportedSpecs:()=>Ma,switchStarknetChain:()=>Aa,watchAsset:()=>_a});var Da=class e extends ya{walletProvider;constructor(e,t,r,n,o){super(e,r,"",n,void 0,o),this.walletProvider=t,this.walletProvider.on("accountsChanged",e=>{e&&(this.address=e[0].toLowerCase())}),this.walletProvider.on("networkChanged",e=>{e&&this.channel.setChainId(e)})}onAccountChange(e){Oa(this.walletProvider,e)}onNetworkChanged(e){Na(this.walletProvider,e)}requestAccounts(e=!1){return wa(this.walletProvider,e)}getPermissions(){return va(this.walletProvider)}switchStarknetChain(e){return Aa(this.walletProvider,e)}watchAsset(e){return _a(this.walletProvider,e)}addStarknetChain(e){return Ea(this.walletProvider,e)}execute(e){const t={calls:[].concat(e).map(e=>{const{contractAddress:t,entrypoint:r,calldata:n}=e;return{contract_address:t,entry_point:r,calldata:n}})};return Ia(this.walletProvider,t)}declare(e){const t=Fo(e),r=e.contract,n={...r,abi:qe(r.abi)};if(!t.compiledClassHash)throw Error("compiledClassHash is required");const o={compiled_class_hash:t.compiledClassHash,contract_class:n};return Ta(this.walletProvider,o)}async deploy(e){const{calls:t,addresses:r}=fi(e,this.address);return{...await this.execute(t),contract_address:r}}signMessage(e){return ka(this.walletProvider,e)}static async connect(t,r,n,o,i=!1){const[s]=await wa(r,i);return new e(t,r,s,n,o)}static async connectSilent(t,r,n,o){return e.connect(t,r,n,o,!0)}};function Ca(e,t){return async function(...r){const n={...e.contractOptions};return e.contractOptions=void 0,e.call(t.name,r,{parseRequest:!0,parseResponse:!0,...n})}}function Ba(e,t){return"view"===t.stateMutability||"view"===t.state_mutability?Ca(e,t):function(e,t){return async function(...r){const n={...e.contractOptions};return e.contractOptions=void 0,e.invoke(t.name,r,{parseRequest:!0,...n})}}(e,t)}function La(e,t){return function(...r){return e.estimate(t.name,r)}}function Pa(e,t){return Array.isArray(e)&&"__compiled__"in e?e:Array.isArray(e)&&Array.isArray(e[0])&&"__compiled__"in e[0]?e[0]:t()}var ja=class{abi;address;providerOrAccount;deployTransactionHash;structs;events;functions;callStatic;populateTransaction;estimateFee;callData;contractOptions;constructor(e,t,r=As){this.address=t&&t.toLowerCase(),this.providerOrAccount=r,this.callData=new pn(e),this.structs=pn.getAbiStruct(e),this.events=Ws(e);const n=Gr(e);this.abi=n.getLegacyFormat();const o={enumerable:!0,value:{},writable:!1};Object.defineProperties(this,{functions:{enumerable:!0,value:{},writable:!1},callStatic:{enumerable:!0,value:{},writable:!1},populateTransaction:{enumerable:!0,value:{},writable:!1},estimateFee:{enumerable:!0,value:{},writable:!1}}),this.abi.forEach(e=>{if("function"!==e.type)return;const t=e.name;var r,n;this[t]||Object.defineProperty(this,t,{...o,value:Ba(this,e)}),this.functions[t]||Object.defineProperty(this.functions,t,{...o,value:Ba(this,e)}),this.callStatic[t]||Object.defineProperty(this.callStatic,t,{...o,value:Ca(this,e)}),this.populateTransaction[t]||Object.defineProperty(this.populateTransaction,t,{...o,value:(r=this,n=e,function(...e){return r.populate(n.name,e)})}),this.estimateFee[t]||Object.defineProperty(this.estimateFee,t,{...o,value:La(this,e)})})}withOptions(e){return this.contractOptions=e,this}attach(e){this.address=e}connect(e){this.providerOrAccount=e}async deployed(){return this.deployTransactionHash&&(await this.providerOrAccount.waitForTransaction(this.deployTransactionHash),this.deployTransactionHash=void 0),this}async call(e,t=[],{parseRequest:r=!0,parseResponse:n=!0,formatResponse:o,blockIdentifier:i}={}){Ye(null!==this.address,"contract is not connected to an address");const s=Pa(t,()=>r?(this.callData.validate(Ce.CALL,e,t),this.callData.compile(e,t)):(pe.warn("Call skipped parsing but provided rawArgs, possible malfunction request"),t));return this.providerOrAccount.callContract({contractAddress:this.address,calldata:s,entrypoint:e},i).then(t=>n?o?this.callData.format(e,t,o):this.callData.parse(e,t):t)}invoke(e,t=[],{parseRequest:r=!0,signature:n,...o}={}){Ye(null!==this.address,"contract is not connected to an address");const i=Pa(t,()=>r?(this.callData.validate(Ce.INVOKE,e,t),this.callData.compile(e,t)):(pe.warn("Invoke skipped parsing but provided rawArgs, possible malfunction request"),t)),s={contractAddress:this.address,calldata:i,entrypoint:e};if("execute"in this.providerOrAccount)return this.providerOrAccount.execute(s,{...o});if(!o.nonce)throw new Error("Nonce is required when invoking a function without an account");return pe.warn(`Invoking ${e} without an account. This will not work on a public node.`),this.providerOrAccount.invokeFunction({...s,signature:n},{...o,nonce:o.nonce})}async estimate(e,t=[]){Ye(null!==this.address,"contract is not connected to an address"),Pa(t,()=>!1)||this.callData.validate(Ce.INVOKE,e,t);const r=this.populate(e,t);if("estimateInvokeFee"in this.providerOrAccount)return this.providerOrAccount.estimateInvokeFee(r);throw Error("Contract must be connected to the account contract to estimate")}populate(e,t=[]){const r=Pa(t,()=>this.callData.compile(e,t));return{contractAddress:this.address,entrypoint:e,calldata:r}}parseEvents(e){let t;return e.match({success:e=>{const r=e.events?.map(t=>({block_hash:e.block_hash,block_number:e.block_number,transaction_hash:e.transaction_hash,...t})).filter(e=>pt(e.from_address)===pt(this.address),[])||[];t=qs(r,this.events,this.structs,pn.getAbiEnum(this.abi))},_:()=>{throw Error("This transaction was not successful.")}}),t}isCairo1(){return Zt.isCairo1Abi(this.abi)}async getVersion(){return this.providerOrAccount.getContractVersion(this.address)}typedv2(e){return this}},Ra=class{functions;callStatic;populateTransaction;estimateFee},Ua=class{compiledContract;account;abi;classHash;casm;compiledClassHash;CallData;contractOptions;constructor(e){this.compiledContract=e.compiledContract,this.account=e.account,this.casm=e.casm,this.abi=e.abi??e.compiledContract.abi,this.classHash=e.classHash,this.compiledClassHash=e.compiledClassHash,this.CallData=new pn(this.abi),this.contractOptions=e.contractOptions}async deploy(...e){const t=Pa(e,()=>this.contractOptions?.parseRequest?(this.CallData.validate(Ce.DEPLOY,"constructor",e),this.CallData.compile("constructor",e)):(pe.warn("Call skipped parsing but provided rawArgs, possible malfunction request"),e)),{deploy:{contract_address:r,transaction_hash:n}}=await this.account.declareAndDeploy({contract:this.compiledContract,casm:this.casm,classHash:this.classHash,compiledClassHash:this.compiledClassHash,constructorCalldata:t,salt:this.contractOptions?.addressSalt});Ye(Boolean(r),"Deployment of the contract failed");const o=new ja(this.compiledContract.abi,r,this.account);return o.deployTransactionHash=n,o}connect(e){return this.account=e,this}attach(e){return new ja(this.abi,e,this.account)}},Fa=class{};function za(e,t="fri"){if("strk"===t){let t="";"bigint"==typeof e?t=e.toString():"string"==typeof e&&(t=st(e)?BigInt(e).toString():e);const[r,n="0"]=t.split(".");return`${r}${n.padEnd(18,"0")}`.replace(/\b0+/g,"")}const r=BigInt(e).toString();let n;return n=r.length<=18?`0.${r.padStart(18,"0")}`:`${r.slice(0,r.length-18)}.${r.slice(r.length-18)}`,n.replace(/(\.[0-9]*[1-9])0+$|\.0*$/,"$1")}},6993:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Mixin:()=>A,decorate:()=>E,hasMixin:()=>p,mix:()=>x,settings:()=>u});const n=(e,t,r=[])=>{const n=Object.getOwnPropertyDescriptors(t);for(let e of r)delete n[e];Object.defineProperties(e,n)},o=(e,t=[e])=>{const r=Object.getPrototypeOf(e);return null===r?t:o(r,[...t,r])},i=(e,t,r=[])=>{var i;const s=null!==(i=((...e)=>{if(0===e.length)return;let t;const r=e.map(e=>o(e));for(;r.every(e=>e.length>0);){const e=r.map(e=>e.pop()),n=e[0];if(!e.every(e=>e===n))break;t=n}return t})(...e))&&void 0!==i?i:Object.prototype,a=Object.create(s),c=o(s);for(let t of e){let e=o(t);for(let t=e.length-1;t>=0;t--){let o=e[t];-1===c.indexOf(o)&&(n(a,o,["constructor",...r]),c.push(o))}}return a.constructor=t,a},s=e=>e.filter((t,r)=>e.indexOf(t)==r),a=(e,t)=>{const r=t.map(e=>o(e));let n=0,i=!0;for(;i;){i=!1;for(let o=t.length-1;o>=0;o--){const t=r[o][n];if(null!=t&&(i=!0,null!=Object.getOwnPropertyDescriptor(t,e)))return r[o][0]}n++}},c=(e,t=Object.prototype)=>new Proxy({},{getPrototypeOf:()=>t,setPrototypeOf(){throw Error("Cannot set prototype of Proxies created by ts-mixer")},getOwnPropertyDescriptor:(t,r)=>Object.getOwnPropertyDescriptor(a(r,e)||{},r),defineProperty(){throw new Error("Cannot define new properties on Proxies created by ts-mixer")},has:(r,n)=>void 0!==a(n,e)||void 0!==t[n],get:(r,n)=>(a(n,e)||t)[n],set(t,r,n){const o=a(r,e);if(void 0===o)throw new Error("Cannot set new properties on Proxies created by ts-mixer");return o[r]=n,!0},deleteProperty(){throw new Error("Cannot delete properties on Proxies created by ts-mixer")},ownKeys:()=>e.map(Object.getOwnPropertyNames).reduce((e,t)=>t.concat(e.filter(e=>t.indexOf(e)<0)))}),l=(e,t)=>c([...e,{constructor:t}]),u={initFunction:null,staticsStrategy:"copy",prototypeStrategy:"copy",decoratorInheritance:"deep"},d=new WeakMap,h=e=>d.get(e),f=(e,t)=>d.set(e,t),p=(e,t)=>{if(e instanceof t)return!0;const r=e.constructor,n=new Set;let i=new Set;for(i.add(r);i.size>0;){if(i.has(t))return!0;i.forEach(e=>n.add(e));const e=new Set;i.forEach(t=>{var r;const s=null!==(r=d.get(t))&&void 0!==r?r:o(t.prototype).map(e=>e.constructor).filter(e=>null!==e);s&&s.forEach(t=>{n.has(t)||i.has(t)||e.add(t)})}),i=e}return!1},g=(e,t)=>{var r,n;const o=s([...Object.getOwnPropertyNames(e),...Object.getOwnPropertyNames(t)]),i={};for(let a of o)i[a]=s([...null!==(r=null==e?void 0:e[a])&&void 0!==r?r:[],...null!==(n=null==t?void 0:t[a])&&void 0!==n?n:[]]);return i},y=(e,t)=>{var r,n,o,i;return{property:g(null!==(r=null==e?void 0:e.property)&&void 0!==r?r:{},null!==(n=null==t?void 0:t.property)&&void 0!==n?n:{}),method:g(null!==(o=null==e?void 0:e.method)&&void 0!==o?o:{},null!==(i=null==t?void 0:t.method)&&void 0!==i?i:{})}},m=(e,t)=>{var r,n,o,i,a,c;return{class:s([...null!==(r=null==e?void 0:e.class)&&void 0!==r?r:[],...null!==(n=null==t?void 0:t.class)&&void 0!==n?n:[]]),static:y(null!==(o=null==e?void 0:e.static)&&void 0!==o?o:{},null!==(i=null==t?void 0:t.static)&&void 0!==i?i:{}),instance:y(null!==(a=null==e?void 0:e.instance)&&void 0!==a?a:{},null!==(c=null==t?void 0:t.instance)&&void 0!==c?c:{})}},b=new Map,w=(...e)=>{const t=((...e)=>{var t;const r=new Set,n=new Set([...e]);for(;n.size>0;)for(let e of n){const i=[...o(e.prototype).map(e=>e.constructor),...null!==(t=h(e))&&void 0!==t?t:[]].filter(e=>!r.has(e));for(let e of i)n.add(e);r.add(e),n.delete(e)}return[...r]})(...e).map(e=>b.get(e)).filter(e=>!!e);return 0==t.length?{}:1==t.length?t[0]:t.reduce((e,t)=>m(e,t))},v=(...e)=>{const t=e.map(e=>_(e));return 0===t.length?{}:1===t.length?t[0]:t.reduce((e,t)=>m(e,t))},_=e=>{let t=b.get(e);return t||(t={},b.set(e,t)),t},E=e=>(...t)=>1===t.length?(e=>t=>{const r=_(t);let n=r.class;return n||(n=[],r.class=n),n.push(e),e(t)})(e)(t[0]):(e=>(t,r,...n)=>{var o,i,s;const a="function"==typeof t?"static":"instance",c="function"==typeof t[r]?"method":"property",l="static"===a?t:t.constructor,u=_(l),d=null!==(o=null==u?void 0:u[a])&&void 0!==o?o:{};u[a]=d;let h=null!==(i=null==d?void 0:d[c])&&void 0!==i?i:{};d[c]=h;let f=null!==(s=null==h?void 0:h[r])&&void 0!==s?s:[];return h[r]=f,f.push(e),e(t,r,...n)})(e)(...t);function A(...e){var t,r,o;const s=e.map(e=>e.prototype),a=u.initFunction;if(null!==a){const e=s.map(e=>e[a]).filter(e=>"function"==typeof e),t=function(...t){for(let r of e)r.apply(this,t)},r={[a]:t};s.push(r)}function d(...t){for(const r of e)n(this,new r(...t));null!==a&&"function"==typeof this[a]&&this[a].apply(this,t)}d.prototype="copy"===u.prototypeStrategy?i(s,d):l(s,d),Object.setPrototypeOf(d,"copy"===u.staticsStrategy?i(e,null,["prototype"]):c(e,Function.prototype));let h=d;if("none"!==u.decoratorInheritance){const n="deep"===u.decoratorInheritance?w(...e):v(...e);for(let e of null!==(t=null==n?void 0:n.class)&&void 0!==t?t:[]){const t=e(h);t&&(h=t)}S(null!==(r=null==n?void 0:n.static)&&void 0!==r?r:{},h),S(null!==(o=null==n?void 0:n.instance)&&void 0!==o?o:{},h.prototype)}return f(h,e),h}const S=(e,t)=>{const r=e.property,n=e.method;if(r)for(let e in r)for(let n of r[e])n(t,e);if(n)for(let e in n)for(let r of n[e])r(t,e,Object.getOwnPropertyDescriptor(t,e))},x=(...e)=>t=>{const r=A(...e.concat([t]));return Object.defineProperty(r,"name",{value:t.name,writable:!1}),r}},4994:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},175:function(__unused_webpack_module,exports,__webpack_require__){var process=__webpack_require__(5606).default,e;e=function(exports){"use strict";function noop(){}function run(e){return e()}function blank_object(){return Object.create(null)}function run_all(e){e.forEach(run)}function is_function(e){return"function"==typeof e}function safe_not_equal(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let src_url_equal_anchor,current_component;function src_url_equal(e,t){return src_url_equal_anchor||(src_url_equal_anchor=document.createElement("a")),src_url_equal_anchor.href=t,e===src_url_equal_anchor.href}function is_empty(e){return 0===Object.keys(e).length}function null_to_empty(e){return null==e?"":e}function append(e,t){e.appendChild(t)}function append_styles(e,t,r){const n=get_root_for_style(e);if(!n.getElementById(t)){const e=element("style");e.id=t,e.textContent=r,append_stylesheet(n,e)}}function get_root_for_style(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function append_stylesheet(e,t){return append(e.head||e,t),t.sheet}function insert(e,t,r){e.insertBefore(t,r||null)}function detach(e){e.parentNode&&e.parentNode.removeChild(e)}function destroy_each(e,t){for(let r=0;r<e.length;r+=1)e[r]&&e[r].d(t)}function element(e){return document.createElement(e)}function text(e){return document.createTextNode(e)}function space(){return text(" ")}function listen(e,t,r,n){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r,n)}function attr(e,t,r){null==r?e.removeAttribute(t):e.getAttribute(t)!==r&&e.setAttribute(t,r)}function children(e){return Array.from(e.childNodes)}function set_data(e,t){t=""+t,e.data!==t&&(e.data=t)}function set_current_component(e){current_component=e}function get_current_component(){if(!current_component)throw new Error("Function called outside component initialization");return current_component}function onMount(e){get_current_component().$$.on_mount.push(e)}const dirty_components=[],binding_callbacks=[];let render_callbacks=[];const flush_callbacks=[],resolved_promise=Promise.resolve();let update_scheduled=!1;function schedule_update(){update_scheduled||(update_scheduled=!0,resolved_promise.then(flush))}function add_render_callback(e){render_callbacks.push(e)}const seen_callbacks=new Set;let flushidx=0;function flush(){if(0!==flushidx)return;const e=current_component;do{try{for(;flushidx<dirty_components.length;){const e=dirty_components[flushidx];flushidx++,set_current_component(e),update(e.$$)}}catch(e){throw dirty_components.length=0,flushidx=0,e}for(set_current_component(null),dirty_components.length=0,flushidx=0;binding_callbacks.length;)binding_callbacks.pop()();for(let e=0;e<render_callbacks.length;e+=1){const t=render_callbacks[e];seen_callbacks.has(t)||(seen_callbacks.add(t),t())}render_callbacks.length=0}while(dirty_components.length);for(;flush_callbacks.length;)flush_callbacks.pop()();update_scheduled=!1,seen_callbacks.clear(),set_current_component(e)}function update(e){if(null!==e.fragment){e.update(),run_all(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(add_render_callback)}}function flush_render_callbacks(e){const t=[],r=[];render_callbacks.forEach(n=>-1===e.indexOf(n)?t.push(n):r.push(n)),r.forEach(e=>e()),render_callbacks=t}const outroing=new Set;function transition_in(e,t){e&&e.i&&(outroing.delete(e),e.i(t))}function mount_component(e,t,r,n){const{fragment:o,after_update:i}=e.$$;o&&o.m(t,r),n||add_render_callback(()=>{const t=e.$$.on_mount.map(run).filter(is_function);e.$$.on_destroy?e.$$.on_destroy.push(...t):run_all(t),e.$$.on_mount=[]}),i.forEach(add_render_callback)}function destroy_component(e,t){const r=e.$$;null!==r.fragment&&(flush_render_callbacks(r.after_update),run_all(r.on_destroy),r.fragment&&r.fragment.d(t),r.on_destroy=r.fragment=null,r.ctx=[])}function make_dirty(e,t){-1===e.$$.dirty[0]&&(dirty_components.push(e),schedule_update(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function init$1(e,t,r,n,o,i,s,a=[-1]){const c=current_component;set_current_component(e);const l=e.$$={fragment:null,ctx:[],props:i,update:noop,not_equal:o,bound:blank_object(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:blank_object(),dirty:a,skip_bound:!1,root:t.target||c.$$.root};s&&s(l.root);let u=!1;if(l.ctx=r?r(e,t.props||{},(t,r,...n)=>{const i=n.length?n[0]:r;return l.ctx&&o(l.ctx[t],l.ctx[t]=i)&&(!l.skip_bound&&l.bound[t]&&l.bound[t](i),u&&make_dirty(e,t)),r}):[],l.update(),u=!0,run_all(l.before_update),l.fragment=!!n&&n(l.ctx),t.target){if(t.hydrate){const e=children(t.target);l.fragment&&l.fragment.l(e),e.forEach(detach)}else l.fragment&&l.fragment.c();t.intro&&transition_in(e.$$.fragment),mount_component(e,t.target,t.anchor,t.customElement),flush()}set_current_component(c)}class SvelteComponent{$destroy(){destroy_component(this,1),this.$destroy=noop}$on(e,t){if(!is_function(t))return noop;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{const e=r.indexOf(t);-1!==e&&r.splice(e,1)}}$set(e){this.$$set&&!is_empty(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function add_css(e){append_styles(e,"svelte-j32xt0",'.sr-only.svelte-j32xt0{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}.fixed.svelte-j32xt0{position:fixed}.inset-0.svelte-j32xt0{inset:0px}.z-40.svelte-j32xt0{z-index:40}.z-50.svelte-j32xt0{z-index:50}.mx-6.svelte-j32xt0{margin-left:1.5rem;margin-right:1.5rem}.mb-4.svelte-j32xt0{margin-bottom:1rem}.flex.svelte-j32xt0{display:flex}.h-8.svelte-j32xt0{height:2rem}.w-8.svelte-j32xt0{width:2rem}.w-full.svelte-j32xt0{width:100%}.max-w-\\[500px\\].svelte-j32xt0{max-width:500px}@keyframes svelte-j32xt0-spin{to{transform:rotate(360deg)}}.animate-spin.svelte-j32xt0{animation:svelte-j32xt0-spin 1s linear infinite}.cursor-pointer.svelte-j32xt0{cursor:pointer}.flex-col.svelte-j32xt0{flex-direction:column}.items-center.svelte-j32xt0{align-items:center}.justify-center.svelte-j32xt0{justify-content:center}.justify-between.svelte-j32xt0{justify-content:space-between}.gap-3.svelte-j32xt0{gap:0.75rem}.rounded-full.svelte-j32xt0{border-radius:9999px}.rounded-md.svelte-j32xt0{border-radius:0.375rem}.bg-black\\/25.svelte-j32xt0{background-color:rgb(0 0 0 / 0.25)}.bg-slate-100.svelte-j32xt0{--tw-bg-opacity:1;background-color:rgb(241 245 249 / var(--tw-bg-opacity, 1))}.bg-slate-50.svelte-j32xt0{--tw-bg-opacity:1;background-color:rgb(248 250 252 / var(--tw-bg-opacity, 1))}.fill-neutral-600.svelte-j32xt0{fill:#525252}.p-3.svelte-j32xt0{padding:0.75rem}.p-4.svelte-j32xt0{padding:1rem}.text-center.svelte-j32xt0{text-align:center}.text-xl.svelte-j32xt0{font-size:1.25rem;line-height:1.75rem}.text-neutral-300.svelte-j32xt0{--tw-text-opacity:1;color:rgb(212 212 212 / var(--tw-text-opacity, 1))}.antialiased.svelte-j32xt0{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.shadow.svelte-j32xt0{--tw-shadow:0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-sm.svelte-j32xt0{--tw-shadow:0 1px 2px 0 rgb(0 0 0 / 0.05);--tw-shadow-colored:0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.filter.svelte-j32xt0{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.backdrop-blur-sm.svelte-j32xt0{--tw-backdrop-blur:blur(4px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.transition-colors.svelte-j32xt0{transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.svelte-j32xt0,.svelte-j32xt0::before,.svelte-j32xt0::after{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x:  ;--tw-pan-y:  ;--tw-pinch-zoom:  ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position:  ;--tw-gradient-via-position:  ;--tw-gradient-to-position:  ;--tw-ordinal:  ;--tw-slashed-zero:  ;--tw-numeric-figure:  ;--tw-numeric-spacing:  ;--tw-numeric-fraction:  ;--tw-ring-inset:  ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur:  ;--tw-brightness:  ;--tw-contrast:  ;--tw-grayscale:  ;--tw-hue-rotate:  ;--tw-invert:  ;--tw-saturate:  ;--tw-sepia:  ;--tw-drop-shadow:  ;--tw-backdrop-blur:  ;--tw-backdrop-brightness:  ;--tw-backdrop-contrast:  ;--tw-backdrop-grayscale:  ;--tw-backdrop-hue-rotate:  ;--tw-backdrop-invert:  ;--tw-backdrop-opacity:  ;--tw-backdrop-saturate:  ;--tw-backdrop-sepia:  ;--tw-contain-size:  ;--tw-contain-layout:  ;--tw-contain-paint:  ;--tw-contain-style:  }.svelte-j32xt0::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x:  ;--tw-pan-y:  ;--tw-pinch-zoom:  ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position:  ;--tw-gradient-via-position:  ;--tw-gradient-to-position:  ;--tw-ordinal:  ;--tw-slashed-zero:  ;--tw-numeric-figure:  ;--tw-numeric-spacing:  ;--tw-numeric-fraction:  ;--tw-ring-inset:  ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur:  ;--tw-brightness:  ;--tw-contrast:  ;--tw-grayscale:  ;--tw-hue-rotate:  ;--tw-invert:  ;--tw-saturate:  ;--tw-sepia:  ;--tw-drop-shadow:  ;--tw-backdrop-blur:  ;--tw-backdrop-brightness:  ;--tw-backdrop-contrast:  ;--tw-backdrop-grayscale:  ;--tw-backdrop-hue-rotate:  ;--tw-backdrop-invert:  ;--tw-backdrop-opacity:  ;--tw-backdrop-saturate:  ;--tw-backdrop-sepia:  ;--tw-contain-size:  ;--tw-contain-layout:  ;--tw-contain-paint:  ;--tw-contain-style:  }.svelte-j32xt0,.svelte-j32xt0::before,.svelte-j32xt0::after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}.svelte-j32xt0::before,.svelte-j32xt0::after{--tw-content:\'\'}:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}h1.svelte-j32xt0{font-size:inherit;font-weight:inherit}a.svelte-j32xt0{color:inherit;text-decoration:inherit}.svelte-j32xt0:-moz-focusring{outline:auto}.svelte-j32xt0:-moz-ui-invalid{box-shadow:none}.svelte-j32xt0::-webkit-inner-spin-button,.svelte-j32xt0::-webkit-outer-spin-button{height:auto}.svelte-j32xt0::-webkit-search-decoration{-webkit-appearance:none}.svelte-j32xt0::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}h1.svelte-j32xt0{margin:0}ul.svelte-j32xt0{list-style:none;margin:0;padding:0}[role="button"].svelte-j32xt0{cursor:pointer}.svelte-j32xt0:disabled{cursor:default}img.svelte-j32xt0,svg.svelte-j32xt0{display:block;vertical-align:middle}img.svelte-j32xt0{max-width:100%;height:auto}.svelte-j32xt0{font-family:Nunito, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto,\n      Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue,\n      sans-serif;-webkit-font-smoothing:antialiased}.hover\\:bg-slate-200.svelte-j32xt0:hover{--tw-bg-opacity:1;background-color:rgb(226 232 240 / var(--tw-bg-opacity, 1))}.dark\\:border-neutral-600.svelte-j32xt0:is(.dark *){--tw-border-opacity:1;border-color:rgb(82 82 82 / var(--tw-border-opacity, 1))}.dark\\:bg-neutral-800.svelte-j32xt0:is(.dark *){--tw-bg-opacity:1;background-color:rgb(38 38 38 / var(--tw-bg-opacity, 1))}.dark\\:bg-neutral-900.svelte-j32xt0:is(.dark *){--tw-bg-opacity:1;background-color:rgb(23 23 23 / var(--tw-bg-opacity, 1))}.dark\\:fill-neutral-300.svelte-j32xt0:is(.dark *){fill:#d4d4d4}.dark\\:text-neutral-600.svelte-j32xt0:is(.dark *){--tw-text-opacity:1;color:rgb(82 82 82 / var(--tw-text-opacity, 1))}.dark\\:text-white.svelte-j32xt0:is(.dark *){--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.dark\\:hover\\:bg-neutral-700.svelte-j32xt0:hover:is(.dark *){--tw-bg-opacity:1;background-color:rgb(64 64 64 / var(--tw-bg-opacity, 1))}')}function get_each_context(e,t,r){const n=e.slice();return n[20]=t[r],n}function get_each_context_1(e,t,r){const n=e.slice();return n[23]=t[r],n}function create_else_block(e){let t,r;return{c(){t=element("img"),attr(t,"alt",e[23].name),src_url_equal(t.src,r=e[23].icon)||attr(t,"src",r),attr(t,"class","w-8 h-8 rounded-full svelte-j32xt0")},m(e,r){insert(e,t,r)},p:noop,d(e){e&&detach(t)}}}function create_if_block(e){let t;return{c(){t=element("div"),t.innerHTML='<svg aria-hidden="true" class="w-8 h-8 text-neutral-300 animate-spin dark:text-neutral-600 fill-neutral-600 dark:fill-neutral-300 svelte-j32xt0" viewBox="0 0 100 101" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z" fill="currentColor" class="svelte-j32xt0"></path><path d="M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z" fill="currentFill" class="svelte-j32xt0"></path></svg> \n              <span class="sr-only svelte-j32xt0">Loading...</span>',attr(t,"role","status"),attr(t,"class","svelte-j32xt0")},m(e,r){insert(e,t,r)},p:noop,d(e){e&&detach(t)}}}function create_each_block_1(e){let t,r,n,o,i,s=e[23].name+"";function a(e,t){return e[1]===e[23].id?create_if_block:create_else_block}let c=a(e),l=c(e);function u(){return e[12](e[23])}function d(...t){return e[13](e[23],...t)}return{c(){t=element("li"),r=text(s),n=space(),l.c(),attr(t,"class","flex justify-between items-center p-3 bg-slate-100 rounded-md cursor-pointer shadow-sm hover:bg-slate-200 transition-colors dark:bg-neutral-800 dark:hover:bg-neutral-700 dark:border-neutral-600 dark:text-white svelte-j32xt0")},m(e,s){insert(e,t,s),append(t,r),append(t,n),l.m(t,null),o||(i=[listen(t,"click",u),listen(t,"keyup",d)],o=!0)},p(r,n){c===(c=a(e=r))&&l?l.p(e,n):(l.d(1),l=c(e),l&&(l.c(),l.m(t,null)))},d(e){e&&detach(t),l.d(),o=!1,run_all(i)}}}function create_each_block(e){let t,r,n,o,i,s,a,c,l,u,d,h,f=e[20].name+"";return{c(){t=element("a"),r=element("li"),n=text(f),o=space(),i=element("img"),c=space(),attr(i,"alt",s=e[20].name),src_url_equal(i.src,a=e[20].icon)||attr(i,"src",a),attr(i,"class","w-8 h-8 rounded-full svelte-j32xt0"),attr(r,"class","flex justify-between items-center p-3 bg-slate-100 rounded-md shadow-sm cursor-pointer hover:bg-slate-200 transition-colors dark:bg-neutral-800 dark:hover:bg-neutral-700 dark:border-neutral-600 dark:text-white svelte-j32xt0"),attr(t,"alt",l=e[20].name+" download link"),attr(t,"href",u=e[20].download),attr(t,"target","_blank"),attr(t,"rel","noopener noreferrer"),attr(t,"class","svelte-j32xt0")},m(s,a){insert(s,t,a),append(t,r),append(r,n),append(r,o),append(r,i),append(t,c),d||(h=[listen(r,"click",e[14]),listen(r,"keyup",e[15])],d=!0)},p(e,r){1&r&&f!==(f=e[20].name+"")&&set_data(n,f),1&r&&s!==(s=e[20].name)&&attr(i,"alt",s),1&r&&!src_url_equal(i.src,a=e[20].icon)&&attr(i,"src",a),1&r&&l!==(l=e[20].name+" download link")&&attr(t,"alt",l),1&r&&u!==(u=e[20].download)&&attr(t,"href",u)},d(e){e&&detach(t),d=!1,run_all(h)}}}function create_fragment(e){let t,r,n,o,i,s,a,c,l,u,d,h,f=e[4],p=[];for(let t=0;t<f.length;t+=1)p[t]=create_each_block_1(get_each_context_1(e,f,t));let g=e[0],y=[];for(let t=0;t<g.length;t+=1)y[t]=create_each_block(get_each_context(e,g,t));return{c(){t=element("div"),r=element("main"),n=element("header"),o=element("h1"),o.textContent="Connect a wallet",i=space(),s=element("span"),s.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="24px" width="24px" viewBox="0 0 24 24" fill="currentColor" class="svelte-j32xt0"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z" class="svelte-j32xt0"></path></svg>',a=space(),c=element("ul");for(let e=0;e<p.length;e+=1)p[e].c();l=space();for(let e=0;e<y.length;e+=1)y[e].c();attr(o,"class","text-xl svelte-j32xt0"),attr(s,"role","button"),attr(s,"alt","Close"),attr(s,"class","cursor-pointer svelte-j32xt0"),attr(n,"class","flex items-center justify-between mb-4 svelte-j32xt0"),attr(c,"class","flex flex-col gap-3 svelte-j32xt0"),attr(r,"role","dialog"),attr(r,"class",null_to_empty("bg-slate-50 rounded-md shadow w-full max-w-[500px] mx-6 p-4 text-center z-50 dark:bg-neutral-900 dark:text-white")+" svelte-j32xt0"),attr(t,"class",u=null_to_empty("backdrop-blur-sm fixed inset-0 flex items-center justify-center bg-black/25 z-40 "+e[2])+" svelte-j32xt0")},m(u,f){insert(u,t,f),append(t,r),append(r,n),append(n,o),append(n,i),append(n,s),append(r,a),append(r,c);for(let e=0;e<p.length;e+=1)p[e]&&p[e].m(c,null);append(c,l);for(let e=0;e<y.length;e+=1)y[e]&&y[e].m(c,null);d||(h=[listen(s,"click",e[10]),listen(s,"keyup",e[11]),listen(r,"click",click_handler_3),listen(r,"keyup",keyup_handler_3),listen(t,"click",e[16]),listen(t,"keyup",e[17])],d=!0)},p(e,[r]){if(26&r){let t;for(f=e[4],t=0;t<f.length;t+=1){const n=get_each_context_1(e,f,t);p[t]?p[t].p(n,r):(p[t]=create_each_block_1(n),p[t].c(),p[t].m(c,l))}for(;t<p.length;t+=1)p[t].d(1);p.length=f.length}if(9&r){let t;for(g=e[0],t=0;t<g.length;t+=1){const n=get_each_context(e,g,t);y[t]?y[t].p(n,r):(y[t]=create_each_block(n),y[t].c(),y[t].m(c,null))}for(;t<y.length;t+=1)y[t].d(1);y.length=g.length}4&r&&u!==(u=null_to_empty("backdrop-blur-sm fixed inset-0 flex items-center justify-center bg-black/25 z-40 "+e[2])+" svelte-j32xt0")&&attr(t,"class",u)},i:noop,o:noop,d(e){e&&detach(t),destroy_each(p,e),destroy_each(y,e),d=!1,run_all(h)}}}const click_handler_3=e=>e.stopPropagation(),keyup_handler_3=e=>e.stopPropagation();function instance(e,t,r){const n=typeof window<"u"?window:null;let{lastWallet:o=null}=t,{installedWallets:i=[]}=t,{authorizedWallets:s=[]}=t,{discoveryWallets:a=[]}=t,{callback:c=async()=>{}}=t,{theme:l=null}=t,u=!1,d=async e=>{var t;r(1,u=null!=(t=null==e?void 0:e.id)&&t),await c(e).catch(()=>{}),r(1,u=!1)},h="";h="dark"===l||null===l&&(null==n?void 0:n.matchMedia("(prefers-color-scheme: dark)").matches)?"dark":"";const f=e=>{r(2,h=e.matches?"dark":"")};onMount(()=>{if(null===l)return null==n||n.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",f),()=>{null==n||n.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",f)}});const p=[o,...s,...i].filter(Boolean);return e.$$set=e=>{"lastWallet"in e&&r(5,o=e.lastWallet),"installedWallets"in e&&r(6,i=e.installedWallets),"authorizedWallets"in e&&r(7,s=e.authorizedWallets),"discoveryWallets"in e&&r(0,a=e.discoveryWallets),"callback"in e&&r(8,c=e.callback),"theme"in e&&r(9,l=e.theme)},[a,u,h,d,p,o,i,s,c,l,()=>d(null),e=>{"Enter"===e.key&&d(null)},e=>d(e),(e,t)=>{"Enter"===t.key&&d(e)},()=>d(null),e=>{"Enter"===e.key&&d(null)},()=>d(null),e=>{"Escape"===e.key&&d(null)}]}class Modal extends SvelteComponent{constructor(e){super(),init$1(this,e,instance,create_fragment,safe_not_equal,{lastWallet:5,installedWallets:6,authorizedWallets:7,discoveryWallets:0,callback:8,theme:9},add_css)}}function excludeWallets(e,t){return e.filter(e=>!t.some(t=>t.id===e.id))}async function show({discoveryWallets:e,installedWallets:t,lastWallet:r,authorizedWallets:n,enable:o,modalOptions:i}){return new Promise(s=>{var a;const c=[r].filter(Boolean);n=excludeWallets(n,c),t=excludeWallets(t,[...c,...n]),e=excludeWallets(e,[...c,...t,...n]);const l=new Modal({target:document.body,props:{callback:async e=>{var t;const r=null!=(t=await(null==o?void 0:o(e)))?t:e;l.$destroy(),s(r)},lastWallet:r,installedWallets:t,authorizedWallets:n,discoveryWallets:e,theme:"system"===(null==i?void 0:i.theme)?null:null!=(a=null==i?void 0:i.theme)?a:null}})})}var te=Object.defineProperty,re=(e,t,r)=>t in e?te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,O=(e,t,r)=>(re(e,"symbol"!=typeof t?t+"":t,r),r),Z=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},v=(e,t,r)=>(Z(e,t,"read from private field"),r?r.call(e):t.get(e)),L=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},G=(e,t,r,n)=>(Z(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),_=(e,t,r)=>(Z(e,t,"access private method"),r);const generateUID=()=>`${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,shuffle=e=>{for(let t=e.length-1;t>0;t--){const r=Math.floor(Math.random()*(t+1));[e[t],e[r]]=[e[r],e[t]]}return e},pipe$1=(...e)=>t=>e.reduce((e,t)=>e.then(t),Promise.resolve(t));function ensureKeysArray(e){return Object.keys(e)}const ssrSafeWindow$1=typeof window<"u"?window:null;function getBuilderId(){return typeof FEDERATION_BUILD_IDENTIFIER<"u"?FEDERATION_BUILD_IDENTIFIER:""}function isDebugMode$1(){return Boolean("")}function isBrowserEnv$1(){return typeof window<"u"}const LOG_CATEGORY$1="[ Federation Runtime ]";function assert(e,t){e||error(t)}function error(e){throw e instanceof Error?(e.message=`${LOG_CATEGORY$1}: ${e.message}`,e):new Error(`${LOG_CATEGORY$1}: ${e}`)}function warn$1(e){e instanceof Error?(e.message=`${LOG_CATEGORY$1}: ${e.message}`,console.warn(e)):console.warn(`${LOG_CATEGORY$1}: ${e}`)}function addUniqueItem(e,t){return-1===e.findIndex(e=>e===t)&&e.push(t),e}function getFMId(e){return"version"in e&&e.version?`${e.name}:${e.version}`:"entry"in e&&e.entry?`${e.name}:${e.entry}`:`${e.name}`}function isRemoteInfoWithEntry(e){return typeof e.entry<"u"}function isPureRemoteEntry(e){return!e.entry.includes(".json")&&e.entry.includes(".js")}function safeToString$1(e){try{return JSON.stringify(e,null,2)}catch{return""}}function isObject(e){return e&&"object"==typeof e}const objectToString=Object.prototype.toString;function isPlainObject(e){return"[object Object]"===objectToString.call(e)}function arrayOptions(e){return Array.isArray(e)?e:[e]}function _extends$1$1(){return _extends$1$1=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$1$1.apply(this,arguments)}function _object_without_properties_loose$1(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&(o[r]=e[r]);return o}const nativeGlobal=(()=>{try{return new Function("return this")()}catch{return globalThis}})(),Global=nativeGlobal;function definePropertyGlobalVal(e,t,r){Object.defineProperty(e,t,{value:r,configurable:!1,writable:!0})}function includeOwnProperty(e,t){return Object.hasOwnProperty.call(e,t)}includeOwnProperty(globalThis,"__GLOBAL_LOADING_REMOTE_ENTRY__")||definePropertyGlobalVal(globalThis,"__GLOBAL_LOADING_REMOTE_ENTRY__",{});const globalLoading=globalThis.__GLOBAL_LOADING_REMOTE_ENTRY__;function setGlobalDefaultVal(e){var t,r,n,o,i,s;includeOwnProperty(e,"__VMOK__")&&!includeOwnProperty(e,"__FEDERATION__")&&definePropertyGlobalVal(e,"__FEDERATION__",e.__VMOK__),includeOwnProperty(e,"__FEDERATION__")||(definePropertyGlobalVal(e,"__FEDERATION__",{__GLOBAL_PLUGIN__:[],__INSTANCES__:[],moduleInfo:{},__SHARE__:{},__MANIFEST_LOADING__:{},__PRELOADED_MAP__:new Map}),definePropertyGlobalVal(e,"__VMOK__",e.__FEDERATION__)),null!=(t=e.__FEDERATION__).__GLOBAL_PLUGIN__||(t.__GLOBAL_PLUGIN__=[]),null!=(r=e.__FEDERATION__).__INSTANCES__||(r.__INSTANCES__=[]),null!=(n=e.__FEDERATION__).moduleInfo||(n.moduleInfo={}),null!=(o=e.__FEDERATION__).__SHARE__||(o.__SHARE__={}),null!=(i=e.__FEDERATION__).__MANIFEST_LOADING__||(i.__MANIFEST_LOADING__={}),null!=(s=e.__FEDERATION__).__PRELOADED_MAP__||(s.__PRELOADED_MAP__=new Map)}function getGlobalFederationInstance(e,t){const r=getBuilderId();return globalThis.__FEDERATION__.__INSTANCES__.find(n=>!!(r&&n.options.id===getBuilderId()||n.options.name===e&&!n.options.version&&!t||n.options.name===e&&t&&n.options.version===t))}function setGlobalFederationInstance(e){globalThis.__FEDERATION__.__INSTANCES__.push(e)}function getGlobalFederationConstructor(){return globalThis.__FEDERATION__.__DEBUG_CONSTRUCTOR__}function setGlobalFederationConstructor(e,t=isDebugMode$1()){t&&(globalThis.__FEDERATION__.__DEBUG_CONSTRUCTOR__=e,globalThis.__FEDERATION__.__DEBUG_CONSTRUCTOR_VERSION__="0.1.21")}function getInfoWithoutType(e,t){if("string"==typeof t){if(e[t])return{value:e[t],key:t};{const r=Object.keys(e);for(const n of r){const[r,o]=n.split(":"),i=`${r}:${t}`,s=e[i];if(s)return{value:s,key:i}}return{value:void 0,key:t}}}throw new Error("key must be string")}setGlobalDefaultVal(globalThis),setGlobalDefaultVal(nativeGlobal);const getGlobalSnapshot=()=>nativeGlobal.__FEDERATION__.moduleInfo,getTargetSnapshotInfoByModuleInfo=(e,t)=>{const r=getInfoWithoutType(t,getFMId(e)).value;if(r&&!r.version&&"version"in e&&e.version&&(r.version=e.version),r)return r;if("version"in e&&e.version){const{version:t}=e,r=getFMId(_object_without_properties_loose$1(e,["version"])),n=getInfoWithoutType(nativeGlobal.__FEDERATION__.moduleInfo,r).value;if((null==n?void 0:n.version)===t)return n}},getGlobalSnapshotInfoByModuleInfo=e=>getTargetSnapshotInfoByModuleInfo(e,nativeGlobal.__FEDERATION__.moduleInfo),setGlobalSnapshotInfoByModuleInfo=(e,t)=>{const r=getFMId(e);return nativeGlobal.__FEDERATION__.moduleInfo[r]=t,nativeGlobal.__FEDERATION__.moduleInfo},addGlobalSnapshot=e=>(nativeGlobal.__FEDERATION__.moduleInfo=_extends$1$1({},nativeGlobal.__FEDERATION__.moduleInfo,e),()=>{const t=Object.keys(e);for(const e of t)delete nativeGlobal.__FEDERATION__.moduleInfo[e]}),getRemoteEntryExports=(e,t)=>{const r=t||`__FEDERATION_${e}:custom__`;return{remoteEntryKey:r,entryExports:globalThis[r]}},getGlobalHostPlugins=()=>nativeGlobal.__FEDERATION__.__GLOBAL_PLUGIN__,getPreloaded=e=>globalThis.__FEDERATION__.__PRELOADED_MAP__.get(e),setPreloaded=e=>globalThis.__FEDERATION__.__PRELOADED_MAP__.set(e,!0),DEFAULT_SCOPE="default",DEFAULT_REMOTE_TYPE="global",buildIdentifier="[0-9A-Za-z-]+",build=`(?:\\+(${buildIdentifier}(?:\\.${buildIdentifier})*))`,numericIdentifier="0|[1-9]\\d*",numericIdentifierLoose="[0-9]+",nonNumericIdentifier="\\d*[a-zA-Z-][a-zA-Z0-9-]*",preReleaseIdentifierLoose=`(?:${numericIdentifierLoose}|${nonNumericIdentifier})`,preReleaseLoose=`(?:-?(${preReleaseIdentifierLoose}(?:\\.${preReleaseIdentifierLoose})*))`,preReleaseIdentifier=`(?:${numericIdentifier}|${nonNumericIdentifier})`,preRelease=`(?:-(${preReleaseIdentifier}(?:\\.${preReleaseIdentifier})*))`,xRangeIdentifier=`${numericIdentifier}|x|X|\\*`,xRangePlain=`[v=\\s]*(${xRangeIdentifier})(?:\\.(${xRangeIdentifier})(?:\\.(${xRangeIdentifier})(?:${preRelease})?${build}?)?)?`,hyphenRange=`^\\s*(${xRangePlain})\\s+-\\s+(${xRangePlain})\\s*$`,mainVersionLoose=`(${numericIdentifierLoose})\\.(${numericIdentifierLoose})\\.(${numericIdentifierLoose})`,loosePlain=`[v=\\s]*${mainVersionLoose}${preReleaseLoose}?${build}?`,gtlt="((?:<|>)?=?)",comparatorTrim=`(\\s*)${gtlt}\\s*(${loosePlain}|${xRangePlain})`,loneTilde="(?:~>?)",tildeTrim=`(\\s*)${loneTilde}\\s+`,loneCaret="(?:\\^)",caretTrim=`(\\s*)${loneCaret}\\s+`,star="(<|>)?=?\\s*\\*",caret=`^${loneCaret}${xRangePlain}$`,mainVersion=`(${numericIdentifier})\\.(${numericIdentifier})\\.(${numericIdentifier})`,fullPlain=`v?${mainVersion}${preRelease}?${build}?`,tilde=`^${loneTilde}${xRangePlain}$`,xRange=`^${gtlt}\\s*${xRangePlain}$`,comparator=`^${gtlt}\\s*(${fullPlain})$|^$`,gte0="^\\s*>=\\s*0.0.0\\s*$";function parseRegex(e){return new RegExp(e)}function isXVersion(e){return!e||"x"===e.toLowerCase()||"*"===e}function pipe(...e){return t=>e.reduce((e,t)=>t(e),t)}function extractComparator(e){return e.match(parseRegex(comparator))}function combineVersion(e,t,r,n){const o=`${e}.${t}.${r}`;return n?`${o}-${n}`:o}function parseHyphen(e){return e.replace(parseRegex(hyphenRange),(e,t,r,n,o,i,s,a,c,l,u,d)=>`${t=isXVersion(r)?"":isXVersion(n)?`>=${r}.0.0`:isXVersion(o)?`>=${r}.${n}.0`:`>=${t}`} ${a=isXVersion(c)?"":isXVersion(l)?`<${Number(c)+1}.0.0-0`:isXVersion(u)?`<${c}.${Number(l)+1}.0-0`:d?`<=${c}.${l}.${u}-${d}`:`<=${a}`}`.trim())}function parseComparatorTrim(e){return e.replace(parseRegex(comparatorTrim),"$1$2$3")}function parseTildeTrim(e){return e.replace(parseRegex(tildeTrim),"$1~")}function parseCaretTrim(e){return e.replace(parseRegex(caretTrim),"$1^")}function parseCarets(e){return e.trim().split(/\s+/).map(e=>e.replace(parseRegex(caret),(e,t,r,n,o)=>isXVersion(t)?"":isXVersion(r)?`>=${t}.0.0 <${Number(t)+1}.0.0-0`:isXVersion(n)?"0"===t?`>=${t}.${r}.0 <${t}.${Number(r)+1}.0-0`:`>=${t}.${r}.0 <${Number(t)+1}.0.0-0`:o?"0"===t?"0"===r?`>=${t}.${r}.${n}-${o} <${t}.${r}.${Number(n)+1}-0`:`>=${t}.${r}.${n}-${o} <${t}.${Number(r)+1}.0-0`:`>=${t}.${r}.${n}-${o} <${Number(t)+1}.0.0-0`:"0"===t?"0"===r?`>=${t}.${r}.${n} <${t}.${r}.${Number(n)+1}-0`:`>=${t}.${r}.${n} <${t}.${Number(r)+1}.0-0`:`>=${t}.${r}.${n} <${Number(t)+1}.0.0-0`)).join(" ")}function parseTildes(e){return e.trim().split(/\s+/).map(e=>e.replace(parseRegex(tilde),(e,t,r,n,o)=>isXVersion(t)?"":isXVersion(r)?`>=${t}.0.0 <${Number(t)+1}.0.0-0`:isXVersion(n)?`>=${t}.${r}.0 <${t}.${Number(r)+1}.0-0`:o?`>=${t}.${r}.${n}-${o} <${t}.${Number(r)+1}.0-0`:`>=${t}.${r}.${n} <${t}.${Number(r)+1}.0-0`)).join(" ")}function parseXRanges(e){return e.split(/\s+/).map(e=>e.trim().replace(parseRegex(xRange),(e,t,r,n,o,i)=>{const s=isXVersion(r),a=s||isXVersion(n),c=a||isXVersion(o);return"="===t&&c&&(t=""),i="",s?">"===t||"<"===t?"<0.0.0-0":"*":t&&c?(a&&(n=0),o=0,">"===t?(t=">=",a?(r=Number(r)+1,n=0,o=0):(n=Number(n)+1,o=0)):"<="===t&&(t="<",a?r=Number(r)+1:n=Number(n)+1),"<"===t&&(i="-0"),`${t+r}.${n}.${o}${i}`):a?`>=${r}.0.0${i} <${Number(r)+1}.0.0-0`:c?`>=${r}.${n}.0${i} <${r}.${Number(n)+1}.0-0`:e})).join(" ")}function parseStar(e){return e.trim().replace(parseRegex(star),"")}function parseGTE0(e){return e.trim().replace(parseRegex(gte0),"")}function compareAtom(e,t){return(e=Number(e)||e)>(t=Number(t)||t)?1:e===t?0:-1}function comparePreRelease(e,t){const{preRelease:r}=e,{preRelease:n}=t;if(void 0===r&&Boolean(n))return 1;if(Boolean(r)&&void 0===n)return-1;if(void 0===r&&void 0===n)return 0;for(let e=0,t=r.length;e<=t;e++){const t=r[e],o=n[e];if(t!==o)return void 0===t&&void 0===o?0:t?o?compareAtom(t,o):-1:1}return 0}function compareVersion(e,t){return compareAtom(e.major,t.major)||compareAtom(e.minor,t.minor)||compareAtom(e.patch,t.patch)||comparePreRelease(e,t)}function eq(e,t){return e.version===t.version}function compare(e,t){switch(e.operator){case"":case"=":return eq(e,t);case">":return compareVersion(e,t)<0;case">=":return eq(e,t)||compareVersion(e,t)<0;case"<":return compareVersion(e,t)>0;case"<=":return eq(e,t)||compareVersion(e,t)>0;case void 0:return!0;default:return!1}}function parseComparatorString(e){return pipe(parseCarets,parseTildes,parseXRanges,parseStar)(e)}function parseRange(e){return pipe(parseHyphen,parseComparatorTrim,parseTildeTrim,parseCaretTrim)(e.trim()).split(/\s+/).join(" ")}function satisfy(e,t){if(!e)return!1;const r=parseRange(t).split(" ").map(e=>parseComparatorString(e)).join(" ").split(/\s+/).map(e=>parseGTE0(e)),n=extractComparator(e);if(!n)return!1;const[,o,,i,s,a,c]=n,l={operator:o,version:combineVersion(i,s,a,c),major:i,minor:s,patch:a,preRelease:null==c?void 0:c.split(".")};for(const e of r){const t=extractComparator(e);if(!t)return!1;const[,r,,n,o,i,s]=t;if(!compare({operator:r,version:combineVersion(n,o,i,s),major:n,minor:o,patch:i,preRelease:null==s?void 0:s.split(".")},l))return!1}return!0}function _extends$8(){return _extends$8=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$8.apply(this,arguments)}function formatShare(e,t,r){let n;var o,i;return n="get"in e?e.get:"lib"in e?()=>Promise.resolve(e.lib):()=>Promise.resolve(()=>{throw new Error(`Can not get shared '${r}'!`)}),_extends$8({deps:[],useIn:[],from:t,loading:null},e,{shareConfig:_extends$8({requiredVersion:`^${e.version}`,singleton:!1,eager:!1,strictVersion:!1},e.shareConfig),get:n,loaded:"lib"in e||void 0,version:null!=(o=e.version)?o:"0",scope:Array.isArray(e.scope)?e.scope:[null!=(i=e.scope)?i:"default"],strategy:e.strategy||"version-first"})}function formatShareConfigs(e,t){const r=t.shared||{},n=t.name,o=Object.keys(r).reduce((e,t)=>{const o=arrayOptions(r[t]);return e[t]=e[t]||[],o.forEach(r=>{e[t].push(formatShare(r,n,t))}),e},{}),i=_extends$8({},e.shared);return Object.keys(o).forEach(e=>{i[e]?o[e].forEach(t=>{i[e].find(e=>e.version===t.version)||i[e].push(t)}):i[e]=o[e]}),{shared:i,shareInfos:o}}function versionLt(e,t){const r=e=>{if(!Number.isNaN(Number(e))){const t=e.split(".");let r=e;for(let e=0;e<3-t.length;e++)r+=".0";return r}return e};return!!satisfy(r(e),`<=${r(t)}`)}const findVersion=(e,t)=>{const r=t||function(e,t){return versionLt(e,t)};return Object.keys(e).reduce((e,t)=>!e||r(e,t)||"0"===e?t:e,0)},isLoaded=e=>Boolean(e.loaded)||"function"==typeof e.lib;function findSingletonVersionOrderByVersion(e,t,r){const n=e[t][r];return findVersion(e[t][r],function(e,t){return!isLoaded(n[e])&&versionLt(e,t)})}function findSingletonVersionOrderByLoaded(e,t,r){const n=e[t][r];return findVersion(e[t][r],function(e,t){return isLoaded(n[t])?!isLoaded(n[e])||Boolean(versionLt(e,t)):!isLoaded(n[e])&&versionLt(e,t)})}function getFindShareFunction(e){return"loaded-first"===e?findSingletonVersionOrderByLoaded:findSingletonVersionOrderByVersion}function getRegisteredShare(e,t,r,n){if(!e)return;const{shareConfig:o,scope:i=DEFAULT_SCOPE,strategy:s}=r,a=Array.isArray(i)?i:[i];for(const i of a)if(o&&e[i]&&e[i][t]){const{requiredVersion:a}=o,c=getFindShareFunction(s)(e,i,t),l=()=>{if(o.singleton){if("string"==typeof a&&!satisfy(c,a)){const n=`Version ${c} from ${c&&e[i][t][c].from} of shared singleton module ${t} does not satisfy the requirement of ${r.from} which needs ${a})`;o.strictVersion?error(n):warn$1(n)}return e[i][t][c]}if(!1===a||"*"===a||satisfy(c,a))return e[i][t][c];for(const[r,n]of Object.entries(e[i][t]))if(satisfy(r,a))return n},u={shareScopeMap:e,scope:i,pkgName:t,version:c,GlobalFederation:Global.__FEDERATION__,resolver:l};return(n.emit(u)||u).resolver()}}function getGlobalShareScope(){return Global.__FEDERATION__.__SHARE__}function getTargetSharedOptions(e){const{pkgName:t,extraOptions:r,shareInfos:n}=e;var o;const i=null!=(o=null==r?void 0:r.resolver)?o:e=>{if(!e)return;const t={};e.forEach(e=>{t[e.version]=e});const r=findVersion(t,function(e,r){return!isLoaded(t[e])&&versionLt(e,r)});return t[r]};return Object.assign({},i(n[t]),null==r?void 0:r.customShareInfo)}function _define_property$4(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var MANIFEST_EXT=".json",BROWSER_LOG_KEY="FEDERATION_DEBUG",BROWSER_LOG_VALUE="1",NameTransformSymbol={AT:"@",HYPHEN:"-",SLASH:"/"},_obj,NameTransformMap=(_obj={},_define_property$4(_obj,NameTransformSymbol.AT,"scope_"),_define_property$4(_obj,NameTransformSymbol.HYPHEN,"_"),_define_property$4(_obj,NameTransformSymbol.SLASH,"__"),_obj),_obj1;_obj1={},_define_property$4(_obj1,NameTransformMap[NameTransformSymbol.AT],NameTransformSymbol.AT),_define_property$4(_obj1,NameTransformMap[NameTransformSymbol.HYPHEN],NameTransformSymbol.HYPHEN),_define_property$4(_obj1,NameTransformMap[NameTransformSymbol.SLASH],NameTransformSymbol.SLASH);var SEPARATOR=":";function isBrowserEnv(){return typeof window<"u"}function isDebugMode(){return typeof process<"u"&&process.env&&process.env.FEDERATION_DEBUG?Boolean(process.env.FEDERATION_DEBUG):typeof FEDERATION_DEBUG<"u"&&Boolean(FEDERATION_DEBUG)}function _array_like_to_array$2(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _array_without_holes(e){if(Array.isArray(e))return _array_like_to_array$2(e)}function _class_call_check(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _create_class(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _define_property$3(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _iterable_to_array$1(e){if(typeof Symbol<"u"&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _non_iterable_spread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _to_consumable_array(e){return _array_without_holes(e)||_iterable_to_array$1(e)||_unsupported_iterable_to_array$2(e)||_non_iterable_spread()}function _unsupported_iterable_to_array$2(e,t){if(e){if("string"==typeof e)return _array_like_to_array$2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _array_like_to_array$2(e,t)}}function safeToString(e){try{return JSON.stringify(e,null,2)}catch{return""}}var DEBUG_LOG="[ FEDERATION DEBUG ]";function safeGetLocalStorageItem(){try{if(typeof window<"u"&&window.localStorage)return localStorage.getItem(BROWSER_LOG_KEY)===BROWSER_LOG_VALUE}catch{return typeof document<"u"}return!1}var Logger=function(){function e(t){_class_call_check(this,e),_define_property$3(this,"enable",!1),_define_property$3(this,"identifier",void 0),this.identifier=t||DEBUG_LOG,(isBrowserEnv()&&safeGetLocalStorageItem()||isDebugMode())&&(this.enable=!0)}return _create_class(e,[{key:"info",value:function(e,t){if(this.enable){var r=safeToString(t)||"";isBrowserEnv()?console.info("%c ".concat(this.identifier,": ").concat(e," ").concat(r),"color:#3300CC"):console.info("[34m%s","".concat(this.identifier,": ").concat(e," ").concat(r?"\n".concat(r):""))}}},{key:"logOriginalInfo",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(this.enable)if(isBrowserEnv()){var n;console.info("%c ".concat(this.identifier,": OriginalInfo"),"color:#3300CC"),(n=console).log.apply(n,_to_consumable_array(t))}else{var o;console.info("%c ".concat(this.identifier,": OriginalInfo"),"color:#3300CC"),(o=console).log.apply(o,_to_consumable_array(t))}}}]),e}(),LOG_CATEGORY="[ Federation Runtime ]";new Logger;var composeKeyWithSeparator=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length?t.reduce(function(e,t){return t?e?"".concat(e).concat(SEPARATOR).concat(t):t:e},""):""},getResourceUrl=function(e,t){if("getPublicPath"in e){var r=new Function(e.getPublicPath)();return"".concat(r).concat(t)}return"publicPath"in e?"".concat(e.publicPath).concat(t):(console.warn("Can not get resource url, if in debug mode, please ignore",e,t),"")},warn=function(e){console.warn("".concat(LOG_CATEGORY,": ").concat(e))};function _define_property$2(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _object_spread$2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){_define_property$2(e,t,r[t])})}return e}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _object_spread_props(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var simpleJoinRemoteEntry=function(e,t){if(!e)return t;var r=function(e){if("."===e)return"";if(e.startsWith("./"))return e.replace("./","");if(e.startsWith("/")){var t=e.slice(1);return t.endsWith("/")?t.slice(0,-1):t}return e}(e);return r?r.endsWith("/")?"".concat(r).concat(t):"".concat(r,"/").concat(t):t};function inferAutoPublicPath(e){return e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/")}function generateSnapshotFromManifest(e){var t,r,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o.remotes,s=void 0===i?{}:i,a=o.overrides,c=void 0===a?{}:a,l=o.version,u=function(){return"publicPath"in e.metaData?"auto"===e.metaData.publicPath&&l?inferAutoPublicPath(l):e.metaData.publicPath:e.metaData.getPublicPath},d=Object.keys(c),h={};Object.keys(s).length||(h=(null===(n=e.remotes)||void 0===n?void 0:n.reduce(function(e,t){var r,n=t.federationContainerName;return r=d.includes(n)?c[n]:"version"in t?t.version:t.entry,e[n]={matchedVersion:r},e},{}))||{}),Object.keys(s).forEach(function(e){return h[e]={matchedVersion:d.includes(e)?c[e]:s[e]}});var f=e.metaData,p=f.remoteEntry,g=p.path,y=p.name,m=p.type,b=f.types,w=f.buildInfo.buildVersion,v=f.globalName,_=e.exposes,E={version:l||"",buildVersion:w,globalName:v,remoteEntry:simpleJoinRemoteEntry(g,y),remoteEntryType:m,remoteTypes:simpleJoinRemoteEntry(b.path,b.name),remoteTypesZip:b.zip||"",remoteTypesAPI:b.api||"",remotesInfo:h,shared:null==e?void 0:e.shared.map(function(e){return{assets:e.assets,sharedName:e.name,version:e.version}}),modules:null==_?void 0:_.map(function(e){return{moduleName:e.name,modulePath:e.path,assets:e.assets}})};if(null!==(t=e.metaData)&&void 0!==t&&t.prefetchInterface){var A=e.metaData.prefetchInterface;E=_object_spread_props(_object_spread$2({},E),{prefetchInterface:A})}if(null!==(r=e.metaData)&&void 0!==r&&r.prefetchEntry){var S=e.metaData.prefetchEntry,x=S.path,I=S.name,T=S.type;E=_object_spread_props(_object_spread$2({},E),{prefetchEntry:simpleJoinRemoteEntry(x,I),prefetchEntryType:T})}return"publicPath"in e.metaData?_object_spread_props(_object_spread$2({},E),{publicPath:u()}):_object_spread_props(_object_spread$2({},E),{getPublicPath:u()})}function isManifestProvider(e){return!(!("remoteEntry"in e)||!e.remoteEntry.includes(MANIFEST_EXT))}function asyncGeneratorStep$1(e,t,r,n,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,o)}function _async_to_generator$1(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function s(e){asyncGeneratorStep$1(i,n,o,s,a,"next",e)}function a(e){asyncGeneratorStep$1(i,n,o,s,a,"throw",e)}s(void 0)})}}function _define_property$1(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _instanceof(e,t){return null!=t&&typeof Symbol<"u"&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function _object_spread$1(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){_define_property$1(e,t,r[t])})}return e}function _type_of$2(e){return e&&typeof Symbol<"u"&&e.constructor===Symbol?"symbol":typeof e}function _ts_generator$1(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}function safeWrapper(e,t){return _safeWrapper.apply(this,arguments)}function _safeWrapper(){return(_safeWrapper=_async_to_generator$1(function(e,t){var r;return _ts_generator$1(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,e()];case 1:return[2,n.sent()];case 2:return r=n.sent(),!t&&warn(r),[2];case 3:return[2]}})})).apply(this,arguments)}function isStaticResourcesEqual(e,t){var r=/^(https?:)?\/\//i;return e.replace(r,"").replace(/\/$/,"")===t.replace(r,"").replace(/\/$/,"")}function createScript(e){for(var t,r=null,n=!0,o=2e4,i=document.getElementsByTagName("script"),s=0;s<i.length;s++){var a=i[s],c=a.getAttribute("src");if(c&&isStaticResourcesEqual(c,e.url)){r=a,n=!1;break}}if(!r){if((r=document.createElement("script")).type="text/javascript",r.src=e.url,e.createScriptHook){var l=e.createScriptHook(e.url);_instanceof(l,HTMLScriptElement)?r=l:"object"===(typeof l>"u"?"undefined":_type_of$2(l))&&(l.script&&(r=l.script),l.timeout&&(o=l.timeout))}var u=e.attrs;u&&Object.keys(u).forEach(function(e){r&&("async"===e||"defer"===e?r[e]=u[e]:r.getAttribute(e)||r.setAttribute(e,u[e]))})}var d=function(n,o){var i;if(clearTimeout(t),r&&(r.onerror=null,r.onload=null,safeWrapper(function(){var t=e.needDeleteScript;(void 0===t||t)&&null!=r&&r.parentNode&&r.parentNode.removeChild(r)}),n)){var s,a=n(o);return null==e||null===(s=e.cb)||void 0===s||s.call(e),a}null==e||null===(i=e.cb)||void 0===i||i.call(e)};return r.onerror=d.bind(null,r.onerror),r.onload=d.bind(null,r.onload),t=setTimeout(function(){d(null,new Error('Remote script "'.concat(e.url,'" time-outed.')))},o),{script:r,needAttach:n}}function createLink(e){for(var t=null,r=!0,n=document.getElementsByTagName("link"),o=0;o<n.length;o++){var i=n[o],s=i.getAttribute("href"),a=i.getAttribute("ref");if(s&&isStaticResourcesEqual(s,e.url)&&a===e.attrs.ref){t=i,r=!1;break}}if(!t){if((t=document.createElement("link")).setAttribute("href",e.url),e.createLinkHook){var c=e.createLinkHook(e.url);_instanceof(c,HTMLLinkElement)&&(t=c)}var l=e.attrs;l&&Object.keys(l).forEach(function(e){t&&!t.getAttribute(e)&&t.setAttribute(e,l[e])})}var u=function(r,n){if(t&&(t.onerror=null,t.onload=null,safeWrapper(function(){var r=e.needDeleteLink;(void 0===r||r)&&null!=t&&t.parentNode&&t.parentNode.removeChild(t)}),r)){var o=r(n);return e.cb(),o}e.cb()};return t.onerror=u.bind(null,t.onerror),t.onload=u.bind(null,t.onload),{link:t,needAttach:r}}function loadScript(e,t){var r=t.attrs,n=void 0===r?{}:r,o=t.createScriptHook;return new Promise(function(t,r){var i=createScript({url:e,cb:t,attrs:_object_spread$1({crossorigin:"anonymous",fetchpriority:"high"},n),createScriptHook:o,needDeleteScript:!0}),s=i.script;i.needAttach&&document.head.appendChild(s)})}function _array_like_to_array(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _array_with_holes(e){if(Array.isArray(e))return e}function asyncGeneratorStep(e,t,r,n,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,o)}function _async_to_generator(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function s(e){asyncGeneratorStep(i,n,o,s,a,"next",e)}function a(e){asyncGeneratorStep(i,n,o,s,a,"throw",e)}s(void 0)})}}function _iterable_to_array_limit(e,t){var r=null==e?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],s=!0,a=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);s=!0);}catch(e){a=!0,o=e}finally{try{!s&&null!=r.return&&r.return()}finally{if(a)throw o}}return i}}function _non_iterable_rest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _sliced_to_array(e,t){return _array_with_holes(e)||_iterable_to_array_limit(e,t)||_unsupported_iterable_to_array(e,t)||_non_iterable_rest()}function _type_of$1(e){return e&&typeof Symbol<"u"&&e.constructor===Symbol?"symbol":typeof e}function _unsupported_iterable_to_array(e,t){if(e){if("string"==typeof e)return _array_like_to_array(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _array_like_to_array(e,t)}}function _ts_generator(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}function importNodeModule(e){if(!e)throw new Error("import specifier is required");return new Function("name","return import(name)")(e).then(function(e){return e.default}).catch(function(t){throw console.error("Error importing module ".concat(e,":"),t),t})}function createScriptNode(url,cb,attrs,createScriptHook){if(createScriptHook){var hookResult=createScriptHook(url);hookResult&&"object"===(typeof hookResult>"u"?"undefined":_type_of$1(hookResult))&&"url"in hookResult&&(url=hookResult.url)}var urlObj;try{urlObj=new URL(url)}catch(t){return console.error("Error constructing URL:",t),void cb(new Error("Invalid URL: ".concat(t)))}var getFetch=(t=_async_to_generator(function(){var e;return _ts_generator(this,function(t){switch(t.label){case 0:return typeof fetch>"u"?[4,importNodeModule("node-fetch")]:[3,2];case 1:return[2,(null==(e=t.sent())?void 0:e.default)||e];case 2:return[2,fetch];case 3:return[2]}})}),function(){return t.apply(this,arguments)}),t;console.log("fetching",urlObj.href),getFetch().then(function(f){f(urlObj.href).then(function(e){return e.text()}).then(function(){var _ref=_async_to_generator(function(data){var _ref,path,vm,scriptContext,urlDirname,filename,script,exportedInterface,container;return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,Promise.all([importNodeModule("path"),importNodeModule("vm")])];case 1:_ref=_sliced_to_array.apply(void 0,[_state.sent(),2]),path=_ref[0],vm=_ref[1],scriptContext={exports:{},module:{exports:{}}},urlDirname=urlObj.pathname.split("/").slice(0,-1).join("/"),filename=path.basename(urlObj.pathname);try{if(script=new vm.Script("(function(exports, module, require, __dirname, __filename) {".concat(data,"\n})"),filename),script.runInThisContext()(scriptContext.exports,scriptContext.module,eval("require"),urlDirname,filename),exportedInterface=scriptContext.module.exports||scriptContext.exports,attrs&&exportedInterface&&attrs.globalName)return container=exportedInterface[attrs.globalName]||exportedInterface,cb(void 0,container),[2];cb(void 0,exportedInterface)}catch(e){cb(new Error("Script execution error: ".concat(e)))}return[2]}})});return function(e){return _ref.apply(this,arguments)}}()).catch(function(e){cb(e)})})}function loadScriptNode(e,t){return new Promise(function(r,n){createScriptNode(e,function(e,o){if(e)n(e);else{var i,s,a=(null==t||null===(i=t.attrs)||void 0===i?void 0:i.globalName)||"__FEDERATION_".concat(null==t||null===(s=t.attrs)||void 0===s?void 0:s.name,":custom__"),c=globalThis[a]=o;r(c)}},t.attrs,t.createScriptHook)})}function matchRemoteWithNameAndExpose(e,t){for(const r of e){const e=t.startsWith(r.name);let n=t.replace(r.name,"");if(e){if(n.startsWith("/"))return n=`.${n}`,{pkgNameOrAlias:r.name,expose:n,remote:r};if(""===n)return{pkgNameOrAlias:r.name,expose:".",remote:r}}const o=r.alias&&t.startsWith(r.alias);let i=r.alias&&t.replace(r.alias,"");if(r.alias&&o){if(i&&i.startsWith("/"))return i=`.${i}`,{pkgNameOrAlias:r.alias,expose:i,remote:r};if(""===i)return{pkgNameOrAlias:r.alias,expose:".",remote:r}}}}function matchRemote(e,t){for(const r of e)if(t===r.name||r.alias&&t===r.alias)return r}function registerPlugins$1(e,t){const r=getGlobalHostPlugins();return r.length>0&&r.forEach(t=>{null!=e&&e.find(e=>e.name!==t.name)&&e.push(t)}),e&&e.length>0&&e.forEach(e=>{t.forEach(t=>{t.applyPlugin(e)})}),e}function _extends$7(){return _extends$7=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$7.apply(this,arguments)}async function loadEsmEntry({entry:e,remoteEntryExports:t}){return new Promise((r,n)=>{try{t?r(t):new Function("callbacks",`import("${e}").then(callbacks[0]).catch(callbacks[1])`)([r,n])}catch(e){n(e)}})}async function loadEntryScript({name:e,globalName:t,entry:r,createScriptHook:n}){const{entryExports:o}=getRemoteEntryExports(e,t);return o||(typeof document>"u"?loadScriptNode(r,{attrs:{name:e,globalName:t},createScriptHook:n}).then(()=>{const{remoteEntryKey:n,entryExports:o}=getRemoteEntryExports(e,t);return assert(o,`\n        Unable to use the ${e}'s '${r}' URL with ${n}'s globalName to get remoteEntry exports.\n        Possible reasons could be:\n\n        1. '${r}' is not the correct URL, or the remoteEntry resource or name is incorrect.\n\n        2. ${n} cannot be used to get remoteEntry exports in the window object.\n      `),o}).catch(e=>{throw e}):loadScript(r,{attrs:{},createScriptHook:n}).then(()=>{const{remoteEntryKey:n,entryExports:o}=getRemoteEntryExports(e,t);return assert(o,`\n      Unable to use the ${e}'s '${r}' URL with ${n}'s globalName to get remoteEntry exports.\n      Possible reasons could be:\n\n      1. '${r}' is not the correct URL, or the remoteEntry resource or name is incorrect.\n\n      2. ${n} cannot be used to get remoteEntry exports in the window object.\n    `),o}).catch(e=>{throw e}))}function getRemoteEntryUniqueKey(e){const{entry:t,name:r}=e;return composeKeyWithSeparator(r,t)}async function getRemoteEntry({remoteEntryExports:e,remoteInfo:t,createScriptHook:r}){const{entry:n,name:o,type:i,entryGlobalName:s}=t,a=getRemoteEntryUniqueKey(t);return e||(globalLoading[a]||(["esm","module"].includes(i)?globalLoading[a]=loadEsmEntry({entry:n,remoteEntryExports:e}):globalLoading[a]=loadEntryScript({name:o,globalName:s,entry:n,createScriptHook:r})),globalLoading[a])}function getRemoteInfo(e){return _extends$7({},e,{entry:"entry"in e?e.entry:"",type:e.type||DEFAULT_REMOTE_TYPE,entryGlobalName:e.entryGlobalName||e.name,shareScope:e.shareScope||DEFAULT_SCOPE})}function _extends$6(){return _extends$6=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$6.apply(this,arguments)}let Module=class{async getEntry(){if(this.remoteEntryExports)return this.remoteEntryExports;const e=await getRemoteEntry({remoteInfo:this.remoteInfo,remoteEntryExports:this.remoteEntryExports,createScriptHook:e=>{const t=this.host.loaderHook.lifecycle.createScript.emit({url:e});if(t&&(typeof document>"u"||t instanceof HTMLScriptElement||"script"in t||"timeout"in t))return t}});return assert(e,`remoteEntryExports is undefined \n ${safeToString$1(this.remoteInfo)}`),this.remoteEntryExports=e,this.remoteEntryExports}async get(e,t,r){const{loadFactory:n=!0}=r||{loadFactory:!0},o=await this.getEntry();if(!this.inited){const e=this.host.shareScopeMap,t=this.remoteInfo.shareScope||"default";e[t]||(e[t]={});const r=e[t],n=[],i={version:this.remoteInfo.version||""};Object.defineProperty(i,"shareScopeMap",{value:e,enumerable:!1});const s=await this.host.hooks.lifecycle.beforeInitContainer.emit({shareScope:r,remoteEntryInitOptions:i,initScope:n,remoteInfo:this.remoteInfo,origin:this.host});await o.init(s.shareScope,s.initScope,s.remoteEntryInitOptions),await this.host.hooks.lifecycle.initContainer.emit(_extends$6({},s,{remoteEntryExports:o}))}this.lib=o,this.inited=!0;const i=await o.get(t);assert(i,`${getFMId(this.remoteInfo)} remote don't export ${t}.`);const s=this.wraperFactory(i,e);return n?await s():s}wraperFactory(e,t){function r(e,t){e&&"object"==typeof e&&Object.isExtensible(e)&&!Object.getOwnPropertyDescriptor(e,Symbol.for("mf_module_id"))&&Object.defineProperty(e,Symbol.for("mf_module_id"),{value:t,enumerable:!1})}return e instanceof Promise?async()=>{const n=await e();return r(n,t),n}:()=>{const n=e();return r(n,t),n}}constructor({remoteInfo:e,host:t}){this.inited=!1,this.lib=void 0,this.remoteInfo=e,this.host=t}};class SyncHook{on(e){"function"==typeof e&&this.listeners.add(e)}once(e){const t=this;this.on(function r(...n){return t.remove(r),e.apply(null,n)})}emit(...e){let t;return this.listeners.size>0&&this.listeners.forEach(r=>{t=r(...e)}),t}remove(e){this.listeners.delete(e)}removeAll(){this.listeners.clear()}constructor(e){this.type="",this.listeners=new Set,e&&(this.type=e)}}class AsyncHook extends SyncHook{emit(...e){let t;const r=Array.from(this.listeners);if(r.length>0){let n=0;const o=t=>!1!==t&&(n<r.length?Promise.resolve(r[n++].apply(null,e)).then(o):t);t=o()}return Promise.resolve(t)}}function checkReturnData(e,t){if(!isObject(t))return!1;if(e!==t)for(const r in e)if(!(r in t))return!1;return!0}class SyncWaterfallHook extends SyncHook{emit(e){isObject(e)||error(`The data for the "${this.type}" hook should be an object.`);for(const t of this.listeners)try{const r=t(e);if(!checkReturnData(e,r)){this.onerror(`A plugin returned an unacceptable value for the "${this.type}" type.`);break}e=r}catch(e){warn$1(e),this.onerror(e)}return e}constructor(e){super(),this.onerror=error,this.type=e}}class AsyncWaterfallHook extends SyncHook{emit(e){isObject(e)||error(`The response data for the "${this.type}" hook must be an object.`);const t=Array.from(this.listeners);if(t.length>0){let r=0;const n=t=>(warn$1(t),this.onerror(t),e),o=i=>{if(checkReturnData(e,i)){if(e=i,r<t.length)try{return Promise.resolve(t[r++](e)).then(o,n)}catch(e){return n(e)}}else this.onerror(`A plugin returned an incorrect value for the "${this.type}" type.`);return e};return Promise.resolve(o(e))}return Promise.resolve(e)}constructor(e){super(),this.onerror=error,this.type=e}}class PluginSystem{applyPlugin(e){assert(isPlainObject(e),"Plugin configuration is invalid.");const t=e.name;assert(t,"A name must be provided by the plugin."),this.registerPlugins[t]||(this.registerPlugins[t]=e,Object.keys(this.lifecycle).forEach(t=>{const r=e[t];r&&this.lifecycle[t].on(r)}))}removePlugin(e){assert(e,"A name is required.");const t=this.registerPlugins[e];assert(t,`The plugin "${e}" is not registered.`),Object.keys(t).forEach(e=>{"name"!==e&&this.lifecycle[e].remove(t[e])})}inherit({lifecycle:e,registerPlugins:t}){Object.keys(e).forEach(t=>{assert(!this.lifecycle[t],`The hook "${t}" has a conflict and cannot be inherited.`),this.lifecycle[t]=e[t]}),Object.keys(t).forEach(e=>{assert(!this.registerPlugins[e],`The plugin "${e}" has a conflict and cannot be inherited.`),this.applyPlugin(t[e])})}constructor(e){this.registerPlugins={},this.lifecycle=e,this.lifecycleKeys=Object.keys(e)}}function _extends$5(){return _extends$5=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$5.apply(this,arguments)}function defaultPreloadArgs(e){return _extends$5({resourceCategory:"sync",share:!0,depsRemote:!0,prefetchInterface:!1},e)}function formatPreloadArgs(e,t){return t.map(t=>{const r=matchRemote(e,t.nameOrAlias);return assert(r,`Unable to preload ${t.nameOrAlias} as it is not included in ${!r&&safeToString$1({remoteInfo:r,remotes:e})}`),{remote:r,preloadConfig:defaultPreloadArgs(t)}})}function normalizePreloadExposes(e){return e?e.map(e=>"."===e?e:e.startsWith("./")?e.replace("./",""):e):[]}function preloadAssets(e,t,r,n=!0){const{cssAssets:o,jsAssetsWithoutEntry:i,entryAssets:s}=r;t.options.inBrowser&&(s.forEach(r=>{const{moduleInfo:n}=r,o=t.moduleCache.get(e.name);getRemoteEntry(o?{remoteInfo:n,remoteEntryExports:o.remoteEntryExports,createScriptHook:e=>{const r=t.loaderHook.lifecycle.createScript.emit({url:e});if(r&&(typeof document>"u"||r instanceof HTMLScriptElement||"script"in r||"timeout"in r))return r}}:{remoteInfo:n,remoteEntryExports:void 0,createScriptHook:e=>{const r=t.loaderHook.lifecycle.createScript.emit({url:e});if(r&&(typeof document>"u"||r instanceof HTMLScriptElement||"script"in r||"timeout"in r))return r}})}),n?o.forEach(e=>{const{link:r,needAttach:n}=createLink({url:e,cb:()=>{},attrs:{rel:"preload",as:"style",crossorigin:"anonymous"},createLinkHook:e=>{const r=t.loaderHook.lifecycle.createLink.emit({url:e});if(r instanceof HTMLLinkElement)return r}});n&&document.head.appendChild(r)}):o.forEach(e=>{const{link:r,needAttach:n}=createLink({url:e,cb:()=>{},attrs:{rel:"stylesheet",type:"text/css"},createLinkHook:e=>{const r=t.loaderHook.lifecycle.createLink.emit({url:e});if(r instanceof HTMLLinkElement)return r},needDeleteLink:!1});n&&document.head.appendChild(r)}),n?i.forEach(e=>{const{link:r,needAttach:n}=createLink({url:e,cb:()=>{},attrs:{rel:"preload",as:"script",crossorigin:"anonymous"},createLinkHook:e=>{const r=t.loaderHook.lifecycle.createLink.emit({url:e});if(r instanceof HTMLLinkElement)return r}});n&&document.head.appendChild(r)}):i.forEach(e=>{const{script:r,needAttach:n}=createScript({url:e,cb:()=>{},attrs:{crossorigin:"anonymous",fetchpriority:"high"},createScriptHook:e=>{const r=t.loaderHook.lifecycle.createScript.emit({url:e});if(r instanceof HTMLScriptElement)return r},needDeleteScript:!0});n&&document.head.appendChild(r)}))}function _extends$4(){return _extends$4=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$4.apply(this,arguments)}function assignRemoteInfo(e,t){(!("remoteEntry"in t)||!t.remoteEntry)&&error(`The attribute remoteEntry of ${name} must not be undefined.`);const{remoteEntry:r}=t;let n=getResourceUrl(t,r);!isBrowserEnv$1()&&!n.startsWith("http")&&(n=`https:${n}`),e.type=t.remoteEntryType,e.entryGlobalName=t.globalName,e.entry=n,e.version=t.version,e.buildVersion=t.buildVersion}function snapshotPlugin(){return{name:"snapshot-plugin",async afterResolve(e){const{remote:t,pkgNameOrAlias:r,expose:n,origin:o,remoteInfo:i}=e;if(!isRemoteInfoWithEntry(t)||!isPureRemoteEntry(t)){const{remoteSnapshot:s,globalSnapshot:a}=await o.snapshotHandler.loadRemoteSnapshotInfo(t);assignRemoteInfo(i,s);const c={remote:t,preloadConfig:{nameOrAlias:r,exposes:[n],resourceCategory:"sync",share:!1,depsRemote:!1}},l=await o.remoteHandler.hooks.lifecycle.generatePreloadAssets.emit({origin:o,preloadOptions:c,remoteInfo:i,remote:t,remoteSnapshot:s,globalSnapshot:a});return l&&preloadAssets(i,o,l,!1),_extends$4({},e,{remoteSnapshot:s})}return e}}}function splitId(e){const t=e.split(":");return 1===t.length?{name:t[0],version:void 0}:2===t.length?{name:t[0],version:t[1]}:{name:t[1],version:t[2]}}function traverseModuleInfo(e,t,r,n,o={},i){const s=getFMId(t),{value:a}=getInfoWithoutType(e,s),c=i||a;if(c&&!isManifestProvider(c)&&(r(c,t,n),c.remotesInfo)){const t=Object.keys(c.remotesInfo);for(const n of t){if(o[n])continue;o[n]=!0;const t=splitId(n),i=c.remotesInfo[n];traverseModuleInfo(e,{name:t.name,version:i.matchedVersion},r,!1,o,void 0)}}}function generatePreloadAssets(e,t,r,n,o){const i=[],s=[],a=[],c=new Set,l=new Set,{options:u}=e,{preloadConfig:d}=t,{depsRemote:h}=d;if(traverseModuleInfo(n,r,(t,r,n)=>{let o;if(n)o=d;else if(Array.isArray(h)){const e=h.find(e=>e.nameOrAlias===r.name||e.nameOrAlias===r.alias);if(!e)return;o=defaultPreloadArgs(e)}else{if(!0!==h)return;o=d}const c=getResourceUrl(t,"remoteEntry"in t?t.remoteEntry:"");c&&a.push({name:r.name,moduleInfo:{name:r.name,entry:c,type:"remoteEntryType"in t?t.remoteEntryType:"global",entryGlobalName:"globalName"in t?t.globalName:r.name,shareScope:"",version:"version"in t?t.version:void 0},url:c});let l="modules"in t?t.modules:[];const u=normalizePreloadExposes(o.exposes);var f;function p(e){const r=e.map(e=>getResourceUrl(t,e));return o.filter?r.filter(o.filter):r}if(u.length&&"modules"in t&&(l=null==t||null==(f=t.modules)?void 0:f.reduce((e,t)=>(-1!==(null==u?void 0:u.indexOf(t.moduleName))&&e.push(t),e),[])),l){const n=l.length;for(let a=0;a<n;a++){const n=l[a],c=`${r.name}/${n.moduleName}`;e.remoteHandler.hooks.lifecycle.handlePreloadModule.emit({id:"."===n.moduleName?r.name:c,name:r.name,remoteSnapshot:t,preloadConfig:o,remote:r,origin:e}),!getPreloaded(c)&&("all"===o.resourceCategory?(i.push(...p(n.assets.css.async)),i.push(...p(n.assets.css.sync)),s.push(...p(n.assets.js.async)),s.push(...p(n.assets.js.sync))):(o.resourceCategory="sync")&&(i.push(...p(n.assets.css.sync)),s.push(...p(n.assets.js.sync))),setPreloaded(c))}}},!0,{},o),o.shared){const t=(t,r)=>{const n=getRegisteredShare(e.shareScopeMap,r.sharedName,t,e.sharedHandler.hooks.lifecycle.resolveShare);n&&"function"==typeof n.lib&&(r.assets.js.sync.forEach(e=>{c.add(e)}),r.assets.css.sync.forEach(e=>{l.add(e)}))};o.shared.forEach(e=>{var r;const n=null==(r=u.shared)?void 0:r[e.sharedName];if(!n)return;const o=e.version?n.find(t=>t.version===e.version):n;!o||arrayOptions(o).forEach(r=>{t(r,e)})})}const f=s.filter(e=>!c.has(e));return{cssAssets:i.filter(e=>!l.has(e)),jsAssetsWithoutEntry:f,entryAssets:a}}const generatePreloadAssetsPlugin=function(){return{name:"generate-preload-assets-plugin",async generatePreloadAssets(e){const{origin:t,preloadOptions:r,remoteInfo:n,remote:o,globalSnapshot:i,remoteSnapshot:s}=e;return isRemoteInfoWithEntry(o)&&isPureRemoteEntry(o)?{cssAssets:[],jsAssetsWithoutEntry:[],entryAssets:[{name:o.name,url:o.entry,moduleInfo:{name:n.name,entry:o.entry,type:"global",entryGlobalName:"",shareScope:""}}]}:(assignRemoteInfo(n,s),generatePreloadAssets(t,r,n,i,s))}}};function _extends$3(){return _extends$3=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$3.apply(this,arguments)}class SnapshotHandler{async loadSnapshot(e){const{options:t}=this.HostInstance,{hostGlobalSnapshot:r,remoteSnapshot:n,globalSnapshot:o}=this.getGlobalRemoteInfo(e),{remoteSnapshot:i,globalSnapshot:s}=await this.hooks.lifecycle.loadSnapshot.emit({options:t,moduleInfo:e,hostGlobalSnapshot:r,remoteSnapshot:n,globalSnapshot:o});return{remoteSnapshot:i,globalSnapshot:s}}async loadRemoteSnapshotInfo(e){const{options:t}=this.HostInstance;await this.hooks.lifecycle.beforeLoadRemoteSnapshot.emit({options:t,moduleInfo:e});let r=getGlobalSnapshotInfoByModuleInfo({name:this.HostInstance.options.name,version:this.HostInstance.options.version});r||(r={version:this.HostInstance.options.version||"",remoteEntry:"",remotesInfo:{}},addGlobalSnapshot({[this.HostInstance.options.name]:r})),r&&"remotesInfo"in r&&!getInfoWithoutType(r.remotesInfo,e.name).value&&("version"in e||"entry"in e)&&(r.remotesInfo=_extends$3({},null==r?void 0:r.remotesInfo,{[e.name]:{matchedVersion:"version"in e?e.version:e.entry}}));const{hostGlobalSnapshot:n,remoteSnapshot:o,globalSnapshot:i}=this.getGlobalRemoteInfo(e),{remoteSnapshot:s,globalSnapshot:a}=await this.hooks.lifecycle.loadSnapshot.emit({options:t,moduleInfo:e,hostGlobalSnapshot:n,remoteSnapshot:o,globalSnapshot:i});if(s){if(isManifestProvider(s)){const t=await this.getManifestJson(s.remoteEntry,e,{});return{remoteSnapshot:t,globalSnapshot:setGlobalSnapshotInfoByModuleInfo(_extends$3({},e,{entry:s.remoteEntry}),t)}}{const{remoteSnapshot:t}=await this.hooks.lifecycle.loadRemoteSnapshot.emit({options:this.HostInstance.options,moduleInfo:e,remoteSnapshot:s,from:"global"});return{remoteSnapshot:t,globalSnapshot:a}}}if(isRemoteInfoWithEntry(e)){const t=await this.getManifestJson(e.entry,e,{}),r=setGlobalSnapshotInfoByModuleInfo(e,t),{remoteSnapshot:n}=await this.hooks.lifecycle.loadRemoteSnapshot.emit({options:this.HostInstance.options,moduleInfo:e,remoteSnapshot:t,from:"global"});return{remoteSnapshot:n,globalSnapshot:r}}error(`\n          Cannot get remoteSnapshot with the name: '${e.name}', version: '${e.version}' from __FEDERATION__.moduleInfo. The following reasons may be causing the problem:\n\n          1. The Deploy platform did not deliver the correct data. You can use __FEDERATION__.moduleInfo to check the remoteInfo.\n\n          2. The remote '${e.name}' version '${e.version}' is not released.\n\n          The transformed module info: ${JSON.stringify(a)}\n        `)}getGlobalRemoteInfo(e){const t=getGlobalSnapshotInfoByModuleInfo({name:this.HostInstance.options.name,version:this.HostInstance.options.version}),r=t&&"remotesInfo"in t&&t.remotesInfo&&getInfoWithoutType(t.remotesInfo,e.name).value;return r&&r.matchedVersion?{hostGlobalSnapshot:t,globalSnapshot:getGlobalSnapshot(),remoteSnapshot:getGlobalSnapshotInfoByModuleInfo({name:e.name,version:r.matchedVersion})}:{hostGlobalSnapshot:void 0,globalSnapshot:getGlobalSnapshot(),remoteSnapshot:getGlobalSnapshotInfoByModuleInfo({name:e.name,version:"version"in e?e.version:void 0})}}async getManifestJson(e,t,r){const n=async()=>{let r=this.manifestCache.get(e);if(r)return r;try{let t=await this.loaderHook.lifecycle.fetch.emit(e,{});return(!t||!(t instanceof Response))&&(t=await fetch(e,{})),r=await t.json(),assert(r.metaData&&r.exposes&&r.shared,`${e} is not a federation manifest`),this.manifestCache.set(e,r),r}catch(r){error(`Failed to get manifestJson for ${t.name}. The manifest URL is ${e}. Please ensure that the manifestUrl is accessible.\n          \n Error message:\n          \n ${r}`)}};return this.manifestLoading[e]||(this.manifestLoading[e]=(async()=>{const r=await n(),o=generateSnapshotFromManifest(r,{version:e}),{remoteSnapshot:i}=await this.hooks.lifecycle.loadRemoteSnapshot.emit({options:this.HostInstance.options,moduleInfo:t,manifestJson:r,remoteSnapshot:o,manifestUrl:e,from:"manifest"});return i})().then(e=>e)),this.manifestLoading[e]}constructor(e){this.loadingHostSnapshot=null,this.manifestCache=new Map,this.hooks=new PluginSystem({beforeLoadRemoteSnapshot:new AsyncHook("beforeLoadRemoteSnapshot"),loadSnapshot:new AsyncWaterfallHook("loadGlobalSnapshot"),loadRemoteSnapshot:new AsyncWaterfallHook("loadRemoteSnapshot")}),this.manifestLoading=Global.__FEDERATION__.__MANIFEST_LOADING__,this.HostInstance=e,this.loaderHook=e.loaderHook}}function _extends$2(){return _extends$2=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$2.apply(this,arguments)}function _object_without_properties_loose(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&(o[r]=e[r]);return o}class SharedHandler{registerShared(e,t){const{shareInfos:r,shared:n}=formatShareConfigs(e,t);return Object.keys(r).forEach(e=>{r[e].forEach(r=>{!getRegisteredShare(this.shareScopeMap,e,r,this.hooks.lifecycle.resolveShare)&&r&&r.lib&&this.setShared({pkgName:e,lib:r.lib,get:r.get,loaded:!0,shared:r,from:t.name})})}),{shareInfos:r,shared:n}}async loadShare(e,t){const{host:r}=this,n=getTargetSharedOptions({pkgName:e,extraOptions:t,shareInfos:r.options.shared});null!=n&&n.scope&&await Promise.all(n.scope.map(async e=>{await Promise.all(this.initializeSharing(e,n.strategy))}));const o=await this.hooks.lifecycle.beforeLoadShare.emit({pkgName:e,shareInfo:n,shared:r.options.shared,origin:r}),{shareInfo:i}=o;assert(i,`Cannot find ${e} Share in the ${r.options.name}. Please ensure that the ${e} Share parameters have been injected`);const s=getRegisteredShare(this.shareScopeMap,e,i,this.hooks.lifecycle.resolveShare),a=e=>{e.useIn||(e.useIn=[]),addUniqueItem(e.useIn,r.options.name)};if(s&&s.lib)return a(s),s.lib;if(s&&s.loading&&!s.loaded){const e=await s.loading;return s.loaded=!0,s.lib||(s.lib=e),a(s),e}if(s){const t=(async()=>{const t=await s.get();i.lib=t,i.loaded=!0,a(i);const r=getRegisteredShare(this.shareScopeMap,e,i,this.hooks.lifecycle.resolveShare);return r&&(r.lib=t,r.loaded=!0),t})();return this.setShared({pkgName:e,loaded:!1,shared:s,from:r.options.name,lib:null,loading:t}),t}{if(null!=t&&t.customShareInfo)return!1;const n=(async()=>{const t=await i.get();i.lib=t,i.loaded=!0,a(i);const r=getRegisteredShare(this.shareScopeMap,e,i,this.hooks.lifecycle.resolveShare);return r&&(r.lib=t,r.loaded=!0),t})();return this.setShared({pkgName:e,loaded:!1,shared:i,from:r.options.name,lib:null,loading:n}),n}}initializeSharing(e=DEFAULT_SCOPE,t){const{host:r}=this,n=this.shareScopeMap,o=r.options.name;n[e]||(n[e]={});const i=n[e],s=[];return Object.keys(r.options.shared).forEach(t=>{r.options.shared[t].forEach(r=>{r.scope.includes(e)&&((e,t)=>{var r;const{version:n,eager:s}=t;i[e]=i[e]||{};const a=i[e],c=a[n],l=Boolean(c&&(c.eager||(null==(r=c.shareConfig)?void 0:r.eager)));(!c||"loaded-first"!==c.strategy&&!c.loaded&&(Boolean(!s)!==!l?s:o>c.from))&&(a[n]=t)})(t,r)})}),"version-first"===t&&r.options.remotes.forEach(t=>{t.shareScope===e&&s.push((async t=>{const{module:o}=await r.remoteHandler.getRemoteModuleAndOptions({id:t});if(o.getEntry){const t=await o.getEntry();o.inited||((t=>{t&&t.init&&t.init(n[e])})(t),o.inited=!0)}})(t.name))}),s}loadShareSync(e,t){const{host:r}=this,n=getTargetSharedOptions({pkgName:e,extraOptions:t,shareInfos:r.options.shared});null!=n&&n.scope&&n.scope.forEach(e=>{this.initializeSharing(e,n.strategy)});const o=getRegisteredShare(this.shareScopeMap,e,n,this.hooks.lifecycle.resolveShare),i=e=>{e.useIn||(e.useIn=[]),addUniqueItem(e.useIn,r.options.name)};if(o){if("function"==typeof o.lib)return i(o),o.loaded||(o.loaded=!0,o.from===r.options.name&&(n.loaded=!0)),o.lib;if("function"==typeof o.get){const t=o.get();if(!(t instanceof Promise))return i(o),this.setShared({pkgName:e,loaded:!0,from:r.options.name,lib:t,shared:o}),t}}if(n.lib)return n.loaded||(n.loaded=!0),n.lib;if(n.get){const t=n.get();if(t instanceof Promise)throw new Error(`\n        The loadShareSync function was unable to load ${e}. The ${e} could not be found in ${r.options.name}.\n        Possible reasons for failure: \n\n        1. The ${e} share was registered with the 'get' attribute, but loadShare was not used beforehand.\n\n        2. The ${e} share was not registered with the 'lib' attribute.\n\n      `);return n.lib=t,this.setShared({pkgName:e,loaded:!0,from:r.options.name,lib:n.lib,shared:n}),n.lib}throw new Error(`\n        The loadShareSync function was unable to load ${e}. The ${e} could not be found in ${r.options.name}.\n        Possible reasons for failure: \n\n        1. The ${e} share was registered with the 'get' attribute, but loadShare was not used beforehand.\n\n        2. The ${e} share was not registered with the 'lib' attribute.\n\n      `)}initShareScopeMap(e,t,r={}){const{host:n}=this;this.shareScopeMap[e]=t,this.hooks.lifecycle.initContainerShareScopeMap.emit({shareScope:t,options:n.options,origin:n,scopeName:e,hostShareScopeMap:r.hostShareScopeMap})}setShared({pkgName:e,shared:t,from:r,lib:n,loading:o,loaded:i,get:s}){const{version:a,scope:c="default"}=t,l=_object_without_properties_loose(t,["version","scope"]);(Array.isArray(c)?c:[c]).forEach(t=>{this.shareScopeMap[t]||(this.shareScopeMap[t]={}),this.shareScopeMap[t][e]||(this.shareScopeMap[t][e]={}),!this.shareScopeMap[t][e][a]&&(this.shareScopeMap[t][e][a]=_extends$2({version:a,scope:["default"]},l,{lib:n,loaded:i,loading:o}),s&&(this.shareScopeMap[t][e][a].get=s))})}_setGlobalShareScopeMap(e){const t=getGlobalShareScope(),r=e.id||e.name;r&&!t[r]&&(t[r]=this.shareScopeMap)}constructor(e){this.hooks=new PluginSystem({afterResolve:new AsyncWaterfallHook("afterResolve"),beforeLoadShare:new AsyncWaterfallHook("beforeLoadShare"),loadShare:new AsyncHook,resolveShare:new SyncWaterfallHook("resolveShare"),initContainerShareScopeMap:new SyncWaterfallHook("initContainerShareScopeMap")}),this.host=e,this.shareScopeMap={},this._setGlobalShareScopeMap(e.options)}}function _extends$1(){return _extends$1=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$1.apply(this,arguments)}class RemoteHandler{formatAndRegisterRemote(e,t){return(t.remotes||[]).reduce((e,t)=>(this.registerRemote(t,e,{force:!1}),e),e.remotes)}async loadRemote(e,t){const{host:r}=this;try{const{loadFactory:n=!0}=t||{loadFactory:!0},{module:o,moduleOptions:i,remoteMatchInfo:s}=await this.getRemoteModuleAndOptions({id:e}),{pkgNameOrAlias:a,remote:c,expose:l,id:u}=s,d=await o.get(u,l,t),h=await this.hooks.lifecycle.onLoad.emit({id:u,pkgNameOrAlias:a,expose:l,exposeModule:n?d:void 0,exposeModuleFactory:n?void 0:d,remote:c,options:i,moduleInstance:o,origin:r});return"function"==typeof h?h:d}catch(n){const{from:o="runtime"}=t||{from:"runtime"},i=await this.hooks.lifecycle.errorLoadRemote.emit({id:e,error:n,from:o,lifecycle:"onLoad",origin:r});if(!i)throw n;return i}}async preloadRemote(e){const{host:t}=this;await this.hooks.lifecycle.beforePreloadRemote.emit({preloadOps:e,options:t.options,origin:t});const r=formatPreloadArgs(t.options.remotes,e);await Promise.all(r.map(async e=>{const{remote:r}=e,n=getRemoteInfo(r),{globalSnapshot:o,remoteSnapshot:i}=await t.snapshotHandler.loadRemoteSnapshotInfo(r),s=await this.hooks.lifecycle.generatePreloadAssets.emit({origin:t,preloadOptions:e,remote:r,remoteInfo:n,globalSnapshot:o,remoteSnapshot:i});!s||preloadAssets(n,t,s)}))}registerRemotes(e,t){const{host:r}=this;e.forEach(e=>{this.registerRemote(e,r.options.remotes,{force:null==t?void 0:t.force})})}async getRemoteModuleAndOptions(e){const{host:t}=this,{id:r}=e;let n;try{n=await this.hooks.lifecycle.beforeRequest.emit({id:r,options:t.options,origin:t})}catch(e){if(n=await this.hooks.lifecycle.errorLoadRemote.emit({id:r,options:t.options,origin:t,from:"runtime",error:e,lifecycle:"beforeRequest"}),!n)throw e}const{id:o}=n,i=matchRemoteWithNameAndExpose(t.options.remotes,o);assert(i,`\n        Unable to locate ${o} in ${t.options.name}. Potential reasons for failure include:\n\n        1. ${o} was not included in the 'remotes' parameter of ${t.options.name||"the host"}.\n\n        2. ${o} could not be found in the 'remotes' of ${t.options.name} with either 'name' or 'alias' attributes.\n        3. ${o} is not online, injected, or loaded.\n        4. ${o}  cannot be accessed on the expected.\n        5. The 'beforeRequest' hook was provided but did not return the correct 'remoteInfo' when attempting to load ${o}.\n      `);const{remote:s}=i,a=getRemoteInfo(s),c=await t.sharedHandler.hooks.lifecycle.afterResolve.emit(_extends$1({id:o},i,{options:t.options,origin:t,remoteInfo:a})),{remote:l,expose:u}=c;assert(l&&u,`The 'beforeRequest' hook was executed, but it failed to return the correct 'remote' and 'expose' values while loading ${o}.`);let d=t.moduleCache.get(l.name);const h={host:t,remoteInfo:a};return d||(d=new Module(h),t.moduleCache.set(l.name,d)),{module:d,moduleOptions:h,remoteMatchInfo:c}}registerRemote(e,t,r){const{host:n}=this,o=()=>{if(e.alias){const r=t.find(t=>{var r;return e.alias&&(t.name.startsWith(e.alias)||(null==(r=t.alias)?void 0:r.startsWith(e.alias)))});assert(!r,`The alias ${e.alias} of remote ${e.name} is not allowed to be the prefix of ${r&&r.name} name or alias`)}"entry"in e&&isBrowserEnv()&&!e.entry.startsWith("http")&&(e.entry=new URL(e.entry,window.location.origin).href),e.shareScope||(e.shareScope=DEFAULT_SCOPE),e.type||(e.type=DEFAULT_REMOTE_TYPE)},i=t.find(t=>t.name===e.name);if(i){const s=[`The remote "${e.name}" is already registered.`,null!=r&&r.force?"Hope you have known that OVERRIDE it may have some unexpected errors":'If you want to merge the remote, you can set "force: true".'];null!=r&&r.force&&(this.removeRemote(i),o(),t.push(e),this.hooks.lifecycle.registerRemote.emit({remote:e,origin:n})),warn(s.join(" "))}else o(),t.push(e),this.hooks.lifecycle.registerRemote.emit({remote:e,origin:n})}removeRemote(e){const{host:t}=this,{name:r}=e,n=t.options.remotes.findIndex(e=>e.name===r);-1!==n&&t.options.remotes.splice(n,1);const o=t.moduleCache.get(e.name);if(o){var i;const r=o.remoteInfo,n=r.entryGlobalName;globalThis[n]&&(null==(i=Object.getOwnPropertyDescriptor(globalThis,n))?void 0:i.configurable)&&delete globalThis[n];const s=getRemoteEntryUniqueKey(o.remoteInfo);globalLoading[s]&&delete globalLoading[s];let a=r.buildVersion?composeKeyWithSeparator(r.name,r.buildVersion):r.name;const c=globalThis.__FEDERATION__.__INSTANCES__.findIndex(e=>r.buildVersion?e.options.id===a:e.name===a);if(-1!==c){const e=globalThis.__FEDERATION__.__INSTANCES__[c];a=e.options.id||a;const t=getGlobalShareScope();let n=!0;const o=[];Object.keys(t).forEach(e=>{Object.keys(t[e]).forEach(i=>{Object.keys(t[e][i]).forEach(s=>{Object.keys(t[e][i][s]).forEach(a=>{const c=t[e][i][s][a];c.from===r.name&&(c.loaded||c.loading?(c.useIn=c.useIn.filter(e=>e!==r.name),c.useIn.length?n=!1:o.push([e,i,s,a])):o.push([e,i,s,a]))})})})}),n&&(e.shareScopeMap={},delete t[a]),o.forEach(([e,r,n,o])=>{var i,s,a;null==(a=t[e])||null==(s=a[r])||null==(i=s[n])||delete i[o]}),globalThis.__FEDERATION__.__INSTANCES__.splice(c,1)}t.moduleCache.delete(e.name)}}constructor(e){this.hooks=new PluginSystem({registerRemote:new SyncWaterfallHook("registerRemote"),beforeRequest:new AsyncWaterfallHook("beforeRequest"),onLoad:new AsyncHook("onLoad"),handlePreloadModule:new SyncHook("handlePreloadModule"),errorLoadRemote:new AsyncHook("errorLoadRemote"),beforePreloadRemote:new AsyncHook("beforePreloadRemote"),generatePreloadAssets:new AsyncHook("generatePreloadAssets"),afterPreloadRemote:new AsyncHook}),this.host=e}}function _extends(){return _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends.apply(this,arguments)}class FederationHost{initOptions(e){this.registerPlugins(e.plugins);const t=this.formatOptions(this.options,e);return this.options=t,t}async loadShare(e,t){return this.sharedHandler.loadShare(e,t)}loadShareSync(e,t){return this.sharedHandler.loadShareSync(e,t)}initializeSharing(e=DEFAULT_SCOPE,t){return this.sharedHandler.initializeSharing(e,t)}initRawContainer(e,t,r){const n=getRemoteInfo({name:e,entry:t}),o=new Module({host:this,remoteInfo:n});return o.remoteEntryExports=r,this.moduleCache.set(e,o),o}async loadRemote(e,t){return this.remoteHandler.loadRemote(e,t)}async preloadRemote(e){return this.remoteHandler.preloadRemote(e)}initShareScopeMap(e,t,r={}){this.sharedHandler.initShareScopeMap(e,t,r)}formatOptions(e,t){const{shared:r}=formatShareConfigs(e,t),{userOptions:n,options:o}=this.hooks.lifecycle.beforeInit.emit({origin:this,userOptions:t,options:e,shareInfo:r}),i=this.remoteHandler.formatAndRegisterRemote(o,n),{shared:s}=this.sharedHandler.registerShared(o,n),a=[...o.plugins];n.plugins&&n.plugins.forEach(e=>{a.includes(e)||a.push(e)});const c=_extends({},e,t,{plugins:a,remotes:i,shared:s});return this.hooks.lifecycle.init.emit({origin:this,options:c}),c}registerPlugins(e){const t=registerPlugins$1(e,[this.hooks,this.remoteHandler.hooks,this.sharedHandler.hooks,this.snapshotHandler.hooks,this.loaderHook]);this.options.plugins=this.options.plugins.reduce((e,t)=>(t&&e&&!e.find(e=>e.name===t.name)&&e.push(t),e),t||[])}registerRemotes(e,t){return this.remoteHandler.registerRemotes(e,t)}constructor(e){this.hooks=new PluginSystem({beforeInit:new SyncWaterfallHook("beforeInit"),init:new SyncHook,beforeInitContainer:new AsyncWaterfallHook("beforeInitContainer"),initContainer:new AsyncWaterfallHook("initContainer")}),this.version="0.1.21",this.moduleCache=new Map,this.loaderHook=new PluginSystem({getModuleInfo:new SyncHook,createScript:new SyncHook,createLink:new SyncHook,fetch:new AsyncHook("fetch")});const t={id:getBuilderId(),name:e.name,plugins:[snapshotPlugin(),generatePreloadAssetsPlugin()],remotes:[],shared:{},inBrowser:isBrowserEnv$1()};this.name=e.name,this.options=t,this.snapshotHandler=new SnapshotHandler(this),this.sharedHandler=new SharedHandler(this),this.remoteHandler=new RemoteHandler(this),this.shareScopeMap=this.sharedHandler.shareScopeMap,this.registerPlugins([...t.plugins,...e.plugins||[]]),this.options=this.formatOptions(t,e)}}let FederationInstance=null;function init(e){const t=getGlobalFederationInstance(e.name,e.version);if(t)return t.initOptions(e),FederationInstance||(FederationInstance=t),t;{const t=getGlobalFederationConstructor()||FederationHost;return FederationInstance=new t(e),setGlobalFederationInstance(FederationInstance),FederationInstance}}function loadRemote(...e){return assert(FederationInstance,"Please call init first"),FederationInstance.loadRemote.apply(FederationInstance,e)}function __awaiter(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):function(e){return e instanceof r?e:new r(function(t){t(e)})}(e.value).then(s,a)}c((n=n.apply(e,t||[])).next())})}function __generator(e,t){var r,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}setGlobalFederationConstructor(FederationHost),"function"==typeof SuppressedError&&SuppressedError;var E_CANCELED=new Error("request for lock canceled"),Semaphore=function(){function e(e,t){void 0===t&&(t=E_CANCELED),this._value=e,this._cancelError=t,this._queue=[],this._weightedWaiters=[]}return e.prototype.acquire=function(e,t){var r=this;if(void 0===e&&(e=1),void 0===t&&(t=0),e<=0)throw new Error("invalid weight ".concat(e,": must be positive"));return new Promise(function(n,o){var i={resolve:n,reject:o,weight:e,priority:t},s=findIndexFromEnd(r._queue,function(e){return t<=e.priority});-1===s&&e<=r._value?r._dispatchItem(i):r._queue.splice(s+1,0,i)})},e.prototype.runExclusive=function(e){return __awaiter(this,arguments,void 0,function(e,t,r){var n,o,i;return void 0===t&&(t=1),void 0===r&&(r=0),__generator(this,function(s){switch(s.label){case 0:return[4,this.acquire(t,r)];case 1:n=s.sent(),o=n[0],i=n[1],s.label=2;case 2:return s.trys.push([2,,4,5]),[4,e(o)];case 3:return[2,s.sent()];case 4:return i(),[7];case 5:return[2]}})})},e.prototype.waitForUnlock=function(e,t){var r=this;if(void 0===e&&(e=1),void 0===t&&(t=0),e<=0)throw new Error("invalid weight ".concat(e,": must be positive"));return this._couldLockImmediately(e,t)?Promise.resolve():new Promise(function(n){r._weightedWaiters[e-1]||(r._weightedWaiters[e-1]=[]),insertSorted(r._weightedWaiters[e-1],{resolve:n,priority:t})})},e.prototype.isLocked=function(){return this._value<=0},e.prototype.getValue=function(){return this._value},e.prototype.setValue=function(e){this._value=e,this._dispatchQueue()},e.prototype.release=function(e){if(void 0===e&&(e=1),e<=0)throw new Error("invalid weight ".concat(e,": must be positive"));this._value+=e,this._dispatchQueue()},e.prototype.cancel=function(){var e=this;this._queue.forEach(function(t){return t.reject(e._cancelError)}),this._queue=[]},e.prototype._dispatchQueue=function(){for(this._drainUnlockWaiters();this._queue.length>0&&this._queue[0].weight<=this._value;)this._dispatchItem(this._queue.shift()),this._drainUnlockWaiters()},e.prototype._dispatchItem=function(e){var t=this._value;this._value-=e.weight,e.resolve([t,this._newReleaser(e.weight)])},e.prototype._newReleaser=function(e){var t=this,r=!1;return function(){r||(r=!0,t.release(e))}},e.prototype._drainUnlockWaiters=function(){if(0===this._queue.length)for(var e=this._value;e>0;e--)!(r=this._weightedWaiters[e-1])||(r.forEach(function(e){return e.resolve()}),this._weightedWaiters[e-1]=[]);else{var t=this._queue[0].priority;for(e=this._value;e>0;e--){var r;if(r=this._weightedWaiters[e-1]){var n=r.findIndex(function(e){return e.priority<=t});(-1===n?r:r.splice(0,n)).forEach(function(e){return e.resolve()})}}}},e.prototype._couldLockImmediately=function(e,t){return(0===this._queue.length||this._queue[0].priority<t)&&e<=this._value},e}();function insertSorted(e,t){var r=findIndexFromEnd(e,function(e){return t.priority<=e.priority});e.splice(r+1,0,t)}function findIndexFromEnd(e,t){for(var r=e.length-1;r>=0;r--)if(t(e[r]))return r;return-1}var Mutex=function(){function e(e){this._semaphore=new Semaphore(1,e)}return e.prototype.acquire=function(){return __awaiter(this,arguments,void 0,function(e){return void 0===e&&(e=0),__generator(this,function(t){switch(t.label){case 0:return[4,this._semaphore.acquire(1,e)];case 1:return[2,t.sent()[1]]}})})},e.prototype.runExclusive=function(e,t){return void 0===t&&(t=0),this._semaphore.runExclusive(function(){return e()},1,t)},e.prototype.isLocked=function(){return this._semaphore.isLocked()},e.prototype.waitForUnlock=function(e){return void 0===e&&(e=0),this._semaphore.waitForUnlock(1,e)},e.prototype.release=function(){this._semaphore.isLocked()&&this._semaphore.release()},e.prototype.cancel=function(){return this._semaphore.cancel()},e}(),Y,q,R,H,F,J;function isMetaMaskProvider(e){return null!==e&&"object"==typeof e&&e.hasOwnProperty("isMetaMask")&&e.hasOwnProperty("request")}function detectMetaMaskProvider(e,{timeout:t=3e3}={}){let r=!1;return new Promise(n=>{"function"==typeof e.addEventListener&&e.addEventListener("eip6963:announceProvider",e=>{const{info:t,provider:o}=e.detail;("io.metamask"===t.rdns||"io.metamask.flask"===t.rdns)&&isMetaMaskProvider(o)&&(n(o),r=!0)}),setTimeout(()=>{r||n(null)},t),"function"==typeof e.dispatchEvent&&e.dispatchEvent(new Event("eip6963:requestProvider"))})}async function waitForMetaMaskProvider(e,t={}){const{timeout:r=3e3,retries:n=0}=t;let o=null;try{o=await detectMetaMaskProvider(e,{timeout:r})}catch{}return o||(0===n?null:(o=await waitForMetaMaskProvider({timeout:r,retries:n-1}),o))}async function detectMetamaskSupport(e){return await waitForMetaMaskProvider(e,{retries:3})}class MetaMaskVirtualWallet{constructor(){L(this,Y),L(this,R),L(this,F),O(this,"id","metamask"),O(this,"name","MetaMask"),O(this,"icon","data:image/svg+xml;utf8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMTIiIGhlaWdodD0iMTg5IiB2aWV3Qm94PSIwIDAgMjEyIDE4OSI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cG9seWdvbiBmaWxsPSIjQ0RCREIyIiBwb2ludHM9IjYwLjc1IDE3My4yNSA4OC4zMTMgMTgwLjU2MyA4OC4zMTMgMTcxIDkwLjU2MyAxNjguNzUgMTA2LjMxMyAxNjguNzUgMTA2LjMxMyAxODAgMTA2LjMxMyAxODcuODc1IDg5LjQzOCAxODcuODc1IDY4LjYyNSAxNzguODc1Ii8+PHBvbHlnb24gZmlsbD0iI0NEQkRCMiIgcG9pbnRzPSIxMDUuNzUgMTczLjI1IDEzMi43NSAxODAuNTYzIDEzMi43NSAxNzEgMTM1IDE2OC43NSAxNTAuNzUgMTY4Ljc1IDE1MC43NSAxODAgMTUwLjc1IDE4Ny44NzUgMTMzLjg3NSAxODcuODc1IDExMy4wNjMgMTc4Ljg3NSIgdHJhbnNmb3JtPSJtYXRyaXgoLTEgMCAwIDEgMjU2LjUgMCkiLz48cG9seWdvbiBmaWxsPSIjMzkzOTM5IiBwb2ludHM9IjkwLjU2MyAxNTIuNDM4IDg4LjMxMyAxNzEgOTEuMTI1IDE2OC43NSAxMjAuMzc1IDE2OC43NSAxMjMuNzUgMTcxIDEyMS41IDE1Mi40MzggMTE3IDE0OS42MjUgOTQuNSAxNTAuMTg4Ii8+PHBvbHlnb24gZmlsbD0iI0Y4OUMzNSIgcG9pbnRzPSI3NS4zNzUgMjcgODguODc1IDU4LjUgOTUuMDYzIDE1MC4xODggMTE3IDE1MC4xODggMTIzLjc1IDU4LjUgMTM2LjEyNSAyNyIvPjxwb2x5Z29uIGZpbGw9IiNGODlEMzUiIHBvaW50cz0iMTYuMzEzIDk2LjE4OCAuNTYzIDE0MS43NSAzOS45MzggMTM5LjUgNjUuMjUgMTM5LjUgNjUuMjUgMTE5LjgxMyA2NC4xMjUgNzkuMzEzIDU4LjUgODMuODEzIi8+PHBvbHlnb24gZmlsbD0iI0Q4N0MzMCIgcG9pbnRzPSI0Ni4xMjUgMTAxLjI1IDkyLjI1IDEwMi4zNzUgODcuMTg4IDEyNiA2NS4yNSAxMjAuMzc1Ii8+PHBvbHlnb24gZmlsbD0iI0VBOEQzQSIgcG9pbnRzPSI0Ni4xMjUgMTAxLjgxMyA2NS4yNSAxMTkuODEzIDY1LjI1IDEzNy44MTMiLz48cG9seWdvbiBmaWxsPSIjRjg5RDM1IiBwb2ludHM9IjY1LjI1IDEyMC4zNzUgODcuNzUgMTI2IDk1LjA2MyAxNTAuMTg4IDkwIDE1MyA2NS4yNSAxMzguMzc1Ii8+PHBvbHlnb24gZmlsbD0iI0VCOEYzNSIgcG9pbnRzPSI2NS4yNSAxMzguMzc1IDYwLjc1IDE3My4yNSA5MC41NjMgMTUyLjQzOCIvPjxwb2x5Z29uIGZpbGw9IiNFQThFM0EiIHBvaW50cz0iOTIuMjUgMTAyLjM3NSA5NS4wNjMgMTUwLjE4OCA4Ni42MjUgMTI1LjcxOSIvPjxwb2x5Z29uIGZpbGw9IiNEODdDMzAiIHBvaW50cz0iMzkuMzc1IDEzOC45MzggNjUuMjUgMTM4LjM3NSA2MC43NSAxNzMuMjUiLz48cG9seWdvbiBmaWxsPSIjRUI4RjM1IiBwb2ludHM9IjEyLjkzOCAxODguNDM4IDYwLjc1IDE3My4yNSAzOS4zNzUgMTM4LjkzOCAuNTYzIDE0MS43NSIvPjxwb2x5Z29uIGZpbGw9IiNFODgyMUUiIHBvaW50cz0iODguODc1IDU4LjUgNjQuNjg4IDc4Ljc1IDQ2LjEyNSAxMDEuMjUgOTIuMjUgMTAyLjkzOCIvPjxwb2x5Z29uIGZpbGw9IiNERkNFQzMiIHBvaW50cz0iNjAuNzUgMTczLjI1IDkwLjU2MyAxNTIuNDM4IDg4LjMxMyAxNzAuNDM4IDg4LjMxMyAxODAuNTYzIDY4LjA2MyAxNzYuNjI1Ii8+PHBvbHlnb24gZmlsbD0iI0RGQ0VDMyIgcG9pbnRzPSIxMjEuNSAxNzMuMjUgMTUwLjc1IDE1Mi40MzggMTQ4LjUgMTcwLjQzOCAxNDguNSAxODAuNTYzIDEyOC4yNSAxNzYuNjI1IiB0cmFuc2Zvcm09Im1hdHJpeCgtMSAwIDAgMSAyNzIuMjUgMCkiLz48cG9seWdvbiBmaWxsPSIjMzkzOTM5IiBwb2ludHM9IjcwLjMxMyAxMTIuNSA2NC4xMjUgMTI1LjQzOCA4Ni4wNjMgMTE5LjgxMyIgdHJhbnNmb3JtPSJtYXRyaXgoLTEgMCAwIDEgMTUwLjE4OCAwKSIvPjxwb2x5Z29uIGZpbGw9IiNFODhGMzUiIHBvaW50cz0iMTIuMzc1IC41NjMgODguODc1IDU4LjUgNzUuOTM4IDI3Ii8+PHBhdGggZmlsbD0iIzhFNUEzMCIgZD0iTTEyLjM3NTAwMDIsMC41NjI1MDAwMDggTDIuMjUwMDAwMDMsMzEuNTAwMDAwNSBMNy44NzUwMDAxMiw2NS4yNTAwMDEgTDMuOTM3NTAwMDYsNjcuNTAwMDAxIEw5LjU2MjUwMDE0LDcyLjU2MjUgTDUuMDYyNTAwMDgsNzYuNTAwMDAxMSBMMTEuMjUsODIuMTI1MDAxMiBMNy4zMTI1MDAxMSw4NS41MDAwMDEzIEwxNi4zMTI1MDAyLDk2Ljc1MDAwMTQgTDU4LjUwMDAwMDksODMuODEyNTAxMiBDNzkuMTI1MDAxMiw2Ny4zMTI1MDA0IDg5LjI1MDAwMTMsNTguODc1MDAwMyA4OC44NzUwMDEzLDU4LjUwMDAwMDkgQzg4LjUwMDAwMTMsNTguMTI1MDAwOSA2My4wMDAwMDA5LDM4LjgxMjUwMDYgMTIuMzc1MDAwMiwwLjU2MjUwMDAwOCBaIi8+PGcgdHJhbnNmb3JtPSJtYXRyaXgoLTEgMCAwIDEgMjExLjUgMCkiPjxwb2x5Z29uIGZpbGw9IiNGODlEMzUiIHBvaW50cz0iMTYuMzEzIDk2LjE4OCAuNTYzIDE0MS43NSAzOS45MzggMTM5LjUgNjUuMjUgMTM5LjUgNjUuMjUgMTE5LjgxMyA2NC4xMjUgNzkuMzEzIDU4LjUgODMuODEzIi8+PHBvbHlnb24gZmlsbD0iI0Q4N0MzMCIgcG9pbnRzPSI0Ni4xMjUgMTAxLjI1IDkyLjI1IDEwMi4zNzUgODcuMTg4IDEyNiA2NS4yNSAxMjAuMzc1Ii8+PHBvbHlnb24gZmlsbD0iI0VBOEQzQSIgcG9pbnRzPSI0Ni4xMjUgMTAxLjgxMyA2NS4yNSAxMTkuODEzIDY1LjI1IDEzNy44MTMiLz48cG9seWdvbiBmaWxsPSIjRjg5RDM1IiBwb2ludHM9IjY1LjI1IDEyMC4zNzUgODcuNzUgMTI2IDk1LjA2MyAxNTAuMTg4IDkwIDE1MyA2NS4yNSAxMzguMzc1Ii8+PHBvbHlnb24gZmlsbD0iI0VCOEYzNSIgcG9pbnRzPSI2NS4yNSAxMzguMzc1IDYwLjc1IDE3My4yNSA5MCAxNTMiLz48cG9seWdvbiBmaWxsPSIjRUE4RTNBIiBwb2ludHM9IjkyLjI1IDEwMi4zNzUgOTUuMDYzIDE1MC4xODggODYuNjI1IDEyNS43MTkiLz48cG9seWdvbiBmaWxsPSIjRDg3QzMwIiBwb2ludHM9IjM5LjM3NSAxMzguOTM4IDY1LjI1IDEzOC4zNzUgNjAuNzUgMTczLjI1Ii8+PHBvbHlnb24gZmlsbD0iI0VCOEYzNSIgcG9pbnRzPSIxMi45MzggMTg4LjQzOCA2MC43NSAxNzMuMjUgMzkuMzc1IDEzOC45MzggLjU2MyAxNDEuNzUiLz48cG9seWdvbiBmaWxsPSIjRTg4MjFFIiBwb2ludHM9Ijg4Ljg3NSA1OC41IDY0LjY4OCA3OC43NSA0Ni4xMjUgMTAxLjI1IDkyLjI1IDEwMi45MzgiLz48cG9seWdvbiBmaWxsPSIjMzkzOTM5IiBwb2ludHM9IjcwLjMxMyAxMTIuNSA2NC4xMjUgMTI1LjQzOCA4Ni4wNjMgMTE5LjgxMyIgdHJhbnNmb3JtPSJtYXRyaXgoLTEgMCAwIDEgMTUwLjE4OCAwKSIvPjxwb2x5Z29uIGZpbGw9IiNFODhGMzUiIHBvaW50cz0iMTIuMzc1IC41NjMgODguODc1IDU4LjUgNzUuOTM4IDI3Ii8+PHBhdGggZmlsbD0iIzhFNUEzMCIgZD0iTTEyLjM3NTAwMDIsMC41NjI1MDAwMDggTDIuMjUwMDAwMDMsMzEuNTAwMDAwNSBMNy44NzUwMDAxMiw2NS4yNTAwMDEgTDMuOTM3NTAwMDYsNjcuNTAwMDAxIEw5LjU2MjUwMDE0LDcyLjU2MjUgTDUuMDYyNTAwMDgsNzYuNTAwMDAxMSBMMTEuMjUsODIuMTI1MDAxMiBMNy4zMTI1MDAxMSw4NS41MDAwMDEzIEwxNi4zMTI1MDAyLDk2Ljc1MDAwMTQgTDU4LjUwMDAwMDksODMuODEyNTAxMiBDNzkuMTI1MDAxMiw2Ny4zMTI1MDA0IDg5LjI1MDAwMTMsNTguODc1MDAwMyA4OC44NzUwMDEzLDU4LjUwMDAwMDkgQzg4LjUwMDAwMTMsNTguMTI1MDAwOSA2My4wMDAwMDA5LDM4LjgxMjUwMDYgMTIuMzc1MDAwMiwwLjU2MjUwMDAwOCBaIi8+PC9nPjwvZz48L3N2Zz4="),O(this,"windowKey","starknet_metamask"),O(this,"provider",null),O(this,"swo",null),O(this,"lock"),O(this,"version","v2.0.0"),this.lock=new Mutex}async loadWallet(e){return await _(this,R,H).call(this,e),this}async hasSupport(e){return this.provider=await detectMetamaskSupport(e),null!==this.provider}async request(e){return _(this,R,H).call(this).then(t=>t.request(e))}on(e,t){_(this,R,H).call(this).then(r=>r.on(e,t))}off(e,t){_(this,R,H).call(this).then(r=>r.off(e,t))}}Y=new WeakSet,q=async function(e){this.provider||(this.provider=await detectMetamaskSupport(e)),await init({name:"MetaMaskStarknetSnapWallet",remotes:[{name:"MetaMaskStarknetSnapWallet",alias:"MetaMaskStarknetSnapWallet",entry:`https://snaps.consensys.io/starknet/get-starknet/v1/remoteEntry.js?ts=${Date.now()}`}]});const t=await loadRemote("MetaMaskStarknetSnapWallet/index");if(!t)throw new Error("Failed to load MetaMask Wallet");return new t.MetaMaskSnapWallet(this.provider,"*")},R=new WeakSet,H=async function(e=window){return this.lock.runExclusive(async()=>(this.swo||(this.swo=await _(this,Y,q).call(this,e),_(this,F,J).call(this)),this.swo))},F=new WeakSet,J=function(){this.swo&&(this.version=this.swo.version,this.name=this.swo.name,this.id=this.swo.id,this.icon=this.swo.icon)};const metaMaskVirtualWallet=new MetaMaskVirtualWallet;var X,K;const wallets=[{id:"argentX",name:"Argent X",icon:"data:image/svg+xml;base64,Cjxzdmcgd2lkdGg9IjQwIiBoZWlnaHQ9IjM2IiB2aWV3Qm94PSIwIDAgNDAgMzYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik0yNC43NTgyIC0zLjk3MzY0ZS0wN0gxNC42MjM4QzE0LjI4NTEgLTMuOTczNjRlLTA3IDE0LjAxMzggMC4yODExNzggMTQuMDA2NCAwLjYzMDY4M0MxMy44MDE3IDEwLjQ1NDkgOC44MjIzNCAxOS43NzkyIDAuMjUxODkzIDI2LjM4MzdDLTAuMDIwMjA0NiAyNi41OTMzIC0wLjA4MjE5NDYgMjYuOTg3MiAwLjExNjczNCAyNy4yNzA5TDYuMDQ2MjMgMzUuNzM0QzYuMjQ3OTYgMzYuMDIyIDYuNjQwOTkgMzYuMDg3IDYuOTE3NjYgMzUuODc1NEMxMi4yNzY1IDMxLjc3MjggMTYuNTg2OSAyNi44MjM2IDE5LjY5MSAyMS4zMzhDMjIuNzk1MSAyNi44MjM2IDI3LjEwNTcgMzEuNzcyOCAzMi40NjQ2IDM1Ljg3NTRDMzIuNzQxIDM2LjA4NyAzMy4xMzQxIDM2LjAyMiAzMy4zMzYxIDM1LjczNEwzOS4yNjU2IDI3LjI3MDlDMzkuNDY0MiAyNi45ODcyIDM5LjQwMjIgMjYuNTkzMyAzOS4xMzA0IDI2LjM4MzdDMzAuNTU5NyAxOS43NzkyIDI1LjU4MDQgMTAuNDU0OSAyNS4zNzU5IDAuNjMwNjgzQzI1LjM2ODUgMC4yODExNzggMjUuMDk2OSAtMy45NzM2NGUtMDcgMjQuNzU4MiAtMy45NzM2NGUtMDdaIiBmaWxsPSIjRkY4NzVCIi8+Cjwvc3ZnPgo=",downloads:{chrome:"https://chrome.google.com/webstore/detail/argent-x-starknet-wallet/dlcobpjiigpikoobohmabehhmhfoodbb",firefox:"https://addons.mozilla.org/en-US/firefox/addon/argent-x",edge:"https://microsoftedge.microsoft.com/addons/detail/argent-x/ajcicjlkibolbeaaagejfhnofogocgcj"}},{id:"braavos",name:"Braavos",icon:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICA8cGF0aAogICAgICAgIGQ9Ik02Mi43MDUgMTMuOTExNkM2Mi44MzU5IDE0LjEzMzMgNjIuNjYyMSAxNC40MDcgNjIuNDAzOSAxNC40MDdDNTcuMTgwNyAxNC40MDcgNTIuOTM0OCAxOC41NDI3IDUyLjgzNTEgMjMuNjgxN0M1MS4wNDY1IDIzLjM0NzcgNDkuMTkzMyAyMy4zMjI2IDQ3LjM2MjYgMjMuNjMxMUM0Ny4yMzYxIDE4LjUxNTYgNDMuMDAwOSAxNC40MDcgMzcuNzk0OCAxNC40MDdDMzcuNTM2NSAxNC40MDcgMzcuMzYyNSAxNC4xMzMxIDM3LjQ5MzUgMTMuOTExMkM0MC4wMjE3IDkuNjI4MDkgNDQuNzIwNCA2Ljc1IDUwLjA5OTEgNi43NUM1NS40NzgxIDYuNzUgNjAuMTc2OSA5LjYyODI2IDYyLjcwNSAxMy45MTE2WiIKICAgICAgICBmaWxsPSJ1cmwoI3BhaW50MF9saW5lYXJfMzcyXzQwMjU5KSIgLz4KICAgIDxwYXRoCiAgICAgICAgZD0iTTc4Ljc2MDYgNDUuODcxOEM4MC4yNzI1IDQ2LjMyOTcgODEuNzAyNSA0NS4wMDU1IDgxLjE3MTQgNDMuNTIyMkM3Ni40MTM3IDMwLjIzMzQgNjEuMzkxMSAyNC44MDM5IDUwLjAyNzcgMjQuODAzOUMzOC42NDQyIDI0LjgwMzkgMjMuMjg2OCAzMC40MDcgMTguODc1NCA0My41OTEyQzE4LjM4MjQgNDUuMDY0NSAxOS44MDgzIDQ2LjM0NDYgMjEuMjk3OCA0NS44ODgxTDQ4Ljg3MiAzNy40MzgxQzQ5LjUzMzEgMzcuMjM1NSA1MC4yMzk5IDM3LjIzNDQgNTAuOTAxNyAzNy40MzQ4TDc4Ljc2MDYgNDUuODcxOFoiCiAgICAgICAgZmlsbD0idXJsKCNwYWludDFfbGluZWFyXzM3Ml80MDI1OSkiIC8+CiAgICA8cGF0aAogICAgICAgIGQ9Ik0xOC44MTMyIDQ4LjE3MDdMNDguODkzNSAzOS4wNDcyQzQ5LjU1MDYgMzguODQ3OCA1MC4yNTI0IDM4Ljg0NzMgNTAuOTA5OCAzOS4wNDU2TDgxLjE3ODEgNDguMTc1MkM4My42OTEyIDQ4LjkzMzIgODUuNDExIDUxLjI0ODMgODUuNDExIDUzLjg3MzVWODEuMjIzM0M4NS4yOTQ0IDg3Ljg5OTEgNzkuMjk3NyA5My4yNSA3Mi42MjQ1IDkzLjI1SDYxLjU0MDZDNjAuNDQ0OSA5My4yNSA1OS41NTc3IDkyLjM2MzcgNTkuNTU3NyA5MS4yNjhWODEuNjc4OUM1OS41NTc3IDc3LjkwMzEgNjEuNzkyMSA3NC40ODU1IDY1LjI0OTggNzIuOTcyOUM2OS44ODQ5IDcwLjk0NTQgNzUuMzY4MSA2OC4yMDI4IDc2LjM5OTQgNjIuNjk5MkM3Ni43MzIzIDYwLjkyMjkgNzUuNTc0MSA1OS4yMDk0IDczLjgwMjQgNTguODU3M0M2OS4zMjI2IDU3Ljk2NjcgNjQuMzU2MiA1OC4zMTA3IDYwLjE1NjQgNjAuMTg5M0M1NS4zODg3IDYyLjMyMTkgNTQuMTQxNSA2NS44Njk0IDUzLjY3OTcgNzAuNjMzN0w1My4xMjAxIDc1Ljc2NjJDNTIuOTQ5MSA3Ny4zMzQ5IDUxLjQ3ODUgNzguNTM2NiA0OS45MDE0IDc4LjUzNjZDNDguMjY5OSA3OC41MzY2IDQ3LjA0NjUgNzcuMjk0IDQ2Ljg2OTYgNzUuNjcxMkw0Ni4zMjA0IDcwLjYzMzdDNDUuOTI0OSA2Ni41NTI5IDQ1LjIwNzkgNjIuNTg4NyA0MC45ODk1IDYwLjcwMThDMzYuMTc3NiA1OC41NDk0IDMxLjM0MTkgNTcuODM0NyAyNi4xOTc2IDU4Ljg1NzNDMjQuNDI2IDU5LjIwOTQgMjMuMjY3OCA2MC45MjI5IDIzLjYwMDcgNjIuNjk5MkMyNC42NDEgNjguMjUwNyAzMC4wODEyIDcwLjkzMDUgMzQuNzUwMyA3Mi45NzI5QzM4LjIwOCA3NC40ODU1IDQwLjQ0MjQgNzcuOTAzMSA0MC40NDI0IDgxLjY3ODlWOTEuMjY2M0M0MC40NDI0IDkyLjM2MiAzOS41NTU1IDkzLjI1IDM4LjQ1OTkgOTMuMjVIMjcuMzc1NkMyMC43MDI0IDkzLjI1IDE0LjcwNTcgODcuODk5MSAxNC41ODkxIDgxLjIyMzNWNTMuODY2M0MxNC41ODkxIDUxLjI0NDYgMTYuMzA0NSA0OC45MzE2IDE4LjgxMzIgNDguMTcwN1oiCiAgICAgICAgZmlsbD0idXJsKCNwYWludDJfbGluZWFyXzM3Ml80MDI1OSkiIC8+CiAgICA8ZGVmcz4KICAgICAgICA8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MF9saW5lYXJfMzcyXzQwMjU5IiB4MT0iNDkuMzA1NyIgeTE9IjIuMDc5IiB4Mj0iODAuMzYyNyIgeTI9IjkzLjY1OTciCiAgICAgICAgICAgIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iI0Y1RDQ1RSIgLz4KICAgICAgICAgICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjRkY5NjAwIiAvPgogICAgICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICAgICAgPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDFfbGluZWFyXzM3Ml80MDI1OSIgeDE9IjQ5LjMwNTciIHkxPSIyLjA3OSIgeDI9IjgwLjM2MjciIHkyPSI5My42NTk3IgogICAgICAgICAgICBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CiAgICAgICAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiNGNUQ0NUUiIC8+CiAgICAgICAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI0ZGOTYwMCIgLz4KICAgICAgICA8L2xpbmVhckdyYWRpZW50PgogICAgICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQyX2xpbmVhcl8zNzJfNDAyNTkiIHgxPSI0OS4zMDU3IiB5MT0iMi4wNzkiIHgyPSI4MC4zNjI3IiB5Mj0iOTMuNjU5NyIKICAgICAgICAgICAgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgogICAgICAgICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjRjVENDVFIiAvPgogICAgICAgICAgICA8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNGRjk2MDAiIC8+CiAgICAgICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDwvZGVmcz4KPC9zdmc+",downloads:{chrome:"https://chrome.google.com/webstore/detail/braavos-wallet/jnlgamecbpmbajjfhmmmlhejkemejdma",firefox:"https://addons.mozilla.org/en-US/firefox/addon/braavos-wallet",edge:"https://microsoftedge.microsoft.com/addons/detail/braavos-wallet/hkkpjehhcnhgefhbdcgfkeegglpjchdc",ios:`https://link.braavos.app/dapp/${null==(X=null==ssrSafeWindow$1?void 0:ssrSafeWindow$1.location)?void 0:X.host}`,android:`https://link.braavos.app/dapp/${null==(K=null==ssrSafeWindow$1?void 0:ssrSafeWindow$1.location)?void 0:K.host}`}},{id:metaMaskVirtualWallet.id,name:metaMaskVirtualWallet.name,icon:metaMaskVirtualWallet.icon,downloads:{chrome:"https://chrome.google.com/webstore/detail/metamask/nkbihfbeogaeaoehlefnkodbefgpgknn",firefox:"https://addons.mozilla.org/en-US/firefox/addon/ether-metamask/",edge:"https://microsoftedge.microsoft.com/addons/detail/metamask/ejbalbakoplchlghecdalmeeeajnimhm?hl=en-US"}},{id:"okxwallet",name:"OKX Wallet",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAJDSURBVHgB7Zq9jtpAEMfHlhEgQLiioXEkoAGECwoKxMcTRHmC5E3IoyRPkPAEkI7unJYmTgEFTYwA8a3NTKScLnCHN6c9r1e3P2llWQy7M/s1Gv1twCP0ej37dDq9x+Zut1t3t9vZjDEHIiSRSPg4ZpDL5fxkMvn1cDh8m0wmfugfO53OoFQq/crn8wxfY9EymQyrVCqMfHvScZx1p9ls3pFxXBy/bKlUipGPrVbLuQqAfsCliq3zl0H84zwtjQrOw4Mt1W63P5LvBm2d+Xz+YzqdgkqUy+WgWCy+Mc/nc282m4FqLBYL+3g8fjDxenq72WxANZbLJeA13zDX67UDioL5ybXwafMYu64Ltn3bdDweQ5R97fd7GyhBQMipx4POeEDHIu2LfDdBIGGz+hJ9CQ1ABjoA2egAZPM6AgiCAEQhsi/C4jHyPA/6/f5NG3Ks2+3CYDC4aTccDrn6ojG54MnEvG00GoVmWLIRNZ7wTCwDHYBsdACy0QHIhiuRETxlICWpMMhGZHmqS8qH6JLyGegAZKMDkI0uKf8X4SWlaZo+Pp1bRrwlJU8ZKLIvUjKh0WiQ3sRUbNVq9c5Ebew7KEo2m/1p4jJ4qAmDaqDQBzj5XyiAT4VCQezJigAU+IDU+z8vJFnGWeC+bKQV/5VZ71FV6L7PA3gg3tXrdQ+DgLhC+75Wq3no69P3MC0NFQpx2lL04Ql9gHK1bRDjsSBIvScBnDTk1WrlGIZBorIDEYJj+rhdgnQ67VmWRe0zlplXl81vcyEt0rSoYDUAAAAASUVORK5CYII=",downloads:{chrome:"https://chrome.google.com/webstore/detail/mcohilncbfahbmgdjkbpemcciiolgcge",firefox:"https://addons.mozilla.org/en-US/firefox/addon/okexwallet",edge:"https://microsoftedge.microsoft.com/addons/detail/%E6%AC%A7%E6%98%93-web3-%E9%92%B1%E5%8C%85/pbpjkcldjiffchgbbndmhojiacbgflha",safari:"https://apps.apple.com/us/app/okx-wallet/id6463797825"}},{id:"keplr",name:"Keplr",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAACPfSURBVHgBzV0L0B9VdT9nvy/vB6nVOg4GEx/VER3A1iqo9aMzFgWtoOhgsYaHYNV2lNEqxAdfmKHTakuDTge1FJK2tqOtGqoWFWti8TFSxGDriFSbIK+qgB95h+Tb09397+49r3t3/99/LT0zm//e9917fud3zr27SRB+EbKd1gAcOhFg/kSYmjoBiJ4JhMsB6LHFJetS+wfoAowOQOKnumGVUfSX+23Ba0uRfFaGsh6pNKDqP2PzQN5TbNxqjAeqi2CuWLuvAuU74eT1O+AXIAhDSaX0g+fBFL6ymHShfFhT5RvdknNLzsTIb+cChmzb2OJqJY8aQG9gaAUXaXLbOH0gL4mXmXHC/HYUv1thEWyDk9bPwQAyOQC2H1wHGb29uNtQdLcmFJBv2AsFAPVQJDQPlFBYFACpso7+kFm17g/9sUgr3QFWNI3VtQWO0KaCGXbDBLJwAFSKz2cLjtvglhNFGmr6NomgxEQdT1kYK8N0uzBwH3bosHJo3EKkD1ZG0X6ctAFEW6cAAiwYCAsDwM2HL4e8tHpa45a7NN2UUaxBmFAPmpdt+rGDq0zdrpP2I6yRig06ANHNHuAwjxlzFp67fhOMKeMBoLT6Kby+GHMGmklySVosJAO+ajK9LX6Uxl51eyqZp/tYvVcPbRklynQ7au913aaeBwLRz+6CDU4dhw2yvhVh++EzIcPvBOXXc+SXJz3LMVYeEblOYxKZMx/kF4V70aZPv+q+7ceUmaivHTu0hDSWqzwRWa4rAsTtcOuuM6Gn9APAzYfeVszsM8UAazoVCgDj1DELneqrBgrq/ilyKUFwFE2R8cX8UABD1OmaOx87pkw137gxoP9ssq91xfUZ+Pddl0MP6QbAVwt/Pw+boY+MCQzsquNY6VhCHUoGNeY4fUKjVLR9JdIC8IkxkTrqkerVPsNsHxCk17RUPtFstJw6tE2RfNAPl35Cs7XrSHcGhWPHADBWIJj25XJ8ipbJcUmlZR01Fs+bh0vg+eujBhwHQOnzoaD9pFAi25ZhD2XzPKmHNAAQyC/zHbCelFNGicBPpxP8jZFA0El37xyaHA8oqm8uBGfB89Zv84p8AJTRPuD24m4dpKSLAdhPPGKv8wx4+1l8dO/vtVWL1PvQKMIIxOtFo3VKKy9y4JNmkboflef2N5K5gglO8nYHfgxAhfJHwQQkL9EmXgfHqNcnLkBSwWAPEUFfrG3Xs6k8b+dg66N6RpS7DNMvAp+vwTXrB2Lt7dqugWm4HhyxANhe+P2U5fcBQy0mYh+nntOmL0BcoMREK8vNr8uiCgnKkAEixIO5Zo41IOKKrgPNWFvw1liuVDWHvNi+f/NHs6BErmdJ/Tnugt5Clhl5mVPdUnCkLnMhfVwC8hUz5c69qifm4vYBLrWT285Jq7aUdAOM4ut02ycAkLECilgGb1+1naNcugLJAPPF1iFlid7FxmjH6VO3R99d2zdOwa2k+gNpNVGGcObc5vPRExZvKFwxjahLil1olGf7qd0DgWIXjM+5Hbusg2syxMvVU9RSWv/R/tbvWyUflMZoQ9YwE6vfhxHK1ensy3HC6FlypG56ixZnBDJ1bf/2OwPeU8Qyeh6n5kDrGxZoGSA7CrMiqPEubjFdF5tTnzbGkrkoy+L5HgslGSbyPG4QR85YTp7PABi10sbqTTBIym8T2jnpvsV8EEwQ6EhG8Ha+ZtXHHHjk8M+hr1D7R1TQK1ftumIAtI1Nuo+Vpw+GAHod8rR5qXSqX5mOWzixcpanrIM8RhL9yP6UzM0fLljg1PVzIwY4cujMTovuQBVQD2tnc+zy2ynG6NoGdjJBbO5QWxdoa4aoj9fHwl46jIMBX6Tqt8+j/DwEixcswNsTJNYSwxVkzaIlcF55UwEAc9wwFgA8ZUQnYOt2AcN1b4mybvCh7IN6UH8zLx2ggVcnnY66BqpnxdcILDCaZ3Dn3/RK/nNJAGN7EUy9slkTwBsPeXZhJE3JuoicNn47jJhllwvoVe5RuaJ5Mz7avgCHTZutnBqzy0U0eXblKGIlRuaOHMnXT8ONB2d6Bo+9JeaeTJ2By9pyXslbQ8RRAUU6oI68sdOlpkikkSQIRxoPL4dadmgUSqHzURH5ukaOiqQS1kxPw4nTWfkFL/WDTEr6xR5xBY6v9NGqoFeJEu08BdcrHoDLFr7KQ9np2Glv/EKRSAYoCJQED0GDX2Q5wOYKajAuoW55N5UXAKA8m1mI+jvbUL+6CwGEKFdKQlHDmYRrNWBAgYMzAbZWG5IIZIASGpGTZ+eFdXEPGsf6yZs1wEUnTBeJYzrbmZyOwWgMBRZy7YlL4A1rp2Eh8m8PzsNp39yfrOMqE5i76FK0l1d0+tHjV8Hrj10KQ8h39x2Bk2/5WRisZCQ2HrXKU7GCmKDM6SpCmC9cQA7rus25n3TFEgMNY8U8mErEXIK2UOZvEdK0vvEpKwZT/l2H5uGc2x8S7KDHQzFPaDOC21LlvDCqF1xTmt06sX1JAMk0h8nqDAaICOOgp2BWiB20GZvfZU9bARufuhyGkFL5p9/6INx9KHdezTb7EwfhdQxAKV9LXqaQddOdf3Uu0ndKMIEet58eYIsKBeuIWT7P8sow0UazxGW/unw45R8slP/tB+HHxW87mAoMUbOBmZ4T/Y4h0ykAjSPj+Pxx23aOrQOvUmKgAMdVeaxXBwicJc5duwQ2Pm0Y5T98lODlheXfUyi/sXxyqF9s/2KULgJhgLRPlDKNOSxIJqJ/VGUTMIDxgaQsGsaZq7Q03u7Zx0zDNSesgiGkVP4ZtxSWfyAHHnsYP68WBhNl4NQEVZMzc3M3PZSv71O3nYAecxIXULdHM5Zfry1DVpHS8z5u+RR8/uTOzVJvOffbP4fv7Tka37K2WU5+m9Of+jFxNz3pKeBCqX9S2hd9eXSfGqu1NpTbKrS3xy2fhs+dshqOWTTMjN/63T3w9QcfsSwIvrI9RWOPOn3FBoEdgj0QM57SaTIwELjbz9Y1CDfgLzKKotFN2efaFVPwuResLkDQ/2/QpWTj9/bCP9x9UG4x7UwgrsT+9E88Va0DgbfJmx4jXpAt3WETZThem7HEYYCkwgnc7TLPO2YxwudeOJzy//TO/fDRXQeqIcLcmoHNDE0ZueWx9s7alm8BHYabyAXELDpeFmk3qRsa0wWkqLdRzmdfdMxgyv/AD/bDBwsA8LDDzmYhjFDXEeBN1FUgL2V6nMVfqL+vymI0HWPDvlK6gJx3qG4JBPLdOSj5y+euLKL+KRhCKuXfsb+eQ+phVZlQFgoqT0vsYcnNMjFAWslxIupL8UNbP+/DuoDE+CY+GMm7j18Gr3vSYhhCPvajg/Bn39+/YIvXRI9Obuvr2fOknILGz1guIAkOitdDb2ToZpQ+gqxrFJEPq2OsyVJ++QDvKpT/rmcugyHkE3cdgvfdvq+w/BBUsgFHWzyMW7ws8IHbMoMoGy+oFgzQ2/r1AkdamMlBhDUmdQEx9xJJe2UXP31pBYAh5BsPHIG33bqX+fwI9VcgAIguQKVQC4aktH0mK7V3CwsCo0EXQ2sPl4A0iebNsGYMce9F/rWc8+QlcOVJwxzxfm9uHs7/+sMOKBNb0Ja71cKaJrVyqWMr1rms4el7BoHUL6p3wJqyxDZvoF2ATuvAS4OgzH72L0/Blc8ZxvLv3p/Dq3fMwd4jsfUKGvLjIzU5cpuCH9WS2vz3k+4gMNKZmx1jBow9sGy3YMnB3eM2/jIGwrUrM9j6opWweoBTvlL5Z29/GPYeptbvV2M5oAuTJVtu6tQZ3ikOF17f61MUBul2AWQjUlccJccUjBEqXpDUMYAOsqIgqBf3uJUIn3nJquK0b/K9fqn813zlYbh3/zx7nsaeO/bwVRWKzlvWg3jMYILM2GgouhrvbWDKr8diRHTyqudldDEBA3Dl60+/YiA4rrD8T79k5WDKf+2/KuXrSL2OzsEtr6HClIuReiEvZjYUtf5Yi44YgEwSI/Vic9KBHjpbtElZoF1bh/Kb8Zo6q4sj3utnVlT0P6nsKXz9a7/8MNyzb/RaF1Nb3fYolsRcRb0u6mfZsnM1mhc7RCTxMigR+EWsWhUn66EpmEB4n6RcDFusMvtDL1wOz3rM5Kd8lfJvKix/b171G+iVfV6uwc7+hORxjZ/y2k26hNYFJIIC36ezQxVj3Y5FMCsQljuBYP1dBbbjgutTr3j+MnjpcYtgCLlo+174/oPz7nd8Md9vlOvRvicC1F3BHiWTuotpo8y+lBz17baOuCWHIYaIATzLZ+l3PGcpXHT8EhhC3vn1/fCt+4+MLF8xdgAitidzdcpnBU37VP+BDnNG1lNm9tAea1MwQI/V96iM2j9kFTYzTET/VXpCy9f9mMOeOv8dv7a0AsAQcsUtB+BT/3UYmtM9d0wBCt/3G8OJWQ7PoQ7r9PrukM6DID53t8wJUPSzSLTKv7SZ6r+XlG35OQDJeV307MUVAIaQq79zELb85yFBx9jhkxF4XT5pv36b79I7hngnsRGId2wXeox3AayOg2jZ3qe9NOoXLsiBxeZ52vpFsOmUYU75rr7tYAWACtA84FV/d6/ZiiaftfmXP7hleOuRUmaXtWtdu9ba4xzAt/IIgiMTEqDRwdoA4sUAzyqOeDfPDKf8D912cOTzXcrn/5SL3RLz8wkNDLHArnVTXNkOQHoDopZ+L4NUoOi5q0AK4UmNFXj5zQNOIDoGWLsqg2tftgJWL5mcYq7/j8Pw4VsPyrknAk7sEfwhv0kCo+4PIK3sCbbWvT8KxWYkPQEFDr5Ioh6SzUfmRhYq5ZB5mFep/E+eWZzyrZpc+Z/6wSNw5TcOmICPK5UrQdO8LjfH5R7tq/VzrR57Wjp248EFAEZHBp+2sQuNZA5kmroY67OntBZZXE88plD+WYXyV0+u/HKPf+lX9tf/hg60IBBKM0qH5FYU2bt6Ga+Q7ENXaOqxcUU+RMSNA6TEXYBAIEVHCdbAKK8pY/my7uhmcjXV/RYgXr0U4dozVgym/Ndv2xuOqVvF1kzAx3Zjgjgz+FtVBxie23DcgJOMZzq69oNAdFpRpLhRpqH80BxVQ5zAZxmprf+q314Gxz9u8vP98mj39z69F/YVr3UzV3HsX/5Cct2BOYl0QCHSAO62D2MKj+QDqDFNphX/HIBsD+gkRgMpCxeKl44sgITES5pJdwOXzyyF054y+RHvvXtq5R+i4JoSikT2Sdc4ls/7AkgDw+tL5IsOrIi+HVExgKVx25NUZJXWflDeKP9PJg8mAMDJa6eqa1Iplf+GT+2F+/bkYlGxy7qhiQ9AKCpm+e5a6TYAFgiNLaWAwCcVEV083ee7PI9SxL+pKw291a4J/PjHJej3+2hIpfx/rJWP2u+Dq1hUAPHKYuWectHz95ohmnyAxOt3nQFJSW4DvUFa6zZ5jdhPoMVJnWEFGuxAaCGyp/D1Gz7JLF9t9bjiW4tnrBVYQIqXj2OUJ9Ns/FT9UC+OgvRBkLZstRuwL3sUMJyI37iDR1v5nyiUP1e/0/don8Ac77b1HIYw7Vm5Trf16zw3Jqg7cllAVJaCrJ5fOJL4OUCkN49iWlZwJsb/QUSJ9kS88X8k77nxAPzgJ/PGvyOApG6eX2Y0ZcyHx2IFnQaQykHzKhj6uwMAP45ICgpg9NoGJg9/qP3D+RKHVD0Ir0b5xB8FFii/3r3jf45WZwiefxfWD5D09a2ylQFYJkD/lbhj+bFX596HIcbae4Oh/MeiSwCoC+ehOl4dXaq83raN8qm6qkWkum19VS9F2nqhHa/flj8KAFhVvCfY8rpVcOzqrJpDVs8nq+fE58fvm3q6LMtZ+ypd/8PMObtYm0zUleNnTV7RJiN5NX1lug/TNugCKX6FD0I0XLR/Nwl1IoaqTPh6aJnC97OPAgIKObY4Ov7wq1bCBX8/2vsLyua/nrU7ZdzCOXUbt8AeV7AF4Ni7gSrfNXXGEInlzaqOaut1Lb2x3PaqmYFknbYNYw3OAMgYAdu6MGIEePTk6Y+fgut+d1X15jBlKfwKLIDqitfNTFsYWXRj2YRifQwLGUu2rICCLSRDGJZoruiDardQKT0ovqH7AJYRMCTdw0jBRKG+6P/R3QI2UoLg2nNXVZ+Me/Ru6D8HV+GZqhdLY94oXbqczOmrAUqj6Ky9wKX+Biyesl2AejGAVToJpQsrdhTfx+pFjPD/BARXnb0y6ddDmVQAt9A4CLiF2jqZUlxbt7LuiDUbhTuxQtclqZ7EFVN6UHRQPHDFp6zeAwUsXO64fx6+f/88DCG//qRpmH3FingQSMFydVnMelv3kPt1Mt13zkDCrTfX1uwFh77VZ6kL60geGmW2SrRKh1ZxdX2+EMzqgS2Asfq2HiubgAH2FMHbH358P9z78xyGkFecsBhmf2eFQ//oAEJZsirLcnQZRLKDVbi2+Ma6W4t2ACKAwi8OQkIDnGgMwJXeBnQ0UiJnAREcEsn8PFg9VzaqsknjgPsemofzrt07GAheXoDg8lesgNjauL7U/MYBwxnFA4Z2N0gWSJnDKC1QuILreIFfgrmiMYB4QMkQyJQIudoViLYUKJ9NPjBFzQiTSN3vfQ/lcP6AIDjjxMXwxt9c5isuB0PPoUzuCDKKW73IF+5EKY8snTcMk+UIOr7IHHCaqwEEKL/fXto1kKN4kooP9yRcBOigESQoJpEqfqjHvv/BHC74WHG2PxAI3jizFN744hoE4ARtpC8UytTKDb4bbKDYKLTD/4vtn1Kmr/AI9bcuIMEAMuADq/hcKr5hA7sbgPb8AEw+THwQxK3y/oIJLhwQBBcWILhwZpmlaQDDbD6FB+WiVm4uleqCh7T/t0wQ+mt2DfJswmOFpAuoJj8PMuBzjoa14jkbiLgh4iJaMMEE4ix6yQSX/M0+2Nvvf8PrlAsKEJRXbHdQLS4gWKrnQZhVbuMyLBMEV4COq8hUfCAOkhQr6CNhuwtw6B+aq6Z/swVkwDCgYFRv3EDbnkLw1/Q7gQj3U4995z1H4eKP7B0MBOefurS6hPVQ3OJH1tVY97juAMUOQlpveMfgsgCrZ+g+V+8mmnMA7xI+us3jAJFlwbrDwZBemPZUkEAywaQAaINNuRO5896j8KZr9gwGgvMKAJw3sxQs7aNRBDr5zfsDz2K5xWdkAWb8PmmLtkfBaOo4l97zy32+WlhB7aBiAgpRPXGrp+BCCMwZwKT/VFz7QiaXTNMo6M575+GqGw7AULLht5bC2ScvERQe/LwCgYkDwFV8AIV1IXrHIGMIeXCURRSOFGeF6DeB3jvm8L6awLwbbxO1IpDi79Rrv88/rVqwKOtqxuFf4Hz+lsNV3vvPWQFDyFtOXwb7DxLcdNsjclwIz1jFBM380CsPec1bRPkmEsX3EqFMfQdQj1Gl1bcCqdiqKRt9ENIRhYlPt7gy63RYeFIgYACpG9h8GMAFKCWwqxnjXwoQlD75vQOB4I9evbwa98u3HbEgYArwlOoqGqSSuUq08k1Z8wdZVXaotvx7ARRVgPtRaGPFlYRTPPcLWoKAFNbOWsGEboDCLyI4ChldJRM84ZcyuPC0Yf7W8DvPXl6A6iB8+duP+B+PAgchGoYSytfMIfItSMI9CmPUdUDUtyVj/YcRozIydc1XsvyvSCtAhIVijDCJ/gmES0GS8x39/f2Qvu4Lo7/pe8FAIHjTy5fCrvvmYdf981bxag58vaq/VAJ6DR2GwKBgzRyhTp0v1hE7rb8sN+8C+Nl+CN5U9C+2exBe9DSBIIA5OWy2Z+L7AD7egoVE0Kd3MPyVdpN3/Y0H4fovHoQhZMVShD+5eAU85QlTIZKv14ef3aMO3kgHfF4gh87BUNgpiLMBE+SpMckPDjPgR778DEAp0L4QIrGft9E/2F0EA5moN4FUFuPswVGN1cydg2DLF4YDwR9ftAKe3IIAROQtlQRW+Y1CnQMgpLB70DsFAYhcbTnNhe6VgTr4QXbxMv5CSCyuOCCSdTWrCOXzwyeYQJwxtNXJvADaLQUItt44EAiWIVx5cQCBVnQzPn9LGBSrLdwHiGYC8W0Ce2bzIanaRsqTQHVUKA6EnPyWEbhbiB3wcErWboIrblIhClSfx6xf543qlwD44i2PwBBSguDSDcvgV4pAs6F1CQKb1m8BAzBip4XOsS8HRf1hiKdwvRajgyClcO9wJ5z1M0bglt+Ape2HjJsQ4NBtJwSBfDAC8ckZgXNULK8P/N0++NJAICiVf8XvL69+o0xAMYrW1oxuHXtSKNmAuxOPETgzRF4Hg/kuwGUEQanE3AUYyvfoH5irmESQHMYhAP1No11gaOf7wb/dBzd9azgQbHrzcni8AAE6vtuCI+4KGDu0v5HXx8S/J9Ag0i6gUaa6+CLqKF+k2Y7A+9QLybbnjDGY8sm3LB6feGXBHQB85J/2w3/fM8z3hY8rlH/5m2NM4LgCBxwyKPR3ArZfZweQg/92MHd2AeaNoFIoGAVDS/tim9fSv1YEmLyJ4wBHuT4o1GtrVbb/AMG7rt4zHAgeg/D+N6fdgWUCT9mJdC4BYdmAMYL7QQhJWnQ/BqnuLUBQvDACNx7gfr/px7y9m1AaBRrQUowVKFJGcKAAwaWbhwXBe9/CQeBTsssE0AUGSCievx2044W3gWLhyFI8W9SUu/B//X5MX0NI2SfUDwksluFj1L8tG2hg1HXKFz1Xfmwv/OShHIaQEgTveesyWLlMWXvzbsADI3QEgDCqk0HcDRhXQDYYzbQC2rNzT8kqyPKULH99cBhWmEQobukcCLbMAUEe8n76QA7v+Ys98NMHhwHBYwsQXFaAoDw0atY46grAugV7VuDFDd5BkWQY831g6xdzbalkYwLQ0T65jBC7tCsRY00g2DGmPgrWtN+CEzgQAH5WgOC9m4cDwXHHZnDpHywdgUAoawSKkVVbKpdWa1nD21FkAhTy7IAbo38OIBTmpzllBn9PCTYg8W2gYJIJpH351GHt0IJPPhN/Bg2KBgTvK5jgZwOC4N0tCOxcpc9mbAGS8vl2L27pum/rCvxPwtj+3rNYewIYgjmP8mOAGWQXQBHaB3DB5oOEDGB4+oECBO+/au9gIFhbgOCcVy1ulZUBRIErlaqVz+YLUMcUGJgEAngyVSfUjVI+WMv3joUTlwSBBdEg7wIgNhc+jlIsOCAweSSA8ECh/A9cs6/aJQwhp/zGFJx/7hJB+RiNA/wj5fBMXf4fAWPvBLQFxZSoF9ZjBzfqhyYPJO3za0JxT/rEAkllgqNgrvSYm7jr7nnYVDDBUCA4+XlTsOHcxc6cOX2jejaUVk/xj0hjShduwQv8YoEaZwYc81fcK2VMJFx5RBBnJRJj6zwNertLGN2XILjiz/fCUFKC4DWvXhQUCRbEbkxAUvkcIPotoa3DyooH3u1ZPTp5niLdxQa58CiYILKrmFTacSnQOTgWLhSsqB+00lUf9f2PCxB8dMtwXxqfOjMNp58+zeicWzFjBYi4AbIuhFt9iAVQX7vLfyZubqTRkbDP/UIe+xYJeT7VeaoMdV/8vv58zC1boAhKbC8KH03Vcxt9ikWj7/NI1eV56PTJ84o/bv7GI1X64vOH+V/HGwB88fPzzazDuoJe28AEIVXfI69X35G/xsVT7y6Cw/nbMWL1bcPmXm8RAaJM4ZWjYgnk/S9YSLKO+vXdQqQNYxFxD4xB2P3XChB8/JPDfFBSyssKELz0jGlh8dbaI+cCAGaL6AWGgiHy/OGseKW406VwABsQ6bRSZnpRWT1w6i5QAm0z5bDf0RheGdk0gOMinGdjc/7STYdh22cPw1Dy0tOnAgj0BZHL1LUHQ55rAMId0zngzoyU1slShvnyl6Vj4rkCYBNvZM/+HO776Xy0fUr27a8nQe0foAiwnjuNbuqfoHRFp8hA1bqFhIso/rjhnw9V9y84ZbEaPS6YSD/1aRncRPVXxsjmRz71hzz2J/rz4HmLpvKduG5m15psesmuIr3Gq9Tmad+CctHMwOoX0VlkZGlWnqGth6pepTjeDmsKFG0w5LM8Xcek2X1m8oMSwj3KOl66XYtYHQBQ9SUArLLl3yaSoOe/tsZINl2TYbZ7x/q5Auw7Y9G/jgOi9B6heoz1BX7fyPLRqR/GIvC3dqB2IHo8SrsCfWYAcm7YsQayL5AuVdM58XroUH1sO4c9KV+eBag2O8o5jf5PJMpvcM8DYLSlEucAwO75r8oX5wcQ+gvbNCetFRgBA0/LQyevPjlgIqU4smNqcLC2QnnqXgNDKpqxB0HEv7vKkuWij0h9J1+u7fzWFgB5fmRLkTmnAxyMKMSz+CgLEFtQ3Z/pvwnmNIiYYsAfpwGDzzAeOLwzgcAC4OQZxUMcCEbJntJArrWsLykf1TomlQ8g3IB3wdKpbdAAYOQG8q3tbBxlcaoW9M7y3bYAUQWio0itqFGaAiM5fcrfUE8zhQUPBwaFcfXYoMbQz9z2EQGCkzdqg37dpr+YwgEiSsZ2HVNXcQC0ZXYzzpV12/9mK4fpzRA5yxcW2Ty5dgcgT/hSCtMg8KzaWnejFP4iSS2+AA654IjRLweB159v5WT6cEHi5MVo35ajVTQHQ9sO3efyrnmETc10WgDs3vGE3QUMtoIW9RDIHyhxL3wmB4UBiV3wuHWrcYAilg2tQtH0TfLZmOW3z8jrseqBtkkCBdSCewpI5ZEcW5eDUqqpp0ACrL1mkuJ4ecvsR3B380ziP9qbh/lZ5LEAG7BdDAUE9PIBXEsWymFWaRgF4sxh5iP6CGNxANq5BK0KyoUwL48BWrCQbMfn4wJB5RlWaMvQdRVCycz6gXwlx/sAODIVrL8UAYAiFthdLObVYmYeGNRDg14MDwzk1ImAJSjOWSmlKM/ivb5QK1gwB5m6fLymHJ3n5n256+PVB3BZIZRhWDOSoNd169rmAgDDMDnRJm79AMqgGnnqi+/eXjSYMf9tCWvRDtKkEUUdrMsWknYPfrC2glRdVi+L5MfSmXfAg/WHGTwPMHIwNHrDljoQAq8viNeXOwFO8+weffp39LZ7419l61URuP/X6jQePb/4Ea6glZYOQ3r0GywWDa3ruvIXY1Zt6vboUyccJmiExwg8NhCflEFiTvwZmoS2fgLr35Xlo1fGWFNavQoKHRfguITdeARPBUdcANxRuALK6Hyehx4Q2H0zIVB5DTVDT1Dwh5V9gPXtjrjBHuhFjIHYWg9XgrwnoTTpEqxitSEZZXvP0tZBoVT3eVQ7nl/M9JLLtkjqbyT6vy3/aMdx24jwEr3OGEO/p8iExQswgO3Tt2w2XlUWwKTHG6XJmQdZVmjmq8qE8kDuNjQQBUCbbK1wXYc/k2KF6DMDuFs/DyB15U0b/xq3QUSS/932D29+4uZiDTeBY/3Jew8kGkg8EWMHSPQtWIHMYsu+nc7IB2mUaUi2bccin/lilg9OHjplmkUA4pauJew0aNNl107NQkI6/7/1H35t7SyWINCKid0n8jymAFL5dabew7t9eQN6IHRcDjptkfz+uFW7lqyUjo5yXZ9f5aFsCw6LJIwHI78EdMll16WVX0onAEq5swBBcUpwVtHtbnM6qBYee1ovn2y8rnr6SD+h3BschOLCHC3di04pbX1cXJB6Fh5bm4iSfdqHliF0//XvHOV41sbrpjZDD+kFgFLuvHn9tmxq/tQRCEA+gHgKiitIC7N+jNVXykqCBqQ7kP6QlKJ5G9uXl5e8F2mPUfw2xuJTcwMHyBwQ5SveHE/auCXu87v67yXPeOFds8XG+fK2E2STQp7HPoRo6tS/sX08r8t/Rx9moO3D1BmN2/ccoK0H3pkAqnbe3r9Jh7Lmr3G19I7+fj9jtXg5APoflMTv54qA9+rLtnRTvpbeDMDljq89qQDA/PoCclurjJTlQsQ3R9jBixMMPZtxpBWhx0LuL7kW6QpnmQgbua5Al3fWw7Y8ZZ2BBXDLI4QnLUT5vJ8FyzNmdq3DPJstrOaVxZzX8M/DpNWjYgeInvjpOpmyWvAYAsPiZq61g3P6J63bsoG1/Axi+d5p3uhhsohFC+aA0IanQbSDJrf8imvrPGSbZyP7+74yMQAaKb8tXA5TZxYdbiiumapzAQAIx8WuYiDqBlpqb8vRAoClFwYApSg256BYHwCZUOSkAJC/DAAFzcPO4u6Go5BtKRQ/BwPIYADQ8qyZXTMZZCcW+4UXF6OsyZDWFQ+8DqKKWTgAMhcI4wHAKLatE+wuCoC6LK5cDwCoACbKdxd9FgrGncUrnNtHv9M7h1I6l/8FAVO2ym5DPSIAAAAASUVORK5CYII=",downloads:{chrome:"https://chrome.google.com/webstore/detail/keplr/dmkamcknogkgcdfhhbddcghachkejeap",firefox:"https://addons.mozilla.org/en-US/firefox/addon/keplr",edge:"https://microsoftedge.microsoft.com/addons/detail/keplr/ocodgmmffbkkeecmadcijjhkmeohinei"}},{id:"fordefi",name:"Fordefi",icon:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwXzEzNDk0XzY2MjU0KSI+CjxwYXRoIGQ9Ik0xMC44NzY5IDE1LjYzNzhIMS41VjE4LjM5OUMxLjUgMTkuODAxMyAyLjYzNDQ3IDIwLjkzOCA0LjAzMzkyIDIwLjkzOEg4LjI0OTkyTDEwLjg3NjkgMTUuNjM3OFoiIGZpbGw9IiM3OTk0RkYiLz4KPHBhdGggZD0iTTEuNSA5Ljc3NTUxSDE5LjA1MTZMMTcuMDEzOSAxMy44NzExSDEuNVY5Ljc3NTUxWiIgZmlsbD0iIzQ4NkRGRiIvPgo8cGF0aCBkPSJNNy42NTk5NiAzSDEuNTI0NDFWOC4wMDcwNEgyMi40NjEyVjNIMTYuMzI1NlY2LjczOTQ0SDE1LjA2MDZWM0g4LjkyNTAyVjYuNzM5NDRINy42NTk5NlYzWiIgZmlsbD0iIzVDRDFGQSIvPgo8L2c+CjxkZWZzPgo8Y2xpcFBhdGggaWQ9ImNsaXAwXzEzNDk0XzY2MjU0Ij4KPHJlY3Qgd2lkdGg9IjIxIiBoZWlnaHQ9IjE4IiBmaWxsPSJ3aGl0ZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMS41IDMpIi8+CjwvY2xpcFBhdGg+CjwvZGVmcz4KPC9zdmc+Cg==",downloads:{chrome:"https://chrome.google.com/webstore/detail/fordefi/hcmehenccjdmfbojapcbcofkgdpbnlle"}},{id:"xverse",name:"Xverse",icon:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAyIiBoZWlnaHQ9IjEwMiIgdmlld0JveD0iMCAwIDEwMiAxMDIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxnIGlkPSJJY29uX0FydCAoRWRpdCBNZSkiPgo8cmVjdCB3aWR0aD0iMTAyIiBoZWlnaHQ9IjEwMiIgZmlsbD0iIzE4MTgxOCIvPgo8ZyBpZD0iTG9nby9FbWJsZW0iIGNsaXAtcGF0aD0idXJsKCNjbGlwMF8yMF8xMjIzKSI+CjxwYXRoIGlkPSJWZWN0b3IiIGQ9Ik03NC42NTQyIDczLjg4ODNWNjUuMjMxMkM3NC42NTQyIDY0Ljg4OCA3NC41MTc3IDY0LjU2MDYgNzQuMjc0NSA2NC4zMTc0TDM3LjQzOTcgMjcuNDgyNUMzNy4xOTY1IDI3LjIzOTIgMzYuODY5MSAyNy4xMDI4IDM2LjUyNTggMjcuMTAyOEgyNy44NjlDMjcuNDQxNiAyNy4xMDI4IDI3LjA5MzggMjcuNDUwNiAyNy4wOTM4IDI3Ljg3OFYzNS45MjExQzI3LjA5MzggMzYuMjY0NCAyNy4yMzAyIDM2LjU5MTcgMjcuNDczNCAzNi44MzVMNDAuNjk1MiA1MC4wNTY3QzQwLjk5NzUgNTAuMzU5MSA0MC45OTc1IDUwLjg1MDEgNDAuNjk1MiA1MS4xNTI0TDI3LjMyMTEgNjQuNTI2NUMyNy4xNzU2IDY0LjY3MiAyNy4wOTM4IDY0Ljg2OTggMjcuMDkzOCA2NS4wNzQ0VjczLjg4ODNDMjcuMDkzOCA3NC4zMTUzIDI3LjQ0MTYgNzQuNjYzNSAyNy44NjkgNzQuNjYzNUg0Mi4zMzQyQzQyLjc2MTYgNzQuNjYzNSA0My4xMDk0IDc0LjMxNTMgNDMuMTA5NCA3My44ODgzVjY4LjY5NThDNDMuMTA5NCA2OC40OTEyIDQzLjE5MTIgNjguMjkzNSA0My4zMzY4IDY4LjE0NzlMNTAuNTExNCA2MC45NzMzQzUwLjgxMzggNjAuNjcwOSA1MS4zMDQ4IDYwLjY3MDkgNTEuNjA3MiA2MC45NzMzTDY0LjkxOTggNzQuMjg2MUM2NS4xNjMxIDc0LjUyOTMgNjUuNDkwNCA3NC42NjU4IDY1LjgzMzcgNzQuNjY1OEg3My44NzY3Qzc0LjMwNDIgNzQuNjY1OCA3NC42NTE5IDc0LjMxNzYgNzQuNjUxOSA3My44OTA2TDc0LjY1NDIgNzMuODg4M1oiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGlkPSJWZWN0b3JfMiIgZD0iTTU1LjM1OCAzOC41NjcySDYyLjYwMzFDNjMuMDMyOCAzOC41NjcyIDYzLjM4MjkgMzguOTE3MyA2My4zODI5IDM5LjM0NjlWNDYuNTkyMUM2My4zODI5IDQ3LjI4NzcgNjQuMjI0IDQ3LjYzNTUgNjQuNzE1MSA0Ny4xNDIyTDc0LjY1NDEgMzcuMTg3M0M3NC43OTk0IDM3LjA0MTggNzQuODgxNiAzNi44NDQgNzQuODgxNiAzNi42MzcxVjI3LjkxODlDNzQuODgxNiAyNy40ODkyIDc0LjUzMzQgMjcuMTM5MSA3NC4xMDE3IDI3LjEzOTFMNjUuMjUzOCAyNy4xMjc3QzY1LjA0NyAyNy4xMjc3IDY0Ljg0OTIgMjcuMjA5NiA2NC43MDE0IDI3LjM1NTFMNTQuODA1NiAzNy4yMzVDNTQuMzE0NSAzNy43MjYgNTQuNjYyMyAzOC41NjcyIDU1LjM1NTcgMzguNTY3Mkg1NS4zNThaIiBmaWxsPSIjRUU3QTMwIi8+CjwvZz4KPC9nPgo8ZGVmcz4KPGNsaXBQYXRoIGlkPSJjbGlwMF8yMF8xMjIzIj4KPHJlY3Qgd2lkdGg9IjQ3LjgxMjUiIGhlaWdodD0iNDcuODEyNSIgZmlsbD0id2hpdGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI3LjA5MzggMjcuMDkzOCkiLz4KPC9jbGlwUGF0aD4KPC9kZWZzPgo8L3N2Zz4K",downloads:{android:"https://play.google.com/store/apps/details?id=com.secretkeylabs.xverse",ios:"https://apps.apple.com/us/app/xverse-bitcoin-web3-wallet/id1552272513",chrome:"https://chrome.google.com/webstore/detail/xverse-wallet/idnnbdplmphpflfnlkomgpfbpcgelopg"}}];var C,T,P,$,ee,k,W;class LocalStorageWrapper{constructor(e){L(this,$),L(this,k),L(this,C,!1),L(this,T,void 0),L(this,P,void 0),O(this,"value"),G(this,P,e),_(this,k,W).call(this)}set(e){return!(!v(this,C)&&!_(this,k,W).call(this)||(this.delete(),this.value=e,e&&(G(this,T,`${v(this,P)}-${generateUID()}`),localStorage.setItem(v(this,T),e)),0))}get(){return _(this,$,ee).call(this),this.value}delete(){return!(!v(this,C)&&!_(this,k,W).call(this)||(this.value=null,v(this,T)&&localStorage.removeItem(v(this,T)),0))}}C=new WeakMap,T=new WeakMap,P=new WeakMap,$=new WeakSet,ee=function(){this.value&&this.set(this.value)},k=new WeakSet,W=function(){try{!v(this,C)&&typeof window<"u"&&(G(this,T,Object.keys(localStorage).find(e=>e.startsWith(v(this,P)))),G(this,C,!0),v(this,T)&&this.set(localStorage.getItem(v(this,T))))}catch(e){console.warn(e)}return v(this,C)};const Permission={ACCOUNTS:"accounts"};function filterBy(e,t){var r,n;if(null!=(r=null==t?void 0:t.include)&&r.length){const r=new Set(t.include);return e.filter(e=>r.has(e.id))}if(null!=(n=null==t?void 0:t.exclude)&&n.length){const r=new Set(t.exclude);return e.filter(e=>!r.has(e.id))}return e}const filterByAuthorized=async e=>{const t=await Promise.all(e.map(async e=>{try{return(await e.request({type:"wallet_getPermissions"})).includes(Permission.ACCOUNTS)}catch{return!1}}));return e.filter((e,r)=>t[r])},virtualWalletKeys=ensureKeysArray({id:!0,name:!0,icon:!0,windowKey:!0,loadWallet:!0,hasSupport:!0}),fullWalletKeys=ensureKeysArray({id:!0,name:!0,version:!0,icon:!0,request:!0,on:!0,off:!0});function createWalletGuard(e){return function(t){return null!==t&&"object"==typeof t&&e.every(e=>e in t)}}const isFullWallet=createWalletGuard(fullWalletKeys),isVirtualWallet=createWalletGuard(virtualWalletKeys);function isWalletObject(e){try{return isFullWallet(e)||isVirtualWallet(e)}catch{}return!1}function scanObjectForWallets(e,t){return Object.values(Object.getOwnPropertyNames(e).reduce((r,n)=>{if(n.startsWith("starknet")){const o=e[n];t(o)&&!r[o.id]&&(r[o.id]=o)}return r},{}))}const sortBy=(e,t)=>{if(t&&Array.isArray(t)){e.sort((e,r)=>t.indexOf(e.id)-t.indexOf(r.id));const r=e.length-t.length;return[...e.slice(r),...shuffle(e.slice(0,r))]}return shuffle(e)},virtualWallets=[metaMaskVirtualWallet];function initiateVirtualWallets(e){virtualWallets.forEach(async t=>{t.windowKey in e||await t.hasSupport(e)&&(e[t.windowKey]=t)})}const virtualWalletsMap={};async function resolveVirtualWallet(e,t){let r=virtualWalletsMap[t.id];return r||(r=await t.loadWallet(e),virtualWalletsMap[t.id]=r),r}const defaultOptions={windowObject:null!=ssrSafeWindow$1?ssrSafeWindow$1:{},isWalletObject,storageFactoryImplementation:e=>new LocalStorageWrapper(e)};function getStarknet(e={}){const{storageFactoryImplementation:t,windowObject:r,isWalletObject:n}={...defaultOptions,...e},o=t("gsw-last");return initiateVirtualWallets(r),{getAvailableWallets:async(e={})=>{const t=scanObjectForWallets(r,n);return pipe$1(t=>filterBy(t,e),t=>sortBy(t,e.sort))(t)},getAuthorizedWallets:async(e={})=>{const t=scanObjectForWallets(r,n);return pipe$1(e=>filterByAuthorized(e),t=>filterBy(t,e),t=>sortBy(t,e.sort))(t)},getDiscoveryWallets:async(e={})=>pipe$1(t=>filterBy(t,e),t=>sortBy(t,e.sort))(wallets),getLastConnectedWallet:async()=>{const e=o.get(),t=scanObjectForWallets(r,n).find(t=>t.id===e),[i]=await filterByAuthorized(t?[t]:[]);return i||(o.delete(),null)},discoverVirtualWallets:async(e=[])=>{const t=new Set(e),n=t.size>0?virtualWallets.filter(e=>t.has(e.name)||t.has(e.id)):virtualWallets;await Promise.all(n.map(async e=>{await e.hasSupport(r)&&(r[e.windowKey]=e)}))},enable:async(e,t)=>{let n;if(isVirtualWallet(e))n=await resolveVirtualWallet(r,e);else{if(!isFullWallet(e))throw new Error("Invalid wallet object");n=e}await n.request({type:"wallet_requestAccounts",params:{silent_mode:null==t?void 0:t.silent_mode}});const i=await n.request({type:"wallet_getPermissions"});if(null==i||!i.includes(Permission.ACCOUNTS))throw new Error("Failed to connect to wallet");return o.set(n.id),n},disconnect:async({clearLastWallet:e}={})=>{e&&o.delete()}}}const main=getStarknet(),BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class Utils{static getFirstMatch(e,t){const r=t.match(e);return r&&r.length>0&&r[1]||""}static getSecondMatch(e,t){const r=t.match(e);return r&&r.length>1&&r[2]||""}static matchAndReturnConst(e,t,r){if(e.test(t))return r}static getWindowsVersionName(e){switch(e){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(e){const t=e.split(".").splice(0,2).map(e=>parseInt(e,10)||0);if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(e){const t=e.split(".").splice(0,2).map(e=>parseInt(e,10)||0);if(t.push(0),!(1===t[0]&&t[1]<5)){if(1===t[0]&&t[1]<6)return"Cupcake";if(1===t[0]&&t[1]>=6)return"Donut";if(2===t[0]&&t[1]<2)return"Eclair";if(2===t[0]&&2===t[1])return"Froyo";if(2===t[0]&&t[1]>2)return"Gingerbread";if(3===t[0])return"Honeycomb";if(4===t[0]&&t[1]<1)return"Ice Cream Sandwich";if(4===t[0]&&t[1]<4)return"Jelly Bean";if(4===t[0]&&t[1]>=4)return"KitKat";if(5===t[0])return"Lollipop";if(6===t[0])return"Marshmallow";if(7===t[0])return"Nougat";if(8===t[0])return"Oreo";if(9===t[0])return"Pie"}}static getVersionPrecision(e){return e.split(".").length}static compareVersions(e,t,r=!1){const n=Utils.getVersionPrecision(e),o=Utils.getVersionPrecision(t);let i=Math.max(n,o),s=0;const a=Utils.map([e,t],e=>{const t=i-Utils.getVersionPrecision(e),r=e+new Array(t+1).join(".0");return Utils.map(r.split("."),e=>new Array(20-e.length).join("0")+e).reverse()});for(r&&(s=i-Math.min(n,o)),i-=1;i>=s;){if(a[0][i]>a[1][i])return 1;if(a[0][i]===a[1][i]){if(i===s)return 0;i-=1}else if(a[0][i]<a[1][i])return-1}}static map(e,t){const r=[];let n;if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n+=1)r.push(t(e[n]));return r}static find(e,t){let r,n;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(r=0,n=e.length;r<n;r+=1){const n=e[r];if(t(n,r))return n}}static assign(e,...t){const r=e;let n,o;if(Object.assign)return Object.assign(e,...t);for(n=0,o=t.length;n<o;n+=1){const e=t[n];"object"==typeof e&&null!==e&&Object.keys(e).forEach(t=>{r[t]=e[t]})}return e}static getBrowserAlias(e){return BROWSER_ALIASES_MAP[e]}static getBrowserTypeByAlias(e){return BROWSER_MAP[e]||""}}const commonVersionIdentifier=/version\/(\d+(\.?_?\d+)+)/i,browsersList=[{test:[/googlebot/i],describe(e){const t={name:"Googlebot"},r=Utils.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||Utils.getFirstMatch(commonVersionIdentifier,e);return r&&(t.version=r),t}},{test:[/opera/i],describe(e){const t={name:"Opera"},r=Utils.getFirstMatch(commonVersionIdentifier,e)||Utils.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opr\/|opios/i],describe(e){const t={name:"Opera"},r=Utils.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||Utils.getFirstMatch(commonVersionIdentifier,e);return r&&(t.version=r),t}},{test:[/SamsungBrowser/i],describe(e){const t={name:"Samsung Internet for Android"},r=Utils.getFirstMatch(commonVersionIdentifier,e)||Utils.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Whale/i],describe(e){const t={name:"NAVER Whale Browser"},r=Utils.getFirstMatch(commonVersionIdentifier,e)||Utils.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MZBrowser/i],describe(e){const t={name:"MZ Browser"},r=Utils.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||Utils.getFirstMatch(commonVersionIdentifier,e);return r&&(t.version=r),t}},{test:[/focus/i],describe(e){const t={name:"Focus"},r=Utils.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||Utils.getFirstMatch(commonVersionIdentifier,e);return r&&(t.version=r),t}},{test:[/swing/i],describe(e){const t={name:"Swing"},r=Utils.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||Utils.getFirstMatch(commonVersionIdentifier,e);return r&&(t.version=r),t}},{test:[/coast/i],describe(e){const t={name:"Opera Coast"},r=Utils.getFirstMatch(commonVersionIdentifier,e)||Utils.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(e){const t={name:"Opera Touch"},r=Utils.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||Utils.getFirstMatch(commonVersionIdentifier,e);return r&&(t.version=r),t}},{test:[/yabrowser/i],describe(e){const t={name:"Yandex Browser"},r=Utils.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||Utils.getFirstMatch(commonVersionIdentifier,e);return r&&(t.version=r),t}},{test:[/ucbrowser/i],describe(e){const t={name:"UC Browser"},r=Utils.getFirstMatch(commonVersionIdentifier,e)||Utils.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Maxthon|mxios/i],describe(e){const t={name:"Maxthon"},r=Utils.getFirstMatch(commonVersionIdentifier,e)||Utils.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/epiphany/i],describe(e){const t={name:"Epiphany"},r=Utils.getFirstMatch(commonVersionIdentifier,e)||Utils.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/puffin/i],describe(e){const t={name:"Puffin"},r=Utils.getFirstMatch(commonVersionIdentifier,e)||Utils.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sleipnir/i],describe(e){const t={name:"Sleipnir"},r=Utils.getFirstMatch(commonVersionIdentifier,e)||Utils.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/k-meleon/i],describe(e){const t={name:"K-Meleon"},r=Utils.getFirstMatch(commonVersionIdentifier,e)||Utils.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/micromessenger/i],describe(e){const t={name:"WeChat"},r=Utils.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||Utils.getFirstMatch(commonVersionIdentifier,e);return r&&(t.version=r),t}},{test:[/qqbrowser/i],describe(e){const t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},r=Utils.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||Utils.getFirstMatch(commonVersionIdentifier,e);return r&&(t.version=r),t}},{test:[/msie|trident/i],describe(e){const t={name:"Internet Explorer"},r=Utils.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/\sedg\//i],describe(e){const t={name:"Microsoft Edge"},r=Utils.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/edg([ea]|ios)/i],describe(e){const t={name:"Microsoft Edge"},r=Utils.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/vivaldi/i],describe(e){const t={name:"Vivaldi"},r=Utils.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/seamonkey/i],describe(e){const t={name:"SeaMonkey"},r=Utils.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sailfish/i],describe(e){const t={name:"Sailfish"},r=Utils.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return r&&(t.version=r),t}},{test:[/silk/i],describe(e){const t={name:"Amazon Silk"},r=Utils.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/phantom/i],describe(e){const t={name:"PhantomJS"},r=Utils.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/slimerjs/i],describe(e){const t={name:"SlimerJS"},r=Utils.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){const t={name:"BlackBerry"},r=Utils.getFirstMatch(commonVersionIdentifier,e)||Utils.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(web|hpw)[o0]s/i],describe(e){const t={name:"WebOS Browser"},r=Utils.getFirstMatch(commonVersionIdentifier,e)||Utils.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/bada/i],describe(e){const t={name:"Bada"},r=Utils.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/tizen/i],describe(e){const t={name:"Tizen"},r=Utils.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||Utils.getFirstMatch(commonVersionIdentifier,e);return r&&(t.version=r),t}},{test:[/qupzilla/i],describe(e){const t={name:"QupZilla"},r=Utils.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||Utils.getFirstMatch(commonVersionIdentifier,e);return r&&(t.version=r),t}},{test:[/firefox|iceweasel|fxios/i],describe(e){const t={name:"Firefox"},r=Utils.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/electron/i],describe(e){const t={name:"Electron"},r=Utils.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MiuiBrowser/i],describe(e){const t={name:"Miui"},r=Utils.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/chromium/i],describe(e){const t={name:"Chromium"},r=Utils.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||Utils.getFirstMatch(commonVersionIdentifier,e);return r&&(t.version=r),t}},{test:[/chrome|crios|crmo/i],describe(e){const t={name:"Chrome"},r=Utils.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/GSA/i],describe(e){const t={name:"Google Search"},r=Utils.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test(e){const t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe(e){const t={name:"Android Browser"},r=Utils.getFirstMatch(commonVersionIdentifier,e);return r&&(t.version=r),t}},{test:[/playstation 4/i],describe(e){const t={name:"PlayStation 4"},r=Utils.getFirstMatch(commonVersionIdentifier,e);return r&&(t.version=r),t}},{test:[/safari|applewebkit/i],describe(e){const t={name:"Safari"},r=Utils.getFirstMatch(commonVersionIdentifier,e);return r&&(t.version=r),t}},{test:[/.*/i],describe(e){const t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:Utils.getFirstMatch(t,e),version:Utils.getSecondMatch(t,e)}}}],osParsersList=[{test:[/Roku\/DVP/],describe(e){const t=Utils.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe(e){const t=Utils.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:OS_MAP.WindowsPhone,version:t}}},{test:[/windows /i],describe(e){const t=Utils.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),r=Utils.getWindowsVersionName(t);return{name:OS_MAP.Windows,version:t,versionName:r}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(e){const t={name:OS_MAP.iOS},r=Utils.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return r&&(t.version=r),t}},{test:[/macintosh/i],describe(e){const t=Utils.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),r=Utils.getMacOSVersionName(t),n={name:OS_MAP.MacOS,version:t};return r&&(n.versionName=r),n}},{test:[/(ipod|iphone|ipad)/i],describe(e){const t=Utils.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:OS_MAP.iOS,version:t}}},{test(e){const t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe(e){const t=Utils.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),r=Utils.getAndroidVersionName(t),n={name:OS_MAP.Android,version:t};return r&&(n.versionName=r),n}},{test:[/(web|hpw)[o0]s/i],describe(e){const t=Utils.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),r={name:OS_MAP.WebOS};return t&&t.length&&(r.version=t),r}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){const t=Utils.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||Utils.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||Utils.getFirstMatch(/\bbb(\d+)/i,e);return{name:OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe(e){const t=Utils.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe(e){const t=Utils.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:()=>({name:OS_MAP.Linux})},{test:[/CrOS/],describe:()=>({name:OS_MAP.ChromeOS})},{test:[/PlayStation 4/],describe(e){const t=Utils.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:OS_MAP.PlayStation4,version:t}}}],platformParsersList=[{test:[/googlebot/i],describe:()=>({type:"bot",vendor:"Google"})},{test:[/huawei/i],describe(e){const t=Utils.getFirstMatch(/(can-l01)/i,e)&&"Nova",r={type:PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(r.model=t),r}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:()=>({type:PLATFORMS_MAP.tablet,vendor:"Nexus"})},{test:[/ipad/i],describe:()=>({type:PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"})},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:()=>({type:PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"})},{test:[/kftt build/i],describe:()=>({type:PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"})},{test:[/silk/i],describe:()=>({type:PLATFORMS_MAP.tablet,vendor:"Amazon"})},{test:[/tablet(?! pc)/i],describe:()=>({type:PLATFORMS_MAP.tablet})},{test(e){const t=e.test(/ipod|iphone/i),r=e.test(/like (ipod|iphone)/i);return t&&!r},describe(e){const t=Utils.getFirstMatch(/(ipod|iphone)/i,e);return{type:PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:()=>({type:PLATFORMS_MAP.mobile,vendor:"Nexus"})},{test:[/[^-]mobi/i],describe:()=>({type:PLATFORMS_MAP.mobile})},{test:e=>"blackberry"===e.getBrowserName(!0),describe:()=>({type:PLATFORMS_MAP.mobile,vendor:"BlackBerry"})},{test:e=>"bada"===e.getBrowserName(!0),describe:()=>({type:PLATFORMS_MAP.mobile})},{test:e=>"windows phone"===e.getBrowserName(),describe:()=>({type:PLATFORMS_MAP.mobile,vendor:"Microsoft"})},{test(e){const t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:()=>({type:PLATFORMS_MAP.tablet})},{test:e=>"android"===e.getOSName(!0),describe:()=>({type:PLATFORMS_MAP.mobile})},{test:e=>"macos"===e.getOSName(!0),describe:()=>({type:PLATFORMS_MAP.desktop,vendor:"Apple"})},{test:e=>"windows"===e.getOSName(!0),describe:()=>({type:PLATFORMS_MAP.desktop})},{test:e=>"linux"===e.getOSName(!0),describe:()=>({type:PLATFORMS_MAP.desktop})},{test:e=>"playstation 4"===e.getOSName(!0),describe:()=>({type:PLATFORMS_MAP.tv})},{test:e=>"roku"===e.getOSName(!0),describe:()=>({type:PLATFORMS_MAP.tv})}],enginesParsersList=[{test:e=>"microsoft edge"===e.getBrowserName(!0),describe(e){if(/\sedg\//i.test(e))return{name:ENGINE_MAP.Blink};const t=Utils.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe(e){const t={name:ENGINE_MAP.Trident},r=Utils.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:e=>e.test(/presto/i),describe(e){const t={name:ENGINE_MAP.Presto},r=Utils.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test(e){const t=e.test(/gecko/i),r=e.test(/like gecko/i);return t&&!r},describe(e){const t={name:ENGINE_MAP.Gecko},r=Utils.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(apple)?webkit\/537\.36/i],describe:()=>({name:ENGINE_MAP.Blink})},{test:[/(apple)?webkit/i],describe(e){const t={name:ENGINE_MAP.WebKit},r=Utils.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}}];class Parser{constructor(e,t=!1){if(null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}getUA(){return this._ua}test(e){return e.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const e=Utils.find(browsersList,e=>{if("function"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some(e=>this.test(e));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const e=Utils.find(osParsersList,e=>{if("function"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some(e=>this.test(e));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os}getOSName(e){const{name:t}=this.getOS();return e?String(t).toLowerCase()||"":t||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(e=!1){const{type:t}=this.getPlatform();return e?String(t).toLowerCase()||"":t||""}parsePlatform(){this.parsedResult.platform={};const e=Utils.find(platformParsersList,e=>{if("function"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some(e=>this.test(e));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const e=Utils.find(enginesParsersList,e=>{if("function"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some(e=>this.test(e));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return Utils.assign({},this.parsedResult)}satisfies(e){const t={};let r=0;const n={};let o=0;if(Object.keys(e).forEach(i=>{const s=e[i];"string"==typeof s?(n[i]=s,o+=1):"object"==typeof s&&(t[i]=s,r+=1)}),r>0){const e=Object.keys(t),r=Utils.find(e,e=>this.isOS(e));if(r){const e=this.satisfies(t[r]);if(void 0!==e)return e}const n=Utils.find(e,e=>this.isPlatform(e));if(n){const e=this.satisfies(t[n]);if(void 0!==e)return e}}if(o>0){const e=Object.keys(n),t=Utils.find(e,e=>this.isBrowser(e,!0));if(void 0!==t)return this.compareVersion(n[t])}}isBrowser(e,t=!1){const r=this.getBrowserName().toLowerCase();let n=e.toLowerCase();const o=Utils.getBrowserTypeByAlias(n);return t&&o&&(n=o.toLowerCase()),n===r}compareVersion(e){let t=[0],r=e,n=!1;const o=this.getBrowserVersion();if("string"==typeof o)return">"===e[0]||"<"===e[0]?(r=e.substr(1),"="===e[1]?(n=!0,r=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?r=e.substr(1):"~"===e[0]&&(n=!0,r=e.substr(1)),t.indexOf(Utils.compareVersions(o,r,n))>-1}isOS(e){return this.getOSName(!0)===String(e).toLowerCase()}isPlatform(e){return this.getPlatformType(!0)===String(e).toLowerCase()}isEngine(e){return this.getEngineName(!0)===String(e).toLowerCase()}is(e,t=!1){return this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)}some(e=[]){return e.some(e=>this.is(e))}}class Bowser{static getParser(e,t=!1){if("string"!=typeof e)throw new Error("UserAgent should be a string");return new Parser(e,t)}static parse(e){return new Parser(e).getResult()}static get BROWSER_MAP(){return BROWSER_MAP}static get ENGINE_MAP(){return ENGINE_MAP}static get OS_MAP(){return OS_MAP}static get PLATFORMS_MAP(){return PLATFORMS_MAP}}const ssrSafeWindow=typeof window<"u"?window:null;function getBrowserStoreVersionFromBrowser(){var e;switch(null==(e=Bowser.getParser(null==ssrSafeWindow?void 0:ssrSafeWindow.navigator.userAgent).getBrowserName())?void 0:e.toLowerCase()){case"firefox":return"firefox";case"microsoft edge":return"edge";case"android browser":case"chrome":case"chromium":case"electron":case"opera":case"vivaldi":return"chrome";case"safari":return"safari";default:return null}}function getOperatingSystemStoreVersionFromBrowser(){var e,t,r;const n=null!=(r=null==(t=null==(e=Bowser.getParser(null==ssrSafeWindow?void 0:ssrSafeWindow.navigator.userAgent).getOS())?void 0:e.name)?void 0:t.toLowerCase())?r:null;switch(n){case"ios":case"android":return n;default:return null}}const enableWithVersion=async(e,t)=>e?main.enable(e,t).catch(()=>null):null,connect=async({modalMode:e="canAsk",storeVersion:t=getBrowserStoreVersionFromBrowser(),osVersion:r=getOperatingSystemStoreVersionFromBrowser(),modalTheme:n,...o}={})=>{var i,s;const a=await main.getAuthorizedWallets({...o}),c=await main.getLastConnectedWallet();if("neverAsk"===e){const e=null!=(i=a.find(e=>e.id===(null==c?void 0:c.id)))?i:a[0];return enableWithVersion(e,{silent_mode:!0})}const l=await main.getAvailableWallets(o);if("canAsk"===e&&c){const e=null!=(s=a.find(e=>e.id===(null==c?void 0:c.id)))?s:1===l.length?l[0]:void 0;if(e)return enableWithVersion(e)}const u=(await main.getDiscoveryWallets(o)).reduce((e,n)=>{const o=n.downloads[r]||n.downloads[t];if(o){const t=Object.keys(n.downloads).find(e=>n.downloads[e]===o),r="android"===t||"ios"===t?`${n.name} Mobile`:`Install ${n.name}`;e.push({...n,name:r,download:o})}return e},[]);return show({lastWallet:c,authorizedWallets:a,installedWallets:l,discoveryWallets:u,enable:enableWithVersion,modalOptions:{theme:n}})};function disconnect(e={}){return main.disconnect(e)}exports.connect=connect,exports.disconnect=disconnect,Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})},e(exports)},4515:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5269:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},8188:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2835:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.SPEC=t.Errors=void 0,o(r(5269),t),t.Errors=r(8188),t.SPEC=r(4515),o(r(5971),t)},5971:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ETransactionVersion3=t.ETransactionVersion2=t.ETransactionVersion=t.EDAMode=t.EDataAvailabilityMode=t.EBlockTag=t.ETransactionExecutionStatus=t.ETransactionFinalityStatus=t.ETransactionStatus=t.ESimulationFlag=t.ETransactionType=void 0,t.ETransactionType={DECLARE:"DECLARE",DEPLOY:"DEPLOY",DEPLOY_ACCOUNT:"DEPLOY_ACCOUNT",INVOKE:"INVOKE",L1_HANDLER:"L1_HANDLER"},t.ESimulationFlag={SKIP_VALIDATE:"SKIP_VALIDATE",SKIP_FEE_CHARGE:"SKIP_FEE_CHARGE"},t.ETransactionStatus={RECEIVED:"RECEIVED",REJECTED:"REJECTED",ACCEPTED_ON_L2:"ACCEPTED_ON_L2",ACCEPTED_ON_L1:"ACCEPTED_ON_L1"},t.ETransactionFinalityStatus={ACCEPTED_ON_L2:"ACCEPTED_ON_L2",ACCEPTED_ON_L1:"ACCEPTED_ON_L1"},t.ETransactionExecutionStatus={SUCCEEDED:"SUCCEEDED",REVERTED:"REVERTED"},t.EBlockTag={LATEST:"latest",PENDING:"pending"},t.EDataAvailabilityMode={L1:"L1",L2:"L2"},t.EDAMode={L1:0,L2:1},t.ETransactionVersion={V0:"0x0",V1:"0x1",V2:"0x2",V3:"0x3",F0:"0x100000000000000000000000000000000",F1:"0x100000000000000000000000000000001",F2:"0x100000000000000000000000000000002",F3:"0x100000000000000000000000000000003"},t.ETransactionVersion2={V0:"0x0",V1:"0x1",V2:"0x2",F0:"0x100000000000000000000000000000000",F1:"0x100000000000000000000000000000001",F2:"0x100000000000000000000000000000002"},t.ETransactionVersion3={V3:"0x3",F3:"0x100000000000000000000000000000003"}},4768:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.WALLET_API=t.API=void 0,o(r(2835),t),t.API=r(2835),o(r(7417),t),t.WALLET_API=r(7417)},2130:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},417:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3888:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Permission=void 0,t.Permission={ACCOUNTS:"accounts"}},2622:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},7604:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},7417:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(3888),t),o(r(3581),t),o(r(2130),t),o(r(417),t),o(r(7747),t),o(r(7604),t),o(r(2622),t)},7747:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3581:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypedDataRevision=void 0,t.TypedDataRevision={ACTIVE:"1",LEGACY:"0"}},7374:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4401:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ETransactionVersion3=t.ETransactionVersion2=t.ETransactionVersion=t.EDAMode=t.EDataAvailabilityMode=t.EBlockTag=t.ETransactionExecutionStatus=t.ETransactionFinalityStatus=t.ETransactionStatus=t.ESimulationFlag=t.ETransactionType=t.CALL_TYPE=t.L1_DA_MODE=t.PRICE_UNIT_FRI=t.PRICE_UNIT_WEI=t.STATE_MUTABILITY_EXTERNAL=t.STATE_MUTABILITY_VIEW=t.ABI_TYPE_ENUM=t.ABI_TYPE_L1_HANDLER=t.ABI_TYPE_CONSTRUCTOR=t.ABI_TYPE_FUNCTION=t.EVENT_ABI_TYPE=t.STRUCT_ABI_TYPE=t.TXN_TYPE_L1_HANDLER=t.TXN_TYPE_INVOKE=t.TXN_TYPE_DEPLOY_ACCOUNT=t.TXN_TYPE_DEPLOY=t.TXN_TYPE_DECLARE=t.STATUS_RECEIVED=t.STATUS_REJECTED=t.STATUS_PENDING=t.STATUS_REVERTED=t.STATUS_SUCCEEDED=t.STATUS_ACCEPTED_ON_L1=t.STATUS_ACCEPTED_ON_L2=void 0,t.STATUS_ACCEPTED_ON_L2="ACCEPTED_ON_L2",t.STATUS_ACCEPTED_ON_L1="ACCEPTED_ON_L1",t.STATUS_SUCCEEDED="SUCCEEDED",t.STATUS_REVERTED="REVERTED",t.STATUS_PENDING="PENDING",t.STATUS_REJECTED="REJECTED",t.STATUS_RECEIVED="RECEIVED",t.TXN_TYPE_DECLARE="DECLARE",t.TXN_TYPE_DEPLOY="DEPLOY",t.TXN_TYPE_DEPLOY_ACCOUNT="DEPLOY_ACCOUNT",t.TXN_TYPE_INVOKE="INVOKE",t.TXN_TYPE_L1_HANDLER="L1_HANDLER",t.STRUCT_ABI_TYPE="struct",t.EVENT_ABI_TYPE="event",t.ABI_TYPE_FUNCTION="function",t.ABI_TYPE_CONSTRUCTOR="constructor",t.ABI_TYPE_L1_HANDLER="l1_handler",t.ABI_TYPE_ENUM="enum",t.STATE_MUTABILITY_VIEW="view",t.STATE_MUTABILITY_EXTERNAL="external",t.PRICE_UNIT_WEI="WEI",t.PRICE_UNIT_FRI="FRI",t.L1_DA_MODE={BLOB:"BLOB",CALLDATA:"CALLDATA"},t.CALL_TYPE={DELEGATE:"DELEGATE",LIBRARY_CALL:"LIBRARY_CALL",CALL:"CALL"},t.ETransactionType={DECLARE:t.TXN_TYPE_DECLARE,DEPLOY:t.TXN_TYPE_DEPLOY,DEPLOY_ACCOUNT:t.TXN_TYPE_DEPLOY_ACCOUNT,INVOKE:t.TXN_TYPE_INVOKE,L1_HANDLER:t.TXN_TYPE_L1_HANDLER},t.ESimulationFlag={SKIP_VALIDATE:"SKIP_VALIDATE",SKIP_FEE_CHARGE:"SKIP_FEE_CHARGE"},t.ETransactionStatus={RECEIVED:t.STATUS_RECEIVED,REJECTED:t.STATUS_REJECTED,ACCEPTED_ON_L2:t.STATUS_ACCEPTED_ON_L2,ACCEPTED_ON_L1:t.STATUS_ACCEPTED_ON_L1},t.ETransactionFinalityStatus={ACCEPTED_ON_L2:t.STATUS_ACCEPTED_ON_L2,ACCEPTED_ON_L1:t.STATUS_ACCEPTED_ON_L1},t.ETransactionExecutionStatus={SUCCEEDED:t.STATUS_SUCCEEDED,REVERTED:t.STATUS_REVERTED},t.EBlockTag={LATEST:"latest",PENDING:"pending"},t.EDataAvailabilityMode={L1:"L1",L2:"L2"},t.EDAMode={L1:0,L2:1},t.ETransactionVersion={V0:"0x0",V1:"0x1",V2:"0x2",V3:"0x3",F0:"0x100000000000000000000000000000000",F1:"0x100000000000000000000000000000001",F2:"0x100000000000000000000000000000002",F3:"0x100000000000000000000000000000003"},t.ETransactionVersion2={V0:t.ETransactionVersion.V0,V1:t.ETransactionVersion.V1,V2:t.ETransactionVersion.V2,F0:t.ETransactionVersion.F0,F1:t.ETransactionVersion.F1,F2:t.ETransactionVersion.F2},t.ETransactionVersion3={V3:t.ETransactionVersion.V3,F3:t.ETransactionVersion.F3}},2484:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4637:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},7066:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},571:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9884:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.CONTRACT=void 0,o(r(798),t),t.CONTRACT=r(2484),o(r(4637),t),o(r(7374),t),o(r(6552),t),o(r(4401),t),o(r(7066),t),o(r(571),t)},798:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6552:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5319:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.PAYMASTER_API=t.WALLET_API=t.API=void 0,o(r(9884),t),t.API=r(9884),o(r(6868),t),t.WALLET_API=r(6868),t.PAYMASTER_API=r(5206)},9528:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1067:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5206:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(8812),t),o(r(1067),t),o(r(9528),t),o(r(3674),t)},8812:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3674:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},8861:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5670:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4329:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Permission=void 0,t.Permission={ACCOUNTS:"accounts"}},53:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},8655:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6868:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(4329),t),o(r(2780),t),o(r(8861),t),o(r(5670),t),o(r(9606),t),o(r(8655),t),o(r(53),t)},9606:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2780:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypedDataRevision=void 0,t.TypedDataRevision={ACTIVE:"1",LEGACY:"0"}},9306:(e,t,r)=>{"use strict";var n=r(4901),o=r(6823),i=TypeError;e.exports=function(e){if(n(e))return e;throw new i(o(e)+" is not a function")}},3506:(e,t,r)=>{"use strict";var n=r(3925),o=String,i=TypeError;e.exports=function(e){if(n(e))return e;throw new i("Can't set "+o(e)+" as a prototype")}},3463:e=>{"use strict";var t=TypeError;e.exports=function(e){if("string"==typeof e)return e;throw new t("Argument is not a string")}},679:(e,t,r)=>{"use strict";var n=r(1625),o=TypeError;e.exports=function(e,t){if(n(t,e))return e;throw new o("Incorrect invocation")}},3972:(e,t,r)=>{"use strict";var n=r(34),o=String,i=TypeError;e.exports=function(e){if(void 0===e||n(e))return e;throw new i(o(e)+" is not an object or undefined")}},8551:(e,t,r)=>{"use strict";var n=r(34),o=String,i=TypeError;e.exports=function(e){if(n(e))return e;throw new i(o(e)+" is not an object")}},4154:(e,t,r)=>{"use strict";var n=r(6955),o=TypeError;e.exports=function(e){if("Uint8Array"===n(e))return e;throw new o("Argument is not an Uint8Array")}},7811:e=>{"use strict";e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},7394:(e,t,r)=>{"use strict";var n=r(4576),o=r(6706),i=r(2195),s=n.ArrayBuffer,a=n.TypeError;e.exports=s&&o(s.prototype,"byteLength","get")||function(e){if("ArrayBuffer"!==i(e))throw new a("ArrayBuffer expected");return e.byteLength}},3238:(e,t,r)=>{"use strict";var n=r(4576),o=r(7476),i=r(7394),s=n.ArrayBuffer,a=s&&s.prototype,c=a&&o(a.slice);e.exports=function(e){if(0!==i(e))return!1;if(!c)return!1;try{return c(e,0,0),!1}catch(e){return!0}}},5169:(e,t,r)=>{"use strict";var n=r(3238),o=TypeError;e.exports=function(e){if(n(e))throw new o("ArrayBuffer is detached");return e}},5636:(e,t,r)=>{"use strict";var n=r(4576),o=r(9504),i=r(6706),s=r(7696),a=r(5169),c=r(7394),l=r(4483),u=r(1548),d=n.structuredClone,h=n.ArrayBuffer,f=n.DataView,p=Math.min,g=h.prototype,y=f.prototype,m=o(g.slice),b=i(g,"resizable","get"),w=i(g,"maxByteLength","get"),v=o(y.getInt8),_=o(y.setInt8);e.exports=(u||l)&&function(e,t,r){var n,o=c(e),i=void 0===t?o:s(t),g=!b||!b(e);if(a(e),u&&(e=d(e,{transfer:[e]}),o===i&&(r||g)))return e;if(o>=i&&(!r||g))n=m(e,0,i);else{var y=r&&!g&&w?{maxByteLength:w(e)}:void 0;n=new h(i,y);for(var E=new f(e),A=new f(n),S=p(i,o),x=0;x<S;x++)_(A,x,v(E,x))}return u||l(e),n}},4644:(e,t,r)=>{"use strict";var n,o,i,s=r(7811),a=r(3724),c=r(4576),l=r(4901),u=r(34),d=r(9297),h=r(6955),f=r(6823),p=r(6699),g=r(6840),y=r(2106),m=r(1625),b=r(2787),w=r(2967),v=r(8227),_=r(3392),E=r(1181),A=E.enforce,S=E.get,x=c.Int8Array,I=x&&x.prototype,T=c.Uint8ClampedArray,k=T&&T.prototype,M=x&&b(x),O=I&&b(I),N=Object.prototype,D=c.TypeError,C=v("toStringTag"),B=_("TYPED_ARRAY_TAG"),L="TypedArrayConstructor",P=s&&!!w&&"Opera"!==h(c.opera),j=!1,R={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},U={BigInt64Array:8,BigUint64Array:8},F=function(e){var t=b(e);if(u(t)){var r=S(t);return r&&d(r,L)?r[L]:F(t)}},z=function(e){if(!u(e))return!1;var t=h(e);return d(R,t)||d(U,t)};for(n in R)(i=(o=c[n])&&o.prototype)?A(i)[L]=o:P=!1;for(n in U)(i=(o=c[n])&&o.prototype)&&(A(i)[L]=o);if((!P||!l(M)||M===Function.prototype)&&(M=function(){throw new D("Incorrect invocation")},P))for(n in R)c[n]&&w(c[n],M);if((!P||!O||O===N)&&(O=M.prototype,P))for(n in R)c[n]&&w(c[n].prototype,O);if(P&&b(k)!==O&&w(k,O),a&&!d(O,C))for(n in j=!0,y(O,C,{configurable:!0,get:function(){return u(this)?this[B]:void 0}}),R)c[n]&&p(c[n],B,n);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:P,TYPED_ARRAY_TAG:j&&B,aTypedArray:function(e){if(z(e))return e;throw new D("Target is not a typed array")},aTypedArrayConstructor:function(e){if(l(e)&&(!w||m(M,e)))return e;throw new D(f(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,r,n){if(a){if(r)for(var o in R){var i=c[o];if(i&&d(i.prototype,e))try{delete i.prototype[e]}catch(r){try{i.prototype[e]=t}catch(e){}}}O[e]&&!r||g(O,e,r?t:P&&I[e]||t,n)}},exportTypedArrayStaticMethod:function(e,t,r){var n,o;if(a){if(w){if(r)for(n in R)if((o=c[n])&&d(o,e))try{delete o[e]}catch(e){}if(M[e]&&!r)return;try{return g(M,e,r?t:P&&M[e]||t)}catch(e){}}for(n in R)!(o=c[n])||o[e]&&!r||g(o,e,t)}},getTypedArrayConstructor:F,isView:function(e){if(!u(e))return!1;var t=h(e);return"DataView"===t||d(R,t)||d(U,t)},isTypedArray:z,TypedArray:M,TypedArrayPrototype:O}},5370:(e,t,r)=>{"use strict";var n=r(6198);e.exports=function(e,t,r){for(var o=0,i=arguments.length>2?r:n(t),s=new e(i);i>o;)s[o]=t[o++];return s}},9617:(e,t,r)=>{"use strict";var n=r(5397),o=r(5610),i=r(6198),s=function(e){return function(t,r,s){var a=n(t),c=i(a);if(0===c)return!e&&-1;var l,u=o(s,c);if(e&&r!=r){for(;c>u;)if((l=a[u++])!=l)return!0}else for(;c>u;u++)if((e||u in a)&&a[u]===r)return e||u||0;return!e&&-1}};e.exports={includes:s(!0),indexOf:s(!1)}},3839:(e,t,r)=>{"use strict";var n=r(6080),o=r(7055),i=r(8981),s=r(6198),a=function(e){var t=1===e;return function(r,a,c){for(var l,u=i(r),d=o(u),h=s(d),f=n(a,c);h-- >0;)if(f(l=d[h],h,u))switch(e){case 0:return l;case 1:return h}return t?-1:void 0}};e.exports={findLast:a(0),findLastIndex:a(1)}},4527:(e,t,r)=>{"use strict";var n=r(3724),o=r(4376),i=TypeError,s=Object.getOwnPropertyDescriptor,a=n&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();e.exports=a?function(e,t){if(o(e)&&!s(e,"length").writable)throw new i("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}},7628:(e,t,r)=>{"use strict";var n=r(6198);e.exports=function(e,t){for(var r=n(e),o=new t(r),i=0;i<r;i++)o[i]=e[r-i-1];return o}},9928:(e,t,r)=>{"use strict";var n=r(6198),o=r(1291),i=RangeError;e.exports=function(e,t,r,s){var a=n(e),c=o(r),l=c<0?a+c:c;if(l>=a||l<0)throw new i("Incorrect index");for(var u=new t(a),d=0;d<a;d++)u[d]=d===l?s:e[d];return u}},2804:e=>{"use strict";var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=t+"+/",n=t+"-_",o=function(e){for(var t={},r=0;r<64;r++)t[e.charAt(r)]=r;return t};e.exports={i2c:r,c2i:o(r),i2cUrl:n,c2iUrl:o(n)}},6319:(e,t,r)=>{"use strict";var n=r(8551),o=r(9539);e.exports=function(e,t,r,i){try{return i?t(n(r)[0],r[1]):t(r)}catch(t){o(e,"throw",t)}}},2195:(e,t,r)=>{"use strict";var n=r(9504),o=n({}.toString),i=n("".slice);e.exports=function(e){return i(o(e),8,-1)}},6955:(e,t,r)=>{"use strict";var n=r(2140),o=r(4901),i=r(2195),s=r(8227)("toStringTag"),a=Object,c="Arguments"===i(function(){return arguments}());e.exports=n?i:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=a(e),s))?r:c?i(t):"Object"===(n=i(t))&&o(t.callee)?"Arguments":n}},7740:(e,t,r)=>{"use strict";var n=r(9297),o=r(5031),i=r(7347),s=r(4913);e.exports=function(e,t,r){for(var a=o(t),c=s.f,l=i.f,u=0;u<a.length;u++){var d=a[u];n(e,d)||r&&n(r,d)||c(e,d,l(t,d))}}},2211:(e,t,r)=>{"use strict";var n=r(9039);e.exports=!n(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})},2529:e=>{"use strict";e.exports=function(e,t){return{value:e,done:t}}},6699:(e,t,r)=>{"use strict";var n=r(3724),o=r(4913),i=r(6980);e.exports=n?function(e,t,r){return o.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},6980:e=>{"use strict";e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},4659:(e,t,r)=>{"use strict";var n=r(3724),o=r(4913),i=r(6980);e.exports=function(e,t,r){n?o.f(e,t,i(0,r)):e[t]=r}},2106:(e,t,r)=>{"use strict";var n=r(283),o=r(4913);e.exports=function(e,t,r){return r.get&&n(r.get,t,{getter:!0}),r.set&&n(r.set,t,{setter:!0}),o.f(e,t,r)}},6840:(e,t,r)=>{"use strict";var n=r(4901),o=r(4913),i=r(283),s=r(9433);e.exports=function(e,t,r,a){a||(a={});var c=a.enumerable,l=void 0!==a.name?a.name:t;if(n(r)&&i(r,l,a),a.global)c?e[t]=r:s(t,r);else{try{a.unsafe?e[t]&&(c=!0):delete e[t]}catch(e){}c?e[t]=r:o.f(e,t,{value:r,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return e}},6279:(e,t,r)=>{"use strict";var n=r(6840);e.exports=function(e,t,r){for(var o in t)n(e,o,t[o],r);return e}},9433:(e,t,r)=>{"use strict";var n=r(4576),o=Object.defineProperty;e.exports=function(e,t){try{o(n,e,{value:t,configurable:!0,writable:!0})}catch(r){n[e]=t}return t}},3724:(e,t,r)=>{"use strict";var n=r(9039);e.exports=!n(function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})},4483:(e,t,r)=>{"use strict";var n,o,i,s,a=r(4576),c=r(9429),l=r(1548),u=a.structuredClone,d=a.ArrayBuffer,h=a.MessageChannel,f=!1;if(l)f=function(e){u(e,{transfer:[e]})};else if(d)try{h||(n=c("worker_threads"))&&(h=n.MessageChannel),h&&(o=new h,i=new d(2),s=function(e){o.port1.postMessage(null,[e])},2===i.byteLength&&(s(i),0===i.byteLength&&(f=s)))}catch(e){}e.exports=f},4055:(e,t,r)=>{"use strict";var n=r(4576),o=r(34),i=n.document,s=o(i)&&o(i.createElement);e.exports=function(e){return s?i.createElement(e):{}}},6837:e=>{"use strict";var t=TypeError;e.exports=function(e){if(e>9007199254740991)throw t("Maximum allowed index exceeded");return e}},8727:e=>{"use strict";e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},8574:(e,t,r)=>{"use strict";var n=r(4215);e.exports="NODE"===n},2839:(e,t,r)=>{"use strict";var n=r(4576).navigator,o=n&&n.userAgent;e.exports=o?String(o):""},9519:(e,t,r)=>{"use strict";var n,o,i=r(4576),s=r(2839),a=i.process,c=i.Deno,l=a&&a.versions||c&&c.version,u=l&&l.v8;u&&(o=(n=u.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!o&&s&&(!(n=s.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=s.match(/Chrome\/(\d+)/))&&(o=+n[1]),e.exports=o},4215:(e,t,r)=>{"use strict";var n=r(4576),o=r(2839),i=r(2195),s=function(e){return o.slice(0,e.length)===e};e.exports=s("Bun/")?"BUN":s("Cloudflare-Workers")?"CLOUDFLARE":s("Deno/")?"DENO":s("Node.js/")?"NODE":n.Bun&&"string"==typeof Bun.version?"BUN":n.Deno&&"object"==typeof Deno.version?"DENO":"process"===i(n.process)?"NODE":n.window&&n.document?"BROWSER":"REST"},6193:(e,t,r)=>{"use strict";var n=r(9504),o=Error,i=n("".replace),s=String(new o("zxcasd").stack),a=/\n\s*at [^:]*:[^\n]*/,c=a.test(s);e.exports=function(e,t){if(c&&"string"==typeof e&&!o.prepareStackTrace)for(;t--;)e=i(e,a,"");return e}},747:(e,t,r)=>{"use strict";var n=r(6699),o=r(6193),i=r(6249),s=Error.captureStackTrace;e.exports=function(e,t,r,a){i&&(s?s(e,t):n(e,"stack",o(r,a)))}},6249:(e,t,r)=>{"use strict";var n=r(9039),o=r(6980);e.exports=!n(function(){var e=new Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",o(1,7)),7!==e.stack)})},6518:(e,t,r)=>{"use strict";var n=r(4576),o=r(7347).f,i=r(6699),s=r(6840),a=r(9433),c=r(7740),l=r(2796);e.exports=function(e,t){var r,u,d,h,f,p=e.target,g=e.global,y=e.stat;if(r=g?n:y?n[p]||a(p,{}):n[p]&&n[p].prototype)for(u in t){if(h=t[u],d=e.dontCallGetSet?(f=o(r,u))&&f.value:r[u],!l(g?u:p+(y?".":"#")+u,e.forced)&&void 0!==d){if(typeof h==typeof d)continue;c(h,d)}(e.sham||d&&d.sham)&&i(h,"sham",!0),s(r,u,h,e)}}},9039:e=>{"use strict";e.exports=function(e){try{return!!e()}catch(e){return!0}}},8745:(e,t,r)=>{"use strict";var n=r(616),o=Function.prototype,i=o.apply,s=o.call;e.exports="object"==typeof Reflect&&Reflect.apply||(n?s.bind(i):function(){return s.apply(i,arguments)})},6080:(e,t,r)=>{"use strict";var n=r(7476),o=r(9306),i=r(616),s=n(n.bind);e.exports=function(e,t){return o(e),void 0===t?e:i?s(e,t):function(){return e.apply(t,arguments)}}},616:(e,t,r)=>{"use strict";var n=r(9039);e.exports=!n(function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})},9565:(e,t,r)=>{"use strict";var n=r(616),o=Function.prototype.call;e.exports=n?o.bind(o):function(){return o.apply(o,arguments)}},350:(e,t,r)=>{"use strict";var n=r(3724),o=r(9297),i=Function.prototype,s=n&&Object.getOwnPropertyDescriptor,a=o(i,"name"),c=a&&"something"===function(){}.name,l=a&&(!n||n&&s(i,"name").configurable);e.exports={EXISTS:a,PROPER:c,CONFIGURABLE:l}},6706:(e,t,r)=>{"use strict";var n=r(9504),o=r(9306);e.exports=function(e,t,r){try{return n(o(Object.getOwnPropertyDescriptor(e,t)[r]))}catch(e){}}},7476:(e,t,r)=>{"use strict";var n=r(2195),o=r(9504);e.exports=function(e){if("Function"===n(e))return o(e)}},9504:(e,t,r)=>{"use strict";var n=r(616),o=Function.prototype,i=o.call,s=n&&o.bind.bind(i,i);e.exports=n?s:function(e){return function(){return i.apply(e,arguments)}}},944:e=>{"use strict";var t=TypeError;e.exports=function(e){var r=e&&e.alphabet;if(void 0===r||"base64"===r||"base64url"===r)return r||"base64";throw new t("Incorrect `alphabet` option")}},9429:(e,t,r)=>{"use strict";var n=r(4576),o=r(8574);e.exports=function(e){if(o){try{return n.process.getBuiltinModule(e)}catch(e){}try{return Function('return require("'+e+'")')()}catch(e){}}}},7751:(e,t,r)=>{"use strict";var n=r(4576),o=r(4901);e.exports=function(e,t){return arguments.length<2?(r=n[e],o(r)?r:void 0):n[e]&&n[e][t];var r}},1767:e=>{"use strict";e.exports=function(e){return{iterator:e,next:e.next,done:!1}}},851:(e,t,r)=>{"use strict";var n=r(6955),o=r(5966),i=r(4117),s=r(6269),a=r(8227)("iterator");e.exports=function(e){if(!i(e))return o(e,a)||o(e,"@@iterator")||s[n(e)]}},81:(e,t,r)=>{"use strict";var n=r(9565),o=r(9306),i=r(8551),s=r(6823),a=r(851),c=TypeError;e.exports=function(e,t){var r=arguments.length<2?a(e):t;if(o(r))return i(n(r,e));throw new c(s(e)+" is not iterable")}},5966:(e,t,r)=>{"use strict";var n=r(9306),o=r(4117);e.exports=function(e,t){var r=e[t];return o(r)?void 0:n(r)}},4576:function(e,t,r){"use strict";var n=function(e){return e&&e.Math===Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||n("object"==typeof this&&this)||function(){return this}()||Function("return this")()},9297:(e,t,r)=>{"use strict";var n=r(9504),o=r(8981),i=n({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return i(o(e),t)}},421:e=>{"use strict";e.exports={}},397:(e,t,r)=>{"use strict";var n=r(7751);e.exports=n("document","documentElement")},5917:(e,t,r)=>{"use strict";var n=r(3724),o=r(9039),i=r(4055);e.exports=!n&&!o(function(){return 7!==Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a})},7055:(e,t,r)=>{"use strict";var n=r(9504),o=r(9039),i=r(2195),s=Object,a=n("".split);e.exports=o(function(){return!s("z").propertyIsEnumerable(0)})?function(e){return"String"===i(e)?a(e,""):s(e)}:s},3167:(e,t,r)=>{"use strict";var n=r(4901),o=r(34),i=r(2967);e.exports=function(e,t,r){var s,a;return i&&n(s=t.constructor)&&s!==r&&o(a=s.prototype)&&a!==r.prototype&&i(e,a),e}},3706:(e,t,r)=>{"use strict";var n=r(9504),o=r(4901),i=r(7629),s=n(Function.toString);o(i.inspectSource)||(i.inspectSource=function(e){return s(e)}),e.exports=i.inspectSource},7584:(e,t,r)=>{"use strict";var n=r(34),o=r(6699);e.exports=function(e,t){n(t)&&"cause"in t&&o(e,"cause",t.cause)}},1181:(e,t,r)=>{"use strict";var n,o,i,s=r(8622),a=r(4576),c=r(34),l=r(6699),u=r(9297),d=r(7629),h=r(6119),f=r(421),p="Object already initialized",g=a.TypeError,y=a.WeakMap;if(s||d.state){var m=d.state||(d.state=new y);m.get=m.get,m.has=m.has,m.set=m.set,n=function(e,t){if(m.has(e))throw new g(p);return t.facade=e,m.set(e,t),t},o=function(e){return m.get(e)||{}},i=function(e){return m.has(e)}}else{var b=h("state");f[b]=!0,n=function(e,t){if(u(e,b))throw new g(p);return t.facade=e,l(e,b,t),t},o=function(e){return u(e,b)?e[b]:{}},i=function(e){return u(e,b)}}e.exports={set:n,get:o,has:i,enforce:function(e){return i(e)?o(e):n(e,{})},getterFor:function(e){return function(t){var r;if(!c(t)||(r=o(t)).type!==e)throw new g("Incompatible receiver, "+e+" required");return r}}}},4209:(e,t,r)=>{"use strict";var n=r(8227),o=r(6269),i=n("iterator"),s=Array.prototype;e.exports=function(e){return void 0!==e&&(o.Array===e||s[i]===e)}},4376:(e,t,r)=>{"use strict";var n=r(2195);e.exports=Array.isArray||function(e){return"Array"===n(e)}},1108:(e,t,r)=>{"use strict";var n=r(6955);e.exports=function(e){var t=n(e);return"BigInt64Array"===t||"BigUint64Array"===t}},4901:e=>{"use strict";var t="object"==typeof document&&document.all;e.exports=void 0===t&&void 0!==t?function(e){return"function"==typeof e||e===t}:function(e){return"function"==typeof e}},2796:(e,t,r)=>{"use strict";var n=r(9039),o=r(4901),i=/#|\.prototype\./,s=function(e,t){var r=c[a(e)];return r===u||r!==l&&(o(t)?n(t):!!t)},a=s.normalize=function(e){return String(e).replace(i,".").toLowerCase()},c=s.data={},l=s.NATIVE="N",u=s.POLYFILL="P";e.exports=s},4117:e=>{"use strict";e.exports=function(e){return null==e}},34:(e,t,r)=>{"use strict";var n=r(4901);e.exports=function(e){return"object"==typeof e?null!==e:n(e)}},3925:(e,t,r)=>{"use strict";var n=r(34);e.exports=function(e){return n(e)||null===e}},6395:e=>{"use strict";e.exports=!1},757:(e,t,r)=>{"use strict";var n=r(7751),o=r(4901),i=r(1625),s=r(7040),a=Object;e.exports=s?function(e){return"symbol"==typeof e}:function(e){var t=n("Symbol");return o(t)&&i(t.prototype,a(e))}},2652:(e,t,r)=>{"use strict";var n=r(6080),o=r(9565),i=r(8551),s=r(6823),a=r(4209),c=r(6198),l=r(1625),u=r(81),d=r(851),h=r(9539),f=TypeError,p=function(e,t){this.stopped=e,this.result=t},g=p.prototype;e.exports=function(e,t,r){var y,m,b,w,v,_,E,A=r&&r.that,S=!(!r||!r.AS_ENTRIES),x=!(!r||!r.IS_RECORD),I=!(!r||!r.IS_ITERATOR),T=!(!r||!r.INTERRUPTED),k=n(t,A),M=function(e){return y&&h(y,"normal",e),new p(!0,e)},O=function(e){return S?(i(e),T?k(e[0],e[1],M):k(e[0],e[1])):T?k(e,M):k(e)};if(x)y=e.iterator;else if(I)y=e;else{if(!(m=d(e)))throw new f(s(e)+" is not iterable");if(a(m)){for(b=0,w=c(e);w>b;b++)if((v=O(e[b]))&&l(g,v))return v;return new p(!1)}y=u(e,m)}for(_=x?e.next:y.next;!(E=o(_,y)).done;){try{v=O(E.value)}catch(e){h(y,"throw",e)}if("object"==typeof v&&v&&l(g,v))return v}return new p(!1)}},9539:(e,t,r)=>{"use strict";var n=r(9565),o=r(8551),i=r(5966);e.exports=function(e,t,r){var s,a;o(e);try{if(!(s=i(e,"return"))){if("throw"===t)throw r;return r}s=n(s,e)}catch(e){a=!0,s=e}if("throw"===t)throw r;if(a)throw s;return o(s),r}},9462:(e,t,r)=>{"use strict";var n=r(9565),o=r(2360),i=r(6699),s=r(6279),a=r(8227),c=r(1181),l=r(5966),u=r(7657).IteratorPrototype,d=r(2529),h=r(9539),f=a("toStringTag"),p="IteratorHelper",g="WrapForValidIterator",y=c.set,m=function(e){var t=c.getterFor(e?g:p);return s(o(u),{next:function(){var r=t(this);if(e)return r.nextHandler();try{var n=r.done?void 0:r.nextHandler();return d(n,r.done)}catch(e){throw r.done=!0,e}},return:function(){var r=t(this),o=r.iterator;if(r.done=!0,e){var i=l(o,"return");return i?n(i,o):d(void 0,!0)}if(r.inner)try{h(r.inner.iterator,"normal")}catch(e){return h(o,"throw",e)}return h(o,"normal"),d(void 0,!0)}})},b=m(!0),w=m(!1);i(w,f,"Iterator Helper"),e.exports=function(e,t){var r=function(r,n){n?(n.iterator=r.iterator,n.next=r.next):n=r,n.type=t?g:p,n.nextHandler=e,n.counter=0,n.done=!1,y(this,n)};return r.prototype=t?b:w,r}},713:(e,t,r)=>{"use strict";var n=r(9565),o=r(9306),i=r(8551),s=r(1767),a=r(9462),c=r(6319),l=a(function(){var e=this.iterator,t=i(n(this.next,e));if(!(this.done=!!t.done))return c(e,this.mapper,[t.value,this.counter++],!0)});e.exports=function(e){return i(this),o(e),new l(s(this),{mapper:e})}},7657:(e,t,r)=>{"use strict";var n,o,i,s=r(9039),a=r(4901),c=r(34),l=r(2360),u=r(2787),d=r(6840),h=r(8227),f=r(6395),p=h("iterator"),g=!1;[].keys&&("next"in(i=[].keys())?(o=u(u(i)))!==Object.prototype&&(n=o):g=!0),!c(n)||s(function(){var e={};return n[p].call(e)!==e})?n={}:f&&(n=l(n)),a(n[p])||d(n,p,function(){return this}),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:g}},6269:e=>{"use strict";e.exports={}},6198:(e,t,r)=>{"use strict";var n=r(8014);e.exports=function(e){return n(e.length)}},283:(e,t,r)=>{"use strict";var n=r(9504),o=r(9039),i=r(4901),s=r(9297),a=r(3724),c=r(350).CONFIGURABLE,l=r(3706),u=r(1181),d=u.enforce,h=u.get,f=String,p=Object.defineProperty,g=n("".slice),y=n("".replace),m=n([].join),b=a&&!o(function(){return 8!==p(function(){},"length",{value:8}).length}),w=String(String).split("String"),v=e.exports=function(e,t,r){"Symbol("===g(f(t),0,7)&&(t="["+y(f(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),r&&r.getter&&(t="get "+t),r&&r.setter&&(t="set "+t),(!s(e,"name")||c&&e.name!==t)&&(a?p(e,"name",{value:t,configurable:!0}):e.name=t),b&&r&&s(r,"arity")&&e.length!==r.arity&&p(e,"length",{value:r.arity});try{r&&s(r,"constructor")&&r.constructor?a&&p(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var n=d(e);return s(n,"source")||(n.source=m(w,"string"==typeof t?t:"")),e};Function.prototype.toString=v(function(){return i(this)&&h(this).source||l(this)},"toString")},741:e=>{"use strict";var t=Math.ceil,r=Math.floor;e.exports=Math.trunc||function(e){var n=+e;return(n>0?r:t)(n)}},2603:(e,t,r)=>{"use strict";var n=r(655);e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:n(e)}},2360:(e,t,r)=>{"use strict";var n,o=r(8551),i=r(6801),s=r(8727),a=r(421),c=r(397),l=r(4055),u=r(6119),d="prototype",h="script",f=u("IE_PROTO"),p=function(){},g=function(e){return"<"+h+">"+e+"</"+h+">"},y=function(e){e.write(g("")),e.close();var t=e.parentWindow.Object;return e=null,t},m=function(){try{n=new ActiveXObject("htmlfile")}catch(e){}var e,t,r;m="undefined"!=typeof document?document.domain&&n?y(n):(t=l("iframe"),r="java"+h+":",t.style.display="none",c.appendChild(t),t.src=String(r),(e=t.contentWindow.document).open(),e.write(g("document.F=Object")),e.close(),e.F):y(n);for(var o=s.length;o--;)delete m[d][s[o]];return m()};a[f]=!0,e.exports=Object.create||function(e,t){var r;return null!==e?(p[d]=o(e),r=new p,p[d]=null,r[f]=e):r=m(),void 0===t?r:i.f(r,t)}},6801:(e,t,r)=>{"use strict";var n=r(3724),o=r(8686),i=r(4913),s=r(8551),a=r(5397),c=r(1072);t.f=n&&!o?Object.defineProperties:function(e,t){s(e);for(var r,n=a(t),o=c(t),l=o.length,u=0;l>u;)i.f(e,r=o[u++],n[r]);return e}},4913:(e,t,r)=>{"use strict";var n=r(3724),o=r(5917),i=r(8686),s=r(8551),a=r(6969),c=TypeError,l=Object.defineProperty,u=Object.getOwnPropertyDescriptor,d="enumerable",h="configurable",f="writable";t.f=n?i?function(e,t,r){if(s(e),t=a(t),s(r),"function"==typeof e&&"prototype"===t&&"value"in r&&f in r&&!r[f]){var n=u(e,t);n&&n[f]&&(e[t]=r.value,r={configurable:h in r?r[h]:n[h],enumerable:d in r?r[d]:n[d],writable:!1})}return l(e,t,r)}:l:function(e,t,r){if(s(e),t=a(t),s(r),o)try{return l(e,t,r)}catch(e){}if("get"in r||"set"in r)throw new c("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},7347:(e,t,r)=>{"use strict";var n=r(3724),o=r(9565),i=r(8773),s=r(6980),a=r(5397),c=r(6969),l=r(9297),u=r(5917),d=Object.getOwnPropertyDescriptor;t.f=n?d:function(e,t){if(e=a(e),t=c(t),u)try{return d(e,t)}catch(e){}if(l(e,t))return s(!o(i.f,e,t),e[t])}},8480:(e,t,r)=>{"use strict";var n=r(1828),o=r(8727).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,o)}},3717:(e,t)=>{"use strict";t.f=Object.getOwnPropertySymbols},2787:(e,t,r)=>{"use strict";var n=r(9297),o=r(4901),i=r(8981),s=r(6119),a=r(2211),c=s("IE_PROTO"),l=Object,u=l.prototype;e.exports=a?l.getPrototypeOf:function(e){var t=i(e);if(n(t,c))return t[c];var r=t.constructor;return o(r)&&t instanceof r?r.prototype:t instanceof l?u:null}},1625:(e,t,r)=>{"use strict";var n=r(9504);e.exports=n({}.isPrototypeOf)},1828:(e,t,r)=>{"use strict";var n=r(9504),o=r(9297),i=r(5397),s=r(9617).indexOf,a=r(421),c=n([].push);e.exports=function(e,t){var r,n=i(e),l=0,u=[];for(r in n)!o(a,r)&&o(n,r)&&c(u,r);for(;t.length>l;)o(n,r=t[l++])&&(~s(u,r)||c(u,r));return u}},1072:(e,t,r)=>{"use strict";var n=r(1828),o=r(8727);e.exports=Object.keys||function(e){return n(e,o)}},8773:(e,t)=>{"use strict";var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,o=n&&!r.call({1:2},1);t.f=o?function(e){var t=n(this,e);return!!t&&t.enumerable}:r},2967:(e,t,r)=>{"use strict";var n=r(6706),o=r(34),i=r(7750),s=r(3506);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=n(Object.prototype,"__proto__","set"))(r,[]),t=r instanceof Array}catch(e){}return function(r,n){return i(r),s(n),o(r)?(t?e(r,n):r.__proto__=n,r):r}}():void 0)},4270:(e,t,r)=>{"use strict";var n=r(9565),o=r(4901),i=r(34),s=TypeError;e.exports=function(e,t){var r,a;if("string"===t&&o(r=e.toString)&&!i(a=n(r,e)))return a;if(o(r=e.valueOf)&&!i(a=n(r,e)))return a;if("string"!==t&&o(r=e.toString)&&!i(a=n(r,e)))return a;throw new s("Can't convert object to primitive value")}},5031:(e,t,r)=>{"use strict";var n=r(7751),o=r(9504),i=r(8480),s=r(3717),a=r(8551),c=o([].concat);e.exports=n("Reflect","ownKeys")||function(e){var t=i.f(a(e)),r=s.f;return r?c(t,r(e)):t}},1056:(e,t,r)=>{"use strict";var n=r(4913).f;e.exports=function(e,t,r){r in e||n(e,r,{configurable:!0,get:function(){return t[r]},set:function(e){t[r]=e}})}},7750:(e,t,r)=>{"use strict";var n=r(4117),o=TypeError;e.exports=function(e){if(n(e))throw new o("Can't call method on "+e);return e}},6119:(e,t,r)=>{"use strict";var n=r(5745),o=r(3392),i=n("keys");e.exports=function(e){return i[e]||(i[e]=o(e))}},7629:(e,t,r)=>{"use strict";var n=r(6395),o=r(4576),i=r(9433),s="__core-js_shared__",a=e.exports=o[s]||i(s,{});(a.versions||(a.versions=[])).push({version:"3.38.1",mode:n?"pure":"global",copyright:"© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.38.1/LICENSE",source:"https://github.com/zloirock/core-js"})},5745:(e,t,r)=>{"use strict";var n=r(7629);e.exports=function(e,t){return n[e]||(n[e]=t||{})}},1548:(e,t,r)=>{"use strict";var n=r(4576),o=r(9039),i=r(9519),s=r(4215),a=n.structuredClone;e.exports=!!a&&!o(function(){if("DENO"===s&&i>92||"NODE"===s&&i>94||"BROWSER"===s&&i>97)return!1;var e=new ArrayBuffer(8),t=a(e,{transfer:[e]});return 0!==e.byteLength||8!==t.byteLength})},4495:(e,t,r)=>{"use strict";var n=r(9519),o=r(9039),i=r(4576).String;e.exports=!!Object.getOwnPropertySymbols&&!o(function(){var e=Symbol("symbol detection");return!i(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41})},5610:(e,t,r)=>{"use strict";var n=r(1291),o=Math.max,i=Math.min;e.exports=function(e,t){var r=n(e);return r<0?o(r+t,0):i(r,t)}},5854:(e,t,r)=>{"use strict";var n=r(2777),o=TypeError;e.exports=function(e){var t=n(e,"number");if("number"==typeof t)throw new o("Can't convert number to bigint");return BigInt(t)}},7696:(e,t,r)=>{"use strict";var n=r(1291),o=r(8014),i=RangeError;e.exports=function(e){if(void 0===e)return 0;var t=n(e),r=o(t);if(t!==r)throw new i("Wrong length or index");return r}},5397:(e,t,r)=>{"use strict";var n=r(7055),o=r(7750);e.exports=function(e){return n(o(e))}},1291:(e,t,r)=>{"use strict";var n=r(741);e.exports=function(e){var t=+e;return t!=t||0===t?0:n(t)}},8014:(e,t,r)=>{"use strict";var n=r(1291),o=Math.min;e.exports=function(e){var t=n(e);return t>0?o(t,9007199254740991):0}},8981:(e,t,r)=>{"use strict";var n=r(7750),o=Object;e.exports=function(e){return o(n(e))}},8229:(e,t,r)=>{"use strict";var n=r(9590),o=RangeError;e.exports=function(e,t){var r=n(e);if(r%t)throw new o("Wrong offset");return r}},9590:(e,t,r)=>{"use strict";var n=r(1291),o=RangeError;e.exports=function(e){var t=n(e);if(t<0)throw new o("The argument can't be less than 0");return t}},2777:(e,t,r)=>{"use strict";var n=r(9565),o=r(34),i=r(757),s=r(5966),a=r(4270),c=r(8227),l=TypeError,u=c("toPrimitive");e.exports=function(e,t){if(!o(e)||i(e))return e;var r,c=s(e,u);if(c){if(void 0===t&&(t="default"),r=n(c,e,t),!o(r)||i(r))return r;throw new l("Can't convert object to primitive value")}return void 0===t&&(t="number"),a(e,t)}},6969:(e,t,r)=>{"use strict";var n=r(2777),o=r(757);e.exports=function(e){var t=n(e,"string");return o(t)?t:t+""}},2140:(e,t,r)=>{"use strict";var n={};n[r(8227)("toStringTag")]="z",e.exports="[object z]"===String(n)},655:(e,t,r)=>{"use strict";var n=r(6955),o=String;e.exports=function(e){if("Symbol"===n(e))throw new TypeError("Cannot convert a Symbol value to a string");return o(e)}},6823:e=>{"use strict";var t=String;e.exports=function(e){try{return t(e)}catch(e){return"Object"}}},3392:(e,t,r)=>{"use strict";var n=r(9504),o=0,i=Math.random(),s=n(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+s(++o+i,36)}},9143:(e,t,r)=>{"use strict";var n=r(4576),o=r(9504),i=r(3972),s=r(3463),a=r(9297),c=r(2804),l=r(944),u=r(5169),d=c.c2i,h=c.c2iUrl,f=n.SyntaxError,p=n.TypeError,g=o("".charAt),y=function(e,t){for(var r=e.length;t<r;t++){var n=g(e,t);if(" "!==n&&"\t"!==n&&"\n"!==n&&"\f"!==n&&"\r"!==n)break}return t},m=function(e,t,r){var n=e.length;n<4&&(e+=2===n?"AA":"A");var o=(t[g(e,0)]<<18)+(t[g(e,1)]<<12)+(t[g(e,2)]<<6)+t[g(e,3)],i=[o>>16&255,o>>8&255,255&o];if(2===n){if(r&&0!==i[1])throw new f("Extra bits");return[i[0]]}if(3===n){if(r&&0!==i[2])throw new f("Extra bits");return[i[0],i[1]]}return i},b=function(e,t,r){for(var n=t.length,o=0;o<n;o++)e[r+o]=t[o];return r+n};e.exports=function(e,t,r,n){s(e),i(t);var o="base64"===l(t)?d:h,c=t?t.lastChunkHandling:void 0;if(void 0===c&&(c="loose"),"loose"!==c&&"strict"!==c&&"stop-before-partial"!==c)throw new p("Incorrect `lastChunkHandling` option");r&&u(r.buffer);var w=r||[],v=0,_=0,E="",A=0;if(n)for(;;){if((A=y(e,A))===e.length){if(E.length>0){if("stop-before-partial"===c)break;if("loose"!==c)throw new f("Missing padding");if(1===E.length)throw new f("Malformed padding: exactly one additional character");v=b(w,m(E,o,!1),v)}_=e.length;break}var S=g(e,A);if(++A,"="===S){if(E.length<2)throw new f("Padding is too early");if(A=y(e,A),2===E.length){if(A===e.length){if("stop-before-partial"===c)break;throw new f("Malformed padding: only one =")}"="===g(e,A)&&(++A,A=y(e,A))}if(A<e.length)throw new f("Unexpected character after padding");v=b(w,m(E,o,"strict"===c),v),_=e.length;break}if(!a(o,S))throw new f("Unexpected character");var x=n-v;if(1===x&&2===E.length||2===x&&3===E.length)break;if(4===(E+=S).length&&(v=b(w,m(E,o,!1),v),E="",_=A,v===n))break}return{bytes:w,read:_,written:v}}},2303:(e,t,r)=>{"use strict";var n=r(4576),o=r(9504),i=n.Uint8Array,s=n.SyntaxError,a=n.parseInt,c=Math.min,l=/[^\da-f]/i,u=o(l.exec),d=o("".slice);e.exports=function(e,t){var r=e.length;if(r%2!=0)throw new s("String should be an even number of characters");for(var n=t?c(t.length,r/2):r/2,o=t||new i(n),h=0,f=0;f<n;){var p=d(e,h,h+=2);if(u(l,p))throw new s("String should only contain hex characters");o[f++]=a(p,16)}return{bytes:o,read:h}}},7040:(e,t,r)=>{"use strict";var n=r(4495);e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},8686:(e,t,r)=>{"use strict";var n=r(3724),o=r(9039);e.exports=n&&o(function(){return 42!==Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},2812:e=>{"use strict";var t=TypeError;e.exports=function(e,r){if(e<r)throw new t("Not enough arguments");return e}},8622:(e,t,r)=>{"use strict";var n=r(4576),o=r(4901),i=n.WeakMap;e.exports=o(i)&&/native code/.test(String(i))},8227:(e,t,r)=>{"use strict";var n=r(4576),o=r(5745),i=r(9297),s=r(3392),a=r(4495),c=r(7040),l=n.Symbol,u=o("wks"),d=c?l.for||l:l&&l.withoutSetter||s;e.exports=function(e){return i(u,e)||(u[e]=a&&i(l,e)?l[e]:d("Symbol."+e)),u[e]}},4601:(e,t,r)=>{"use strict";var n=r(7751),o=r(9297),i=r(6699),s=r(1625),a=r(2967),c=r(7740),l=r(1056),u=r(3167),d=r(2603),h=r(7584),f=r(747),p=r(3724),g=r(6395);e.exports=function(e,t,r,y){var m="stackTraceLimit",b=y?2:1,w=e.split("."),v=w[w.length-1],_=n.apply(null,w);if(_){var E=_.prototype;if(!g&&o(E,"cause")&&delete E.cause,!r)return _;var A=n("Error"),S=t(function(e,t){var r=d(y?t:e,void 0),n=y?new _(e):new _;return void 0!==r&&i(n,"message",r),f(n,S,n.stack,2),this&&s(E,this)&&u(n,this,S),arguments.length>b&&h(n,arguments[b]),n});if(S.prototype=E,"Error"!==v?a?a(S,A):c(S,A,{name:!0}):p&&m in _&&(l(S,_,m),l(S,_,"prepareStackTrace")),c(S,_),!g)try{E.name!==v&&i(E,"name",v),E.constructor=S}catch(e){}return S}}},6573:(e,t,r)=>{"use strict";var n=r(3724),o=r(2106),i=r(3238),s=ArrayBuffer.prototype;n&&!("detached"in s)&&o(s,"detached",{configurable:!0,get:function(){return i(this)}})},7936:(e,t,r)=>{"use strict";var n=r(6518),o=r(5636);o&&n({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return o(this,arguments.length?arguments[0]:void 0,!1)}})},8100:(e,t,r)=>{"use strict";var n=r(6518),o=r(5636);o&&n({target:"ArrayBuffer",proto:!0},{transfer:function(){return o(this,arguments.length?arguments[0]:void 0,!0)}})},4114:(e,t,r)=>{"use strict";var n=r(6518),o=r(8981),i=r(6198),s=r(4527),a=r(6837);n({target:"Array",proto:!0,arity:1,forced:r(9039)(function(){return 4294967297!==[].push.call({length:4294967296},1)})||!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}}()},{push:function(e){var t=o(this),r=i(t),n=arguments.length;a(r+n);for(var c=0;c<n;c++)t[r]=arguments[c],r++;return s(t,r),r}})},6280:(e,t,r)=>{"use strict";var n=r(6518),o=r(4576),i=r(8745),s=r(4601),a="WebAssembly",c=o[a],l=7!==new Error("e",{cause:7}).cause,u=function(e,t){var r={};r[e]=s(e,t,l),n({global:!0,constructor:!0,arity:1,forced:l},r)},d=function(e,t){if(c&&c[e]){var r={};r[e]=s(a+"."+e,t,l),n({target:a,stat:!0,constructor:!0,arity:1,forced:l},r)}};u("Error",function(e){return function(t){return i(e,this,arguments)}}),u("EvalError",function(e){return function(t){return i(e,this,arguments)}}),u("RangeError",function(e){return function(t){return i(e,this,arguments)}}),u("ReferenceError",function(e){return function(t){return i(e,this,arguments)}}),u("SyntaxError",function(e){return function(t){return i(e,this,arguments)}}),u("TypeError",function(e){return function(t){return i(e,this,arguments)}}),u("URIError",function(e){return function(t){return i(e,this,arguments)}}),d("CompileError",function(e){return function(t){return i(e,this,arguments)}}),d("LinkError",function(e){return function(t){return i(e,this,arguments)}}),d("RuntimeError",function(e){return function(t){return i(e,this,arguments)}})},8140:(e,t,r)=>{"use strict";var n=r(4644),o=r(6198),i=r(1291),s=n.aTypedArray;(0,n.exportTypedArrayMethod)("at",function(e){var t=s(this),r=o(t),n=i(e),a=n>=0?n:r+n;return a<0||a>=r?void 0:t[a]})},1134:(e,t,r)=>{"use strict";var n=r(4644),o=r(3839).findLastIndex,i=n.aTypedArray;(0,n.exportTypedArrayMethod)("findLastIndex",function(e){return o(i(this),e,arguments.length>1?arguments[1]:void 0)})},1903:(e,t,r)=>{"use strict";var n=r(4644),o=r(3839).findLast,i=n.aTypedArray;(0,n.exportTypedArrayMethod)("findLast",function(e){return o(i(this),e,arguments.length>1?arguments[1]:void 0)})},8845:(e,t,r)=>{"use strict";var n=r(4576),o=r(9565),i=r(4644),s=r(6198),a=r(8229),c=r(8981),l=r(9039),u=n.RangeError,d=n.Int8Array,h=d&&d.prototype,f=h&&h.set,p=i.aTypedArray,g=i.exportTypedArrayMethod,y=!l(function(){var e=new Uint8ClampedArray(2);return o(f,e,{length:1,0:3},1),3!==e[1]}),m=y&&i.NATIVE_ARRAY_BUFFER_VIEWS&&l(function(){var e=new d(2);return e.set(1),e.set("2",1),0!==e[0]||2!==e[1]});g("set",function(e){p(this);var t=a(arguments.length>1?arguments[1]:void 0,1),r=c(e);if(y)return o(f,this,r,t);var n=this.length,i=s(r),l=0;if(i+t>n)throw new u("Wrong length");for(;l<i;)this[t+l]=r[l++]},!y||m)},7467:(e,t,r)=>{"use strict";var n=r(7628),o=r(4644),i=o.aTypedArray,s=o.exportTypedArrayMethod,a=o.getTypedArrayConstructor;s("toReversed",function(){return n(i(this),a(this))})},4732:(e,t,r)=>{"use strict";var n=r(4644),o=r(9504),i=r(9306),s=r(5370),a=n.aTypedArray,c=n.getTypedArrayConstructor,l=n.exportTypedArrayMethod,u=o(n.TypedArrayPrototype.sort);l("toSorted",function(e){void 0!==e&&i(e);var t=a(this),r=s(c(t),t);return u(r,e)})},9577:(e,t,r)=>{"use strict";var n=r(9928),o=r(4644),i=r(1108),s=r(1291),a=r(5854),c=o.aTypedArray,l=o.getTypedArrayConstructor,u=o.exportTypedArrayMethod,d=!!function(){try{new Int8Array(1).with(2,{valueOf:function(){throw 8}})}catch(e){return 8===e}}();u("with",{with:function(e,t){var r=c(this),o=s(e),u=i(r)?a(t):+t;return n(r,l(r),o,u)}}.with,!d)},8992:(e,t,r)=>{"use strict";var n=r(6518),o=r(4576),i=r(679),s=r(8551),a=r(4901),c=r(2787),l=r(2106),u=r(4659),d=r(9039),h=r(9297),f=r(8227),p=r(7657).IteratorPrototype,g=r(3724),y=r(6395),m="constructor",b="Iterator",w=f("toStringTag"),v=TypeError,_=o[b],E=y||!a(_)||_.prototype!==p||!d(function(){_({})}),A=function(){if(i(this,p),c(this)===p)throw new v("Abstract class Iterator not directly constructable")},S=function(e,t){g?l(p,e,{configurable:!0,get:function(){return t},set:function(t){if(s(this),this===p)throw new v("You can't redefine this property");h(this,e)?this[e]=t:u(this,e,t)}}):p[e]=t};h(p,w)||S(w,b),!E&&h(p,m)&&p[m]!==Object||S(m,A),A.prototype=p,n({global:!0,constructor:!0,forced:E},{Iterator:A})},4520:(e,t,r)=>{"use strict";var n=r(6518),o=r(9565),i=r(9306),s=r(8551),a=r(1767),c=r(9462),l=r(6319),u=r(6395),d=c(function(){for(var e,t,r=this.iterator,n=this.predicate,i=this.next;;){if(e=s(o(i,r)),this.done=!!e.done)return;if(t=e.value,l(r,n,[t,this.counter++],!0))return t}});n({target:"Iterator",proto:!0,real:!0,forced:u},{filter:function(e){return s(this),i(e),new d(a(this),{predicate:e})}})},2577:(e,t,r)=>{"use strict";var n=r(6518),o=r(2652),i=r(9306),s=r(8551),a=r(1767);n({target:"Iterator",proto:!0,real:!0},{find:function(e){s(this),i(e);var t=a(this),r=0;return o(t,function(t,n){if(e(t,r++))return n(t)},{IS_RECORD:!0,INTERRUPTED:!0}).result}})},3949:(e,t,r)=>{"use strict";var n=r(6518),o=r(2652),i=r(9306),s=r(8551),a=r(1767);n({target:"Iterator",proto:!0,real:!0},{forEach:function(e){s(this),i(e);var t=a(this),r=0;o(t,function(t){e(t,r++)},{IS_RECORD:!0})}})},1454:(e,t,r)=>{"use strict";var n=r(6518),o=r(713);n({target:"Iterator",proto:!0,real:!0,forced:r(6395)},{map:o})},8872:(e,t,r)=>{"use strict";var n=r(6518),o=r(2652),i=r(9306),s=r(8551),a=r(1767),c=TypeError;n({target:"Iterator",proto:!0,real:!0},{reduce:function(e){s(this),i(e);var t=a(this),r=arguments.length<2,n=r?void 0:arguments[1],l=0;if(o(t,function(t){r?(r=!1,n=t):n=e(n,t,l),l++},{IS_RECORD:!0}),r)throw new c("Reduce of empty iterator with no initial value");return n}})},7550:(e,t,r)=>{"use strict";var n=r(6518),o=r(2652),i=r(9306),s=r(8551),a=r(1767);n({target:"Iterator",proto:!0,real:!0},{some:function(e){s(this),i(e);var t=a(this),r=0;return o(t,function(t,n){if(e(t,r++))return n()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},1795:(e,t,r)=>{"use strict";var n=r(6518),o=r(8551),i=r(2652),s=r(1767),a=[].push;n({target:"Iterator",proto:!0,real:!0},{toArray:function(){var e=[];return i(s(o(this)),a,{that:e,IS_RECORD:!0}),e}})},1549:(e,t,r)=>{"use strict";var n=r(6518),o=r(4576),i=r(9143),s=r(4154);o.Uint8Array&&n({target:"Uint8Array",proto:!0},{setFromBase64:function(e){s(this);var t=i(e,arguments.length>1?arguments[1]:void 0,this,this.length);return{read:t.read,written:t.written}}})},9797:(e,t,r)=>{"use strict";var n=r(6518),o=r(4576),i=r(3463),s=r(4154),a=r(5169),c=r(2303);o.Uint8Array&&n({target:"Uint8Array",proto:!0},{setFromHex:function(e){s(this),i(e),a(this.buffer);var t=c(e,this).read;return{read:t,written:t/2}}})},9631:(e,t,r)=>{"use strict";var n=r(6518),o=r(4576),i=r(9504),s=r(3972),a=r(4154),c=r(5169),l=r(2804),u=r(944),d=l.i2c,h=l.i2cUrl,f=i("".charAt);o.Uint8Array&&n({target:"Uint8Array",proto:!0},{toBase64:function(){var e=a(this),t=arguments.length?s(arguments[0]):void 0,r="base64"===u(t)?d:h,n=!!t&&!!t.omitPadding;c(this.buffer);for(var o,i="",l=0,p=e.length,g=function(e){return f(r,o>>6*e&63)};l+2<p;l+=3)o=(e[l]<<16)+(e[l+1]<<8)+e[l+2],i+=g(3)+g(2)+g(1)+g(0);return l+2===p?(o=(e[l]<<16)+(e[l+1]<<8),i+=g(3)+g(2)+g(1)+(n?"":"=")):l+1===p&&(o=e[l]<<16,i+=g(3)+g(2)+(n?"":"==")),i}})},5623:(e,t,r)=>{"use strict";var n=r(6518),o=r(4576),i=r(9504),s=r(4154),a=r(5169),c=i(1..toString);o.Uint8Array&&n({target:"Uint8Array",proto:!0},{toHex:function(){s(this),a(this.buffer);for(var e="",t=0,r=this.length;t<r;t++){var n=c(this[t],16);e+=1===n.length?"0"+n:n}return e}})},4603:(e,t,r)=>{"use strict";var n=r(6840),o=r(9504),i=r(655),s=r(2812),a=URLSearchParams,c=a.prototype,l=o(c.append),u=o(c.delete),d=o(c.forEach),h=o([].push),f=new a("a=1&a=2&b=3");f.delete("a",1),f.delete("b",void 0),f+""!="a=2"&&n(c,"delete",function(e){var t=arguments.length,r=t<2?void 0:arguments[1];if(t&&void 0===r)return u(this,e);var n=[];d(this,function(e,t){h(n,{key:t,value:e})}),s(t,1);for(var o,a=i(e),c=i(r),f=0,p=0,g=!1,y=n.length;f<y;)o=n[f++],g||o.key===a?(g=!0,u(this,o.key)):p++;for(;p<y;)(o=n[p++]).key===a&&o.value===c||l(this,o.key,o.value)},{enumerable:!0,unsafe:!0})},7566:(e,t,r)=>{"use strict";var n=r(6840),o=r(9504),i=r(655),s=r(2812),a=URLSearchParams,c=a.prototype,l=o(c.getAll),u=o(c.has),d=new a("a=1");!d.has("a",2)&&d.has("a",void 0)||n(c,"has",function(e){var t=arguments.length,r=t<2?void 0:arguments[1];if(t&&void 0===r)return u(this,e);var n=l(this,e);s(t,1);for(var o=i(r),a=0;a<n.length;)if(n[a++]===o)return!0;return!1},{enumerable:!0,unsafe:!0})},8721:(e,t,r)=>{"use strict";var n=r(3724),o=r(9504),i=r(2106),s=URLSearchParams.prototype,a=o(s.forEach);n&&!("size"in s)&&i(s,"size",{get:function(){var e=0;return a(this,function(){e++}),e},configurable:!0,enumerable:!0})},7631:function(e,t){!function(e){"use strict";function t(e){return r.test(e)}const r=/^-?[0-9]+$/;function n(e){return o.test(e)}const o=/^-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?$/;function i(e,r){if(t(e))return Number.isSafeInteger(Number.parseInt(e,10));const n=Number.parseFloat(e),o=String(n);if(e===o)return!0;const i=u(e),s=u(o);if(i===s)return!0;if(!0===r?.approx){const r=14;if(!t(e)&&s.length>=r&&i.startsWith(s.substring(0,r)))return!0}return!1}let s=function(e){return e.underflow="underflow",e.overflow="overflow",e.truncate_integer="truncate_integer",e.truncate_float="truncate_float",e}({});function a(e){if(i(e,{approx:!1}))return;if(t(e))return s.truncate_integer;const r=Number.parseFloat(e);return Number.isFinite(r)?0===r?s.underflow:s.truncate_float:s.overflow}function c(e){const t=e.match(/^(-?)(\d+\.?\d*)([eE]([+-]?\d+))?$/);if(!t)throw new SyntaxError(`Invalid number: ${e}`);const r=t[1],n=t[2];let o=void 0!==t[4]?Number.parseInt(t[4],10):0;const i=n.indexOf(".");o+=-1!==i?i-1:n.length-1;const s=n.replace(".","").replace(/^0*/,e=>(o-=e.length,"")).replace(/0*$/,"");return s.length>0?{sign:r,digits:s,exponent:o}:{sign:r,digits:"0",exponent:o+1}}function l(e,t){if(e===t)return 0;const r=c(e),n=c(t),o="-"===r.sign?-1:1;return r.sign!==n.sign?"0"===r.digits&&"0"===n.digits?0:o:r.exponent!==n.exponent?r.exponent>n.exponent?o:r.exponent<n.exponent?-o:0:r.digits>n.digits?o:r.digits<n.digits?-o:0}function u(e){const{start:t,end:r}=d(e),n=e.substring(t,r),o=n.indexOf(".");return-1===o?n:n.substring(0,o)+n.substring(o+1)}function d(e){let t=0;for("-"===e[0]&&t++;"0"===e[t]||"."===e[t];)t++;let r=e.lastIndexOf("e");for(-1===r&&(r=e.lastIndexOf("E")),-1===r&&(r=e.length);("0"===e[r-1]||"."===e[r-1])&&r>t;)r--;return{start:t,end:r}}class h{isLosslessNumber=!0;constructor(e){if(!n(e))throw new Error(`Invalid number (value: "${e}")`);this.value=e}valueOf(){const e=a(this.value);if(void 0===e||e===s.truncate_float)return Number.parseFloat(this.value);if(t(this.value))return BigInt(this.value);throw new Error(`Cannot safely convert to number: the value '${this.value}' would ${e} and become ${Number.parseFloat(this.value)}`)}toString(){return this.value}}function f(e){return e&&"object"==typeof e&&e.isLosslessNumber||!1}function p(e){return new h(e)}function g(e,t,r,n){return Array.isArray(r)?n.call(e,t,function(e,t){for(let r=0;r<e.length;r++)e[r]=g(e,String(r),e[r],t);return e}(r,n)):r&&"object"==typeof r&&!f(r)?n.call(e,t,function(e,t){for(const r of Object.keys(e)){const n=g(e,r,e[r],t);void 0!==n?e[r]=n:delete e[r]}return e}(r,n)):n.call(e,t,r)}function y(e){return e>=_&&e<=E||e>=A&&e<=x||e>=S&&e<=I}function m(e){return e>=_&&e<=E}function b(e,t){return e===t||(Array.isArray(e)&&Array.isArray(t)?e.length===t.length&&e.every((e,r)=>b(e,t[r])):!(!w(e)||!w(t))&&[...new Set([...Object.keys(e),...Object.keys(t)])].every(r=>b(e[r],t[r])))}function w(e){return"object"==typeof e&&null!==e}const v={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},_=48,E=57,A=65,S=97,x=70,I=102,T=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z$/;e.LosslessNumber=h,e.UnsafeNumberReason=s,e.compareLosslessNumber=function(e,t){return l(e.value,t.value)},e.compareNumber=l,e.config=function(e){throw new Error("config is deprecated, support for circularRefs is removed from the library. If you encounter circular references in your data structures, please rethink your datastructures: better prevent circular references in the first place.")},e.getUnsafeNumberReason=a,e.isInteger=t,e.isLosslessNumber=f,e.isNumber=n,e.isSafeNumber=i,e.parse=function(e,t,r){const n="function"==typeof r?{parseNumber:r}:r,o=n?.parseNumber??p,i=n?.onDuplicateKey??function(e){let{key:t,position:r}=e;throw new SyntaxError(`Duplicate key '${t}' encountered at position ${r}`)};let s=0;const a=c();return function(e){if(void 0===e)throw new SyntaxError(`JSON value expected ${O()}`)}(a),function(){if(s<e.length)throw new SyntaxError(`Expected end of input ${O()}`)}(),t?function(e,t){return g({"":e},"",e,t)}(a,t):a;function c(){u();const t=d()??function(){const t=s;if(45===e.charCodeAt(s)&&(s++,A(t)),e.charCodeAt(s)===_)s++;else if((r=e.charCodeAt(s))>=49&&r<=E)for(s++;m(e.charCodeAt(s));)s++;var r;if(46===e.charCodeAt(s))for(s++,A(t);m(e.charCodeAt(s));)s++;if(101===e.charCodeAt(s)||69===e.charCodeAt(s))for(s++,45!==e.charCodeAt(s)&&43!==e.charCodeAt(s)||s++,A(t);m(e.charCodeAt(s));)s++;if(s>t)return o(e.slice(t,s))}()??function(){if(123===e.charCodeAt(s)){s++,u();const t={};let r=!0;for(;s<e.length&&125!==e.charCodeAt(s);){r?r=!1:(h(),u());const e=s,n=d();if(void 0===n)return void S();u(),f();const o=c();if(void 0===o)return void T();if(Object.prototype.hasOwnProperty.call(t,n)&&!b(o,t[n])){const r=i({key:n,position:e+1,oldValue:t[n],newValue:o});void 0!==r&&(t[n]=r)}else t[n]=o}return 125!==e.charCodeAt(s)&&function(){throw new SyntaxError(`Quoted object key or end of object '}' expected ${O()}`)}(),s++,t}}()??function(){if(91===e.charCodeAt(s)){s++,u();const t=[];let r=!0;for(;s<e.length&&93!==e.charCodeAt(s);){r?r=!1:h();const e=c();w(e),t.push(e)}return 93!==e.charCodeAt(s)&&function(){throw new SyntaxError(`Array item or end of array ']' expected ${O()}`)}(),s++,t}}()??l("true",!0)??l("false",!1)??l("null",null);return u(),t}function l(t,r){if(e.slice(s,s+t.length)===t)return s+=t.length,r}function u(){for(;32===(t=e.charCodeAt(s))||10===t||9===t||13===t;)s++;var t}function d(){if(34===e.charCodeAt(s)){s++;let r="";for(;s<e.length&&34!==e.charCodeAt(s);){if(92===e.charCodeAt(s)){const t=e[s+1],n=v[t];void 0!==n?(r+=n,s++):"u"===t?y(e.charCodeAt(s+2))&&y(e.charCodeAt(s+3))&&y(e.charCodeAt(s+4))&&y(e.charCodeAt(s+5))?(r+=String.fromCharCode(Number.parseInt(e.slice(s+2,s+6),16)),s+=5):k(s):I(s)}else(t=e.charCodeAt(s))>=32&&t<=1114111?r+=e[s]:x(e[s]);s++}return function(){if(34!==e.charCodeAt(s))throw new SyntaxError(`End of string '"' expected ${O()}`)}(),s++,r}var t}function h(){if(44!==e.charCodeAt(s))throw new SyntaxError(`Comma ',' expected after value ${O()}`);s++}function f(){if(58!==e.charCodeAt(s))throw new SyntaxError(`Colon ':' expected after property name ${O()}`);s++}function w(e){if(void 0===e)throw new SyntaxError(`Array item expected ${O()}`)}function A(t){if(!m(e.charCodeAt(s))){const r=e.slice(t,s);throw new SyntaxError(`Invalid number '${r}', expecting a digit ${O()}`)}}function S(){throw new SyntaxError(`Quoted object key expected ${O()}`)}function x(e){throw new SyntaxError(`Invalid character '${e}' ${M()}`)}function I(t){const r=e.slice(t,t+2);throw new SyntaxError(`Invalid escape character '${r}' ${M()}`)}function T(){throw new SyntaxError(`Object value expected after ':' ${M()}`)}function k(t){const r=e.slice(t,t+6);throw new SyntaxError(`Invalid unicode character '${r}' ${M()}`)}function M(){return`at position ${s}`}function O(){return`${s<e.length?`but got '${e[s]}'`:"but reached end of input"} ${M()}`}},e.parseLosslessNumber=p,e.parseNumberAndBigInt=function(e){return t(e)?BigInt(e):Number.parseFloat(e)},e.reviveDate=function(e,t){return"string"==typeof t&&T.test(t)?new Date(t):t},e.splitNumber=c,e.stringify=function e(t,r,o,i){const s=function(e){return"number"==typeof e?" ".repeat(e):"string"==typeof e&&""!==e?e:void 0}(o);return function t(c,l){if(Array.isArray(i)){const e=i.find(e=>e.test(c));if(e){const t=e.stringify(c);if("string"!=typeof t||!n(t))throw new Error(`Invalid JSON number: output of a number stringifier must be a string containing a JSON number (output: ${t})`);return t}}return"boolean"==typeof c||"number"==typeof c||"string"==typeof c||null===c||c instanceof Date||c instanceof Boolean||c instanceof Number||c instanceof String?JSON.stringify(c):c?.isLosslessNumber||"bigint"==typeof c?c.toString():Array.isArray(c)?function(e,n){if(0===e.length)return"[]";const o=s?n+s:void 0;let i=s?"[\n":"[";for(let n=0;n<e.length;n++){const a="function"==typeof r?r.call(e,String(n),e[n]):e[n];s&&(i+=o),i+=void 0!==a&&"function"!=typeof a?t(a,o):"null",n<e.length-1&&(i+=s?",\n":",")}return i+=s?`\n${n}]`:"]",i}(c,l):c&&"object"==typeof c?function(n,i){if("function"==typeof n.toJSON)return e(n.toJSON(),r,o,void 0);const c=Array.isArray(r)?r.map(String):Object.keys(n);if(0===c.length)return"{}";const l=s?i+s:void 0;let u=!0,d=s?"{\n":"{";for(const e of c){const o="function"==typeof r?r.call(n,e,n[e]):n[e];if(a(0,o)){u?u=!1:d+=s?",\n":",";const r=JSON.stringify(e);d+=s?`${l+r}: `:`${r}:`,d+=t(o,l)}}return d+=s?`\n${i}}`:"}",d}(c,l):void 0}("function"==typeof r?r.call({"":t},"",t):t,"");function a(e,t){return void 0!==t&&"function"!=typeof t&&"symbol"!=typeof t}},e.toLosslessNumber=function(e){if(function(e){const{start:t,end:r}=d(e),n=e.indexOf(".");return-1===n||n<t||n>r?r-t:r-t-1}(String(e))>15)throw new Error(`Invalid number: contains more than 15 digits and is most likely truncated and unsafe by itself (value: ${e})`);if(Number.isNaN(e))throw new Error("Invalid number: NaN");if(!Number.isFinite(e))throw new Error(`Invalid number: ${e}`);return new h(String(e))},e.toSafeNumberOrThrow=function(e,t){const r=Number.parseFloat(e),n=a(e);if(!0===t?.approx?n&&n!==s.truncate_float:n){const t=n?.replace(/_\w+$/,"");throw new Error(`Cannot safely convert to number: the value '${e}' would ${t} and become ${r}`)}return r}}(t)}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__webpack_require__),r.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};return(()=>{"use strict";__webpack_require__(4114),__webpack_require__(8992),__webpack_require__(4520),__webpack_require__(2577),__webpack_require__(3949),__webpack_require__(1454),__webpack_require__(8872),__webpack_require__(7550),__webpack_require__(4603),__webpack_require__(7566),__webpack_require__(8721);var e=__webpack_require__(4044),t=__webpack_require__(5828);new PageLoader({timeout:15e3,executeScripts:!0,loadStyles:!0,sanitize:!1}),new AjaxHandler;const r=new CustomToast,n=(new SimpleRoute,new e.StarknetManager("testnet"));let o=null;const i="gurftron_user_stats",s="gurftron_user_stats_history",a=36e5;function c(e,t){if(!t||0===t)return{percentage:0,direction:"neutral",arrow:"→",color:"text-gray-500"};const r=e-t,n=(r/t*100).toFixed(1);let o,i,s;return r>0?(o="up",i="↗",s="text-green-600"):r<0?(o="down",i="↓",s="text-red-600"):(o="neutral",i="→",s="text-gray-500"),{percentage:Math.abs(n),direction:o,arrow:i,color:s}}async function l(){try{const e=await async function(){try{const e=localStorage.getItem(i);if(e){const{stats:t,timestamp:r}=JSON.parse(e);if(Date.now()-r<a)return console.log("Using cached user statistics"),t}console.log("Fetching user statistics from contract...");const t=await n.getUserStatistics(o);return console.log(t),function(e){try{const t=JSON.parse(localStorage.getItem(s)||"[]");t.push({stats:e,timestamp:Date.now()});const r=Date.now()-6048e5,n=t.filter(e=>e.timestamp>r);n.length>200&&n.splice(0,n.length-200),localStorage.setItem(s,JSON.stringify(n))}catch(e){console.warn("Failed to save stats history:",e)}}(t),localStorage.setItem(i,JSON.stringify({stats:t,timestamp:Date.now()})),console.log("User statistics fetched and cached:",t),t}catch(e){return console.error("Failed to get user statistics:",e),r.error("Failed to load statistics: "+e.message),{totalThreatBlocked:0,activeThreat:0,whitelist:0}}}(),t=function(){try{const e=JSON.parse(localStorage.getItem(s)||"[]");if(0===e.length)return null;const t=Date.now()-a;let r=null,n=1/0;for(const o of e){const e=Math.abs(o.timestamp-t);e<n&&(n=e,r=o)}return r&&n<18e5?r.stats:null}catch(e){return console.warn("Failed to get historical stats:",e),null}}(),l=c(e.totalThreatBlocked,null==t?void 0:t.totalThreatBlocked),u=c(e.activeThreat,null==t?void 0:t.activeThreat),d=c(e.whitelist,null==t?void 0:t.whitelist),h=document.querySelector('[data-stat="threats-blocked"]');h&&(h.textContent=e.totalThreatBlocked.toLocaleString());const f=document.querySelector('[data-trend="threats-blocked"]');f&&(f.className=`${l.color} text-sm font-medium`,f.textContent=`${l.arrow} ${l.percentage}%`);const p=document.querySelector('[data-stat="active-threats"]');p&&(p.textContent=e.activeThreat.toLocaleString());const g="up"===u.direction?"text-red-600":"down"===u.direction?"text-green-600":"text-gray-500",y=document.querySelector('[data-trend="active-threats"]');y&&(y.className=`${g} text-sm font-medium`,y.textContent=`${u.arrow} ${u.percentage}%`);const m=document.querySelector(".menu-item .bg-red-500");m&&(m.textContent=e.activeThreat);const b=document.querySelector('[data-stat="whitelist"]');b&&(b.textContent=e.whitelist.toLocaleString());const w=document.querySelector('[data-trend="whitelist"]');w&&(w.className=`${d.color} text-sm font-medium`,w.textContent=`${d.arrow} ${d.percentage}%`),console.log("Dashboard statistics updated successfully with trends")}catch(e){console.error("Failed to update dashboard stats:",e)}}!async function(){try{const e=await chrome.runtime.sendMessage({type:"content:pageLoaded"});console.log(e);const i=(null==e?void 0:e.result)||(null==e?void 0:e.data),s=(null==i?void 0:i.isLoggedIn)||!1,a=(null==i?void 0:i.wallet)&&"none"!==(null==i?void 0:i.wallet);if(!s||!a)return console.log("No wallet connected, redirecting to login page..."),void(window.location.href="login.html");o=i.wallet;const c=await n.getUserStatistics(i.wallet||o);console.log(c),console.log("Wallet connected:",i.wallet),o=i.wallet;const l=await chrome.runtime.sendMessage({type:"CHECK_USER_IN_INDEXDB",walletAddress:o});if(l&&l.success&&l.found)return o;await n.is_account_registered(o)&&await chrome.runtime.sendMessage({type:"SAVE_USER_TO_INDEXDB",walletAddress:o,registrationTx:"existing",account:o});const u=new t.SmartContractWriter("user_not_in_smart_contract","users");console.info("Registering your account on blockchain...");try{const e=await u.execute("register_account",[],{walletAddress:o,isRegistered:!0,registeredAt:Date.now()},o,o,e=>{console.log("Registration successful:",e),r.success(`Account registered successfully! TX Hash: ${e.transactionHash}`),chrome.runtime.sendMessage({type:"SAVE_USER_TO_INDEXDB",walletAddress:o,registrationTx:e.transactionHash,account:o})},e=>{console.error("Registration error:",e),r.error("Registration failed: "+e.message)});console.log("Registration response:",e)}catch(e){console.error("Failed to register account:",e),r.error("Unable to register account: "+e.message)}}catch(e){r.error("Error checking wallet connection: "+e.message)}finally{await l(),await async function(){try{var e;const t=o||(null===(e=n.getWalletAddress)||void 0===e?void 0:e.call(n));if(!t)return;const r=await n.getPoints(t);let i=null;document.querySelectorAll(".card").forEach(e=>{const t=e.querySelector("p.text-sm.text-gray-600.mb-1");t&&t.textContent&&"Point Balance"===t.textContent.trim()&&(i=e.querySelector("p.text-4xl.font-bold"))}),i&&(i.textContent=Number(r).toLocaleString());const s=document.getElementById("claim-points-amount");s&&(s.textContent=Number(r||0).toLocaleString()),document.querySelectorAll(".card").forEach(e=>{const t=e.querySelector("p.text-sm.text-gray-600.mb-1");if(t&&t.textContent&&"Point Balance"===t.textContent.trim()){const t=e.querySelector('a[href][onclick*="openClaimModal"]');t&&((r||0)>0?(t.classList.remove("opacity-50","pointer-events-none"),t.setAttribute("aria-disabled","false")):(t.classList.add("opacity-50","pointer-events-none"),t.setAttribute("aria-disabled","true")))}})}catch(e){console.warn("Failed to update points card:",e&&e.message)}}(),await async function(){try{var e;const t=o||(null===(e=n.getWalletAddress)||void 0===e?void 0:e.call(n));if(!t)return;const i=await n.getStakeInfo(t);if(!i)return;const s=(()=>{try{return/^\d+$/.test(String(i.amount))?`${function(e,t=18,r=4){try{if(!e||"0"===e)return"0";let n=BigInt(e.toString());const o=10n**BigInt(t),i=n/o,s=n%o;if(0n===s)return i.toString();const a=Number(s*10n**BigInt(r)/o);let c=String(a).padStart(r,"0");return c=c.replace(/0+$/,""),`${i.toString()}.${c}`}catch(t){return String(e)}}(i.amount,18,4)} STRKS`:String(i.amount)}catch(e){return String(i.amount)}})();let a=null;document.querySelectorAll(".card").forEach(e=>{const t=e.querySelector("p.text-sm.text-gray-600.mb-1");t&&t.textContent&&"Active Stakes"===t.textContent.trim()&&(a=e.querySelector("p.text-4xl.font-bold"))}),a&&(a.textContent=s);const c=document.getElementById("withdraw-current-stakes");c&&(c.textContent=s);const l=document.getElementById("withdraw-stakes-link"),u=Array.from(document.querySelectorAll(".card")).find(e=>{const t=e.querySelector("p.text-sm.text-gray-600.mb-1");return t&&t.textContent&&"Active Stakes"===t.textContent.trim()}),d=u?u.querySelector("p.text-sm.text-gray-500"):null;if(i.isLocked){if(l&&(l.classList.add("opacity-50","pointer-events-none"),l.setAttribute("aria-disabled","true"),l.onclick=e=>(e.preventDefault(),r.info("Stake is locked until "+new Date(1e3*Number(i.unlockTime)).toLocaleString()),!1)),d){const e=function(e){try{if(!e)return"";let t=Number(e);t<1e12&&(t*=1e3);const r=t-Date.now();if(r<=0)return"Unlocked";const n=Math.floor(r/6e4);if(n<60)return`${n}m`;const o=Math.floor(n/60);return o<48?`${o}h`:`${Math.floor(o/24)}d`}catch(e){return""}}(i.unlockTime);d.textContent="Unlocked"===e?"Unlocked":`Locked • ${e}`}}else l&&(l.classList.remove("opacity-50","pointer-events-none"),l.setAttribute("aria-disabled","false"),l.onclick=e=>{e.preventDefault();const t=document.getElementById("withdrawModal");return t&&t.classList.add("active"),!1}),d&&(d.textContent="Earning rewards")}catch(e){console.warn("Failed to update stake card:",e&&e.message)}}()}}();const u=document.getElementById("sidebar"),d=document.getElementById("main-content"),h=document.getElementById("sidebar-toggle");document.getElementById("logo-text"),document.querySelectorAll(".menu-text"),document.getElementById("ai-status-text");let f=!1;h.addEventListener("click",()=>{f=!f,f?(u.classList.add("collapsed"),d.classList.add("collapsed")):(u.classList.remove("collapsed"),d.classList.remove("collapsed"))});const p=document.querySelectorAll(".menu-item");function g(){try{const t=e=>new Promise((t,r)=>{try{chrome.storage.sync.set(e,()=>t(!0))}catch(n){try{for(const t of Object.keys(e))localStorage.setItem(t,e[t]);t(!0)}catch(e){r(e)}}}),r=(e,t,r)=>{const n=document.getElementById(e);n&&(n.textContent=t,n.style.color=r?"#10b981":"#ef4444",setTimeout(()=>{n.textContent=""},2500))};(e=["geminiApiKey","llmType","serverUrl","serverKey","braveSearchKey","googleSafeBrowsingKey","abuseIpDbKey"],new Promise(t=>{try{chrome.storage.sync.get(e,e=>t(e))}catch(r){const n={};for(const t of e)n[t]=localStorage.getItem(t)||"";t(n)}})).then(e=>{document.getElementById("geminiApiKey")&&(document.getElementById("geminiApiKey").value=e.geminiApiKey||""),document.getElementById("llmType")&&(document.getElementById("llmType").value=e.llmType||""),document.getElementById("serverUrl")&&(document.getElementById("serverUrl").value=e.serverUrl||""),document.getElementById("serverKey")&&(document.getElementById("serverKey").value=e.serverKey||""),document.getElementById("braveSearchKey")&&(document.getElementById("braveSearchKey").value=e.braveSearchKey||""),document.getElementById("googleSafeBrowsingKey")&&(document.getElementById("googleSafeBrowsingKey").value=e.googleSafeBrowsingKey||""),document.getElementById("abuseIpDbKey")&&(document.getElementById("abuseIpDbKey").value=e.abuseIpDbKey||"")}).catch(()=>{});const n=(e,n,o,i)=>{const s=document.getElementById(e);s&&s.addEventListener("submit",async e=>{e.preventDefault();const s=(document.getElementById(n).value||"").trim();try{await t({[o]:s}),r(i,"Saved",!0)}catch(e){r(i,"Save failed",!1)}try{A()}catch(e){}})};n("form-gemini","geminiApiKey","geminiApiKey","status-gemini"),n("form-llm","llmType","llmType","status-llm"),n("form-serverurl","serverUrl","serverUrl","status-server"),n("form-serverkey","serverKey","serverKey","status-serverkey"),n("form-brave","braveSearchKey","braveSearchKey","status-brave"),n("form-googlesafe","googleSafeBrowsingKey","googleSafeBrowsingKey","status-googlesafe"),n("form-abuseip","abuseIpDbKey","abuseIpDbKey","status-abuseip")}catch(e){console.warn("wireSettingsForms failed",e&&e.message)}var e}function y(){document.getElementById("claimModal").classList.remove("active")}function m(){document.getElementById("withdrawModal").classList.remove("active")}function b(){(async()=>{try{const e=await n.claimRewards();r.success("Claim submitted. TX: "+(e&&e.transactionHash?e.transactionHash:"submitted"))}catch(e){r.error("Claim failed: "+(e&&e.message))}y()})()}function w(){(async()=>{try{const e=await n.withdrawStake();r.success("Withdraw submitted. TX: "+(e&&e.transactionHash?e.transactionHash:"submitted"))}catch(e){r.error("Withdraw failed: "+(e&&e.message))}m()})()}async function v({eventName:e="",limit:t=50,page:r=1}={}){try{const n=await new Promise(e=>chrome.storage.sync.get(["serverUrl","serverKey"],t=>e(t))),o=n.serverUrl||"http://localhost:3000",i=n.serverKey||"",s=new URL(`${o}/events`);e&&s.searchParams.set("eventName",e),s.searchParams.set("limit",String(t)),s.searchParams.set("page",String(r));const a=await fetch(s.toString(),{headers:i?{Authorization:`Bearer ${i}`}:{}});return a.ok?(await a.json()).events||[]:(console.warn("Failed to fetch events list",await a.text()),[])}catch(e){return console.warn("fetchRecentThreatEvents error",e&&e.message),[]}}async function _(){const e=document.getElementById("recent-threats-tbody");if(!e)return;e.innerHTML='<tr class="hover:bg-gray-50"><td class="px-6 py-4" colspan="6"><div class="text-sm text-gray-500">Loading recent threats...</div></td></tr>';const i=[],s=["DocumentInserted","DocumentUpdated","DocumentApproved","DocumentVoteSubmitted"];for(const e of s)try{const t=await v({eventName:e,limit:50,page:1});Array.isArray(t)&&t.length&&i.push(...t)}catch(t){console.warn("Error fetching events by name",e,t&&t.message)}if(0===i.length)return void(e.innerHTML='<tr class="hover:bg-gray-50"><td class="px-6 py-4" colspan="6"><div class="text-sm text-gray-500">No recent threats found</div></td></tr>');const a=function(e){const t=new Map;for(const r of e){const e=(r.indexed||{}).keys||[],n=e[1]?String(e[1]):r.eventData&&r.eventData.data&&r.eventData.data[1]?String(r.eventData.data[1]):"default",o=e[2]?String(e[2]):r.eventData&&r.eventData.data&&r.eventData.data[2]?String(r.eventData.data[2]):null;if(!o)continue;const i=`${n}:${o}`;t.has(i)||t.set(i,{collection:n,docId:o,events:[]}),t.get(i).events.push(r)}return Array.from(t.values())}(i),c=[];for(const e of a){let t=`Document ${e.docId}`,r="",n="on-chain",o="Unknown",i="Pending";e.events.some(e=>"DocumentApproved"===e.eventName)&&(i="Approved");const s=e.events.find(e=>"DocumentInserted"===e.eventName);s&&s.eventData&&s.eventData.data&&(r=String(s.eventData.data[0]||"")),c.push({collection:e.collection,docId:e.docId,title:t,description:r,source:n,risk:o,status:i,events:e.events})}e.innerHTML="";for(const t of c){const r=document.createElement("tr");r.className="hover:bg-gray-50",r.innerHTML=`\n            <td class="px-6 py-4">\n                <div class="flex items-center">\n                    <div class="w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center mr-3">\n                        <i class="fas fa-shield-virus text-red-600"></i>\n                    </div>\n                    <div>\n                        <div class="text-sm font-medium text-gray-900">${E(t.title)}</div>\n                        <div class="text-sm text-gray-500">${E(t.description)}</div>\n                    </div>\n                </div>\n            </td>\n            <td class="px-6 py-4"><span class="px-2 py-1 text-xs bg-red-100 text-red-800 rounded-full">On-chain</span></td>\n            <td class="px-6 py-4 text-sm text-gray-900">${E(t.source)}</td>\n            <td class="px-6 py-4"><span class="px-2 py-1 text-xs bg-yellow-100 text-yellow-800 rounded-full">${E(t.risk)}</span></td>\n            <td class="px-6 py-4"><span class="px-2 py-1 text-xs bg-gray-100 text-gray-800 rounded-full">${E(t.status)}</span></td>\n            <td class="px-6 py-4">\n                <button class="text-indigo-600 hover:text-indigo-800 recent-threat-view-btn" data-collection="${E(t.collection)}" data-docid="${E(t.docId)}"> <i class="fas fa-eye"></i> </button>\n            </td>\n        `,e.appendChild(r)}document.querySelectorAll(".recent-threat-view-btn").forEach(e=>{e.addEventListener("click",async i=>{const s=e.getAttribute("data-collection"),a=e.getAttribute("data-docid");await async function(e,i){try{const s="threatDetailModal";let a=document.getElementById(s);a?a.classList.add("active"):(a=document.createElement("div"),a.id=s,a.className="modal active",a.innerHTML='\n                <div class="modal-content">\n                    <div class="modal-header">\n                        <h2 class="text-2xl font-bold text-gray-900">Threat Details</h2>\n                        <button id="threat-close-btn" class="modal-close">×</button>\n                    </div>\n                    <div id="threat-detail-body" class="mb-4 text-sm text-gray-700"></div>\n                    <div id="threat-vote-actions" class="mt-4 flex space-x-2"></div>\n                </div>\n            ',document.body.appendChild(a),document.getElementById("threat-close-btn").addEventListener("click",()=>a.classList.remove("active")));const c=a.querySelector("#threat-detail-body"),l=a.querySelector("#threat-vote-actions");c.textContent="Loading...",l.innerHTML="";let u=null;try{const t=await new Promise(e=>chrome.storage.sync.get(["serverUrl","serverKey"],t=>e(t))),r=t.serverUrl||"http://localhost:3000",n=t.serverKey||"",o=`${r}/events/doc/${encodeURIComponent(e)}/${encodeURIComponent(i)}`,s=await fetch(o,{headers:n?{Authorization:`Bearer ${n}`}:{}});if(s.ok){const e=await s.json();u=e&&e.summary?e.summary:null}}catch(e){console.warn("Failed to fetch document summary from server",e&&e.message)}let d=null;if(n&&"function"==typeof n.getThreatById)try{d=await n.getThreatById(e,i)}catch(e){console.warn("Failed to fetch threat by id",e&&e.message)}const h=u&&u.inserted&&u.inserted.caller||d&&d.creator||u&&u.inserted&&u.inserted.creator||null,f=u&&"number"==typeof u.positive_votes?u.positive_votes:u&&u.votes&&u.votes.length?u.votes.reduce((e,t)=>e+(t.is_valid?1:0),0):0,p=u&&"number"==typeof u.negative_votes?u.negative_votes:0,g=u&&!0===u.approved;c.innerHTML=d?`<div><strong>Document:</strong> ${E(i)}</div><div class="mt-2"><strong>Data:</strong> ${E(JSON.stringify(d))}</div><div class="mt-3 text-sm text-gray-700">Owner: ${E(h||"unknown")}</div><div class="mt-1 text-sm text-gray-700">Votes: ${E(String(f))} positive / ${E(String(p))} negative</div>`:`<div>Document: ${E(i)} (collection: ${E(e)})</div><div class="mt-2 text-gray-500">No additional on-chain data available.</div><div class="mt-3 text-sm text-gray-700">Owner: ${E(h||"unknown")}</div><div class="mt-1 text-sm text-gray-700">Votes: ${E(String(f))} positive / ${E(String(p))} negative</div>`;const y=o||n.getWalletAddress&&n.getWalletAddress();if(y&&h&&y.toLowerCase()===h.toLowerCase())l.innerHTML='<div class="text-sm text-gray-500">You are the owner of this document.</div>';else if(g)l.innerHTML='<div class="text-sm text-gray-500">Document already approved.</div>';else{const n=document.createElement("button");n.className="btn-primary",n.textContent="Vote to Approve",n.addEventListener("click",async()=>{try{const n=new t.SmartContractWriter("vote_action","events"),o="vote_on_document",s=[{collection:e,doc_id:i,is_valid:!0}];await n.execute(o,s,{},`${e}:${i}`,y,e=>{r.success("Vote submitted. TX: "+(e.transactionHash||"submitted")),a.classList.remove("active"),_()},e=>{r.error("Vote failed: "+(e&&e.message))})}catch(e){r.error("Vote failed: "+(e&&e.message))}}),l.appendChild(n)}}catch(e){console.error("openThreatModal error",e&&e.message)}}(s,a)})})}function E(e){return e?String(e).replace(/[&<>"']/g,function(e){return{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}[e]}):""}async function A(){try{const e=await new Promise(e=>{try{chrome.storage.sync.get(["geminiApiKey","llmType","serverUrl","serverKey","braveSearchKey","googleSafeBrowsingKey","abuseIpDbKey"],t=>e(t))}catch(t){e({geminiApiKey:localStorage.getItem("geminiApiKey"),llmType:localStorage.getItem("llmType"),serverUrl:localStorage.getItem("serverUrl"),serverKey:localStorage.getItem("serverKey"),braveSearchKey:localStorage.getItem("braveSearchKey"),googleSafeBrowsingKey:localStorage.getItem("googleSafeBrowsingKey"),abuseIpDbKey:localStorage.getItem("abuseIpDbKey")})}}),t=[{key:"geminiApiKey",label:"Gemini Key",ok:!!e.geminiApiKey},{key:"llmType",label:"LLM Type",ok:!!e.llmType},{key:"serverUrl",label:"Server URL",ok:!!e.serverUrl},{key:"serverKey",label:"API Key",ok:!!e.serverKey},{key:"braveSearchKey",label:"Brave Search",ok:!!e.braveSearchKey},{key:"googleSafeBrowsingKey",label:"Google Safe Browsing",ok:!!e.googleSafeBrowsingKey},{key:"abuseIpDbKey",label:"AbuseIPDB",ok:!!e.abuseIpDbKey}],r=Array.from(document.querySelectorAll(".card")).find(e=>e.querySelector("h3")&&e.querySelector("h3").textContent&&"Security Status"===e.querySelector("h3").textContent.trim());if(r){const e=r.querySelector(".space-y-3");if(e){e.innerHTML="";for(const r of t){const t=document.createElement("div");t.className="flex items-center justify-between p-3 bg-gray-50 rounded-lg";const n=r.ok?"bg-green-500":"bg-red-500",o=r.ok?"SET":"NOT SET",i=r.ok?"text-green-600":"text-yellow-600";t.innerHTML=`\n                        <div class="flex items-center space-x-3">\n                            <div class="w-3 h-3 ${n} rounded-full status-dot ${r.ok?"green":"red"}"></div>\n                            <span class="text-sm font-medium text-gray-700">${r.label}</span>\n                        </div>\n                        <span class="text-sm font-semibold ${i}">${o}</span>\n                    `,e.appendChild(t)}}}const n=t.filter(e=>e.ok).length,o=Math.round(n/t.length*100),i=document.getElementById("security-score"),s=document.getElementById("security-ring"),a=2*Math.PI*56,c=a-o/100*a;s&&(s.style.strokeDashoffset=c,s.style.stroke=100===o?"url(#gradient)":o>=50?"#f59e0b":"#ef4444"),i&&(i.textContent=`${o}%`,100===o?i.className="text-2xl font-bold gradient-text":o>=50?(i.className="text-2xl font-bold",i.style.color="#f59e0b"):(i.className="text-2xl font-bold",i.style.color="#ef4444"));const l=document.getElementById("security-label");l&&(100===o?(l.textContent="SECURE",l.className="text-sm text-green-600"):o>=50?(l.textContent="PARTIAL",l.className="text-sm text-yellow-600"):(l.textContent="AT RISK",l.className="text-sm text-red-600"));const u=document.getElementById("security-tooltip"),d=document.getElementById("security-tooltip-content");if(u&&d){const e=t.filter(e=>!e.ok).map(e=>`• ${e.label}`);d.innerHTML=e.length?`<strong>Missing:</strong><br/>${e.join("<br/>")}`:"<strong>All set</strong>";const r=document.querySelector("#security-score");r&&!r.dataset.tooltipAttached&&(r.addEventListener("mouseenter",()=>u.classList.remove("hidden")),r.addEventListener("mouseleave",()=>u.classList.add("hidden")),r.dataset.tooltipAttached="true");const n=document.getElementById("security-label");n&&!n.dataset.tooltipAttached&&(n.addEventListener("mouseenter",()=>u.classList.remove("hidden")),n.addEventListener("mouseleave",()=>u.classList.add("hidden")),n.dataset.tooltipAttached="true")}}catch(e){console.warn("updateSecuritySetupStatus error",e&&e.message)}}p.forEach(e=>{e.addEventListener("click",t=>{try{t.preventDefault()}catch(e){}p.forEach(e=>e.classList.remove("active")),e.classList.add("active");try{const t=e.getAttribute("href")||e.dataset.href;if(t&&"#"!==t&&""!==t.trim()){let e=t.trim();/^https?:\/\//i.test(e)||e.startsWith("#")||/\.html$/i.test(e)||e.endsWith("/")||(e=`${e}.html`),window.location.href=e}}catch(e){console.warn("Navigation failed for menu item",e&&e.message)}})}),window.addEventListener("load",()=>{l(),async function(){try{const e=await new Promise(e=>{try{chrome.runtime.sendMessage({action:"get_metrics"},t=>e(t))}catch(t){e(null)}}),t=e&&e.success&&e.metrics?e.metrics:{scans:0,threatsDetected:0,llmCalls:0},r=document.querySelector(".card p.text-3xl.font-bold.text-gray-900");let n=null;document.querySelectorAll(".card").forEach(e=>{const t=e.querySelector("p.text-sm.text-gray-600.mb-1");t&&t.textContent&&"Scans Today"===t.textContent.trim()&&(n=e.querySelector("p.text-3xl.font-bold.text-gray-900"))}),n?n.textContent=(t.scans||0).toLocaleString():r&&(r.textContent=(t.scans||0).toLocaleString());const o=(()=>{const e=new Date;return e.setDate(e.getDate()-1),`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`})(),i=await new Promise(e=>{try{chrome.runtime.sendMessage({action:"get_metrics",date:o},t=>e(t))}catch(t){e(null)}}),s=i&&i.success&&i.metrics?i.metrics:null;if(n){const e=n.parentElement.querySelector(".flex.items-center.mt-2 span.text-sm.font-medium")||n.parentElement.querySelector("span.text-green-600.text-sm.font-medium");if(e){const r=s&&s.scans||0,n=t.scans||0;let o=0,i="→",a="text-gray-500";if(r>0){const e=n-r;o=Math.abs(e/r*100||0).toFixed(1),e>0?(i="↗",a="text-green-600"):e<0&&(i="↓",a="text-red-600")}e.className=`${a} text-sm font-medium`,e.textContent=`${i} ${o}%`}}}catch(e){console.warn("Failed to update Scans Today card:",e&&e.message)}}(),function(){const e=document.getElementById("claim-points-link");e&&e.addEventListener("click",t=>{if(t.preventDefault(),"true"===e.getAttribute("aria-disabled"))return r.info("No points available to claim"),!1;const n=document.getElementById("claimModal");return n&&n.classList.add("active"),!1});const t=document.getElementById("withdraw-stakes-link");t&&t.addEventListener("click",e=>{if(e.preventDefault(),"true"===t.getAttribute("aria-disabled"))return r.info("Stake is locked"),!1;const n=document.getElementById("withdrawModal");return n&&n.classList.add("active"),!1})}(),function(){const e=document.getElementById("claim-close-btn"),t=document.getElementById("claim-cancel-btn"),r=document.getElementById("claim-confirm-btn");e&&e.addEventListener("click",y),t&&t.addEventListener("click",y),r&&r.addEventListener("click",b);const n=document.getElementById("withdraw-close-btn"),o=document.getElementById("withdraw-cancel-btn"),i=document.getElementById("withdraw-confirm-btn");n&&n.addEventListener("click",m),o&&o.addEventListener("click",m),i&&i.addEventListener("click",w)}(),setTimeout(()=>_(),500),A();try{g&&g()}catch(e){}}),window.addEventListener("load",()=>{setTimeout(()=>_(),500),A()}),chrome&&chrome.storage&&chrome.storage.onChanged&&chrome.storage.onChanged.addListener((e,t)=>{if("sync"!==t)return;const r=["geminiApiKey","llmType","serverUrl","serverKey","braveSearchKey","googleSafeBrowsingKey","abuseIpDbKey"];for(const t of Object.keys(e))if(r.includes(t)){A();break}})})(),__webpack_exports__})());